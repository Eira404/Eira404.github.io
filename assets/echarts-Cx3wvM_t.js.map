{"version":3,"file":"echarts-Cx3wvM_t.js","sources":["../../node_modules/echarts/lib/util/number.js","../../node_modules/echarts/lib/util/log.js","../../node_modules/echarts/lib/util/model.js","../../node_modules/echarts/lib/util/clazz.js","../../node_modules/echarts/lib/model/mixin/makeStyleMapper.js","../../node_modules/echarts/lib/model/mixin/areaStyle.js","../../node_modules/echarts/lib/util/innerStore.js","../../node_modules/echarts/lib/util/states.js","../../node_modules/echarts/lib/animation/basicTransition.js","../../node_modules/echarts/lib/util/graphic.js","../../node_modules/echarts/lib/label/labelStyle.js","../../node_modules/echarts/lib/model/mixin/textStyle.js","../../node_modules/echarts/lib/model/mixin/lineStyle.js","../../node_modules/echarts/lib/model/mixin/itemStyle.js","../../node_modules/echarts/lib/model/Model.js","../../node_modules/echarts/lib/util/component.js","../../node_modules/echarts/lib/i18n/langEN.js","../../node_modules/echarts/lib/i18n/langZH.js","../../node_modules/echarts/lib/core/locale.js","../../node_modules/echarts/lib/scale/break.js","../../node_modules/echarts/lib/util/time.js","../../node_modules/echarts/lib/util/format.js","../../node_modules/echarts/lib/core/CoordinateSystem.js","../../node_modules/echarts/lib/util/layout.js","../../node_modules/echarts/lib/model/Component.js","../../node_modules/echarts/lib/visual/tokens.js","../../node_modules/echarts/lib/model/globalDefault.js","../../node_modules/echarts/lib/util/types.js","../../node_modules/echarts/lib/data/helper/sourceHelper.js","../../node_modules/echarts/lib/model/internalComponentCreator.js","../../node_modules/echarts/lib/model/mixin/palette.js","../../node_modules/echarts/lib/model/Global.js","../../node_modules/echarts/lib/core/ExtensionAPI.js","../../node_modules/echarts/lib/model/OptionManager.js","../../node_modules/echarts/lib/preprocessor/helper/compatStyle.js","../../node_modules/echarts/lib/preprocessor/backwardCompat.js","../../node_modules/echarts/lib/processor/dataStack.js","../../node_modules/echarts/lib/data/Source.js","../../node_modules/echarts/lib/data/helper/dataProvider.js","../../node_modules/echarts/lib/model/mixin/dataFormat.js","../../node_modules/echarts/lib/core/task.js","../../node_modules/echarts/lib/data/helper/dataValueHelper.js","../../node_modules/echarts/lib/data/helper/transform.js","../../node_modules/echarts/lib/data/DataStore.js","../../node_modules/echarts/lib/data/helper/sourceManager.js","../../node_modules/echarts/lib/component/tooltip/tooltipMarkup.js","../../node_modules/echarts/lib/component/tooltip/seriesFormatTooltip.js","../../node_modules/echarts/lib/model/Series.js","../../node_modules/echarts/lib/view/Component.js","../../node_modules/echarts/lib/chart/helper/createRenderPlanner.js","../../node_modules/echarts/lib/view/Chart.js","../../node_modules/echarts/lib/util/throttle.js","../../node_modules/echarts/lib/visual/style.js","../../node_modules/echarts/lib/loading/default.js","../../node_modules/echarts/lib/core/Scheduler.js","../../node_modules/echarts/lib/theme/dark.js","../../node_modules/echarts/lib/util/ECEventProcessor.js","../../node_modules/echarts/lib/visual/symbol.js","../../node_modules/echarts/lib/visual/helper.js","../../node_modules/echarts/lib/legacy/dataSelectAction.js","../../node_modules/echarts/lib/util/event.js","../../node_modules/echarts/lib/util/symbol.js","../../node_modules/echarts/lib/util/decal.js","../../node_modules/echarts/lib/visual/decal.js","../../node_modules/echarts/lib/core/lifecycle.js","../../node_modules/echarts/lib/core/impl.js","../../node_modules/echarts/lib/core/echarts.js","../../node_modules/echarts/lib/data/DataDiffer.js","../../node_modules/echarts/lib/data/helper/dimensionHelper.js","../../node_modules/echarts/lib/data/SeriesDimensionDefine.js","../../node_modules/echarts/lib/data/helper/SeriesDataSchema.js","../../node_modules/echarts/lib/data/SeriesData.js","../../node_modules/echarts/lib/data/helper/createDimensions.js","../../node_modules/echarts/lib/model/referHelper.js","../../node_modules/echarts/lib/data/helper/dataStackHelper.js","../../node_modules/echarts/lib/chart/helper/createSeriesData.js","../../node_modules/echarts/lib/scale/helper.js","../../node_modules/echarts/lib/scale/Scale.js","../../node_modules/echarts/lib/data/OrdinalMeta.js","../../node_modules/echarts/lib/scale/Ordinal.js","../../node_modules/echarts/lib/scale/Interval.js","../../node_modules/echarts/lib/layout/barGrid.js","../../node_modules/echarts/lib/scale/Time.js","../../node_modules/echarts/lib/scale/Log.js","../../node_modules/echarts/lib/coord/scaleRawExtentInfo.js","../../node_modules/echarts/lib/coord/axisHelper.js","../../node_modules/echarts/lib/coord/axisModelCommonMixin.js","../../node_modules/echarts/lib/extension.js","../../node_modules/echarts/lib/coord/axisTickLabelBuilder.js","../../node_modules/echarts/lib/coord/Axis.js","../../node_modules/echarts/lib/label/labelLayoutHelper.js","../../node_modules/echarts/lib/chart/helper/labelHelper.js","../../node_modules/echarts/lib/chart/helper/Symbol.js","../../node_modules/echarts/lib/chart/helper/SymbolDraw.js","../../node_modules/echarts/lib/visual/LegendVisualProvider.js","../../node_modules/echarts/lib/coord/cartesian/GridModel.js","../../node_modules/echarts/lib/coord/cartesian/AxisModel.js","../../node_modules/echarts/lib/coord/axisDefault.js","../../node_modules/echarts/lib/coord/axisCommonTypes.js","../../node_modules/echarts/lib/component/axis/axisBreakHelper.js","../../node_modules/echarts/lib/coord/axisModelCreator.js","../../node_modules/echarts/lib/coord/cartesian/Cartesian.js","../../node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","../../node_modules/echarts/lib/coord/cartesian/Axis2D.js","../../node_modules/echarts/lib/component/axis/axisAction.js","../../node_modules/echarts/lib/component/axis/AxisBuilder.js","../../node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","../../node_modules/echarts/lib/coord/axisAlignTicks.js","../../node_modules/echarts/lib/coord/cartesian/Grid.js","../../node_modules/echarts/lib/component/axisPointer/modelHelper.js","../../node_modules/echarts/lib/component/axis/AxisView.js","../../node_modules/echarts/lib/component/axis/axisSplitHelper.js","../../node_modules/echarts/lib/component/axis/CartesianAxisView.js","../../node_modules/echarts/lib/component/grid/installSimple.js","../../node_modules/echarts/lib/component/helper/interactionMutex.js","../../node_modules/echarts/lib/component/helper/cursorHelper.js","../../node_modules/echarts/lib/component/helper/RoamController.js","../../node_modules/echarts/lib/component/helper/roamHelper.js","../../node_modules/echarts/lib/coord/View.js","../../node_modules/echarts/lib/data/helper/linkSeriesData.js","../../node_modules/echarts/lib/chart/graph/categoryFilter.js","../../node_modules/echarts/lib/chart/graph/categoryVisual.js","../../node_modules/echarts/lib/chart/graph/edgeVisual.js","../../node_modules/echarts/lib/chart/helper/multipleGraphEdgeHelper.js","../../node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","../../node_modules/echarts/lib/chart/graph/simpleLayout.js","../../node_modules/echarts/lib/chart/graph/graphHelper.js","../../node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","../../node_modules/echarts/lib/chart/graph/circularLayout.js","../../node_modules/echarts/lib/chart/graph/forceHelper.js","../../node_modules/echarts/lib/chart/graph/forceLayout.js","../../node_modules/echarts/lib/chart/graph/createView.js","../../node_modules/echarts/lib/chart/helper/LinePath.js","../../node_modules/echarts/lib/chart/helper/Line.js","../../node_modules/echarts/lib/chart/helper/LineDraw.js","../../node_modules/echarts/lib/chart/graph/adjustEdge.js","../../node_modules/echarts/lib/component/helper/thumbnailBridge.js","../../node_modules/echarts/lib/chart/graph/GraphView.js","../../node_modules/echarts/lib/data/Graph.js","../../node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","../../node_modules/echarts/lib/chart/graph/GraphSeries.js","../../node_modules/echarts/lib/chart/graph/install.js","../../node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","../../node_modules/echarts/lib/component/axisPointer/viewHelper.js","../../node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","../../node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","../../node_modules/echarts/lib/component/axisPointer/globalListener.js","../../node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","../../node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","../../node_modules/echarts/lib/component/axisPointer/axisTrigger.js","../../node_modules/echarts/lib/component/axisPointer/install.js","../../node_modules/echarts/lib/component/grid/install.js","../../node_modules/echarts/lib/component/helper/listComponent.js","../../node_modules/echarts/lib/component/tooltip/TooltipModel.js","../../node_modules/echarts/lib/component/tooltip/helper.js","../../node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","../../node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","../../node_modules/echarts/lib/component/tooltip/TooltipView.js","../../node_modules/echarts/lib/component/tooltip/install.js","../../node_modules/echarts/lib/component/title/install.js","../../node_modules/echarts/lib/component/legend/LegendModel.js","../../node_modules/echarts/lib/component/legend/LegendView.js","../../node_modules/echarts/lib/component/legend/legendFilter.js","../../node_modules/echarts/lib/component/legend/legendAction.js","../../node_modules/echarts/lib/component/legend/installLegendPlain.js","../../node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","../../node_modules/echarts/lib/component/legend/ScrollableLegendView.js","../../node_modules/echarts/lib/component/legend/scrollableLegendAction.js","../../node_modules/echarts/lib/component/legend/installLegendScroll.js","../../node_modules/echarts/lib/component/legend/install.js","../../node_modules/echarts/lib/renderer/installCanvasRenderer.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/*\n* A third-party license is embedded for some of the code in this file:\n* The method \"quantile\" was copied from \"d3.js\".\n* (See more details in the comment of the method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar RADIAN_EPSILON = 1e-4;\n// Although chrome already enlarge this number to 100 for `toFixed`, but\n// we sill follow the spec for compatibility.\nvar ROUND_SUPPORTED_PRECISION_MAX = 20;\nfunction _trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\nexport var mathMin = Math.min;\nexport var mathMax = Math.max;\nexport var mathAbs = Math.abs;\n/**\n * Linear mapping a value from domain to range\n * @param  val\n * @param  domain Domain extent domain[0] can be bigger than domain[1]\n * @param  range  Range extent range[0] can be bigger than range[1]\n * @param  clamp Default to be false\n */\nexport function linearMap(val, domain, range, clamp) {\n  var d0 = domain[0];\n  var d1 = domain[1];\n  var r0 = range[0];\n  var r1 = range[1];\n  var subDomain = d1 - d0;\n  var subRange = r1 - r0;\n  if (subDomain === 0) {\n    return subRange === 0 ? r0 : (r0 + r1) / 2;\n  }\n  // Avoid accuracy problem in edge, such as\n  // 146.39 - 62.83 === 83.55999999999999.\n  // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n  // It is a little verbose for efficiency considering this method\n  // is a hotspot.\n  if (clamp) {\n    if (subDomain > 0) {\n      if (val <= d0) {\n        return r0;\n      } else if (val >= d1) {\n        return r1;\n      }\n    } else {\n      if (val >= d0) {\n        return r0;\n      } else if (val <= d1) {\n        return r1;\n      }\n    }\n  } else {\n    if (val === d0) {\n      return r0;\n    }\n    if (val === d1) {\n      return r1;\n    }\n  }\n  return (val - d0) / subDomain * subRange + r0;\n}\n/**\n * Preserve the name `parsePercent` for backward compatibility,\n * and it's effectively published as `echarts.number.parsePercent`.\n */\nexport var parsePercent = parsePositionOption;\n/**\n * @see {parsePositionSizeOption} and also accept a string preset.\n * @see {PositionSizeOption}\n */\nexport function parsePositionOption(option, percentBase, percentOffset) {\n  switch (option) {\n    case 'center':\n    case 'middle':\n      option = '50%';\n      break;\n    case 'left':\n    case 'top':\n      option = '0%';\n      break;\n    case 'right':\n    case 'bottom':\n      option = '100%';\n      break;\n  }\n  return parsePositionSizeOption(option, percentBase, percentOffset);\n}\n/**\n * Accept number, or numeric stirng (`'123'`), or percentage ('100%'), as x/y/width/height pixel number.\n * If null/undefined or invalid, return NaN.\n * (But allow JS type coercion (`+option`) due to backward compatibility)\n * @see {PositionSizeOption}\n */\nexport function parsePositionSizeOption(option, percentBase, percentOffset) {\n  if (zrUtil.isString(option)) {\n    if (_trim(option).match(/%$/)) {\n      return parseFloat(option) / 100 * percentBase + (percentOffset || 0);\n    }\n    return parseFloat(option);\n  }\n  // Allow flexible input due to backward compatibility.\n  return option == null ? NaN : +option;\n}\nexport function round(x, precision, returnStr) {\n  if (precision == null) {\n    // FIXME: the default precision should not be provided, since there is no universally adaptable\n    //  precision. The caller need to input a precision according to the scenarios.\n    precision = 10;\n  }\n  // Avoid range error\n  precision = Math.min(Math.max(0, precision), ROUND_SUPPORTED_PRECISION_MAX);\n  // PENDING: 1.005.toFixed(2) is '1.00' rather than '1.01'\n  x = (+x).toFixed(precision);\n  return returnStr ? x : +x;\n}\n/**\n * Inplacd asc sort arr.\n * The input arr will be modified.\n */\nexport function asc(arr) {\n  arr.sort(function (a, b) {\n    return a - b;\n  });\n  return arr;\n}\n/**\n * Get precision.\n */\nexport function getPrecision(val) {\n  val = +val;\n  if (isNaN(val)) {\n    return 0;\n  }\n  // It is much faster than methods converting number to string as follows\n  //      let tmp = val.toString();\n  //      return tmp.length - 1 - tmp.indexOf('.');\n  // especially when precision is low\n  // Notice:\n  // (1) If the loop count is over about 20, it is slower than `getPrecisionSafe`.\n  //     (see https://jsbench.me/2vkpcekkvw/1)\n  // (2) If the val is less than for example 1e-15, the result may be incorrect.\n  //     (see test/ut/spec/util/number.test.ts `getPrecision_equal_random`)\n  if (val > 1e-14) {\n    var e = 1;\n    for (var i = 0; i < 15; i++, e *= 10) {\n      if (Math.round(val * e) / e === val) {\n        return i;\n      }\n    }\n  }\n  return getPrecisionSafe(val);\n}\n/**\n * Get precision with slow but safe method\n */\nexport function getPrecisionSafe(val) {\n  // toLowerCase for: '3.4E-12'\n  var str = val.toString().toLowerCase();\n  // Consider scientific notation: '3.4e-12' '3.4e+12'\n  var eIndex = str.indexOf('e');\n  var exp = eIndex > 0 ? +str.slice(eIndex + 1) : 0;\n  var significandPartLen = eIndex > 0 ? eIndex : str.length;\n  var dotIndex = str.indexOf('.');\n  var decimalPartLen = dotIndex < 0 ? 0 : significandPartLen - 1 - dotIndex;\n  return Math.max(0, decimalPartLen - exp);\n}\n/**\n * Minimal dicernible data precisioin according to a single pixel.\n */\nexport function getPixelPrecision(dataExtent, pixelExtent) {\n  var log = Math.log;\n  var LN10 = Math.LN10;\n  var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n  var sizeQuantity = Math.round(log(mathAbs(pixelExtent[1] - pixelExtent[0])) / LN10);\n  // toFixed() digits argument must be between 0 and 20.\n  var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n  return !isFinite(precision) ? 20 : precision;\n}\n/**\n * Get a data of given precision, assuring the sum of percentages\n * in valueList is 1.\n * The largest remainder method is used.\n * https://en.wikipedia.org/wiki/Largest_remainder_method\n *\n * @param valueList a list of all data\n * @param idx index of the data to be processed in valueList\n * @param precision integer number showing digits of precision\n * @return percent ranging from 0 to 100\n */\nexport function getPercentWithPrecision(valueList, idx, precision) {\n  if (!valueList[idx]) {\n    return 0;\n  }\n  var seats = getPercentSeats(valueList, precision);\n  return seats[idx] || 0;\n}\n/**\n * Get a data of given precision, assuring the sum of percentages\n * in valueList is 1.\n * The largest remainder method is used.\n * https://en.wikipedia.org/wiki/Largest_remainder_method\n *\n * @param valueList a list of all data\n * @param precision integer number showing digits of precision\n * @return {Array<number>}\n */\nexport function getPercentSeats(valueList, precision) {\n  var sum = zrUtil.reduce(valueList, function (acc, val) {\n    return acc + (isNaN(val) ? 0 : val);\n  }, 0);\n  if (sum === 0) {\n    return [];\n  }\n  var digits = Math.pow(10, precision);\n  var votesPerQuota = zrUtil.map(valueList, function (val) {\n    return (isNaN(val) ? 0 : val) / sum * digits * 100;\n  });\n  var targetSeats = digits * 100;\n  var seats = zrUtil.map(votesPerQuota, function (votes) {\n    // Assign automatic seats.\n    return Math.floor(votes);\n  });\n  var currentSum = zrUtil.reduce(seats, function (acc, val) {\n    return acc + val;\n  }, 0);\n  var remainder = zrUtil.map(votesPerQuota, function (votes, idx) {\n    return votes - seats[idx];\n  });\n  // Has remainding votes.\n  while (currentSum < targetSeats) {\n    // Find next largest remainder.\n    var max = Number.NEGATIVE_INFINITY;\n    var maxId = null;\n    for (var i = 0, len = remainder.length; i < len; ++i) {\n      if (remainder[i] > max) {\n        max = remainder[i];\n        maxId = i;\n      }\n    }\n    // Add a vote to max remainder.\n    ++seats[maxId];\n    remainder[maxId] = 0;\n    ++currentSum;\n  }\n  return zrUtil.map(seats, function (seat) {\n    return seat / digits;\n  });\n}\n/**\n * Solve the floating point adding problem like 0.1 + 0.2 === 0.30000000000000004\n * See <http://0.30000000000000004.com/>\n */\nexport function addSafe(val0, val1) {\n  var maxPrecision = Math.max(getPrecision(val0), getPrecision(val1));\n  // const multiplier = Math.pow(10, maxPrecision);\n  // return (Math.round(val0 * multiplier) + Math.round(val1 * multiplier)) / multiplier;\n  var sum = val0 + val1;\n  // // PENDING: support more?\n  return maxPrecision > ROUND_SUPPORTED_PRECISION_MAX ? sum : round(sum, maxPrecision);\n}\n// Number.MAX_SAFE_INTEGER, ie do not support.\nexport var MAX_SAFE_INTEGER = 9007199254740991;\n/**\n * To 0 - 2 * PI, considering negative radian.\n */\nexport function remRadian(radian) {\n  var pi2 = Math.PI * 2;\n  return (radian % pi2 + pi2) % pi2;\n}\n/**\n * @param {type} radian\n * @return {boolean}\n */\nexport function isRadianAroundZero(val) {\n  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n}\n// eslint-disable-next-line\nvar TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d{1,2})(?::(\\d{1,2})(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n/**\n * @param value valid type: number | string | Date, otherwise return `new Date(NaN)`\n *   These values can be accepted:\n *   + An instance of Date, represent a time in its own time zone.\n *   + Or string in a subset of ISO 8601, only including:\n *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\n *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\n *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\n *     all of which will be treated as local time if time zone is not specified\n *     (see <https://momentjs.com/>).\n *   + Or other string format, including (all of which will be treated as local time):\n *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\n *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\n *   + a timestamp, which represent a time in UTC.\n * @return date Never be null/undefined. If invalid, return `new Date(NaN)`.\n */\nexport function parseDate(value) {\n  if (value instanceof Date) {\n    return value;\n  } else if (zrUtil.isString(value)) {\n    // Different browsers parse date in different way, so we parse it manually.\n    // Some other issues:\n    // new Date('1970-01-01') is UTC,\n    // new Date('1970/01/01') and new Date('1970-1-01') is local.\n    // See issue #3623\n    var match = TIME_REG.exec(value);\n    if (!match) {\n      // return Invalid Date.\n      return new Date(NaN);\n    }\n    // Use local time when no timezone offset is specified.\n    if (!match[8]) {\n      // match[n] can only be string or undefined.\n      // But take care of '12' + 1 => '121'.\n      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0);\n    }\n    // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n    // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n    // For example, system timezone is set as \"Time Zone: America/Toronto\",\n    // then these code will get different result:\n    // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n    // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n    // So we should not use `new Date`, but use `Date.UTC`.\n    else {\n      var hour = +match[4] || 0;\n      if (match[8].toUpperCase() !== 'Z') {\n        hour -= +match[8].slice(0, 3);\n      }\n      return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0));\n    }\n  } else if (value == null) {\n    return new Date(NaN);\n  }\n  return new Date(Math.round(value));\n}\n/**\n * Quantity of a number. e.g. 0.1, 1, 10, 100\n *\n * @param val\n * @return\n */\nexport function quantity(val) {\n  return Math.pow(10, quantityExponent(val));\n}\n/**\n * Exponent of the quantity of a number\n * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\n *\n * @param val non-negative value\n * @return\n */\nexport function quantityExponent(val) {\n  if (val === 0) {\n    return 0;\n  }\n  var exp = Math.floor(Math.log(val) / Math.LN10);\n  /**\n   * exp is expected to be the rounded-down result of the base-10 log of val.\n   * But due to the precision loss with Math.log(val), we need to restore it\n   * using 10^exp to make sure we can get val back from exp. #11249\n   */\n  if (val / Math.pow(10, exp) >= 10) {\n    exp++;\n  }\n  return exp;\n}\n/**\n * find a “nice” number approximately equal to x. Round the number if round = true,\n * take ceiling if round = false. The primary observation is that the “nicest”\n * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\n *\n * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\n *\n * @param  val Non-negative value.\n * @param  round\n * @return Niced number\n */\nexport function nice(val, round) {\n  var exponent = quantityExponent(val);\n  var exp10 = Math.pow(10, exponent);\n  var f = val / exp10; // 1 <= f < 10\n  var nf;\n  if (round) {\n    if (f < 1.5) {\n      nf = 1;\n    } else if (f < 2.5) {\n      nf = 2;\n    } else if (f < 4) {\n      nf = 3;\n    } else if (f < 7) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  } else {\n    if (f < 1) {\n      nf = 1;\n    } else if (f < 2) {\n      nf = 2;\n    } else if (f < 3) {\n      nf = 3;\n    } else if (f < 5) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  }\n  val = nf * exp10;\n  // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n  // 20 is the uppper bound of toFixed.\n  return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n}\n/**\n * This code was copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\n * See the license statement at the head of this file.\n * @param ascArr\n */\nexport function quantile(ascArr, p) {\n  var H = (ascArr.length - 1) * p + 1;\n  var h = Math.floor(H);\n  var v = +ascArr[h - 1];\n  var e = H - h;\n  return e ? v + e * (ascArr[h] - v) : v;\n}\n/**\n * Order intervals asc, and split them when overlap.\n * expect(numberUtil.reformIntervals([\n *     {interval: [18, 62], close: [1, 1]},\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [1, 1]},\n *     {interval: [62, 150], close: [1, 1]},\n *     {interval: [106, 150], close: [1, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ])).toEqual([\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [0, 1]},\n *     {interval: [18, 62], close: [0, 1]},\n *     {interval: [62, 150], close: [0, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ]);\n * @param list, where `close` mean open or close\n *        of the interval, and Infinity can be used.\n * @return The origin list, which has been reformed.\n */\nexport function reformIntervals(list) {\n  list.sort(function (a, b) {\n    return littleThan(a, b, 0) ? -1 : 1;\n  });\n  var curr = -Infinity;\n  var currClose = 1;\n  for (var i = 0; i < list.length;) {\n    var interval = list[i].interval;\n    var close_1 = list[i].close;\n    for (var lg = 0; lg < 2; lg++) {\n      if (interval[lg] <= curr) {\n        interval[lg] = curr;\n        close_1[lg] = !lg ? 1 - currClose : 1;\n      }\n      curr = interval[lg];\n      currClose = close_1[lg];\n    }\n    if (interval[0] === interval[1] && close_1[0] * close_1[1] !== 1) {\n      list.splice(i, 1);\n    } else {\n      i++;\n    }\n  }\n  return list;\n  function littleThan(a, b, lg) {\n    return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n  }\n}\n/**\n * [Numeric is defined as]:\n *     `parseFloat(val) == val`\n * For example:\n * numeric:\n *     typeof number except NaN, '-123', '123', '2e3', '-2e3', '011', 'Infinity', Infinity,\n *     and they rounded by white-spaces or line-terminal like ' -123 \\n ' (see es spec)\n * not-numeric:\n *     null, undefined, [], {}, true, false, 'NaN', NaN, '123ab',\n *     empty string, string with only white-spaces or line-terminal (see es spec),\n *     0x12, '0x12', '-0x12', 012, '012', '-012',\n *     non-string, ...\n *\n * @test See full test cases in `test/ut/spec/util/number.js`.\n * @return Must be a typeof number. If not numeric, return NaN.\n */\nexport function numericToNumber(val) {\n  var valFloat = parseFloat(val);\n  return valFloat == val // eslint-disable-line eqeqeq\n  && (valFloat !== 0 || !zrUtil.isString(val) || val.indexOf('x') <= 0) // For case ' 0x0 '.\n  ? valFloat : NaN;\n}\n/**\n * Definition of \"numeric\": see `numericToNumber`.\n */\nexport function isNumeric(val) {\n  return !isNaN(numericToNumber(val));\n}\n/**\n * Use random base to prevent users hard code depending on\n * this auto generated marker id.\n * @return An positive integer.\n */\nexport function getRandomIdBase() {\n  return Math.round(Math.random() * 9);\n}\n/**\n * Get the greatest common divisor.\n *\n * @param {number} a one number\n * @param {number} b the other number\n */\nexport function getGreatestCommonDividor(a, b) {\n  if (b === 0) {\n    return a;\n  }\n  return getGreatestCommonDividor(b, a % b);\n}\n/**\n * Get the least common multiple.\n *\n * @param {number} a one number\n * @param {number} b the other number\n */\nexport function getLeastCommonMultiple(a, b) {\n  if (a == null) {\n    return b;\n  }\n  if (b == null) {\n    return a;\n  }\n  return a * b / getGreatestCommonDividor(a, b);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { map, isString, isFunction, eqNaN, isRegExp } from 'zrender/lib/core/util.js';\nvar ECHARTS_PREFIX = '[ECharts] ';\nvar storedLogs = {};\nvar hasConsole = typeof console !== 'undefined'\n// eslint-disable-next-line\n&& console.warn && console.log;\nfunction outputLog(type, str, onlyOnce) {\n  if (hasConsole) {\n    if (onlyOnce) {\n      if (storedLogs[str]) {\n        return;\n      }\n      storedLogs[str] = true;\n    }\n    // eslint-disable-next-line\n    console[type](ECHARTS_PREFIX + str);\n  }\n}\nexport function log(str, onlyOnce) {\n  outputLog('log', str, onlyOnce);\n}\nexport function warn(str, onlyOnce) {\n  outputLog('warn', str, onlyOnce);\n}\nexport function error(str, onlyOnce) {\n  outputLog('error', str, onlyOnce);\n}\nexport function deprecateLog(str) {\n  if (process.env.NODE_ENV !== 'production') {\n    // Not display duplicate message.\n    outputLog('warn', 'DEPRECATED: ' + str, true);\n  }\n}\nexport function deprecateReplaceLog(oldOpt, newOpt, scope) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog((scope ? \"[\" + scope + \"]\" : '') + (oldOpt + \" is deprecated; use \" + newOpt + \" instead.\"));\n  }\n}\n/**\n * If in __DEV__ environment, get console printable message for users hint.\n * Parameters are separated by ' '.\n * @usage\n * makePrintable('This is an error on', someVar, someObj);\n *\n * @param hintInfo anything about the current execution context to hint users.\n * @throws Error\n */\nexport function makePrintable() {\n  var hintInfo = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    hintInfo[_i] = arguments[_i];\n  }\n  var msg = '';\n  if (process.env.NODE_ENV !== 'production') {\n    // Fuzzy stringify for print.\n    // This code only exist in dev environment.\n    var makePrintableStringIfPossible_1 = function (val) {\n      return val === void 0 ? 'undefined' : val === Infinity ? 'Infinity' : val === -Infinity ? '-Infinity' : eqNaN(val) ? 'NaN' : val instanceof Date ? 'Date(' + val.toISOString() + ')' : isFunction(val) ? 'function () { ... }' : isRegExp(val) ? val + '' : null;\n    };\n    msg = map(hintInfo, function (arg) {\n      if (isString(arg)) {\n        // Print without quotation mark for some statement.\n        return arg;\n      } else {\n        var printableStr = makePrintableStringIfPossible_1(arg);\n        if (printableStr != null) {\n          return printableStr;\n        } else if (typeof JSON !== 'undefined' && JSON.stringify) {\n          try {\n            return JSON.stringify(arg, function (n, val) {\n              var printableStr = makePrintableStringIfPossible_1(val);\n              return printableStr == null ? val : printableStr;\n            });\n            // In most cases the info object is small, so do not line break.\n          } catch (err) {\n            return '?';\n          }\n        } else {\n          return '?';\n        }\n      }\n    }).join(' ');\n  }\n  return msg;\n}\n/**\n * @throws Error\n */\nexport function throwError(msg) {\n  throw new Error(msg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isObject, isArray, createHashMap, map, assert, isString, indexOf, isStringSafe, isNumber } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { isNumeric, getRandomIdBase, getPrecision, round } from './number.js';\nimport { error, warn } from './log.js';\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n/**\n * Make the name displayable. But we should\n * make sure it is not duplicated with user\n * specified name, so use '\\0';\n */\nvar DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\nvar INTERNAL_COMPONENT_ID_PREFIX = '\\0_ec_\\0';\n/**\n * If value is not array, then translate it to array.\n * @param  {*} value\n * @return {Array} [value] or value\n */\nexport function normalizeToArray(value) {\n  return value instanceof Array ? value : value == null ? [] : [value];\n}\n/**\n * Sync default option between normal and emphasis like `position` and `show`\n * In case some one will write code like\n *     label: {\n *          show: false,\n *          position: 'outside',\n *          fontSize: 18\n *     },\n *     emphasis: {\n *          label: { show: true }\n *     }\n */\nexport function defaultEmphasis(opt, key, subOpts) {\n  // Caution: performance sensitive.\n  if (opt) {\n    opt[key] = opt[key] || {};\n    opt.emphasis = opt.emphasis || {};\n    opt.emphasis[key] = opt.emphasis[key] || {};\n    // Default emphasis option from normal\n    for (var i = 0, len = subOpts.length; i < len; i++) {\n      var subOptName = subOpts[i];\n      if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\n        opt.emphasis[key][subOptName] = opt[key][subOptName];\n      }\n    }\n  }\n}\nexport var TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding'];\n// modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n//     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n//     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n//     // FIXME: deprecated, check and remove it.\n//     'textStyle'\n// ]);\n/**\n * The method does not ensure performance.\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method retrieves value from data.\n */\nexport function getDataItemValue(dataItem) {\n  return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\n}\n/**\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method determine if dataItem has extra option besides value\n */\nexport function isDataItemOption(dataItem) {\n  return isObject(dataItem) && !(dataItem instanceof Array);\n  // // markLine data can be array\n  // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n}\n;\n/**\n * Mapping to existings for merge.\n *\n * Mode \"normalMege\":\n *     The mapping result (merge result) will keep the order of the existing\n *     component, rather than the order of new option. Because we should ensure\n *     some specified index reference (like xAxisIndex) keep work.\n *     And in most cases, \"merge option\" is used to update partial option but not\n *     be expected to change the order.\n *\n * Mode \"replaceMege\":\n *     (1) Only the id mapped components will be merged.\n *     (2) Other existing components (except internal components) will be removed.\n *     (3) Other new options will be used to create new component.\n *     (4) The index of the existing components will not be modified.\n *     That means their might be \"hole\" after the removal.\n *     The new components are created first at those available index.\n *\n * Mode \"replaceAll\":\n *     This mode try to support that reproduce an echarts instance from another\n *     echarts instance (via `getOption`) in some simple cases.\n *     In this scenario, the `result` index are exactly the consistent with the `newCmptOptions`,\n *     which ensures the component index referring (like `xAxisIndex: ?`) corrent. That is,\n *     the \"hole\" in `newCmptOptions` will also be kept.\n *     On the contrary, other modes try best to eliminate holes.\n *     PENDING: This is an experimental mode yet.\n *\n * @return See the comment of <MappingResult>.\n */\nexport function mappingToExists(existings, newCmptOptions, mode) {\n  var isNormalMergeMode = mode === 'normalMerge';\n  var isReplaceMergeMode = mode === 'replaceMerge';\n  var isReplaceAllMode = mode === 'replaceAll';\n  existings = existings || [];\n  newCmptOptions = (newCmptOptions || []).slice();\n  var existingIdIdxMap = createHashMap();\n  // Validate id and name on user input option.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!isObject(cmptOption)) {\n      newCmptOptions[index] = null;\n      return;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      // There is some legacy case that name is set as `false`.\n      // But should work normally rather than throw error.\n      if (cmptOption.id != null && !isValidIdOrName(cmptOption.id)) {\n        warnInvalidateIdOrName(cmptOption.id);\n      }\n      if (cmptOption.name != null && !isValidIdOrName(cmptOption.name)) {\n        warnInvalidateIdOrName(cmptOption.name);\n      }\n    }\n  });\n  var result = prepareResult(existings, existingIdIdxMap, mode);\n  if (isNormalMergeMode || isReplaceMergeMode) {\n    mappingById(result, existings, existingIdIdxMap, newCmptOptions);\n  }\n  if (isNormalMergeMode) {\n    mappingByName(result, newCmptOptions);\n  }\n  if (isNormalMergeMode || isReplaceMergeMode) {\n    mappingByIndex(result, newCmptOptions, isReplaceMergeMode);\n  } else if (isReplaceAllMode) {\n    mappingInReplaceAllMode(result, newCmptOptions);\n  }\n  makeIdAndName(result);\n  // The array `result` MUST NOT contain elided items, otherwise the\n  // forEach will omit those items and result in incorrect result.\n  return result;\n}\nfunction prepareResult(existings, existingIdIdxMap, mode) {\n  var result = [];\n  if (mode === 'replaceAll') {\n    return result;\n  }\n  // Do not use native `map` to in case that the array `existings`\n  // contains elided items, which will be omitted.\n  for (var index = 0; index < existings.length; index++) {\n    var existing = existings[index];\n    // Because of replaceMerge, `existing` may be null/undefined.\n    if (existing && existing.id != null) {\n      existingIdIdxMap.set(existing.id, index);\n    }\n    // For non-internal-componnets:\n    //     Mode \"normalMerge\": all existings kept.\n    //     Mode \"replaceMerge\": all existing removed unless mapped by id.\n    // For internal-components:\n    //     go with \"replaceMerge\" approach in both mode.\n    result.push({\n      existing: mode === 'replaceMerge' || isComponentIdInternal(existing) ? null : existing,\n      newOption: null,\n      keyInfo: null,\n      brandNew: null\n    });\n  }\n  return result;\n}\nfunction mappingById(result, existings, existingIdIdxMap, newCmptOptions) {\n  // Mapping by id if specified.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!cmptOption || cmptOption.id == null) {\n      return;\n    }\n    var optionId = makeComparableKey(cmptOption.id);\n    var existingIdx = existingIdIdxMap.get(optionId);\n    if (existingIdx != null) {\n      var resultItem = result[existingIdx];\n      assert(!resultItem.newOption, 'Duplicated option on id \"' + optionId + '\".');\n      resultItem.newOption = cmptOption;\n      // In both mode, if id matched, new option will be merged to\n      // the existings rather than creating new component model.\n      resultItem.existing = existings[existingIdx];\n      newCmptOptions[index] = null;\n    }\n  });\n}\nfunction mappingByName(result, newCmptOptions) {\n  // Mapping by name if specified.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!cmptOption || cmptOption.name == null) {\n      return;\n    }\n    for (var i = 0; i < result.length; i++) {\n      var existing = result[i].existing;\n      if (!result[i].newOption // Consider name: two map to one.\n      // Can not match when both ids existing but different.\n      && existing && (existing.id == null || cmptOption.id == null) && !isComponentIdInternal(cmptOption) && !isComponentIdInternal(existing) && keyExistAndEqual('name', existing, cmptOption)) {\n        result[i].newOption = cmptOption;\n        newCmptOptions[index] = null;\n        return;\n      }\n    }\n  });\n}\nfunction mappingByIndex(result, newCmptOptions, brandNew) {\n  each(newCmptOptions, function (cmptOption) {\n    if (!cmptOption) {\n      return;\n    }\n    // Find the first place that not mapped by id and not internal component (consider the \"hole\").\n    var resultItem;\n    var nextIdx = 0;\n    while (\n    // Be `!resultItem` only when `nextIdx >= result.length`.\n    (resultItem = result[nextIdx]\n    // (1) Existing models that already have id should be able to mapped to. Because\n    // after mapping performed, model will always be assigned with an id if user not given.\n    // After that all models have id.\n    // (2) If new option has id, it can only set to a hole or append to the last. It should\n    // not be merged to the existings with different id. Because id should not be overwritten.\n    // (3) Name can be overwritten, because axis use name as 'show label text'.\n    ) && (resultItem.newOption || isComponentIdInternal(resultItem.existing) ||\n    // In mode \"replaceMerge\", here no not-mapped-non-internal-existing.\n    resultItem.existing && cmptOption.id != null && !keyExistAndEqual('id', cmptOption, resultItem.existing))) {\n      nextIdx++;\n    }\n    if (resultItem) {\n      resultItem.newOption = cmptOption;\n      resultItem.brandNew = brandNew;\n    } else {\n      result.push({\n        newOption: cmptOption,\n        brandNew: brandNew,\n        existing: null,\n        keyInfo: null\n      });\n    }\n    nextIdx++;\n  });\n}\nfunction mappingInReplaceAllMode(result, newCmptOptions) {\n  each(newCmptOptions, function (cmptOption) {\n    // The feature \"reproduce\" requires \"hole\" will also reproduced\n    // in case that component index referring are broken.\n    result.push({\n      newOption: cmptOption,\n      brandNew: true,\n      existing: null,\n      keyInfo: null\n    });\n  });\n}\n/**\n * Make id and name for mapping result (result of mappingToExists)\n * into `keyInfo` field.\n */\nfunction makeIdAndName(mapResult) {\n  // We use this id to hash component models and view instances\n  // in echarts. id can be specified by user, or auto generated.\n  // The id generation rule ensures new view instance are able\n  // to mapped to old instance when setOption are called in\n  // no-merge mode. So we generate model id by name and plus\n  // type in view id.\n  // name can be duplicated among components, which is convenient\n  // to specify multi components (like series) by one name.\n  // Ensure that each id is distinct.\n  var idMap = createHashMap();\n  each(mapResult, function (item) {\n    var existing = item.existing;\n    existing && idMap.set(existing.id, item);\n  });\n  each(mapResult, function (item) {\n    var opt = item.newOption;\n    // Force ensure id not duplicated.\n    assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n    opt && opt.id != null && idMap.set(opt.id, item);\n    !item.keyInfo && (item.keyInfo = {});\n  });\n  // Make name and id.\n  each(mapResult, function (item, index) {\n    var existing = item.existing;\n    var opt = item.newOption;\n    var keyInfo = item.keyInfo;\n    if (!isObject(opt)) {\n      return;\n    }\n    // Name can be overwritten. Consider case: axis.name = '20km'.\n    // But id generated by name will not be changed, which affect\n    // only in that case: setOption with 'not merge mode' and view\n    // instance will be recreated, which can be accepted.\n    keyInfo.name = opt.name != null ? makeComparableKey(opt.name) : existing ? existing.name\n    // Avoid that different series has the same name,\n    // because name may be used like in color pallet.\n    : DUMMY_COMPONENT_NAME_PREFIX + index;\n    if (existing) {\n      keyInfo.id = makeComparableKey(existing.id);\n    } else if (opt.id != null) {\n      keyInfo.id = makeComparableKey(opt.id);\n    } else {\n      // Consider this situatoin:\n      //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n      //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n      // Series with the same name between optionA and optionB\n      // should be mapped.\n      var idNum = 0;\n      do {\n        keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n      } while (idMap.get(keyInfo.id));\n    }\n    idMap.set(keyInfo.id, item);\n  });\n}\nfunction keyExistAndEqual(attr, obj1, obj2) {\n  var key1 = convertOptionIdName(obj1[attr], null);\n  var key2 = convertOptionIdName(obj2[attr], null);\n  // See `MappingExistingItem`. `id` and `name` trade string equals to number.\n  return key1 != null && key2 != null && key1 === key2;\n}\n/**\n * @return return null if not exist.\n */\nfunction makeComparableKey(val) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (val == null) {\n      throw new Error();\n    }\n  }\n  return convertOptionIdName(val, '');\n}\nexport function convertOptionIdName(idOrName, defaultValue) {\n  if (idOrName == null) {\n    return defaultValue;\n  }\n  return isString(idOrName) ? idOrName : isNumber(idOrName) || isStringSafe(idOrName) ? idOrName + '' : defaultValue;\n}\nfunction warnInvalidateIdOrName(idOrName) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('`' + idOrName + '` is invalid id or name. Must be a string or number.');\n  }\n}\nfunction isValidIdOrName(idOrName) {\n  return isStringSafe(idOrName) || isNumeric(idOrName);\n}\nexport function isNameSpecified(componentModel) {\n  var name = componentModel.name;\n  // Is specified when `indexOf` get -1 or > 0.\n  return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\n}\n/**\n * @public\n * @param {Object} cmptOption\n * @return {boolean}\n */\nexport function isComponentIdInternal(cmptOption) {\n  return cmptOption && cmptOption.id != null && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;\n}\nexport function makeInternalComponentId(idSuffix) {\n  return INTERNAL_COMPONENT_ID_PREFIX + idSuffix;\n}\nexport function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {\n  // Set mainType and complete subType.\n  each(mappingResult, function (item) {\n    var newOption = item.newOption;\n    if (isObject(newOption)) {\n      item.keyInfo.mainType = mainType;\n      item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);\n    }\n  });\n}\nfunction determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {\n  var subType = newCmptOption.type ? newCmptOption.type : existComponent ? existComponent.subType\n  // Use determineSubType only when there is no existComponent.\n  : componentModelCtor.determineSubType(mainType, newCmptOption);\n  // tooltip, markline, markpoint may always has no subType\n  return subType;\n}\n/**\n * A helper for removing duplicate items between batchA and batchB,\n * and in themselves, and categorize by series.\n *\n * @param batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @param batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @return result: [resultBatchA, resultBatchB]\n */\nexport function compressBatches(batchA, batchB) {\n  var mapA = {};\n  var mapB = {};\n  makeMap(batchA || [], mapA);\n  makeMap(batchB || [], mapB, mapA);\n  return [mapToArray(mapA), mapToArray(mapB)];\n  function makeMap(sourceBatch, map, otherMap) {\n    for (var i = 0, len = sourceBatch.length; i < len; i++) {\n      var seriesId = convertOptionIdName(sourceBatch[i].seriesId, null);\n      if (seriesId == null) {\n        return;\n      }\n      var dataIndices = normalizeToArray(sourceBatch[i].dataIndex);\n      var otherDataIndices = otherMap && otherMap[seriesId];\n      for (var j = 0, lenj = dataIndices.length; j < lenj; j++) {\n        var dataIndex = dataIndices[j];\n        if (otherDataIndices && otherDataIndices[dataIndex]) {\n          otherDataIndices[dataIndex] = null;\n        } else {\n          (map[seriesId] || (map[seriesId] = {}))[dataIndex] = 1;\n        }\n      }\n    }\n  }\n  function mapToArray(map, isData) {\n    var result = [];\n    for (var i in map) {\n      if (map.hasOwnProperty(i) && map[i] != null) {\n        if (isData) {\n          result.push(+i);\n        } else {\n          var dataIndices = mapToArray(map[i], true);\n          dataIndices.length && result.push({\n            seriesId: i,\n            dataIndex: dataIndices\n          });\n        }\n      }\n    }\n    return result;\n  }\n}\n/**\n * @param payload Contains dataIndex (means rawIndex) / dataIndexInside / name\n *                         each of which can be Array or primary type.\n * @return dataIndex If not found, return undefined/null.\n */\nexport function queryDataIndex(data, payload) {\n  if (payload.dataIndexInside != null) {\n    return payload.dataIndexInside;\n  } else if (payload.dataIndex != null) {\n    return isArray(payload.dataIndex) ? map(payload.dataIndex, function (value) {\n      return data.indexOfRawIndex(value);\n    }) : data.indexOfRawIndex(payload.dataIndex);\n  } else if (payload.name != null) {\n    return isArray(payload.name) ? map(payload.name, function (value) {\n      return data.indexOfName(value);\n    }) : data.indexOfName(payload.name);\n  }\n}\n/**\n * Enable property storage to any host object.\n * Notice: Serialization is not supported.\n *\n * For example:\n * let inner = zrUitl.makeInner();\n *\n * function some1(hostObj) {\n *      inner(hostObj).someProperty = 1212;\n *      ...\n * }\n * function some2() {\n *      let fields = inner(this);\n *      fields.someProperty1 = 1212;\n *      fields.someProperty2 = 'xx';\n *      ...\n * }\n *\n * @return {Function}\n */\nexport function makeInner() {\n  var key = '__ec_inner_' + innerUniqueIndex++;\n  return function (hostObj) {\n    return hostObj[key] || (hostObj[key] = {});\n  };\n}\nvar innerUniqueIndex = getRandomIdBase();\n/**\n * The same behavior as `component.getReferringComponents`.\n */\nexport function parseFinder(ecModel, finderInput, opt) {\n  var _a = preParseFinder(finderInput, opt),\n    mainTypeSpecified = _a.mainTypeSpecified,\n    queryOptionMap = _a.queryOptionMap,\n    others = _a.others;\n  var result = others;\n  var defaultMainType = opt ? opt.defaultMainType : null;\n  if (!mainTypeSpecified && defaultMainType) {\n    queryOptionMap.set(defaultMainType, {});\n  }\n  queryOptionMap.each(function (queryOption, mainType) {\n    var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {\n      useDefault: defaultMainType === mainType,\n      enableAll: opt && opt.enableAll != null ? opt.enableAll : true,\n      enableNone: opt && opt.enableNone != null ? opt.enableNone : true\n    });\n    result[mainType + 'Models'] = queryResult.models;\n    result[mainType + 'Model'] = queryResult.models[0];\n  });\n  return result;\n}\nexport function preParseFinder(finderInput, opt) {\n  var finder;\n  if (isString(finderInput)) {\n    var obj = {};\n    obj[finderInput + 'Index'] = 0;\n    finder = obj;\n  } else {\n    finder = finderInput;\n  }\n  var queryOptionMap = createHashMap();\n  var others = {};\n  var mainTypeSpecified = false;\n  each(finder, function (value, key) {\n    // Exclude 'dataIndex' and other illegal keys.\n    if (key === 'dataIndex' || key === 'dataIndexInside') {\n      others[key] = value;\n      return;\n    }\n    var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n    var mainType = parsedKey[1];\n    var queryType = (parsedKey[2] || '').toLowerCase();\n    if (!mainType || !queryType || opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0) {\n      return;\n    }\n    mainTypeSpecified = mainTypeSpecified || !!mainType;\n    var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});\n    queryOption[queryType] = value;\n  });\n  return {\n    mainTypeSpecified: mainTypeSpecified,\n    queryOptionMap: queryOptionMap,\n    others: others\n  };\n}\nexport var SINGLE_REFERRING = {\n  useDefault: true,\n  enableAll: false,\n  enableNone: false\n};\nexport var MULTIPLE_REFERRING = {\n  useDefault: false,\n  enableAll: true,\n  enableNone: true\n};\nexport function queryReferringComponents(ecModel, mainType, userOption, opt) {\n  opt = opt || SINGLE_REFERRING;\n  var indexOption = userOption.index;\n  var idOption = userOption.id;\n  var nameOption = userOption.name;\n  var result = {\n    models: null,\n    specified: indexOption != null || idOption != null || nameOption != null\n  };\n  if (!result.specified) {\n    // Use the first as default if `useDefault`.\n    var firstCmpt = void 0;\n    result.models = opt.useDefault && (firstCmpt = ecModel.getComponent(mainType)) ? [firstCmpt] : [];\n    return result;\n  }\n  if (indexOption === 'none' || indexOption === false) {\n    if (opt.enableNone) {\n      result.models = [];\n      return result;\n    } else {\n      // Do not throw; consider if some component previously does not use this method,\n      // and start to use it, need to be fault-tolerant for backward compatibility.\n      if (process.env.NODE_ENV !== 'production') {\n        error('`\"none\"` or `false` is not a valid value on index option.');\n      }\n      indexOption = -1; // Can not query by index but may still query by id/name if specified.\n    }\n  }\n  // `queryComponents` will return all components if\n  // both all of index/id/name are null/undefined.\n  if (indexOption === 'all') {\n    if (opt.enableAll) {\n      indexOption = idOption = nameOption = null;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`\"all\"` is not a valid value on index option.');\n      }\n      indexOption = -1;\n    }\n  }\n  result.models = ecModel.queryComponents({\n    mainType: mainType,\n    index: indexOption,\n    id: idOption,\n    name: nameOption\n  });\n  return result;\n}\nexport function setAttribute(dom, key, value) {\n  dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\n}\nexport function getAttribute(dom, key) {\n  return dom.getAttribute ? dom.getAttribute(key) : dom[key];\n}\nexport function getTooltipRenderMode(renderModeOption) {\n  if (renderModeOption === 'auto') {\n    // Using html when `document` exists, use richText otherwise\n    return env.domSupported ? 'html' : 'richText';\n  } else {\n    return renderModeOption || 'html';\n  }\n}\n/**\n * Group a list by key.\n */\nexport function groupData(array, getKey // return key\n) {\n  var buckets = createHashMap();\n  var keys = [];\n  each(array, function (item) {\n    var key = getKey(item);\n    (buckets.get(key) || (keys.push(key), buckets.set(key, []))).push(item);\n  });\n  return {\n    keys: keys,\n    buckets: buckets\n  };\n}\n/**\n * Interpolate raw values of a series with percent\n *\n * @param data         data\n * @param labelModel   label model of the text element\n * @param sourceValue  start value. May be null/undefined when init.\n * @param targetValue  end value\n * @param percent      0~1 percentage; 0 uses start value while 1 uses end value\n * @return             interpolated values\n *                     If `sourceValue` and `targetValue` are `number`, return `number`.\n *                     If `sourceValue` and `targetValue` are `string`, return `string`.\n *                     If `sourceValue` and `targetValue` are `(string | number)[]`, return `(string | number)[]`.\n *                     Other cases do not supported.\n */\nexport function interpolateRawValues(data, precision, sourceValue, targetValue, percent) {\n  var isAutoPrecision = precision == null || precision === 'auto';\n  if (targetValue == null) {\n    return targetValue;\n  }\n  if (isNumber(targetValue)) {\n    var value = interpolateNumber(sourceValue || 0, targetValue, percent);\n    return round(value, isAutoPrecision ? Math.max(getPrecision(sourceValue || 0), getPrecision(targetValue)) : precision);\n  } else if (isString(targetValue)) {\n    return percent < 1 ? sourceValue : targetValue;\n  } else {\n    var interpolated = [];\n    var leftArr = sourceValue;\n    var rightArr = targetValue;\n    var length_1 = Math.max(leftArr ? leftArr.length : 0, rightArr.length);\n    for (var i = 0; i < length_1; ++i) {\n      var info = data.getDimensionInfo(i);\n      // Don't interpolate ordinal dims\n      if (info && info.type === 'ordinal') {\n        // In init, there is no `sourceValue`, but should better not to get undefined result.\n        interpolated[i] = (percent < 1 && leftArr ? leftArr : rightArr)[i];\n      } else {\n        var leftVal = leftArr && leftArr[i] ? leftArr[i] : 0;\n        var rightVal = rightArr[i];\n        var value = interpolateNumber(leftVal, rightVal, percent);\n        interpolated[i] = round(value, isAutoPrecision ? Math.max(getPrecision(leftVal), getPrecision(rightVal)) : precision);\n      }\n    }\n    return interpolated;\n  }\n}\n/**\n * Use an iterator to avoid exposing the internal list or duplicating it\n * for the outside traveller, and no extra heap allocation.\n * @usage\n *  for (const it = resetIterator(); it.next();) {\n *      const item = it.item;\n *      const key = it.key;\n *      const itIdx = it.itIdx;\n *      // ...\n *  }\n * @usage\n *  const it = resetIterator();\n *  while (it.next()) { ... }\n * @usage\n *  for (resetIterator(it); it.next();) { ... }\n */\nvar ListIterator = /** @class */function () {\n  function ListIterator() {}\n  /**\n   * The loop condition is `idx < end` if `step > 0`;\n   * The loop condition is `idx >= end` if `step < 0`.\n   *\n   * @param end By default `list.length` if `step > 0`; `0` if `step < 0`.\n   * @param step By default `1`.\n   */\n  ListIterator.prototype.reset = function (list, start, end, step) {\n    this._list = list;\n    this._step = step = step || 1;\n    this._idx = start;\n    this._end = end != null ? end : step > 0 ? list.length : 0;\n    this.item = null;\n    this.key = NaN;\n    return this;\n  };\n  ListIterator.prototype.next = function () {\n    if (this._step > 0 ? this._idx < this._end : this._idx >= this._end) {\n      this.item = this._list[this._idx];\n      this.key = this._idx = this._idx + this._step;\n      return true;\n    }\n    return false;\n  };\n  return ListIterator;\n}();\nexport { ListIterator };\nexport function clearTmpModel(model) {\n  // Clear to avoid memory leak.\n  model.option = model.parentModel = model.ecModel = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar TYPE_DELIMITER = '.';\nvar IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\nvar IS_EXTENDED_CLASS = '___EC__EXTENDED_CLASS___';\n/**\n * Notice, parseClassType('') should returns {main: '', sub: ''}\n * @public\n */\nexport function parseClassType(componentType) {\n  var ret = {\n    main: '',\n    sub: ''\n  };\n  if (componentType) {\n    var typeArr = componentType.split(TYPE_DELIMITER);\n    ret.main = typeArr[0] || '';\n    ret.sub = typeArr[1] || '';\n  }\n  return ret;\n}\n/**\n * @public\n */\nfunction checkClassType(componentType) {\n  zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n}\nexport function isExtendedClass(clz) {\n  return !!(clz && clz[IS_EXTENDED_CLASS]);\n}\n/**\n * Implements `ExtendableConstructor` for `rootClz`.\n *\n * @usage\n * ```ts\n * class Xxx {}\n * type XxxConstructor = typeof Xxx & ExtendableConstructor\n * enableClassExtend(Xxx as XxxConstructor);\n * ```\n */\nexport function enableClassExtend(rootClz, mandatoryMethods) {\n  rootClz.$constructor = rootClz; // FIXME: not necessary?\n  rootClz.extend = function (proto) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.each(mandatoryMethods, function (method) {\n        if (!proto[method]) {\n          console.warn('Method `' + method + '` should be implemented' + (proto.type ? ' in ' + proto.type : '') + '.');\n        }\n      });\n    }\n    var superClass = this;\n    var ExtendedClass;\n    if (isESClass(superClass)) {\n      ExtendedClass = /** @class */function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n          return _super.apply(this, arguments) || this;\n        }\n        return class_1;\n      }(superClass);\n    } else {\n      // For backward compat, we both support ts class inheritance and this\n      // \"extend\" approach.\n      // The constructor should keep the same behavior as ts class inheritance:\n      // If this constructor/$constructor is not declared, auto invoke the super\n      // constructor.\n      // If this constructor/$constructor is declared, it is responsible for\n      // calling the super constructor.\n      ExtendedClass = function () {\n        (proto.$constructor || superClass).apply(this, arguments);\n      };\n      zrUtil.inherits(ExtendedClass, this);\n    }\n    zrUtil.extend(ExtendedClass.prototype, proto);\n    ExtendedClass[IS_EXTENDED_CLASS] = true;\n    ExtendedClass.extend = this.extend;\n    ExtendedClass.superCall = superCall;\n    ExtendedClass.superApply = superApply;\n    ExtendedClass.superClass = superClass;\n    return ExtendedClass;\n  };\n}\nfunction isESClass(fn) {\n  return zrUtil.isFunction(fn) && /^class\\s/.test(Function.prototype.toString.call(fn));\n}\n/**\n * A work around to both support ts extend and this extend mechanism.\n * on sub-class.\n * @usage\n * ```ts\n * class Component { ... }\n * classUtil.enableClassExtend(Component);\n * classUtil.enableClassManagement(Component, {registerWhenExtend: true});\n *\n * class Series extends Component { ... }\n * // Without calling `markExtend`, `registerWhenExtend` will not work.\n * Component.markExtend(Series);\n * ```\n */\nexport function mountExtend(SubClz, SupperClz) {\n  SubClz.extend = SupperClz.extend;\n}\n// A random offset.\nvar classBase = Math.round(Math.random() * 10);\n/**\n * Implements `CheckableConstructor` for `target`.\n * Can not use instanceof, consider different scope by\n * cross domain or es module import in ec extensions.\n * Mount a method \"isInstance()\" to Clz.\n *\n * @usage\n * ```ts\n * class Xxx {}\n * type XxxConstructor = typeof Xxx & CheckableConstructor;\n * enableClassCheck(Xxx as XxxConstructor)\n * ```\n */\nexport function enableClassCheck(target) {\n  var classAttr = ['__\\0is_clz', classBase++].join('_');\n  target.prototype[classAttr] = true;\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(!target.isInstance, 'The method \"is\" can not be defined.');\n  }\n  target.isInstance = function (obj) {\n    return !!(obj && obj[classAttr]);\n  };\n}\n// superCall should have class info, which can not be fetched from 'this'.\n// Consider this case:\n// class A has method f,\n// class B inherits class A, overrides method f, f call superApply('f'),\n// class C inherits class B, does not override method f,\n// then when method of class C is called, dead loop occurred.\nfunction superCall(context, methodName) {\n  var args = [];\n  for (var _i = 2; _i < arguments.length; _i++) {\n    args[_i - 2] = arguments[_i];\n  }\n  return this.superClass.prototype[methodName].apply(context, args);\n}\nfunction superApply(context, methodName, args) {\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n/**\n * Implements `ClassManager` for `target`\n *\n * @usage\n * ```ts\n * class Xxx {}\n * type XxxConstructor = typeof Xxx & ClassManager\n * enableClassManagement(Xxx as XxxConstructor);\n * ```\n */\nexport function enableClassManagement(target) {\n  /**\n   * Component model classes\n   * key: componentType,\n   * value:\n   *     componentClass, when componentType is 'a'\n   *     or Object.<subKey, componentClass>, when componentType is 'a.b'\n   */\n  var storage = {};\n  target.registerClass = function (clz) {\n    // `type` should not be a \"instance member\".\n    // If using TS class, should better declared as `static type = 'series.pie'`.\n    // otherwise users have to mount `type` on prototype manually.\n    // For backward compat and enable instance visit type via `this.type`,\n    // we still support fetch `type` from prototype.\n    var componentFullType = clz.type || clz.prototype.type;\n    if (componentFullType) {\n      checkClassType(componentFullType);\n      // If only static type declared, we assign it to prototype mandatorily.\n      clz.prototype.type = componentFullType;\n      var componentTypeInfo = parseClassType(componentFullType);\n      if (!componentTypeInfo.sub) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (storage[componentTypeInfo.main]) {\n            console.warn(componentTypeInfo.main + ' exists.');\n          }\n        }\n        storage[componentTypeInfo.main] = clz;\n      } else if (componentTypeInfo.sub !== IS_CONTAINER) {\n        var container = makeContainer(componentTypeInfo);\n        container[componentTypeInfo.sub] = clz;\n      }\n    }\n    return clz;\n  };\n  target.getClass = function (mainType, subType, throwWhenNotFound) {\n    var clz = storage[mainType];\n    if (clz && clz[IS_CONTAINER]) {\n      clz = subType ? clz[subType] : null;\n    }\n    if (throwWhenNotFound && !clz) {\n      throw new Error(!subType ? mainType + '.' + 'type should be specified.' : 'Component ' + mainType + '.' + (subType || '') + ' is used but not imported.');\n    }\n    return clz;\n  };\n  target.getClassesByMainType = function (componentType) {\n    var componentTypeInfo = parseClassType(componentType);\n    var result = [];\n    var obj = storage[componentTypeInfo.main];\n    if (obj && obj[IS_CONTAINER]) {\n      zrUtil.each(obj, function (o, type) {\n        type !== IS_CONTAINER && result.push(o);\n      });\n    } else {\n      result.push(obj);\n    }\n    return result;\n  };\n  target.hasClass = function (componentType) {\n    // Just consider componentType.main.\n    var componentTypeInfo = parseClassType(componentType);\n    return !!storage[componentTypeInfo.main];\n  };\n  /**\n   * @return Like ['aa', 'bb'], but can not be ['aa.xx']\n   */\n  target.getAllClassMainTypes = function () {\n    var types = [];\n    zrUtil.each(storage, function (obj, type) {\n      types.push(type);\n    });\n    return types;\n  };\n  /**\n   * If a main type is container and has sub types\n   */\n  target.hasSubTypes = function (componentType) {\n    var componentTypeInfo = parseClassType(componentType);\n    var obj = storage[componentTypeInfo.main];\n    return obj && obj[IS_CONTAINER];\n  };\n  function makeContainer(componentTypeInfo) {\n    var container = storage[componentTypeInfo.main];\n    if (!container || !container[IS_CONTAINER]) {\n      container = storage[componentTypeInfo.main] = {};\n      container[IS_CONTAINER] = true;\n    }\n    return container;\n  }\n}\n// /**\n//  * @param {string|Array.<string>} properties\n//  */\n// export function setReadOnly(obj, properties) {\n// FIXME It seems broken in IE8 simulation of IE11\n// if (!zrUtil.isArray(properties)) {\n//     properties = properties != null ? [properties] : [];\n// }\n// zrUtil.each(properties, function (prop) {\n//     let value = obj[prop];\n//     Object.defineProperty\n//         && Object.defineProperty(obj, prop, {\n//             value: value, writable: false\n//         });\n//     zrUtil.isArray(obj[prop])\n//         && Object.freeze\n//         && Object.freeze(obj[prop]);\n// });\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO Parse shadow style\n// TODO Only shallow path support\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function makeStyleMapper(properties, ignoreParent) {\n  // Normalize\n  for (var i = 0; i < properties.length; i++) {\n    if (!properties[i][1]) {\n      properties[i][1] = properties[i][0];\n    }\n  }\n  ignoreParent = ignoreParent || false;\n  return function (model, excludes, includes) {\n    var style = {};\n    for (var i = 0; i < properties.length; i++) {\n      var propName = properties[i][1];\n      if (excludes && zrUtil.indexOf(excludes, propName) >= 0 || includes && zrUtil.indexOf(includes, propName) < 0) {\n        continue;\n      }\n      var val = model.getShallow(propName, ignoreParent);\n      if (val != null) {\n        style[properties[i][0]] = val;\n      }\n    }\n    // TODO Text or image?\n    return style;\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var AREA_STYLE_KEY_MAP = [['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);\nvar AreaStyleMixin = /** @class */function () {\n  function AreaStyleMixin() {}\n  AreaStyleMixin.prototype.getAreaStyle = function (excludes, includes) {\n    return getAreaStyle(this, excludes, includes);\n  };\n  return AreaStyleMixin;\n}();\n;\nexport { AreaStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from './model.js';\nexport var getECData = makeInner();\nexport var setCommonECData = function (seriesIndex, dataType, dataIdx, el) {\n  if (el) {\n    var ecData = getECData(el);\n    // Add data index and series index for indexing the data by element\n    // Useful in tooltip\n    ecData.dataIndex = dataIdx;\n    ecData.dataType = dataType;\n    ecData.seriesIndex = seriesIndex;\n    ecData.ssrType = 'chart';\n    // TODO: not store dataIndex on children.\n    if (el.type === 'group') {\n      el.traverse(function (child) {\n        var childECData = getECData(child);\n        childECData.seriesIndex = seriesIndex;\n        childECData.dataIndex = dataIdx;\n        childECData.dataType = dataType;\n        childECData.ssrType = 'chart';\n      });\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, indexOf, isArrayLike, isObject, keys, isArray, each } from 'zrender/lib/core/util.js';\nimport { getECData } from './innerStore.js';\nimport { liftColor } from 'zrender/lib/tool/color.js';\nimport { queryDataIndex, makeInner } from './model.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { error } from './log.js';\n// Reserve 0 as default.\nvar _highlightNextDigit = 1;\nvar _highlightKeyMap = {};\nvar getSavedStates = makeInner();\nvar getComponentStates = makeInner();\nexport var HOVER_STATE_NORMAL = 0;\nexport var HOVER_STATE_BLUR = 1;\nexport var HOVER_STATE_EMPHASIS = 2;\nexport var SPECIAL_STATES = ['emphasis', 'blur', 'select'];\nexport var DISPLAY_STATES = ['normal', 'emphasis', 'blur', 'select'];\nexport var Z2_EMPHASIS_LIFT = 10;\nexport var Z2_SELECT_LIFT = 9;\nexport var HIGHLIGHT_ACTION_TYPE = 'highlight';\nexport var DOWNPLAY_ACTION_TYPE = 'downplay';\nexport var SELECT_ACTION_TYPE = 'select';\nexport var UNSELECT_ACTION_TYPE = 'unselect';\nexport var TOGGLE_SELECT_ACTION_TYPE = 'toggleSelect';\nexport var SELECT_CHANGED_EVENT_TYPE = 'selectchanged';\nfunction hasFillOrStroke(fillOrStroke) {\n  return fillOrStroke != null && fillOrStroke !== 'none';\n}\nfunction doChangeHoverState(el, stateName, hoverStateEnum) {\n  if (el.onHoverStateChange && (el.hoverState || 0) !== hoverStateEnum) {\n    el.onHoverStateChange(stateName);\n  }\n  el.hoverState = hoverStateEnum;\n}\nfunction singleEnterEmphasis(el) {\n  // Only mark the flag.\n  // States will be applied in the echarts.ts in next frame.\n  doChangeHoverState(el, 'emphasis', HOVER_STATE_EMPHASIS);\n}\nfunction singleLeaveEmphasis(el) {\n  // Only mark the flag.\n  // States will be applied in the echarts.ts in next frame.\n  if (el.hoverState === HOVER_STATE_EMPHASIS) {\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n  }\n}\nfunction singleEnterBlur(el) {\n  doChangeHoverState(el, 'blur', HOVER_STATE_BLUR);\n}\nfunction singleLeaveBlur(el) {\n  if (el.hoverState === HOVER_STATE_BLUR) {\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n  }\n}\nfunction singleEnterSelect(el) {\n  el.selected = true;\n}\nfunction singleLeaveSelect(el) {\n  el.selected = false;\n}\nfunction updateElementState(el, updater, commonParam) {\n  updater(el, commonParam);\n}\nfunction traverseUpdateState(el, updater, commonParam) {\n  updateElementState(el, updater, commonParam);\n  el.isGroup && el.traverse(function (child) {\n    updateElementState(child, updater, commonParam);\n  });\n}\nexport function setStatesFlag(el, stateName) {\n  switch (stateName) {\n    case 'emphasis':\n      el.hoverState = HOVER_STATE_EMPHASIS;\n      break;\n    case 'normal':\n      el.hoverState = HOVER_STATE_NORMAL;\n      break;\n    case 'blur':\n      el.hoverState = HOVER_STATE_BLUR;\n      break;\n    case 'select':\n      el.selected = true;\n  }\n}\n/**\n * If we reuse elements when rerender.\n * DON'T forget to clearStates before we update the style and shape.\n * Or we may update on the wrong state instead of normal state.\n */\nexport function clearStates(el) {\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.clearStates();\n    });\n  } else {\n    el.clearStates();\n  }\n}\nfunction getFromStateStyle(el, props, toStateName, defaultValue) {\n  var style = el.style;\n  var fromState = {};\n  for (var i = 0; i < props.length; i++) {\n    var propName = props[i];\n    var val = style[propName];\n    fromState[propName] = val == null ? defaultValue && defaultValue[propName] : val;\n  }\n  for (var i = 0; i < el.animators.length; i++) {\n    var animator = el.animators[i];\n    if (animator.__fromStateTransition\n    // Don't consider the animation to emphasis state.\n    && animator.__fromStateTransition.indexOf(toStateName) < 0 && animator.targetName === 'style') {\n      animator.saveTo(fromState, props);\n    }\n  }\n  return fromState;\n}\nfunction createEmphasisDefaultState(el, stateName, targetStates, state) {\n  var hasSelect = targetStates && indexOf(targetStates, 'select') >= 0;\n  var cloned = false;\n  if (el instanceof Path) {\n    var store = getSavedStates(el);\n    var fromFill = hasSelect ? store.selectFill || store.normalFill : store.normalFill;\n    var fromStroke = hasSelect ? store.selectStroke || store.normalStroke : store.normalStroke;\n    if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {\n      state = state || {};\n      var emphasisStyle = state.style || {};\n      // inherit case\n      if (emphasisStyle.fill === 'inherit') {\n        cloned = true;\n        state = extend({}, state);\n        emphasisStyle = extend({}, emphasisStyle);\n        emphasisStyle.fill = fromFill;\n      }\n      // Apply default color lift\n      else if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {\n        cloned = true;\n        // Not modify the original value.\n        state = extend({}, state);\n        emphasisStyle = extend({}, emphasisStyle);\n        // Already being applied 'emphasis'. DON'T lift color multiple times.\n        emphasisStyle.fill = liftColor(fromFill);\n      }\n      // Not highlight stroke if fill has been highlighted.\n      else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {\n        if (!cloned) {\n          state = extend({}, state);\n          emphasisStyle = extend({}, emphasisStyle);\n        }\n        emphasisStyle.stroke = liftColor(fromStroke);\n      }\n      state.style = emphasisStyle;\n    }\n  }\n  if (state) {\n    // TODO Share with textContent?\n    if (state.z2 == null) {\n      if (!cloned) {\n        state = extend({}, state);\n      }\n      var z2EmphasisLift = el.z2EmphasisLift;\n      state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);\n    }\n  }\n  return state;\n}\nfunction createSelectDefaultState(el, stateName, state) {\n  // const hasSelect = indexOf(el.currentStates, stateName) >= 0;\n  if (state) {\n    // TODO Share with textContent?\n    if (state.z2 == null) {\n      state = extend({}, state);\n      var z2SelectLift = el.z2SelectLift;\n      state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);\n    }\n  }\n  return state;\n}\nfunction createBlurDefaultState(el, stateName, state) {\n  var hasBlur = indexOf(el.currentStates, stateName) >= 0;\n  var currentOpacity = el.style.opacity;\n  var fromState = !hasBlur ? getFromStateStyle(el, ['opacity'], stateName, {\n    opacity: 1\n  }) : null;\n  state = state || {};\n  var blurStyle = state.style || {};\n  if (blurStyle.opacity == null) {\n    // clone state\n    state = extend({}, state);\n    blurStyle = extend({\n      // Already being applied 'emphasis'. DON'T mul opacity multiple times.\n      opacity: hasBlur ? currentOpacity : fromState.opacity * 0.1\n    }, blurStyle);\n    state.style = blurStyle;\n  }\n  return state;\n}\nfunction elementStateProxy(stateName, targetStates) {\n  var state = this.states[stateName];\n  if (this.style) {\n    if (stateName === 'emphasis') {\n      return createEmphasisDefaultState(this, stateName, targetStates, state);\n    } else if (stateName === 'blur') {\n      return createBlurDefaultState(this, stateName, state);\n    } else if (stateName === 'select') {\n      return createSelectDefaultState(this, stateName, state);\n    }\n  }\n  return state;\n}\n/**\n * Set hover style (namely \"emphasis style\") of element.\n * @param el Should not be `zrender/graphic/Group`.\n * @param focus 'self' | 'selfInSeries' | 'series'\n */\nexport function setDefaultStateProxy(el) {\n  el.stateProxy = elementStateProxy;\n  var textContent = el.getTextContent();\n  var textGuide = el.getTextGuideLine();\n  if (textContent) {\n    textContent.stateProxy = elementStateProxy;\n  }\n  if (textGuide) {\n    textGuide.stateProxy = elementStateProxy;\n  }\n}\nexport function enterEmphasisWhenMouseOver(el, e) {\n  !shouldSilent(el, e)\n  // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !el.__highByOuter && traverseUpdateState(el, singleEnterEmphasis);\n}\nexport function leaveEmphasisWhenMouseOut(el, e) {\n  !shouldSilent(el, e)\n  // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !el.__highByOuter && traverseUpdateState(el, singleLeaveEmphasis);\n}\nexport function enterEmphasis(el, highlightDigit) {\n  el.__highByOuter |= 1 << (highlightDigit || 0);\n  traverseUpdateState(el, singleEnterEmphasis);\n}\nexport function leaveEmphasis(el, highlightDigit) {\n  !(el.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdateState(el, singleLeaveEmphasis);\n}\nexport function enterBlur(el) {\n  traverseUpdateState(el, singleEnterBlur);\n}\nexport function leaveBlur(el) {\n  traverseUpdateState(el, singleLeaveBlur);\n}\nexport function enterSelect(el) {\n  traverseUpdateState(el, singleEnterSelect);\n}\nexport function leaveSelect(el) {\n  traverseUpdateState(el, singleLeaveSelect);\n}\nfunction shouldSilent(el, e) {\n  return el.__highDownSilentOnTouch && e.zrByTouch;\n}\nexport function allLeaveBlur(api) {\n  var model = api.getModel();\n  var leaveBlurredSeries = [];\n  var allComponentViews = [];\n  model.eachComponent(function (componentType, componentModel) {\n    var componentStates = getComponentStates(componentModel);\n    var isSeries = componentType === 'series';\n    var view = isSeries ? api.getViewOfSeriesModel(componentModel) : api.getViewOfComponentModel(componentModel);\n    !isSeries && allComponentViews.push(view);\n    if (componentStates.isBlured) {\n      // Leave blur anyway\n      view.group.traverse(function (child) {\n        singleLeaveBlur(child);\n      });\n      isSeries && leaveBlurredSeries.push(componentModel);\n    }\n    componentStates.isBlured = false;\n  });\n  each(allComponentViews, function (view) {\n    if (view && view.toggleBlurSeries) {\n      view.toggleBlurSeries(leaveBlurredSeries, false, model);\n    }\n  });\n}\nexport function blurSeries(targetSeriesIndex, focus, blurScope, api) {\n  var ecModel = api.getModel();\n  blurScope = blurScope || 'coordinateSystem';\n  function leaveBlurOfIndices(data, dataIndices) {\n    for (var i = 0; i < dataIndices.length; i++) {\n      var itemEl = data.getItemGraphicEl(dataIndices[i]);\n      itemEl && leaveBlur(itemEl);\n    }\n  }\n  if (targetSeriesIndex == null) {\n    return;\n  }\n  if (!focus || focus === 'none') {\n    return;\n  }\n  var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);\n  var targetCoordSys = targetSeriesModel.coordinateSystem;\n  if (targetCoordSys && targetCoordSys.master) {\n    targetCoordSys = targetCoordSys.master;\n  }\n  var blurredSeries = [];\n  ecModel.eachSeries(function (seriesModel) {\n    var sameSeries = targetSeriesModel === seriesModel;\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.master) {\n      coordSys = coordSys.master;\n    }\n    var sameCoordSys = coordSys && targetCoordSys ? coordSys === targetCoordSys : sameSeries; // If there is no coordinate system. use sameSeries instead.\n    if (!(\n    // Not blur other series if blurScope series\n    blurScope === 'series' && !sameSeries\n    // Not blur other coordinate system if blurScope is coordinateSystem\n    || blurScope === 'coordinateSystem' && !sameCoordSys\n    // Not blur self series if focus is series.\n    || focus === 'series' && sameSeries\n    // TODO blurScope: coordinate system\n    )) {\n      var view = api.getViewOfSeriesModel(seriesModel);\n      view.group.traverse(function (child) {\n        // For the elements that have been triggered by other components,\n        // and are still required to be highlighted,\n        // because the current is directly forced to blur the element,\n        // it will cause the focus self to be unable to highlight, so skip the blur of this element.\n        if (child.__highByOuter && sameSeries && focus === 'self') {\n          return;\n        }\n        singleEnterBlur(child);\n      });\n      if (isArrayLike(focus)) {\n        leaveBlurOfIndices(seriesModel.getData(), focus);\n      } else if (isObject(focus)) {\n        var dataTypes = keys(focus);\n        for (var d = 0; d < dataTypes.length; d++) {\n          leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);\n        }\n      }\n      blurredSeries.push(seriesModel);\n      getComponentStates(seriesModel).isBlured = true;\n    }\n  });\n  ecModel.eachComponent(function (componentType, componentModel) {\n    if (componentType === 'series') {\n      return;\n    }\n    var view = api.getViewOfComponentModel(componentModel);\n    if (view && view.toggleBlurSeries) {\n      view.toggleBlurSeries(blurredSeries, true, ecModel);\n    }\n  });\n}\nexport function blurComponent(componentMainType, componentIndex, api) {\n  if (componentMainType == null || componentIndex == null) {\n    return;\n  }\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n  if (!componentModel) {\n    return;\n  }\n  getComponentStates(componentModel).isBlured = true;\n  var view = api.getViewOfComponentModel(componentModel);\n  if (!view || !view.focusBlurEnabled) {\n    return;\n  }\n  view.group.traverse(function (child) {\n    singleEnterBlur(child);\n  });\n}\nexport function blurSeriesFromHighlightPayload(seriesModel, payload, api) {\n  var seriesIndex = seriesModel.seriesIndex;\n  var data = seriesModel.getData(payload.dataType);\n  if (!data) {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Unknown dataType \" + payload.dataType);\n    }\n    return;\n  }\n  var dataIndex = queryDataIndex(data, payload);\n  // Pick the first one if there is multiple/none exists.\n  dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;\n  var el = data.getItemGraphicEl(dataIndex);\n  if (!el) {\n    var count = data.count();\n    var current = 0;\n    // If data on dataIndex is NaN.\n    while (!el && current < count) {\n      el = data.getItemGraphicEl(current++);\n    }\n  }\n  if (el) {\n    var ecData = getECData(el);\n    blurSeries(seriesIndex, ecData.focus, ecData.blurScope, api);\n  } else {\n    // If there is no element put on the data. Try getting it from raw option\n    // TODO Should put it on seriesModel?\n    var focus_1 = seriesModel.get(['emphasis', 'focus']);\n    var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n    if (focus_1 != null) {\n      blurSeries(seriesIndex, focus_1, blurScope, api);\n    }\n  }\n}\nexport function findComponentHighDownDispatchers(componentMainType, componentIndex, name, api) {\n  var ret = {\n    focusSelf: false,\n    dispatchers: null\n  };\n  if (componentMainType == null || componentMainType === 'series' || componentIndex == null || name == null) {\n    return ret;\n  }\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n  if (!componentModel) {\n    return ret;\n  }\n  var view = api.getViewOfComponentModel(componentModel);\n  if (!view || !view.findHighDownDispatchers) {\n    return ret;\n  }\n  var dispatchers = view.findHighDownDispatchers(name);\n  // At presnet, the component (like Geo) only blur inside itself.\n  // So we do not use `blurScope` in component.\n  var focusSelf;\n  for (var i = 0; i < dispatchers.length; i++) {\n    if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatchers[i])) {\n      error('param should be highDownDispatcher');\n    }\n    if (getECData(dispatchers[i]).focus === 'self') {\n      focusSelf = true;\n      break;\n    }\n  }\n  return {\n    focusSelf: focusSelf,\n    dispatchers: dispatchers\n  };\n}\nexport function handleGlobalMouseOverForHighDown(dispatcher, e, api) {\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\n    error('param should be highDownDispatcher');\n  }\n  var ecData = getECData(dispatcher);\n  var _a = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api),\n    dispatchers = _a.dispatchers,\n    focusSelf = _a.focusSelf;\n  // If `findHighDownDispatchers` is supported on the component,\n  // highlight/downplay elements with the same name.\n  if (dispatchers) {\n    if (focusSelf) {\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n    }\n    each(dispatchers, function (dispatcher) {\n      return enterEmphasisWhenMouseOver(dispatcher, e);\n    });\n  } else {\n    // Try blur all in the related series. Then emphasis the hoverred.\n    // TODO. progressive mode.\n    blurSeries(ecData.seriesIndex, ecData.focus, ecData.blurScope, api);\n    if (ecData.focus === 'self') {\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n    }\n    // Other than series, component that not support `findHighDownDispatcher` will\n    // also use it. But in this case, highlight/downplay are only supported in\n    // mouse hover but not in dispatchAction.\n    enterEmphasisWhenMouseOver(dispatcher, e);\n  }\n}\nexport function handleGlobalMouseOutForHighDown(dispatcher, e, api) {\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\n    error('param should be highDownDispatcher');\n  }\n  allLeaveBlur(api);\n  var ecData = getECData(dispatcher);\n  var dispatchers = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api).dispatchers;\n  if (dispatchers) {\n    each(dispatchers, function (dispatcher) {\n      return leaveEmphasisWhenMouseOut(dispatcher, e);\n    });\n  } else {\n    leaveEmphasisWhenMouseOut(dispatcher, e);\n  }\n}\nexport function toggleSelectionFromPayload(seriesModel, payload, api) {\n  if (!isSelectChangePayload(payload)) {\n    return;\n  }\n  var dataType = payload.dataType;\n  var data = seriesModel.getData(dataType);\n  var dataIndex = queryDataIndex(data, payload);\n  if (!isArray(dataIndex)) {\n    dataIndex = [dataIndex];\n  }\n  seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? 'toggleSelect' : payload.type === SELECT_ACTION_TYPE ? 'select' : 'unselect'](dataIndex, dataType);\n}\nexport function updateSeriesElementSelection(seriesModel) {\n  var allData = seriesModel.getAllData();\n  each(allData, function (_a) {\n    var data = _a.data,\n      type = _a.type;\n    data.eachItemGraphicEl(function (el, idx) {\n      seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);\n    });\n  });\n}\nexport function getAllSelectedIndices(ecModel) {\n  var ret = [];\n  ecModel.eachSeries(function (seriesModel) {\n    var allData = seriesModel.getAllData();\n    each(allData, function (_a) {\n      var data = _a.data,\n        type = _a.type;\n      var dataIndices = seriesModel.getSelectedDataIndices();\n      if (dataIndices.length > 0) {\n        var item = {\n          dataIndex: dataIndices,\n          seriesIndex: seriesModel.seriesIndex\n        };\n        if (type != null) {\n          item.dataType = type;\n        }\n        ret.push(item);\n      }\n    });\n  });\n  return ret;\n}\n/**\n * Enable the function that mouseover will trigger the emphasis state.\n *\n * NOTE:\n * This function should be used on the element with dataIndex, seriesIndex.\n *\n */\nexport function enableHoverEmphasis(el, focus, blurScope) {\n  setAsHighDownDispatcher(el, true);\n  traverseUpdateState(el, setDefaultStateProxy);\n  enableHoverFocus(el, focus, blurScope);\n}\nexport function disableHoverEmphasis(el) {\n  setAsHighDownDispatcher(el, false);\n}\nexport function toggleHoverEmphasis(el, focus, blurScope, isDisabled) {\n  isDisabled ? disableHoverEmphasis(el) : enableHoverEmphasis(el, focus, blurScope);\n}\nexport function enableHoverFocus(el, focus, blurScope) {\n  var ecData = getECData(el);\n  if (focus != null) {\n    // TODO dataIndex may be set after this function. This check is not useful.\n    // if (ecData.dataIndex == null) {\n    //     if (__DEV__) {\n    //         console.warn('focus can only been set on element with dataIndex');\n    //     }\n    // }\n    // else {\n    ecData.focus = focus;\n    ecData.blurScope = blurScope;\n    // }\n  } else if (ecData.focus) {\n    ecData.focus = null;\n  }\n}\nvar OTHER_STATES = ['emphasis', 'blur', 'select'];\nvar defaultStyleGetterMap = {\n  itemStyle: 'getItemStyle',\n  lineStyle: 'getLineStyle',\n  areaStyle: 'getAreaStyle'\n};\n/**\n * Set emphasis/blur/selected states of element.\n */\nexport function setStatesStylesFromModel(el, itemModel, styleType,\n// default itemStyle\ngetter) {\n  styleType = styleType || 'itemStyle';\n  for (var i = 0; i < OTHER_STATES.length; i++) {\n    var stateName = OTHER_STATES[i];\n    var model = itemModel.getModel([stateName, styleType]);\n    var state = el.ensureState(stateName);\n    // Let it throw error if getterType is not found.\n    state.style = getter ? getter(model) : model[defaultStyleGetterMap[styleType]]();\n  }\n}\n/**\n *\n * Set element as highlight / downplay dispatcher.\n * It will be checked when element received mouseover event or from highlight action.\n * It's in change of all highlight/downplay behavior of it's children.\n *\n * @param el\n * @param el.highDownSilentOnTouch\n *        In touch device, mouseover event will be trigger on touchstart event\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\n *        conveniently use hoverStyle when tap on touch screen without additional\n *        code for compatibility.\n *        But if the chart/component has select feature, which usually also use\n *        hoverStyle, there might be conflict between 'select-highlight' and\n *        'hover-highlight' especially when roam is enabled (see geo for example).\n *        In this case, `highDownSilentOnTouch` should be used to disable\n *        hover-highlight on touch device.\n * @param asDispatcher If `false`, do not set as \"highDownDispatcher\".\n */\nexport function setAsHighDownDispatcher(el, asDispatcher) {\n  var disable = asDispatcher === false;\n  var extendedEl = el;\n  // Make `highDownSilentOnTouch` and `onStateChange` only work after\n  // `setAsHighDownDispatcher` called. Avoid it is modified by user unexpectedly.\n  if (el.highDownSilentOnTouch) {\n    extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;\n  }\n  // Simple optimize, since this method might be\n  // called for each elements of a group in some cases.\n  if (!disable || extendedEl.__highDownDispatcher) {\n    // Emphasis, normal can be triggered manually by API or other components like hover link.\n    // el[method]('emphasis', onElementEmphasisEvent)[method]('normal', onElementNormalEvent);\n    // Also keep previous record.\n    extendedEl.__highByOuter = extendedEl.__highByOuter || 0;\n    extendedEl.__highDownDispatcher = !disable;\n  }\n}\nexport function isHighDownDispatcher(el) {\n  return !!(el && el.__highDownDispatcher);\n}\n/**\n * Enable component highlight/downplay features:\n * + hover link (within the same name)\n * + focus blur in component\n */\nexport function enableComponentHighDownFeatures(el, componentModel, componentHighDownName) {\n  var ecData = getECData(el);\n  ecData.componentMainType = componentModel.mainType;\n  ecData.componentIndex = componentModel.componentIndex;\n  ecData.componentHighDownName = componentHighDownName;\n}\n/**\n * Support highlight/downplay record on each elements.\n * For the case: hover highlight/downplay (legend, visualMap, ...) and\n * user triggered highlight/downplay should not conflict.\n * Only all of the highlightDigit cleared, return to normal.\n * @param {string} highlightKey\n * @return {number} highlightDigit\n */\nexport function getHighlightDigit(highlightKey) {\n  var highlightDigit = _highlightKeyMap[highlightKey];\n  if (highlightDigit == null && _highlightNextDigit <= 32) {\n    highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\n  }\n  return highlightDigit;\n}\nexport function isSelectChangePayload(payload) {\n  var payloadType = payload.type;\n  return payloadType === SELECT_ACTION_TYPE || payloadType === UNSELECT_ACTION_TYPE || payloadType === TOGGLE_SELECT_ACTION_TYPE;\n}\nexport function isHighDownPayload(payload) {\n  var payloadType = payload.type;\n  return payloadType === HIGHLIGHT_ACTION_TYPE || payloadType === DOWNPLAY_ACTION_TYPE;\n}\nexport function savePathStates(el) {\n  var store = getSavedStates(el);\n  store.normalFill = el.style.fill;\n  store.normalStroke = el.style.stroke;\n  var selectState = el.states.select || {};\n  store.selectFill = selectState.style && selectState.style.fill || null;\n  store.selectStroke = selectState.style && selectState.style.stroke || null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isFunction, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../util/model.js';\n// Stored properties for further transition.\nexport var transitionStore = makeInner();\n/**\n * Return null if animation is disabled.\n */\nexport function getAnimationConfig(animationType, animatableModel, dataIndex,\n// Extra opts can override the option in animatable model.\nextraOpts,\n// TODO It's only for pictorial bar now.\nextraDelayParams) {\n  var animationPayload;\n  // Check if there is global animation configuration from dataZoom/resize can override the config in option.\n  // If animation is enabled. Will use this animation config in payload.\n  // If animation is disabled. Just ignore it.\n  if (animatableModel && animatableModel.ecModel) {\n    var updatePayload = animatableModel.ecModel.getUpdatePayload();\n    animationPayload = updatePayload && updatePayload.animation;\n  }\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n  var isUpdate = animationType === 'update';\n  if (animationEnabled) {\n    var duration = void 0;\n    var easing = void 0;\n    var delay = void 0;\n    if (extraOpts) {\n      duration = retrieve2(extraOpts.duration, 200);\n      easing = retrieve2(extraOpts.easing, 'cubicOut');\n      delay = 0;\n    } else {\n      duration = animatableModel.getShallow(isUpdate ? 'animationDurationUpdate' : 'animationDuration');\n      easing = animatableModel.getShallow(isUpdate ? 'animationEasingUpdate' : 'animationEasing');\n      delay = animatableModel.getShallow(isUpdate ? 'animationDelayUpdate' : 'animationDelay');\n    }\n    // animation from payload has highest priority.\n    if (animationPayload) {\n      animationPayload.duration != null && (duration = animationPayload.duration);\n      animationPayload.easing != null && (easing = animationPayload.easing);\n      animationPayload.delay != null && (delay = animationPayload.delay);\n    }\n    if (isFunction(delay)) {\n      delay = delay(dataIndex, extraDelayParams);\n    }\n    if (isFunction(duration)) {\n      duration = duration(dataIndex);\n    }\n    var config = {\n      duration: duration || 0,\n      delay: delay,\n      easing: easing\n    };\n    return config;\n  } else {\n    return null;\n  }\n}\nfunction animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {\n  var isFrom = false;\n  var removeOpt;\n  if (isFunction(dataIndex)) {\n    during = cb;\n    cb = dataIndex;\n    dataIndex = null;\n  } else if (isObject(dataIndex)) {\n    cb = dataIndex.cb;\n    during = dataIndex.during;\n    isFrom = dataIndex.isFrom;\n    removeOpt = dataIndex.removeOpt;\n    dataIndex = dataIndex.dataIndex;\n  }\n  var isRemove = animationType === 'leave';\n  if (!isRemove) {\n    // Must stop the remove animation.\n    el.stopAnimation('leave');\n  }\n  var animationConfig = getAnimationConfig(animationType, animatableModel, dataIndex, isRemove ? removeOpt || {} : null, animatableModel && animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n  if (animationConfig && animationConfig.duration > 0) {\n    var duration = animationConfig.duration;\n    var animationDelay = animationConfig.delay;\n    var animationEasing = animationConfig.easing;\n    var animateConfig = {\n      duration: duration,\n      delay: animationDelay || 0,\n      easing: animationEasing,\n      done: cb,\n      force: !!cb || !!during,\n      // Set to final state in update/init animation.\n      // So the post processing based on the path shape can be done correctly.\n      setToFinal: !isRemove,\n      scope: animationType,\n      during: during\n    };\n    isFrom ? el.animateFrom(props, animateConfig) : el.animateTo(props, animateConfig);\n  } else {\n    el.stopAnimation();\n    // If `isFrom`, the props is the \"from\" props.\n    !isFrom && el.attr(props);\n    // Call during at least once.\n    during && during(1);\n    cb && cb();\n  }\n}\n/**\n * Update graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n * @example\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\n *     // Or\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, function () { console.log('Animation done!'); });\n */\nfunction updateProps(el, props,\n// TODO: TYPE AnimatableModel\nanimatableModel, dataIndex, cb, during) {\n  animateOrSetProps('update', el, props, animatableModel, dataIndex, cb, during);\n}\nexport { updateProps };\n/**\n * Init graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n */\nexport function initProps(el, props, animatableModel, dataIndex, cb, during) {\n  animateOrSetProps('enter', el, props, animatableModel, dataIndex, cb, during);\n}\n/**\n * If element is removed.\n * It can determine if element is having remove animation.\n */\nexport function isElementRemoved(el) {\n  if (!el.__zr) {\n    return true;\n  }\n  for (var i = 0; i < el.animators.length; i++) {\n    var animator = el.animators[i];\n    if (animator.scope === 'leave') {\n      return true;\n    }\n  }\n  return false;\n}\n/**\n * Remove graphic element\n */\nexport function removeElement(el, props, animatableModel, dataIndex, cb, during) {\n  // Don't do remove animation twice.\n  if (isElementRemoved(el)) {\n    return;\n  }\n  animateOrSetProps('leave', el, props, animatableModel, dataIndex, cb, during);\n}\nfunction fadeOutDisplayable(el, animatableModel, dataIndex, done) {\n  el.removeTextContent();\n  el.removeTextGuideLine();\n  removeElement(el, {\n    style: {\n      opacity: 0\n    }\n  }, animatableModel, dataIndex, done);\n}\nexport function removeElementWithFadeOut(el, animatableModel, dataIndex) {\n  function doRemove() {\n    el.parent && el.parent.remove(el);\n  }\n  // Hide label and labelLine first\n  // TODO Also use fade out animation?\n  if (!el.isGroup) {\n    fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);\n  } else {\n    el.traverse(function (disp) {\n      if (!disp.isGroup) {\n        // Can invoke doRemove multiple times.\n        fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);\n      }\n    });\n  }\n}\n/**\n * Save old style for style transition in universalTransition module.\n * It's used when element will be reused in each render.\n * For chart like map, heatmap, which will always create new element.\n * We don't need to save this because universalTransition can get old style from the old element\n */\nexport function saveOldStyle(el) {\n  transitionStore(el).oldStyle = el.style;\n}\nexport function getOldStyle(el) {\n  return transitionStore(el).oldStyle;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as pathTool from 'zrender/lib/tool/path.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport Circle from 'zrender/lib/graphic/shape/Circle.js';\nimport Ellipse from 'zrender/lib/graphic/shape/Ellipse.js';\nimport Sector from 'zrender/lib/graphic/shape/Sector.js';\nimport Ring from 'zrender/lib/graphic/shape/Ring.js';\nimport Polygon from 'zrender/lib/graphic/shape/Polygon.js';\nimport Polyline from 'zrender/lib/graphic/shape/Polyline.js';\nimport Rect from 'zrender/lib/graphic/shape/Rect.js';\nimport Line from 'zrender/lib/graphic/shape/Line.js';\nimport BezierCurve from 'zrender/lib/graphic/shape/BezierCurve.js';\nimport Arc from 'zrender/lib/graphic/shape/Arc.js';\nimport CompoundPath from 'zrender/lib/graphic/CompoundPath.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport RadialGradient from 'zrender/lib/graphic/RadialGradient.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport OrientedBoundingRect from 'zrender/lib/core/OrientedBoundingRect.js';\nimport Point from 'zrender/lib/core/Point.js';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable.js';\nimport * as subPixelOptimizeUtil from 'zrender/lib/graphic/helper/subPixelOptimize.js';\nimport { extend, isArrayLike, map, defaults, isString, keys, each, hasOwn, isArray, isNumber, clone, assert } from 'zrender/lib/core/util.js';\nimport { getECData } from './innerStore.js';\nimport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved } from '../animation/basicTransition.js';\nimport { mathMin, mathMax, mathAbs } from './number.js';\n/**\n * @deprecated export for compatitable reason\n */\nexport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved };\nvar _customShapeMap = {};\nexport var XY = ['x', 'y'];\nexport var WH = ['width', 'height'];\n/**\n * Extend shape with parameters\n */\nexport function extendShape(opts) {\n  return Path.extend(opts);\n}\nvar extendPathFromString = pathTool.extendFromString;\n/**\n * Extend path\n */\nexport function extendPath(pathData, opts) {\n  return extendPathFromString(pathData, opts);\n}\n/**\n * Register a user defined shape.\n * The shape class can be fetched by `getShapeClass`\n * This method will overwrite the registered shapes, including\n * the registered built-in shapes, if using the same `name`.\n * The shape can be used in `custom series` and\n * `graphic component` by declaring `{type: name}`.\n *\n * @param name\n * @param ShapeClass Can be generated by `extendShape`.\n */\nexport function registerShape(name, ShapeClass) {\n  _customShapeMap[name] = ShapeClass;\n}\n/**\n * Find shape class registered by `registerShape`. Usually used in\n * fetching user defined shape.\n *\n * [Caution]:\n * (1) This method **MUST NOT be used inside echarts !!!**, unless it is prepared\n * to use user registered shapes.\n * Because the built-in shape (see `getBuiltInShape`) will be registered by\n * `registerShape` by default. That enables users to get both built-in\n * shapes as well as the shapes belonging to themsleves. But users can overwrite\n * the built-in shapes by using names like 'circle', 'rect' via calling\n * `registerShape`. So the echarts inner featrues should not fetch shapes from here\n * in case that it is overwritten by users, except that some features, like\n * `custom series`, `graphic component`, do it deliberately.\n *\n * (2) In the features like `custom series`, `graphic component`, the user input\n * `{tpye: 'xxx'}` does not only specify shapes but also specify other graphic\n * elements like `'group'`, `'text'`, `'image'` or event `'path'`. Those names\n * are reserved names, that is, if some user registers a shape named `'image'`,\n * the shape will not be used. If we intending to add some more reserved names\n * in feature, that might bring break changes (disable some existing user shape\n * names). But that case probably rarely happens. So we don't make more mechanism\n * to resolve this issue here.\n *\n * @param name\n * @return The shape class. If not found, return nothing.\n */\nexport function getShapeClass(name) {\n  if (_customShapeMap.hasOwnProperty(name)) {\n    return _customShapeMap[name];\n  }\n}\n/**\n * Create a path element from path data string\n * @param pathData\n * @param opts\n * @param rect\n * @param layout 'center' or 'cover' default to be cover\n */\nexport function makePath(pathData, opts, rect, layout) {\n  var path = pathTool.createFromString(pathData, opts);\n  if (rect) {\n    if (layout === 'center') {\n      rect = centerGraphic(rect, path.getBoundingRect());\n    }\n    resizePath(path, rect);\n  }\n  return path;\n}\n/**\n * Create a image element from image url\n * @param imageUrl image url\n * @param opts options\n * @param rect constrain rect\n * @param layout 'center' or 'cover'. Default to be 'cover'\n */\nexport function makeImage(imageUrl, rect, layout) {\n  var zrImg = new ZRImage({\n    style: {\n      image: imageUrl,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    onload: function (img) {\n      if (layout === 'center') {\n        var boundingRect = {\n          width: img.width,\n          height: img.height\n        };\n        zrImg.setStyle(centerGraphic(rect, boundingRect));\n      }\n    }\n  });\n  return zrImg;\n}\n/**\n * Get position of centered element in bounding box.\n *\n * @param  rect         element local bounding box\n * @param  boundingRect constraint bounding box\n * @return element position containing x, y, width, and height\n */\nfunction centerGraphic(rect, boundingRect) {\n  // Set rect to center, keep width / height ratio.\n  var aspect = boundingRect.width / boundingRect.height;\n  var width = rect.height * aspect;\n  var height;\n  if (width <= rect.width) {\n    height = rect.height;\n  } else {\n    width = rect.width;\n    height = width / aspect;\n  }\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n  return {\n    x: cx - width / 2,\n    y: cy - height / 2,\n    width: width,\n    height: height\n  };\n}\nexport var mergePath = pathTool.mergePath;\n/**\n * Resize a path to fit the rect\n * @param path\n * @param rect\n */\nexport function resizePath(path, rect) {\n  if (!path.applyTransform) {\n    return;\n  }\n  var pathRect = path.getBoundingRect();\n  var m = pathRect.calculateTransform(rect);\n  path.applyTransform(m);\n}\n/**\n * Sub pixel optimize line for canvas\n */\nexport function subPixelOptimizeLine(shape, lineWidth) {\n  subPixelOptimizeUtil.subPixelOptimizeLine(shape, shape, {\n    lineWidth: lineWidth\n  });\n  return shape;\n}\n/**\n * Sub pixel optimize rect for canvas\n */\nexport function subPixelOptimizeRect(shape, style) {\n  subPixelOptimizeUtil.subPixelOptimizeRect(shape, shape, style);\n  return shape;\n}\n/**\n * Sub pixel optimize for canvas\n *\n * @param position Coordinate, such as x, y\n * @param lineWidth Should be nonnegative integer.\n * @param positiveOrNegative Default false (negative).\n * @return Optimized position.\n */\nexport var subPixelOptimize = subPixelOptimizeUtil.subPixelOptimize;\n/**\n * Get transform matrix of target (param target),\n * in coordinate of its ancestor (param ancestor)\n *\n * @param target\n * @param [ancestor]\n */\nexport function getTransform(target, ancestor) {\n  var mat = matrix.identity([]);\n  while (target && target !== ancestor) {\n    matrix.mul(mat, target.getLocalTransform(), mat);\n    target = target.parent;\n  }\n  return mat;\n}\n/**\n * Apply transform to an vertex.\n * @param target [x, y]\n * @param transform Can be:\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\n * @param invert Whether use invert matrix.\n * @return [x, y]\n */\nexport function applyTransform(target, transform, invert) {\n  if (transform && !isArrayLike(transform)) {\n    transform = Transformable.getLocalTransform(transform);\n  }\n  if (invert) {\n    transform = matrix.invert([], transform);\n  }\n  return vector.applyTransform([], target, transform);\n}\n/**\n * @param direction 'left' 'right' 'top' 'bottom'\n * @param transform Transform matrix: like [1, 0, 0, 1, 0, 0]\n * @param invert Whether use invert matrix.\n * @return Transformed direction. 'left' 'right' 'top' 'bottom'\n */\nexport function transformDirection(direction, transform, invert) {\n  // Pick a base, ensure that transform result will not be (0, 0).\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : mathAbs(2 * transform[4] / transform[0]);\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : mathAbs(2 * transform[4] / transform[2]);\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n  vertex = applyTransform(vertex, transform, invert);\n  return mathAbs(vertex[0]) > mathAbs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n}\nfunction isNotGroup(el) {\n  return !el.isGroup;\n}\nfunction isPath(el) {\n  return el.shape != null;\n}\n/**\n * Apply group transition animation from g1 to g2.\n * If no animatableModel, no animation.\n */\nexport function groupTransition(g1, g2, animatableModel) {\n  if (!g1 || !g2) {\n    return;\n  }\n  function getElMap(g) {\n    var elMap = {};\n    g.traverse(function (el) {\n      if (isNotGroup(el) && el.anid) {\n        elMap[el.anid] = el;\n      }\n    });\n    return elMap;\n  }\n  function getAnimatableProps(el) {\n    var obj = {\n      x: el.x,\n      y: el.y,\n      rotation: el.rotation\n    };\n    if (isPath(el)) {\n      obj.shape = clone(el.shape);\n    }\n    return obj;\n  }\n  var elMap1 = getElMap(g1);\n  g2.traverse(function (el) {\n    if (isNotGroup(el) && el.anid) {\n      var oldEl = elMap1[el.anid];\n      if (oldEl) {\n        var newProp = getAnimatableProps(el);\n        el.attr(getAnimatableProps(oldEl));\n        updateProps(el, newProp, animatableModel, getECData(el).dataIndex);\n      }\n    }\n  });\n}\nexport function clipPointsByRect(points, rect) {\n  // FIXME: This way might be incorrect when graphic clipped by a corner\n  // and when element has a border.\n  return map(points, function (point) {\n    var x = point[0];\n    x = mathMax(x, rect.x);\n    x = mathMin(x, rect.x + rect.width);\n    var y = point[1];\n    y = mathMax(y, rect.y);\n    y = mathMin(y, rect.y + rect.height);\n    return [x, y];\n  });\n}\n/**\n * Return a new clipped rect. If rect size are negative, return undefined.\n */\nexport function clipRectByRect(targetRect, rect) {\n  var x = mathMax(targetRect.x, rect.x);\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\n  var y = mathMax(targetRect.y, rect.y);\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height);\n  // If the total rect is cliped, nothing, including the border,\n  // should be painted. So return undefined.\n  if (x2 >= x && y2 >= y) {\n    return {\n      x: x,\n      y: y,\n      width: x2 - x,\n      height: y2 - y\n    };\n  }\n}\nexport function createIcon(iconStr,\n// Support 'image://' or 'path://' or direct svg path.\nopt, rect) {\n  var innerOpts = extend({\n    rectHover: true\n  }, opt);\n  var style = innerOpts.style = {\n    strokeNoScale: true\n  };\n  rect = rect || {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  };\n  if (iconStr) {\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), defaults(style, rect), new ZRImage(innerOpts)) : makePath(iconStr.replace('path://', ''), innerOpts, rect, 'center');\n  }\n}\n/**\n * Return `true` if the given line (line `a`) and the given polygon\n * are intersect.\n * Note that we do not count colinear as intersect here because no\n * requirement for that. We could do that if required in future.\n */\nexport function linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\n  for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\n    var p = points[i];\n    if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\n      return true;\n    }\n    p2 = p;\n  }\n}\n/**\n * Return `true` if the given two lines (line `a` and line `b`)\n * are intersect.\n * Note that we do not count colinear as intersect here because no\n * requirement for that. We could do that if required in future.\n */\nexport function lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n  // let `vec_m` to be `vec_a2 - vec_a1` and `vec_n` to be `vec_b2 - vec_b1`.\n  var mx = a2x - a1x;\n  var my = a2y - a1y;\n  var nx = b2x - b1x;\n  var ny = b2y - b1y;\n  // `vec_m` and `vec_n` are parallel iff\n  //     existing `k` such that `vec_m = k · vec_n`, equivalent to `vec_m X vec_n = 0`.\n  var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n  if (nearZero(nmCrossProduct)) {\n    return false;\n  }\n  // `vec_m` and `vec_n` are intersect iff\n  //     existing `p` and `q` in [0, 1] such that `vec_a1 + p * vec_m = vec_b1 + q * vec_n`,\n  //     such that `q = ((vec_a1 - vec_b1) X vec_m) / (vec_n X vec_m)`\n  //           and `p = ((vec_a1 - vec_b1) X vec_n) / (vec_n X vec_m)`.\n  var b1a1x = a1x - b1x;\n  var b1a1y = a1y - b1y;\n  var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\n  if (q < 0 || q > 1) {\n    return false;\n  }\n  var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n  if (p < 0 || p > 1) {\n    return false;\n  }\n  return true;\n}\n/**\n * Cross product of 2-dimension vector.\n */\nfunction crossProduct2d(x1, y1, x2, y2) {\n  return x1 * y2 - x2 * y1;\n}\nfunction nearZero(val) {\n  return val <= 1e-6 && val >= -1e-6;\n}\n/**\n * NOTE:\n *  A negative-width/height rect (due to negative margins) is not supported;\n *  it will be clampped to zero width/height.\n *  Although negative-width/height rects can be defined reasonably following the\n *  similar sense in CSS, but they are rarely used, hard to understand and complicated.\n *\n * @param rect Assume its width/height >= 0 if existing.\n *  x/y/width/height is allowed to be NaN,\n *  for the case that only x/width or y/height is intended to be computed.\n * @param delta\n *  If be `number[]`, should be `[top, right, bottom, left]`,\n *      which can be used in padding or margin case.\n *      @see `normalizeCssArray` in `util/format.ts`\n *  If be `number`, it means [delta, delta, delta, delta],\n *      which can be used in lineWidth (borderWith) case,\n *      [NOTICE]: commonly pass lineWidth / 2, following the convention that border is\n *      half inside half outside of the rect.\n * @param shrinkOrExpand\n *  `true` - shrink if `delta[i]` is positive, commmonly used in `padding` case.\n *  `false` - expand if `delta[i]` is positive, commmonly used in `margin` case. (default)\n * @param noNegative\n *  `true` - negative `delta[i]` will be clampped to 0.\n *  `false` - No clamp to `delta`. (default).\n * @return The input `rect`.\n */\nexport function expandOrShrinkRect(rect, delta, shrinkOrExpand, noNegative, minSize // by default [0, 0].\n) {\n  if (delta == null) {\n    return rect;\n  } else if (isNumber(delta)) {\n    _tmpExpandRectDelta[0] = _tmpExpandRectDelta[1] = _tmpExpandRectDelta[2] = _tmpExpandRectDelta[3] = delta;\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(delta.length === 4);\n    }\n    _tmpExpandRectDelta[0] = delta[0];\n    _tmpExpandRectDelta[1] = delta[1];\n    _tmpExpandRectDelta[2] = delta[2];\n    _tmpExpandRectDelta[3] = delta[3];\n  }\n  if (noNegative) {\n    _tmpExpandRectDelta[0] = mathMax(0, _tmpExpandRectDelta[0]);\n    _tmpExpandRectDelta[1] = mathMax(0, _tmpExpandRectDelta[1]);\n    _tmpExpandRectDelta[2] = mathMax(0, _tmpExpandRectDelta[2]);\n    _tmpExpandRectDelta[3] = mathMax(0, _tmpExpandRectDelta[3]);\n  }\n  if (shrinkOrExpand) {\n    _tmpExpandRectDelta[0] = -_tmpExpandRectDelta[0];\n    _tmpExpandRectDelta[1] = -_tmpExpandRectDelta[1];\n    _tmpExpandRectDelta[2] = -_tmpExpandRectDelta[2];\n    _tmpExpandRectDelta[3] = -_tmpExpandRectDelta[3];\n  }\n  expandRectOnOneDimension(rect, _tmpExpandRectDelta, 'x', 'width', 3, 1, minSize && minSize[0] || 0);\n  expandRectOnOneDimension(rect, _tmpExpandRectDelta, 'y', 'height', 0, 2, minSize && minSize[1] || 0);\n  return rect;\n}\nvar _tmpExpandRectDelta = [0, 0, 0, 0];\nfunction expandRectOnOneDimension(rect, delta, xy, wh, ltIdx, rbIdx, minSize) {\n  var deltaSum = delta[rbIdx] + delta[ltIdx];\n  var oldSize = rect[wh];\n  rect[wh] += deltaSum;\n  minSize = mathMax(0, mathMin(minSize, oldSize));\n  if (rect[wh] < minSize) {\n    rect[wh] = minSize;\n    // Try to make the position of the zero rect reasonable in most visual cases.\n    rect[xy] += delta[ltIdx] >= 0 ? -delta[ltIdx] : delta[rbIdx] >= 0 ? oldSize + delta[rbIdx] : mathAbs(deltaSum) > 1e-8 ? (oldSize - minSize) * delta[ltIdx] / deltaSum : 0;\n  } else {\n    rect[xy] -= delta[ltIdx];\n  }\n}\nexport function setTooltipConfig(opt) {\n  var itemTooltipOption = opt.itemTooltipOption;\n  var componentModel = opt.componentModel;\n  var itemName = opt.itemName;\n  var itemTooltipOptionObj = isString(itemTooltipOption) ? {\n    formatter: itemTooltipOption\n  } : itemTooltipOption;\n  var mainType = componentModel.mainType;\n  var componentIndex = componentModel.componentIndex;\n  var formatterParams = {\n    componentType: mainType,\n    name: itemName,\n    $vars: ['name']\n  };\n  formatterParams[mainType + 'Index'] = componentIndex;\n  var formatterParamsExtra = opt.formatterParamsExtra;\n  if (formatterParamsExtra) {\n    each(keys(formatterParamsExtra), function (key) {\n      if (!hasOwn(formatterParams, key)) {\n        formatterParams[key] = formatterParamsExtra[key];\n        formatterParams.$vars.push(key);\n      }\n    });\n  }\n  var ecData = getECData(opt.el);\n  ecData.componentMainType = mainType;\n  ecData.componentIndex = componentIndex;\n  ecData.tooltipConfig = {\n    name: itemName,\n    option: defaults({\n      content: itemName,\n      encodeHTMLContent: true,\n      formatterParams: formatterParams\n    }, itemTooltipOptionObj)\n  };\n}\nfunction traverseElement(el, cb) {\n  var stopped;\n  // TODO\n  // Polyfill for fixing zrender group traverse don't visit it's root issue.\n  if (el.isGroup) {\n    stopped = cb(el);\n  }\n  if (!stopped) {\n    el.traverse(cb);\n  }\n}\nexport function traverseElements(els, cb) {\n  if (els) {\n    if (isArray(els)) {\n      for (var i = 0; i < els.length; i++) {\n        traverseElement(els[i], cb);\n      }\n    } else {\n      traverseElement(els, cb);\n    }\n  }\n}\n/**\n * After a boundingRect applying a `transform`, whether to be still parallel screen X and Y.\n */\nexport function isBoundingRectAxisAligned(transform) {\n  return !transform || mathAbs(transform[1]) < AXIS_ALIGN_EPSILON && mathAbs(transform[2]) < AXIS_ALIGN_EPSILON || mathAbs(transform[0]) < AXIS_ALIGN_EPSILON && mathAbs(transform[3]) < AXIS_ALIGN_EPSILON;\n}\nvar AXIS_ALIGN_EPSILON = 1e-5;\n/**\n * Create or copy to the existing bounding rect to avoid modifying `source`.\n *\n * @usage\n *  out.rect = ensureCopyRect(out.rect, sourceRect);\n */\nexport function ensureCopyRect(target, source) {\n  return target ? BoundingRect.copy(target, source) : source.clone();\n}\n/**\n * Create or copy to the existing transform to avoid modifying `source`.\n *\n * [CAUTION]: transform is `NullUndefined` if no transform, following convention of zrender,\n *  and enable to bypass some unnecessary calculation, since in most cases there is no transform.\n *\n * @usage\n *  out.transform = ensureCopyTransform(out.transform, sourceTransform);\n */\nexport function ensureCopyTransform(target, source) {\n  return source ? matrix.copy(target || matrix.create(), source) : undefined;\n}\nexport function retrieveZInfo(model) {\n  return {\n    z: model.get('z') || 0,\n    zlevel: model.get('zlevel') || 0\n  };\n}\n/**\n * Assume all of the elements has the same `z` and `zlevel`.\n */\nexport function calcZ2Range(el) {\n  var max = -Infinity;\n  var min = Infinity;\n  traverseElement(el, function (el) {\n    visitEl(el);\n    visitEl(el.getTextContent());\n    visitEl(el.getTextGuideLine());\n  });\n  function visitEl(el) {\n    if (!el || el.isGroup) {\n      return;\n    }\n    var currentStates = el.currentStates;\n    if (currentStates.length) {\n      for (var idx = 0; idx < currentStates.length; idx++) {\n        calcZ2(el.states[currentStates[idx]]);\n      }\n    }\n    calcZ2(el);\n  }\n  function calcZ2(entity) {\n    if (entity) {\n      var z2 = entity.z2;\n      // Consider z2 may be NullUndefined\n      if (z2 > max) {\n        max = z2;\n      }\n      if (z2 < min) {\n        min = z2;\n      }\n    }\n  }\n  if (min > max) {\n    min = max = 0;\n  }\n  return {\n    min: min,\n    max: max\n  };\n}\nexport function traverseUpdateZ(el, z, zlevel) {\n  doUpdateZ(el, z, zlevel, -Infinity);\n}\nfunction doUpdateZ(el, z, zlevel,\n// FIXME: Ideally all the labels should be above all the glyphs by default,\n//  e.g. in graph, edge labels should be above node elements.\n//  Currently impl does not guarantee that.\nmaxZ2) {\n  // `ignoreModelZ` is used to intentionally lift elements to cover other elements,\n  // where maxZ2 (for label.z2) should also not be counted for its parents.\n  if (el.ignoreModelZ) {\n    return maxZ2;\n  }\n  // Group may also have textContent\n  var label = el.getTextContent();\n  var labelLine = el.getTextGuideLine();\n  var isGroup = el.isGroup;\n  if (isGroup) {\n    // set z & zlevel of children elements of Group\n    var children = el.childrenRef();\n    for (var i = 0; i < children.length; i++) {\n      maxZ2 = mathMax(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\n    }\n  } else {\n    // not Group\n    el.z = z;\n    el.zlevel = zlevel;\n    maxZ2 = mathMax(el.z2 || 0, maxZ2);\n  }\n  // always set z and zlevel if label/labelLine exists\n  if (label) {\n    label.z = z;\n    label.zlevel = zlevel;\n    // lift z2 of text content\n    // TODO if el.emphasis.z2 is spcefied, what about textContent.\n    isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\n  }\n  if (labelLine) {\n    var textGuideLineConfig = el.textGuideLineConfig;\n    labelLine.z = z;\n    labelLine.zlevel = zlevel;\n    isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\n  }\n  return maxZ2;\n}\n// Register built-in shapes. These shapes might be overwritten\n// by users, although we do not recommend that.\nregisterShape('circle', Circle);\nregisterShape('ellipse', Ellipse);\nregisterShape('sector', Sector);\nregisterShape('ring', Ring);\nregisterShape('polygon', Polygon);\nregisterShape('polyline', Polyline);\nregisterShape('rect', Rect);\nregisterShape('line', Line);\nregisterShape('bezierCurve', BezierCurve);\nregisterShape('arc', Arc);\nexport { Group, ZRImage as Image, ZRText as Text, Circle, Ellipse, Sector, Ring, Polygon, Polyline, Rect, Line, BezierCurve, Arc, IncrementalDisplayable, CompoundPath, LinearGradient, RadialGradient, BoundingRect, OrientedBoundingRect, Point, Path };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { isFunction, retrieve2, extend, keys, trim, retrieve3, isNumber, normalizeCssArray } from 'zrender/lib/core/util.js';\nimport { SPECIAL_STATES, DISPLAY_STATES } from '../util/states.js';\nimport { deprecateReplaceLog } from '../util/log.js';\nimport { makeInner, interpolateRawValues } from '../util/model.js';\nimport { initProps, updateProps } from '../util/graphic.js';\nvar EMPTY_OBJ = {};\nexport function setLabelText(label, labelTexts) {\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var text = labelTexts[stateName];\n    var state = label.ensureState(stateName);\n    state.style = state.style || {};\n    state.style.text = text;\n  }\n  var oldStates = label.currentStates.slice();\n  label.clearStates(true);\n  label.setStyle({\n    text: labelTexts.normal\n  });\n  label.useStates(oldStates, true);\n}\nfunction getLabelText(opt, stateModels, interpolatedValue) {\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var normalModel = stateModels.normal;\n  var baseText;\n  if (labelFetcher) {\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n      interpolatedValue: interpolatedValue\n    } : null);\n  }\n  if (baseText == null) {\n    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n  }\n  var statesText = {\n    normal: baseText\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var stateModel = stateModels[stateName];\n    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n  }\n  return statesText;\n}\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified\n// TODO specified position?\n) {\n  opt = opt || EMPTY_OBJ;\n  var isSetOnText = targetEl instanceof ZRText;\n  var needsCreateText = false;\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n    if (stateModel && stateModel.getShallow('show')) {\n      needsCreateText = true;\n      break;\n    }\n  }\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n  if (needsCreateText) {\n    if (!isSetOnText) {\n      // Reuse the previous\n      if (!textContent) {\n        textContent = new ZRText();\n        targetEl.setTextContent(textContent);\n      }\n      // Use same state proxy\n      if (targetEl.stateProxy) {\n        textContent.stateProxy = targetEl.stateProxy;\n      }\n    }\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\n    var normalModel = labelStatesModels.normal;\n    var showNormal = !!normalModel.getShallow('show');\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n    normalStyle.text = labelStatesTexts.normal;\n    if (!isSetOnText) {\n      // Always create new\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n    }\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = labelStatesModels[stateName];\n      if (stateModel) {\n        var stateObj = textContent.ensureState(stateName);\n        var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n        if (stateShow !== showNormal) {\n          stateObj.ignore = !stateShow;\n        }\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n        stateObj.style.text = labelStatesTexts[stateName];\n        if (!isSetOnText) {\n          var targetElEmphasisState = targetEl.ensureState(stateName);\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n        }\n      }\n    }\n    // PENDING: if there is many requirements that emphasis position\n    // need to be different from normal position, we might consider\n    // auto silent is those cases.\n    textContent.silent = !!normalModel.getShallow('silent');\n    // Keep x and y\n    if (textContent.style.x != null) {\n      normalStyle.x = textContent.style.x;\n    }\n    if (textContent.style.y != null) {\n      normalStyle.y = textContent.style.y;\n    }\n    textContent.ignore = !showNormal;\n    // Always create new style.\n    textContent.useStyle(normalStyle);\n    textContent.dirty();\n    if (opt.enableTextSetter) {\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n        setLabelText(textContent, labelStatesTexts);\n      };\n    }\n  } else if (textContent) {\n    // Not display rich text.\n    textContent.ignore = true;\n  }\n  targetEl.dirty();\n}\nexport { setLabelStyle };\nexport function getLabelStatesModels(itemModel, labelName) {\n  labelName = labelName || 'label';\n  var statesModels = {\n    normal: itemModel.getModel(labelName)\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n  }\n  return statesModels;\n}\n/**\n * Set basic textStyle properties.\n */\nexport function createTextStyle(textStyleModel, specifiedTextStyle,\n// Fixed style in the code. Can't be set by model.\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n) {\n  var textStyle = {};\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n  specifiedTextStyle && extend(textStyle, specifiedTextStyle);\n  // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n  return textStyle;\n}\nexport function createTextConfig(textStyleModel, opt, isNotNormal) {\n  opt = opt || {};\n  var textConfig = {};\n  var labelPosition;\n  var labelRotate = textStyleModel.getShallow('rotate');\n  var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n  var labelOffset = textStyleModel.getShallow('offset');\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside');\n  // 'outside' is not a valid zr textPostion value, but used\n  // in bar series, and magic type should be considered.\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n  if (labelPosition != null) {\n    textConfig.position = labelPosition;\n  }\n  if (labelOffset != null) {\n    textConfig.offset = labelOffset;\n  }\n  if (labelRotate != null) {\n    labelRotate *= Math.PI / 180;\n    textConfig.rotation = labelRotate;\n  }\n  if (labelDistance != null) {\n    textConfig.distance = labelDistance;\n  }\n  // fill and auto is determined by the color of path fill if it's not specified by developers.\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n  if (opt.autoOverflowArea != null) {\n    textConfig.autoOverflowArea = opt.autoOverflowArea;\n  }\n  if (opt.layoutRect != null) {\n    textConfig.layoutRect = opt.layoutRect;\n  }\n  return textConfig;\n}\n/**\n * The uniform entry of set text style, that is, retrieve style definitions\n * from `model` and set to `textStyle` object.\n *\n * Never in merge mode, but in overwrite mode, that is, all of the text style\n * properties will be set. (Consider the states of normal and emphasis and\n * default value can be adopted, merge would make the logic too complicated\n * to manage.)\n */\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle;\n  // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n  if (richItemNames) {\n    richResult = {};\n    var richInheritPlainLabelOptionName = 'richInheritPlainLabel';\n    var richInheritPlainLabel = retrieve2(textStyleModel.get(richInheritPlainLabelOptionName), ecModel ? ecModel.get(richInheritPlainLabelOptionName) : undefined);\n    for (var name_1 in richItemNames) {\n      if (richItemNames.hasOwnProperty(name_1)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]);\n        // In rich, never `disableBox`.\n        // consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n        // Since v6, the rich style inherits plain label by default\n        // but this behavior can be disabled by setting `richInheritPlainLabel` to `false`.\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, textStyleModel, richInheritPlainLabel, opt, isNotNormal, isAttached, false, true);\n      }\n    }\n  }\n  if (richResult) {\n    textStyle.rich = richResult;\n  }\n  var overflow = textStyleModel.get('overflow');\n  if (overflow) {\n    textStyle.overflow = overflow;\n  }\n  var lineOverflow = textStyleModel.get('lineOverflow');\n  if (lineOverflow) {\n    textStyle.lineOverflow = lineOverflow;\n  }\n  var labelTextStyle = textStyle;\n  // `minMargin` has a higher precedence than `textMargin`, because `textMargin` is allowed\n  // to be set in `defaultOption`.\n  var minMargin = textStyleModel.get('minMargin');\n  if (minMargin != null) {\n    // `minMargin` only support number value.\n    minMargin = !isNumber(minMargin) ? 0 : minMargin / 2;\n    labelTextStyle.margin = [minMargin, minMargin, minMargin, minMargin];\n    labelTextStyle.__marginType = LabelMarginType.minMargin;\n  } else {\n    var textMargin = textStyleModel.get('textMargin');\n    if (textMargin != null) {\n      labelTextStyle.margin = normalizeCssArray(textMargin);\n      labelTextStyle.__marginType = LabelMarginType.textMargin;\n    }\n  }\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, null, null, opt, isNotNormal, isAttached, true, false);\n}\n// Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n// TODO TextStyleModel\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n      var richKeys = keys(rich);\n      for (var i = 0; i < richKeys.length; i++) {\n        var richKey = richKeys[i];\n        richItemNameMap[richKey] = 1;\n      }\n    }\n    textStyleModel = textStyleModel.parentModel;\n  }\n  return richItemNameMap;\n}\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign', 'ellipsis'];\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nfunction setTokenTextStyle(textStyle,\n// FIXME: check/refactor for ellipsis handling of rich text.\ntextStyleModel, globalTextStyle, plainTextModel, richInheritPlainLabel, opt, isNotNormal, isAttached, isBlock, inRich) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n  var inheritColor = opt && opt.inheritColor;\n  var fillColor = textStyleModel.getShallow('color');\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\n  var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n  if (fillColor === 'inherit' || fillColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (fillColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n    if (inheritColor) {\n      fillColor = inheritColor;\n    } else {\n      fillColor = null;\n    }\n  }\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (strokeColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n    if (inheritColor) {\n      strokeColor = inheritColor;\n    } else {\n      strokeColor = null;\n    }\n  }\n  if (!isAttached) {\n    // Only use default global textStyle.color if text is individual.\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\n    fillColor = fillColor || globalTextStyle.color;\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\n  }\n  if (fillColor != null) {\n    // Might not be a string, e.g, it's a function in axisLabel case; but assume that it will\n    // be erased by a correct value outside.\n    textStyle.fill = fillColor;\n  }\n  if (strokeColor != null) {\n    textStyle.stroke = strokeColor;\n  }\n  var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n  if (textBorderWidth != null) {\n    textStyle.lineWidth = textBorderWidth;\n  }\n  var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n  if (textBorderType != null) {\n    textStyle.lineDash = textBorderType;\n  }\n  var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n  if (textBorderDashOffset != null) {\n    textStyle.lineDashOffset = textBorderDashOffset;\n  }\n  if (!isNotNormal && opacity == null && !inRich) {\n    opacity = opt && opt.defaultOpacity;\n  }\n  if (opacity != null) {\n    textStyle.opacity = opacity;\n  }\n  // TODO\n  if (!isNotNormal && !isAttached) {\n    // Set default finally.\n    if (textStyle.fill == null && opt.inheritColor) {\n      textStyle.fill = opt.inheritColor;\n    }\n  }\n  // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\n    // props width, height, padding, margin, tag, backgroundColor, borderColor,\n    // borderWidth, borderRadius, shadowColor, shadowBlur, shadowOffsetX, shadowOffsetY\n    // may inappropriate to inherit from plainTextStyle.\n    // And if some props is specified in default options, users may have to reset them one by one.\n    // Therefore, we only allow these props to inherit from plainTextStyle.\n    // `richInheritPlainLabel` is switch for backward compatibility\n    var val = richInheritPlainLabel !== false && plainTextModel ? retrieve3(textStyleModel.getShallow(key), plainTextModel.getShallow(key), globalTextStyle[key]) : retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n    var key = TEXT_PROPS_SELF[i];\n    var val = textStyleModel.getShallow(key);\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n  if (textStyle.verticalAlign == null) {\n    var baseline = textStyleModel.getShallow('baseline');\n    if (baseline != null) {\n      textStyle.verticalAlign = baseline;\n    }\n  }\n  if (!isBlock || !opt.disableBox) {\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n      var key = TEXT_PROPS_BOX[i];\n      var val = textStyleModel.getShallow(key);\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n    var borderType = textStyleModel.getShallow('borderType');\n    if (borderType != null) {\n      textStyle.borderDash = borderType;\n    }\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.backgroundColor === 'auto') {\n          deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n        }\n      }\n      textStyle.backgroundColor = inheritColor;\n    }\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.borderColor === 'auto') {\n          deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n        }\n      }\n      textStyle.borderColor = inheritColor;\n    }\n  }\n}\nexport function getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return trim([\n  // FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\nexport var labelInner = makeInner();\nexport function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n  if (!label) {\n    return;\n  }\n  var obj = labelInner(label);\n  obj.prevValue = obj.value;\n  obj.value = value;\n  var normalLabelModel = labelStatesModels.normal;\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\n  if (obj.valueAnimation) {\n    obj.precision = normalLabelModel.get('precision');\n    obj.defaultInterpolatedText = getDefaultText;\n    obj.statesModels = labelStatesModels;\n  }\n}\nexport function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n  var labelInnerStore = labelInner(textEl);\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n    // Value not changed, no new label animation\n    return;\n  }\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText;\n  // Consider the case that being animating, do not use the `obj.value`,\n  // Otherwise it will jump to the `obj.value` when this new animation started.\n  var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n  var targetValue = labelInnerStore.value;\n  function during(percent) {\n    var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n    var labelText = getLabelText({\n      labelDataIndex: dataIndex,\n      labelFetcher: labelFetcher,\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n    }, labelInnerStore.statesModels, interpolated);\n    setLabelText(textEl, labelText);\n  }\n  textEl.percent = 0;\n  (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n    // percent is used to prevent animation from being aborted #15916\n    percent: 1\n  }, animatableModel, dataIndex, null, during);\n}\n/**\n * PENDING: Temporary impl. unify them?\n * @see {LabelCommonOption['textMargin']}\n * @see {LabelCommonOption['minMargin']}\n */\nexport var LabelMarginType = {\n  minMargin: 1,\n  textMargin: 2\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getFont } from '../../label/labelStyle.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nvar PATH_COLOR = ['textStyle', 'color'];\nvar textStyleParams = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'padding', 'lineHeight', 'rich', 'width', 'height', 'overflow'];\n// TODO Performance improvement?\nvar tmpText = new ZRText();\nvar TextStyleMixin = /** @class */function () {\n  function TextStyleMixin() {}\n  /**\n   * Get color property or get color from option.textStyle.color\n   */\n  // TODO Callback\n  TextStyleMixin.prototype.getTextColor = function (isEmphasis) {\n    var ecModel = this.ecModel;\n    return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\n  };\n  /**\n   * Create font string from fontStyle, fontWeight, fontSize, fontFamily\n   * @return {string}\n   */\n  TextStyleMixin.prototype.getFont = function () {\n    return getFont({\n      fontStyle: this.getShallow('fontStyle'),\n      fontWeight: this.getShallow('fontWeight'),\n      fontSize: this.getShallow('fontSize'),\n      fontFamily: this.getShallow('fontFamily')\n    }, this.ecModel);\n  };\n  TextStyleMixin.prototype.getTextRect = function (text) {\n    var style = {\n      text: text,\n      verticalAlign: this.getShallow('verticalAlign') || this.getShallow('baseline')\n    };\n    for (var i = 0; i < textStyleParams.length; i++) {\n      style[textStyleParams[i]] = this.getShallow(textStyleParams[i]);\n    }\n    tmpText.useStyle(style);\n    tmpText.update();\n    return tmpText.getBoundingRect();\n  };\n  return TextStyleMixin;\n}();\n;\nexport default TextStyleMixin;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var LINE_STYLE_KEY_MAP = [['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'type'], ['lineDashOffset', 'dashOffset'], ['lineCap', 'cap'], ['lineJoin', 'join'], ['miterLimit']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);\nvar LineStyleMixin = /** @class */function () {\n  function LineStyleMixin() {}\n  LineStyleMixin.prototype.getLineStyle = function (excludes) {\n    return getLineStyle(this, excludes);\n  };\n  return LineStyleMixin;\n}();\n;\nexport { LineStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var ITEM_STYLE_KEY_MAP = [['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'borderType'], ['lineDashOffset', 'borderDashOffset'], ['lineCap', 'borderCap'], ['lineJoin', 'borderJoin'], ['miterLimit', 'borderMiterLimit']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);\nvar ItemStyleMixin = /** @class */function () {\n  function ItemStyleMixin() {}\n  ItemStyleMixin.prototype.getItemStyle = function (excludes, includes) {\n    return getItemStyle(this, excludes, includes);\n  };\n  return ItemStyleMixin;\n}();\nexport { ItemStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport env from 'zrender/lib/core/env.js';\nimport { enableClassExtend, enableClassCheck } from '../util/clazz.js';\nimport { AreaStyleMixin } from './mixin/areaStyle.js';\nimport TextStyleMixin from './mixin/textStyle.js';\nimport { LineStyleMixin } from './mixin/lineStyle.js';\nimport { ItemStyleMixin } from './mixin/itemStyle.js';\nimport { mixin, clone, merge } from 'zrender/lib/core/util.js';\nvar Model = /** @class */function () {\n  function Model(option, parentModel, ecModel) {\n    this.parentModel = parentModel;\n    this.ecModel = ecModel;\n    this.option = option;\n    // Simple optimization\n    // if (this.init) {\n    //     if (arguments.length <= 4) {\n    //         this.init(option, parentModel, ecModel, extraOpt);\n    //     }\n    //     else {\n    //         this.init.apply(this, arguments);\n    //     }\n    // }\n  }\n  Model.prototype.init = function (option, parentModel, ecModel) {\n    var rest = [];\n    for (var _i = 3; _i < arguments.length; _i++) {\n      rest[_i - 3] = arguments[_i];\n    }\n  };\n  /**\n   * Merge the input option to me.\n   */\n  Model.prototype.mergeOption = function (option, ecModel) {\n    merge(this.option, option, true);\n  };\n  // `path` can be 'a.b.c', so the return value type have to be `ModelOption`\n  // TODO: TYPE strict key check?\n  // get(path: string | string[], ignoreParent?: boolean): ModelOption;\n  Model.prototype.get = function (path, ignoreParent) {\n    if (path == null) {\n      return this.option;\n    }\n    return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);\n  };\n  Model.prototype.getShallow = function (key, ignoreParent) {\n    var option = this.option;\n    var val = option == null ? option : option[key];\n    if (val == null && !ignoreParent) {\n      var parentModel = this.parentModel;\n      if (parentModel) {\n        // FIXME:TS do not know how to make it works\n        val = parentModel.getShallow(key);\n      }\n    }\n    return val;\n  };\n  // `path` can be 'a.b.c', so the return value type have to be `Model<ModelOption>`\n  // getModel(path: string | string[], parentModel?: Model): Model;\n  // TODO 'a.b.c' is deprecated\n  Model.prototype.getModel = function (path, parentModel) {\n    var hasPath = path != null;\n    var pathFinal = hasPath ? this.parsePath(path) : null;\n    var obj = hasPath ? this._doGet(pathFinal) : this.option;\n    parentModel = parentModel || this.parentModel && this.parentModel.getModel(this.resolveParentPath(pathFinal));\n    return new Model(obj, parentModel, this.ecModel);\n  };\n  /**\n   * If model has option\n   */\n  Model.prototype.isEmpty = function () {\n    return this.option == null;\n  };\n  Model.prototype.restoreData = function () {};\n  // Pending\n  Model.prototype.clone = function () {\n    var Ctor = this.constructor;\n    return new Ctor(clone(this.option));\n  };\n  // setReadOnly(properties): void {\n  // clazzUtil.setReadOnly(this, properties);\n  // }\n  // If path is null/undefined, return null/undefined.\n  Model.prototype.parsePath = function (path) {\n    if (typeof path === 'string') {\n      return path.split('.');\n    }\n    return path;\n  };\n  // Resolve path for parent. Perhaps useful when parent use a different property.\n  // Default to be a identity resolver.\n  // Can be modified to a different resolver.\n  Model.prototype.resolveParentPath = function (path) {\n    return path;\n  };\n  // FIXME:TS check whether put this method here\n  Model.prototype.isAnimationEnabled = function () {\n    if (!env.node && this.option) {\n      if (this.option.animation != null) {\n        return !!this.option.animation;\n      } else if (this.parentModel) {\n        return this.parentModel.isAnimationEnabled();\n      }\n    }\n  };\n  Model.prototype._doGet = function (pathArr, parentModel) {\n    var obj = this.option;\n    if (!pathArr) {\n      return obj;\n    }\n    for (var i = 0; i < pathArr.length; i++) {\n      // Ignore empty\n      if (!pathArr[i]) {\n        continue;\n      }\n      // obj could be number/string/... (like 0)\n      obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\n      if (obj == null) {\n        break;\n      }\n    }\n    if (obj == null && parentModel) {\n      obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);\n    }\n    return obj;\n  };\n  return Model;\n}();\n;\n// Enable Model.extend.\nenableClassExtend(Model);\nenableClassCheck(Model);\nmixin(Model, LineStyleMixin);\nmixin(Model, ItemStyleMixin);\nmixin(Model, AreaStyleMixin);\nmixin(Model, TextStyleMixin);\nexport default Model;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\nimport { makePrintable } from './log.js';\n// A random offset\nvar base = Math.round(Math.random() * 10);\n/**\n * @public\n * @param {string} type\n * @return {string}\n */\nexport function getUID(type) {\n  // Considering the case of crossing js context,\n  // use Math.random to make id as unique as possible.\n  return [type || '', base++].join('_');\n}\n/**\n * Implements `SubTypeDefaulterManager` for `target`.\n */\nexport function enableSubTypeDefaulter(target) {\n  var subTypeDefaulters = {};\n  target.registerSubTypeDefaulter = function (componentType, defaulter) {\n    var componentTypeInfo = parseClassType(componentType);\n    subTypeDefaulters[componentTypeInfo.main] = defaulter;\n  };\n  target.determineSubType = function (componentType, option) {\n    var type = option.type;\n    if (!type) {\n      var componentTypeMain = parseClassType(componentType).main;\n      if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n        type = subTypeDefaulters[componentTypeMain](option);\n      }\n    }\n    return type;\n  };\n}\n/**\n * Implements `TopologicalTravelable<any>` for `entity`.\n *\n * Topological travel on Activity Network (Activity On Vertices).\n * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\n * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\n * If there is circular dependencey, Error will be thrown.\n */\nexport function enableTopologicalTravel(entity, dependencyGetter) {\n  /**\n   * @param targetNameList Target Component type list.\n   *                       Can be ['aa', 'bb', 'aa.xx']\n   * @param fullNameList By which we can build dependency graph.\n   * @param callback Params: componentType, dependencies.\n   * @param context Scope of callback.\n   */\n  entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n    if (!targetNameList.length) {\n      return;\n    }\n    var result = makeDepndencyGraph(fullNameList);\n    var graph = result.graph;\n    var noEntryList = result.noEntryList;\n    var targetNameSet = {};\n    zrUtil.each(targetNameList, function (name) {\n      targetNameSet[name] = true;\n    });\n    while (noEntryList.length) {\n      var currComponentType = noEntryList.pop();\n      var currVertex = graph[currComponentType];\n      var isInTargetNameSet = !!targetNameSet[currComponentType];\n      if (isInTargetNameSet) {\n        callback.call(context, currComponentType, currVertex.originalDeps.slice());\n        delete targetNameSet[currComponentType];\n      }\n      zrUtil.each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n    }\n    zrUtil.each(targetNameSet, function () {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Circular dependency may exists: ', targetNameSet, targetNameList, fullNameList);\n      }\n      throw new Error(errMsg);\n    });\n    function removeEdge(succComponentType) {\n      graph[succComponentType].entryCount--;\n      if (graph[succComponentType].entryCount === 0) {\n        noEntryList.push(succComponentType);\n      }\n    }\n    // Consider this case: legend depends on series, and we call\n    // chart.setOption({series: [...]}), where only series is in option.\n    // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n    // not be called, but only sereis.mergeOption is called. Thus legend\n    // have no chance to update its local record about series (like which\n    // name of series is available in legend).\n    function removeEdgeAndAdd(succComponentType) {\n      targetNameSet[succComponentType] = true;\n      removeEdge(succComponentType);\n    }\n  };\n  function makeDepndencyGraph(fullNameList) {\n    var graph = {};\n    var noEntryList = [];\n    zrUtil.each(fullNameList, function (name) {\n      var thisItem = createDependencyGraphItem(graph, name);\n      var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n      thisItem.entryCount = availableDeps.length;\n      if (thisItem.entryCount === 0) {\n        noEntryList.push(name);\n      }\n      zrUtil.each(availableDeps, function (dependentName) {\n        if (zrUtil.indexOf(thisItem.predecessor, dependentName) < 0) {\n          thisItem.predecessor.push(dependentName);\n        }\n        var thatItem = createDependencyGraphItem(graph, dependentName);\n        if (zrUtil.indexOf(thatItem.successor, dependentName) < 0) {\n          thatItem.successor.push(name);\n        }\n      });\n    });\n    return {\n      graph: graph,\n      noEntryList: noEntryList\n    };\n  }\n  function createDependencyGraphItem(graph, name) {\n    if (!graph[name]) {\n      graph[name] = {\n        predecessor: [],\n        successor: []\n      };\n    }\n    return graph[name];\n  }\n  function getAvailableDependencies(originalDeps, fullNameList) {\n    var availableDeps = [];\n    zrUtil.each(originalDeps, function (dep) {\n      zrUtil.indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n    });\n    return availableDeps;\n  }\n}\nexport function inheritDefaultOption(superOption, subOption) {\n  // See also `model/Component.ts#getDefaultOption`\n  return zrUtil.merge(zrUtil.merge({}, superOption, true), subOption, true);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/**\n * Language: English.\n */\nexport default {\n  time: {\n    month: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    monthAbbr: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    dayOfWeek: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    dayOfWeekAbbr: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n  },\n  legend: {\n    selector: {\n      all: 'All',\n      inverse: 'Inv'\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: 'Box Select',\n        polygon: 'Lasso Select',\n        lineX: 'Horizontally Select',\n        lineY: 'Vertically Select',\n        keep: 'Keep Selections',\n        clear: 'Clear Selections'\n      }\n    },\n    dataView: {\n      title: 'Data View',\n      lang: ['Data View', 'Close', 'Refresh']\n    },\n    dataZoom: {\n      title: {\n        zoom: 'Zoom',\n        back: 'Zoom Reset'\n      }\n    },\n    magicType: {\n      title: {\n        line: 'Switch to Line Chart',\n        bar: 'Switch to Bar Chart',\n        stack: 'Stack',\n        tiled: 'Tile'\n      }\n    },\n    restore: {\n      title: 'Restore'\n    },\n    saveAsImage: {\n      title: 'Save as Image',\n      lang: ['Right Click to Save Image']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: 'Pie chart',\n      bar: 'Bar chart',\n      line: 'Line chart',\n      scatter: 'Scatter plot',\n      effectScatter: 'Ripple scatter plot',\n      radar: 'Radar chart',\n      tree: 'Tree',\n      treemap: 'Treemap',\n      boxplot: 'Boxplot',\n      candlestick: 'Candlestick',\n      k: 'K line chart',\n      heatmap: 'Heat map',\n      map: 'Map',\n      parallel: 'Parallel coordinate map',\n      lines: 'Line graph',\n      graph: 'Relationship graph',\n      sankey: 'Sankey diagram',\n      funnel: 'Funnel chart',\n      gauge: 'Gauge',\n      pictorialBar: 'Pictorial bar',\n      themeRiver: 'Theme River Map',\n      sunburst: 'Sunburst',\n      custom: 'Custom chart',\n      chart: 'Chart'\n    }\n  },\n  aria: {\n    general: {\n      withTitle: 'This is a chart about \"{title}\"',\n      withoutTitle: 'This is a chart'\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: ' with type {seriesType} named {seriesName}.',\n        withoutName: ' with type {seriesType}.'\n      },\n      multiple: {\n        prefix: '. It consists of {seriesCount} series count.',\n        withName: ' The {seriesId} series is a {seriesType} representing {seriesName}.',\n        withoutName: ' The {seriesId} series is a {seriesType}.',\n        separator: {\n          middle: '',\n          end: ''\n        }\n      }\n    },\n    data: {\n      allData: 'The data is as follows: ',\n      partialData: 'The first {displayCnt} items are: ',\n      withName: 'the data for {name} is {value}',\n      withoutName: '{value}',\n      separator: {\n        middle: ', ',\n        end: '. '\n      }\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nexport default {\n  time: {\n    month: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],\n    monthAbbr: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n    dayOfWeek: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'],\n    dayOfWeekAbbr: ['日', '一', '二', '三', '四', '五', '六']\n  },\n  legend: {\n    selector: {\n      all: '全选',\n      inverse: '反选'\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: '矩形选择',\n        polygon: '圈选',\n        lineX: '横向选择',\n        lineY: '纵向选择',\n        keep: '保持选择',\n        clear: '清除选择'\n      }\n    },\n    dataView: {\n      title: '数据视图',\n      lang: ['数据视图', '关闭', '刷新']\n    },\n    dataZoom: {\n      title: {\n        zoom: '区域缩放',\n        back: '区域缩放还原'\n      }\n    },\n    magicType: {\n      title: {\n        line: '切换为折线图',\n        bar: '切换为柱状图',\n        stack: '切换为堆叠',\n        tiled: '切换为平铺'\n      }\n    },\n    restore: {\n      title: '还原'\n    },\n    saveAsImage: {\n      title: '保存为图片',\n      lang: ['右键另存为图片']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: '饼图',\n      bar: '柱状图',\n      line: '折线图',\n      scatter: '散点图',\n      effectScatter: '涟漪散点图',\n      radar: '雷达图',\n      tree: '树图',\n      treemap: '矩形树图',\n      boxplot: '箱型图',\n      candlestick: 'K线图',\n      k: 'K线图',\n      heatmap: '热力图',\n      map: '地图',\n      parallel: '平行坐标图',\n      lines: '线图',\n      graph: '关系图',\n      sankey: '桑基图',\n      funnel: '漏斗图',\n      gauge: '仪表盘图',\n      pictorialBar: '象形柱图',\n      themeRiver: '主题河流图',\n      sunburst: '旭日图',\n      custom: '自定义图表',\n      chart: '图表'\n    }\n  },\n  aria: {\n    general: {\n      withTitle: '这是一个关于“{title}”的图表。',\n      withoutTitle: '这是一个图表，'\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: '图表类型是{seriesType}，表示{seriesName}。',\n        withoutName: '图表类型是{seriesType}。'\n      },\n      multiple: {\n        prefix: '它由{seriesCount}个图表系列组成。',\n        withName: '第{seriesId}个系列是一个表示{seriesName}的{seriesType}，',\n        withoutName: '第{seriesId}个系列是一个{seriesType}，',\n        separator: {\n          middle: '；',\n          end: '。'\n        }\n      }\n    },\n    data: {\n      allData: '其数据是——',\n      partialData: '其中，前{displayCnt}项是——',\n      withName: '{name}的数据是{value}',\n      withoutName: '{value}',\n      separator: {\n        middle: '，',\n        end: ''\n      }\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Model from '../model/Model.js';\nimport env from 'zrender/lib/core/env.js';\n// default import ZH and EN lang\nimport langEN from '../i18n/langEN.js';\nimport langZH from '../i18n/langZH.js';\nimport { isString, clone, merge } from 'zrender/lib/core/util.js';\nvar LOCALE_ZH = 'ZH';\nvar LOCALE_EN = 'EN';\nvar DEFAULT_LOCALE = LOCALE_EN;\nvar localeStorage = {};\nvar localeModels = {};\nexport var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : function () {\n  var langStr = (/* eslint-disable-next-line */\n  document.documentElement.lang || navigator.language || navigator.browserLanguage || DEFAULT_LOCALE).toUpperCase();\n  return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\n}();\nexport function registerLocale(locale, localeObj) {\n  locale = locale.toUpperCase();\n  localeModels[locale] = new Model(localeObj);\n  localeStorage[locale] = localeObj;\n}\n// export function getLocale(locale: string) {\n//     return localeStorage[locale];\n// }\nexport function createLocaleObject(locale) {\n  if (isString(locale)) {\n    var localeObj = localeStorage[locale.toUpperCase()] || {};\n    if (locale === LOCALE_ZH || locale === LOCALE_EN) {\n      return clone(localeObj);\n    } else {\n      return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\n    }\n  } else {\n    return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\n  }\n}\nexport function getLocaleModel(lang) {\n  return localeModels[lang];\n}\nexport function getDefaultLocaleModel() {\n  return localeModels[DEFAULT_LOCALE];\n}\n// Default locale\nregisterLocale(LOCALE_EN, langEN);\nregisterLocale(LOCALE_ZH, langZH);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n;\nvar _impl = null;\nexport function registerScaleBreakHelperImpl(impl) {\n  if (!_impl) {\n    _impl = impl;\n  }\n}\nexport function getScaleBreakHelper() {\n  return _impl;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from './number.js';\nimport { getDefaultLocaleModel, getLocaleModel, SYSTEM_LANG } from '../core/locale.js';\nimport Model from '../model/Model.js';\nimport { getScaleBreakHelper } from '../scale/break.js';\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = ONE_SECOND * 60;\nexport var ONE_HOUR = ONE_MINUTE * 60;\nexport var ONE_DAY = ONE_HOUR * 24;\nexport var ONE_YEAR = ONE_DAY * 365;\nvar primaryTimeUnitFormatterMatchers = {\n  year: /({yyyy}|{yy})/,\n  month: /({MMMM}|{MMM}|{MM}|{M})/,\n  day: /({dd}|{d})/,\n  hour: /({HH}|{H}|{hh}|{h})/,\n  minute: /({mm}|{m})/,\n  second: /({ss}|{s})/,\n  millisecond: /({SSS}|{S})/\n};\nvar defaultFormatterSeed = {\n  year: '{yyyy}',\n  month: '{MMM}',\n  day: '{d}',\n  hour: '{HH}:{mm}',\n  minute: '{HH}:{mm}',\n  second: '{HH}:{mm}:{ss}',\n  millisecond: '{HH}:{mm}:{ss} {SSS}'\n};\nvar defaultFullFormatter = '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}';\nvar fullDayFormatter = '{yyyy}-{MM}-{dd}';\nexport var fullLeveledFormatter = {\n  year: '{yyyy}',\n  month: '{yyyy}-{MM}',\n  day: fullDayFormatter,\n  hour: fullDayFormatter + ' ' + defaultFormatterSeed.hour,\n  minute: fullDayFormatter + ' ' + defaultFormatterSeed.minute,\n  second: fullDayFormatter + ' ' + defaultFormatterSeed.second,\n  millisecond: defaultFullFormatter\n};\n// Order must be ensured from big to small.\nexport var primaryTimeUnits = ['year', 'month', 'day', 'hour', 'minute', 'second', 'millisecond'];\nexport var timeUnits = ['year', 'half-year', 'quarter', 'month', 'week', 'half-week', 'day', 'half-day', 'quarter-day', 'hour', 'minute', 'second', 'millisecond'];\nexport function parseTimeAxisLabelFormatter(formatter) {\n  // Keep the logic the same with function `leveledFormat`.\n  return !zrUtil.isString(formatter) && !zrUtil.isFunction(formatter) ? parseTimeAxisLabelFormatterDictionary(formatter) : formatter;\n}\n/**\n * The final generated dictionary is like:\n *  generated_dict = {\n *      year: {\n *          year: ['{yyyy}', ...<higher_levels_if_any>]\n *      },\n *      month: {\n *          year: ['{yyyy} {MMM}', ...<higher_levels_if_any>],\n *          month: ['{MMM}', ...<higher_levels_if_any>]\n *      },\n *      day: {\n *          year: ['{yyyy} {MMM} {d}', ...<higher_levels_if_any>],\n *          month: ['{MMM} {d}', ...<higher_levels_if_any>],\n *          day: ['{d}', ...<higher_levels_if_any>]\n *      },\n *      ...\n *  }\n *\n * In echarts option, users can specify the entire dictionary or typically just:\n *  {formatter: {\n *      year: '{yyyy}', // Or an array of leveled templates: `['{yyyy}', '{bold1|{yyyy}}', ...]`,\n *                      // corresponding to `[level0, level1, level2, ...]`.\n *      month: '{MMM}',\n *      day: '{d}',\n *      hour: '{HH}:{mm}',\n *      second: '{HH}:{mm}',\n *      ...\n *  }}\n *  If any time unit is not specified in echarts option, the default template is used,\n *  such as `['{yyyy}', {primary|{yyyy}']`.\n *\n * The `tick.level` is only used to read string from each array, meaning the style type.\n *\n * Let `lowerUnit = getUnitFromValue(tick.value)`.\n * The non-break axis ticks only use `generated_dict[lowerUnit][lowerUnit][level]`.\n * The break axis ticks may use `generated_dict[lowerUnit][upperUnit][level]`, because:\n *  Consider the case: the non-break ticks are `16th, 23th, Feb, 7th, ...`, where `Feb` is in the break\n *  range and pruned by breaks, and the break ends might be in lower time unit than day. e.g., break start\n *  is `Jan 25th 18:00`(in unit `hour`) and break end is `Feb 6th 18:30` (in unit `minute`). Thus the break\n *  label prefers `Jan 25th 18:00` and `Feb 6th 18:30` rather than only `18:00` and `18:30`, otherwise it\n *  causes misleading.\n *  In this case, the tick of the break start and end will both be:\n *      `{level: 1, lowerTimeUnit: 'minute', upperTimeUnit: 'month'}`\n *  And get the final template by `generated_dict[lowerTimeUnit][upperTimeUnit][level]`.\n *  Note that the time unit can not be calculated directly by a single tick value, since the two breaks have\n *  to be at the same time unit to avoid awkward appearance. i.e., `Jan 25th 18:00` is in the time unit \"hour\"\n *  but we need it to be \"minute\", following `Feb 6th 18:30`.\n */\nfunction parseTimeAxisLabelFormatterDictionary(dictOption) {\n  dictOption = dictOption || {};\n  var dict = {};\n  // Currently if any template is specified by user, it may contain rich text tag,\n  // such as `'{my_bold|{YYYY}}'`, thus we do add highlight style to it.\n  // (Note that nested tag (`'{some|{some2|xxx}}'`) in rich text is not supported yet.)\n  var canAddHighlight = true;\n  zrUtil.each(primaryTimeUnits, function (lowestUnit) {\n    canAddHighlight && (canAddHighlight = dictOption[lowestUnit] == null);\n  });\n  zrUtil.each(primaryTimeUnits, function (lowestUnit, lowestUnitIdx) {\n    var upperDictOption = dictOption[lowestUnit];\n    dict[lowestUnit] = {};\n    var lowerTpl = null;\n    for (var upperUnitIdx = lowestUnitIdx; upperUnitIdx >= 0; upperUnitIdx--) {\n      var upperUnit = primaryTimeUnits[upperUnitIdx];\n      var upperDictItemOption = zrUtil.isObject(upperDictOption) && !zrUtil.isArray(upperDictOption) ? upperDictOption[upperUnit] : upperDictOption;\n      var tplArr = void 0;\n      if (zrUtil.isArray(upperDictItemOption)) {\n        tplArr = upperDictItemOption.slice();\n        lowerTpl = tplArr[0] || '';\n      } else if (zrUtil.isString(upperDictItemOption)) {\n        lowerTpl = upperDictItemOption;\n        tplArr = [lowerTpl];\n      } else {\n        if (lowerTpl == null) {\n          lowerTpl = defaultFormatterSeed[lowestUnit];\n        }\n        // Generate the dict by the rule as follows:\n        // If the user specify (or by default):\n        //  {formatter: {\n        //      year: '{yyyy}',\n        //      month: '{MMM}',\n        //      day: '{d}',\n        //      ...\n        //  }}\n        // Concat them to make the final dictionary:\n        //  {formatter: {\n        //      year: {year: ['{yyyy}']},\n        //      month: {year: ['{yyyy} {MMM}'], month: ['{MMM}']},\n        //      day: {year: ['{yyyy} {MMM} {d}'], month: ['{MMM} {d}'], day: ['{d}']}\n        //      ...\n        //  }}\n        // And then add `{primary|...}` to each array if from default template.\n        // This strategy is convinient for user configurating and works for most cases.\n        // If bad cases encountered, users can specify the entire dictionary themselves\n        // instead of going through this logic.\n        else if (!primaryTimeUnitFormatterMatchers[upperUnit].test(lowerTpl)) {\n          lowerTpl = dict[upperUnit][upperUnit][0] + \" \" + lowerTpl;\n        }\n        tplArr = [lowerTpl];\n        if (canAddHighlight) {\n          tplArr[1] = \"{primary|\" + lowerTpl + \"}\";\n        }\n      }\n      dict[lowestUnit][upperUnit] = tplArr;\n    }\n  });\n  return dict;\n}\nexport function pad(str, len) {\n  str += '';\n  return '0000'.substr(0, len - str.length) + str;\n}\nexport function getPrimaryTimeUnit(timeUnit) {\n  switch (timeUnit) {\n    case 'half-year':\n    case 'quarter':\n      return 'month';\n    case 'week':\n    case 'half-week':\n      return 'day';\n    case 'half-day':\n    case 'quarter-day':\n      return 'hour';\n    default:\n      // year, minutes, second, milliseconds\n      return timeUnit;\n  }\n}\nexport function isPrimaryTimeUnit(timeUnit) {\n  return timeUnit === getPrimaryTimeUnit(timeUnit);\n}\nexport function getDefaultFormatPrecisionOfInterval(timeUnit) {\n  switch (timeUnit) {\n    case 'year':\n    case 'month':\n      return 'day';\n    case 'millisecond':\n      return 'millisecond';\n    default:\n      // Also for day, hour, minute, second\n      return 'second';\n  }\n}\nexport function format(\n// Note: The result based on `isUTC` are totally different, which can not be just simply\n// substituted by the result without `isUTC`. So we make the param `isUTC` mandatory.\ntime, template, isUTC, lang) {\n  var date = numberUtil.parseDate(time);\n  var y = date[fullYearGetterName(isUTC)]();\n  var M = date[monthGetterName(isUTC)]() + 1;\n  var q = Math.floor((M - 1) / 3) + 1;\n  var d = date[dateGetterName(isUTC)]();\n  var e = date['get' + (isUTC ? 'UTC' : '') + 'Day']();\n  var H = date[hoursGetterName(isUTC)]();\n  var h = (H - 1) % 12 + 1;\n  var m = date[minutesGetterName(isUTC)]();\n  var s = date[secondsGetterName(isUTC)]();\n  var S = date[millisecondsGetterName(isUTC)]();\n  var a = H >= 12 ? 'pm' : 'am';\n  var A = a.toUpperCase();\n  var localeModel = lang instanceof Model ? lang : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();\n  var timeModel = localeModel.getModel('time');\n  var month = timeModel.get('month');\n  var monthAbbr = timeModel.get('monthAbbr');\n  var dayOfWeek = timeModel.get('dayOfWeek');\n  var dayOfWeekAbbr = timeModel.get('dayOfWeekAbbr');\n  return (template || '').replace(/{a}/g, a + '').replace(/{A}/g, A + '').replace(/{yyyy}/g, y + '').replace(/{yy}/g, pad(y % 100 + '', 2)).replace(/{Q}/g, q + '').replace(/{MMMM}/g, month[M - 1]).replace(/{MMM}/g, monthAbbr[M - 1]).replace(/{MM}/g, pad(M, 2)).replace(/{M}/g, M + '').replace(/{dd}/g, pad(d, 2)).replace(/{d}/g, d + '').replace(/{eeee}/g, dayOfWeek[e]).replace(/{ee}/g, dayOfWeekAbbr[e]).replace(/{e}/g, e + '').replace(/{HH}/g, pad(H, 2)).replace(/{H}/g, H + '').replace(/{hh}/g, pad(h + '', 2)).replace(/{h}/g, h + '').replace(/{mm}/g, pad(m, 2)).replace(/{m}/g, m + '').replace(/{ss}/g, pad(s, 2)).replace(/{s}/g, s + '').replace(/{SSS}/g, pad(S, 3)).replace(/{S}/g, S + '');\n}\nexport function leveledFormat(tick, idx, formatter, lang, isUTC) {\n  var template = null;\n  if (zrUtil.isString(formatter)) {\n    // Single formatter for all units at all levels\n    template = formatter;\n  } else if (zrUtil.isFunction(formatter)) {\n    var extra = {\n      time: tick.time,\n      level: tick.time.level\n    };\n    var scaleBreakHelper = getScaleBreakHelper();\n    if (scaleBreakHelper) {\n      scaleBreakHelper.makeAxisLabelFormatterParamBreak(extra, tick[\"break\"]);\n    }\n    template = formatter(tick.value, idx, extra);\n  } else {\n    var tickTime = tick.time;\n    if (tickTime) {\n      var leveledTplArr = formatter[tickTime.lowerTimeUnit][tickTime.upperTimeUnit];\n      template = leveledTplArr[Math.min(tickTime.level, leveledTplArr.length - 1)] || '';\n    } else {\n      // tick may be from customTicks or timeline therefore no tick.time.\n      var unit = getUnitFromValue(tick.value, isUTC);\n      template = formatter[unit][unit][0];\n    }\n  }\n  return format(new Date(tick.value), template, isUTC, lang);\n}\nexport function getUnitFromValue(value, isUTC) {\n  var date = numberUtil.parseDate(value);\n  var M = date[monthGetterName(isUTC)]() + 1;\n  var d = date[dateGetterName(isUTC)]();\n  var h = date[hoursGetterName(isUTC)]();\n  var m = date[minutesGetterName(isUTC)]();\n  var s = date[secondsGetterName(isUTC)]();\n  var S = date[millisecondsGetterName(isUTC)]();\n  var isSecond = S === 0;\n  var isMinute = isSecond && s === 0;\n  var isHour = isMinute && m === 0;\n  var isDay = isHour && h === 0;\n  var isMonth = isDay && d === 1;\n  var isYear = isMonth && M === 1;\n  if (isYear) {\n    return 'year';\n  } else if (isMonth) {\n    return 'month';\n  } else if (isDay) {\n    return 'day';\n  } else if (isHour) {\n    return 'hour';\n  } else if (isMinute) {\n    return 'minute';\n  } else if (isSecond) {\n    return 'second';\n  } else {\n    return 'millisecond';\n  }\n}\n// export function getUnitValue(\n//     value: number | Date,\n//     unit: TimeUnit,\n//     isUTC: boolean\n// ) : number {\n//     const date = zrUtil.isNumber(value)\n//         ? numberUtil.parseDate(value)\n//         : value;\n//     unit = unit || getUnitFromValue(value, isUTC);\n//     switch (unit) {\n//         case 'year':\n//             return date[fullYearGetterName(isUTC)]();\n//         case 'half-year':\n//             return date[monthGetterName(isUTC)]() >= 6 ? 1 : 0;\n//         case 'quarter':\n//             return Math.floor((date[monthGetterName(isUTC)]() + 1) / 4);\n//         case 'month':\n//             return date[monthGetterName(isUTC)]();\n//         case 'day':\n//             return date[dateGetterName(isUTC)]();\n//         case 'half-day':\n//             return date[hoursGetterName(isUTC)]() / 24;\n//         case 'hour':\n//             return date[hoursGetterName(isUTC)]();\n//         case 'minute':\n//             return date[minutesGetterName(isUTC)]();\n//         case 'second':\n//             return date[secondsGetterName(isUTC)]();\n//         case 'millisecond':\n//             return date[millisecondsGetterName(isUTC)]();\n//     }\n// }\n/**\n * e.g.,\n * If timeUnit is 'year', return the Jan 1st 00:00:00 000 of that year.\n * If timeUnit is 'day', return the 00:00:00 000 of that day.\n *\n * @return The input date.\n */\nexport function roundTime(date, timeUnit, isUTC) {\n  switch (timeUnit) {\n    case 'year':\n      date[monthSetterName(isUTC)](0);\n    case 'month':\n      date[dateSetterName(isUTC)](1);\n    case 'day':\n      date[hoursSetterName(isUTC)](0);\n    case 'hour':\n      date[minutesSetterName(isUTC)](0);\n    case 'minute':\n      date[secondsSetterName(isUTC)](0);\n    case 'second':\n      date[millisecondsSetterName(isUTC)](0);\n  }\n  return date;\n}\nexport function fullYearGetterName(isUTC) {\n  return isUTC ? 'getUTCFullYear' : 'getFullYear';\n}\nexport function monthGetterName(isUTC) {\n  return isUTC ? 'getUTCMonth' : 'getMonth';\n}\nexport function dateGetterName(isUTC) {\n  return isUTC ? 'getUTCDate' : 'getDate';\n}\nexport function hoursGetterName(isUTC) {\n  return isUTC ? 'getUTCHours' : 'getHours';\n}\nexport function minutesGetterName(isUTC) {\n  return isUTC ? 'getUTCMinutes' : 'getMinutes';\n}\nexport function secondsGetterName(isUTC) {\n  return isUTC ? 'getUTCSeconds' : 'getSeconds';\n}\nexport function millisecondsGetterName(isUTC) {\n  return isUTC ? 'getUTCMilliseconds' : 'getMilliseconds';\n}\nexport function fullYearSetterName(isUTC) {\n  return isUTC ? 'setUTCFullYear' : 'setFullYear';\n}\nexport function monthSetterName(isUTC) {\n  return isUTC ? 'setUTCMonth' : 'setMonth';\n}\nexport function dateSetterName(isUTC) {\n  return isUTC ? 'setUTCDate' : 'setDate';\n}\nexport function hoursSetterName(isUTC) {\n  return isUTC ? 'setUTCHours' : 'setHours';\n}\nexport function minutesSetterName(isUTC) {\n  return isUTC ? 'setUTCMinutes' : 'setMinutes';\n}\nexport function secondsSetterName(isUTC) {\n  return isUTC ? 'setUTCSeconds' : 'setSeconds';\n}\nexport function millisecondsSetterName(isUTC) {\n  return isUTC ? 'setUTCMilliseconds' : 'setMilliseconds';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { encodeHTML } from 'zrender/lib/core/dom.js';\nimport { parseDate, isNumeric, numericToNumber } from './number.js';\nimport { format as timeFormat, pad } from './time.js';\nimport { deprecateReplaceLog } from './log.js';\n/**\n * Add a comma each three digit.\n */\nexport function addCommas(x) {\n  if (!isNumeric(x)) {\n    return zrUtil.isString(x) ? x : '-';\n  }\n  var parts = (x + '').split('.');\n  return parts[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (parts.length > 1 ? '.' + parts[1] : '');\n}\nexport function toCamelCase(str, upperCaseFirst) {\n  str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n    return group1.toUpperCase();\n  });\n  if (upperCaseFirst && str) {\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n  }\n  return str;\n}\nexport var normalizeCssArray = zrUtil.normalizeCssArray;\nexport { encodeHTML };\n/**\n * Make value user readable for tooltip and label.\n * \"User readable\":\n *     Try to not print programmer-specific text like NaN, Infinity, null, undefined.\n *     Avoid to display an empty string, which users can not recognize there is\n *     a value and it might look like a bug.\n */\nexport function makeValueReadable(value, valueType, useUTC) {\n  var USER_READABLE_DEFUALT_TIME_PATTERN = '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}';\n  function stringToUserReadable(str) {\n    return str && zrUtil.trim(str) ? str : '-';\n  }\n  function isNumberUserReadable(num) {\n    return !!(num != null && !isNaN(num) && isFinite(num));\n  }\n  var isTypeTime = valueType === 'time';\n  var isValueDate = value instanceof Date;\n  if (isTypeTime || isValueDate) {\n    var date = isTypeTime ? parseDate(value) : value;\n    if (!isNaN(+date)) {\n      return timeFormat(date, USER_READABLE_DEFUALT_TIME_PATTERN, useUTC);\n    } else if (isValueDate) {\n      return '-';\n    }\n    // In other cases, continue to try to display the value in the following code.\n  }\n  if (valueType === 'ordinal') {\n    return zrUtil.isStringSafe(value) ? stringToUserReadable(value) : zrUtil.isNumber(value) ? isNumberUserReadable(value) ? value + '' : '-' : '-';\n  }\n  // By default.\n  var numericResult = numericToNumber(value);\n  return isNumberUserReadable(numericResult) ? addCommas(numericResult) : zrUtil.isStringSafe(value) ? stringToUserReadable(value) : typeof value === 'boolean' ? value + '' : '-';\n}\nvar TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\nvar wrapVar = function (varName, seriesIdx) {\n  return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n};\n/**\n * Template formatter\n * @param {Array.<Object>|Object} paramsList\n */\nexport function formatTpl(tpl, paramsList, encode) {\n  if (!zrUtil.isArray(paramsList)) {\n    paramsList = [paramsList];\n  }\n  var seriesLen = paramsList.length;\n  if (!seriesLen) {\n    return '';\n  }\n  var $vars = paramsList[0].$vars || [];\n  for (var i = 0; i < $vars.length; i++) {\n    var alias = TPL_VAR_ALIAS[i];\n    tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\n  }\n  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n    for (var k = 0; k < $vars.length; k++) {\n      var val = paramsList[seriesIdx][$vars[k]];\n      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n    }\n  }\n  return tpl;\n}\n/**\n * simple Template formatter\n */\nexport function formatTplSimple(tpl, param, encode) {\n  zrUtil.each(param, function (value, key) {\n    tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\n  });\n  return tpl;\n}\nexport function getTooltipMarker(inOpt, extraCssText) {\n  var opt = zrUtil.isString(inOpt) ? {\n    color: inOpt,\n    extraCssText: extraCssText\n  } : inOpt || {};\n  var color = opt.color;\n  var type = opt.type;\n  extraCssText = opt.extraCssText;\n  var renderMode = opt.renderMode || 'html';\n  if (!color) {\n    return '';\n  }\n  if (renderMode === 'html') {\n    return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:'\n    // Only support string\n    + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:4px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\n  } else {\n    // Should better not to auto generate style name by auto-increment number here.\n    // Because this util is usually called in tooltip formatter, which is probably\n    // called repeatedly when mouse move and the auto-increment number increases fast.\n    // Users can make their own style name by theirselves, make it unique and readable.\n    var markerId = opt.markerId || 'markerX';\n    return {\n      renderMode: renderMode,\n      content: '{' + markerId + '|}  ',\n      style: type === 'subItem' ? {\n        width: 4,\n        height: 4,\n        borderRadius: 2,\n        backgroundColor: color\n      } : {\n        width: 10,\n        height: 10,\n        borderRadius: 5,\n        backgroundColor: color\n      }\n    };\n  }\n}\n/**\n * @deprecated Use `time/format` instead.\n * ISO Date format\n * @param {string} tpl\n * @param {number} value\n * @param {boolean} [isUTC=false] Default in local time.\n *           see `module:echarts/scale/Time`\n *           and `module:echarts/util/number#parseDate`.\n * @inner\n */\nexport function formatTime(tpl, value, isUTC) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateReplaceLog('echarts.format.formatTime', 'echarts.time.format');\n  }\n  if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n    tpl = 'MM-dd\\nyyyy';\n  }\n  var date = parseDate(value);\n  var getUTC = isUTC ? 'getUTC' : 'get';\n  var y = date[getUTC + 'FullYear']();\n  var M = date[getUTC + 'Month']() + 1;\n  var d = date[getUTC + 'Date']();\n  var h = date[getUTC + 'Hours']();\n  var m = date[getUTC + 'Minutes']();\n  var s = date[getUTC + 'Seconds']();\n  var S = date[getUTC + 'Milliseconds']();\n  tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', pad(y % 100 + '', 2)).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\n  return tpl;\n}\n/**\n * Capital first\n * @param {string} str\n * @return {string}\n */\nexport function capitalFirst(str) {\n  return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n}\n/**\n * @return Never be null/undefined.\n */\nexport function convertToColorString(color, defaultColor) {\n  defaultColor = defaultColor || 'transparent';\n  return zrUtil.isString(color) ? color : zrUtil.isObject(color) ? color.colorStops && (color.colorStops[0] || {}).color || defaultColor : defaultColor;\n}\nexport { truncateText } from 'zrender/lib/graphic/helper/parseText.js';\n/**\n * open new tab\n * @param link url\n * @param target blank or self\n */\nexport function windowOpen(link, target) {\n  /* global window */\n  if (target === '_blank' || target === 'blank') {\n    var blank = window.open();\n    blank.opener = null;\n    blank.location.href = link;\n  } else {\n    window.open(link, target);\n  }\n}\nexport { getTextRect } from '../legacy/getTextRect.js';","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../util/model.js';\nimport { error } from '../util/log.js';\n/**\n * FIXME:\n * `nonSeriesBoxCoordSysCreators` and `_nonSeriesBoxMasterList` are hardcoded implementations.\n * Regarding \"coord sys layout based on another coord sys\", currently we only exprimentally support one level\n * dpendency, such as, \"grid(cartesian)s can be laid out based on matrix/calendar coord sys.\"\n * But a comprehensive implementation may need to support:\n *  - Recursive dependencies. e.g., a matrix coord sys lays out based on another matrix coord sys.\n *    That requires in the implementation `create` and `update` of coord sys are called by a dependency graph.\n *    (@see enableTopologicalTravel in `util/component.ts`)\n */\nvar nonSeriesBoxCoordSysCreators = {};\nvar normalCoordSysCreators = {};\nvar CoordinateSystemManager = /** @class */function () {\n  function CoordinateSystemManager() {\n    this._normalMasterList = [];\n    this._nonSeriesBoxMasterList = [];\n  }\n  /**\n   * Typically,\n   *  - in `create`, a coord sys lays out based on a given rect;\n   *  - in `update`, update the pixel and data extent of there axes (if any) based on processed `series.data`.\n   * After that, a coord sys can serve (typically by `dataToPoint`/`dataToLayout`/`pointToData`).\n   * If the coordinate system do not lay out based on `series.data`, `update` is not needed.\n   */\n  CoordinateSystemManager.prototype.create = function (ecModel, api) {\n    this._nonSeriesBoxMasterList = dealCreate(nonSeriesBoxCoordSysCreators, true);\n    this._normalMasterList = dealCreate(normalCoordSysCreators, false);\n    function dealCreate(creatorMap, canBeNonSeriesBox) {\n      var coordinateSystems = [];\n      zrUtil.each(creatorMap, function (creator, type) {\n        var list = creator.create(ecModel, api);\n        coordinateSystems = coordinateSystems.concat(list || []);\n        if (process.env.NODE_ENV !== 'production') {\n          if (canBeNonSeriesBox) {\n            // Disallow `update` is a brutal way to ensure `_nonSeriesBoxMasterList`s are ready to\n            // serve after `create`. But if `update` has to be involved in `_nonSeriesBoxMasterList`\n            // for some future case, more complicated mechanisms need to be introduced.\n            zrUtil.each(list, function (master) {\n              return zrUtil.assert(!master.update);\n            });\n          }\n        }\n      });\n      return coordinateSystems;\n    }\n  };\n  /**\n   * @see CoordinateSystem['create']\n   */\n  CoordinateSystemManager.prototype.update = function (ecModel, api) {\n    zrUtil.each(this._normalMasterList, function (coordSys) {\n      coordSys.update && coordSys.update(ecModel, api);\n    });\n  };\n  CoordinateSystemManager.prototype.getCoordinateSystems = function () {\n    return this._normalMasterList.concat(this._nonSeriesBoxMasterList);\n  };\n  CoordinateSystemManager.register = function (type, creator) {\n    if (type === 'matrix' || type === 'calendar') {\n      // FIXME: hardcode, @see nonSeriesBoxCoordSysCreators\n      nonSeriesBoxCoordSysCreators[type] = creator;\n      return;\n    }\n    normalCoordSysCreators[type] = creator;\n  };\n  CoordinateSystemManager.get = function (type) {\n    return normalCoordSysCreators[type] || nonSeriesBoxCoordSysCreators[type];\n  };\n  return CoordinateSystemManager;\n}();\nfunction canBeNonSeriesBoxCoordSys(coordSysType) {\n  return !!nonSeriesBoxCoordSysCreators[coordSysType];\n}\nexport var BoxCoordinateSystemCoordFrom = {\n  // By default fetch coord from `model.get('coord')`.\n  coord: 1,\n  // Some model/series, such as pie, is allowed to also get coord from `model.get('center')`,\n  // if cannot get from `model.get('coord')`. But historically pie use `center` option, but\n  // geo use `layoutCenter` option to specify layout center; they are not able to be unified.\n  // Therefor it is not recommended.\n  coord2: 2\n};\n/**\n * @see_also `createBoxLayoutReference`\n * @see_also `injectCoordSysByOption`\n */\nexport function registerLayOutOnCoordSysUsage(opt) {\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(!coordSysUseMap.get(opt.fullType));\n  }\n  coordSysUseMap.set(opt.fullType, {\n    getCoord2: undefined\n  }).getCoord2 = opt.getCoord2;\n}\nvar coordSysUseMap = zrUtil.createHashMap();\n/**\n * @return Be an object, but never be NullUndefined.\n */\nexport function getCoordForBoxCoordSys(model) {\n  var coord = model.getShallow('coord', true);\n  var from = BoxCoordinateSystemCoordFrom.coord;\n  if (coord == null) {\n    var store = coordSysUseMap.get(model.type);\n    if (store && store.getCoord2) {\n      from = BoxCoordinateSystemCoordFrom.coord2;\n      coord = store.getCoord2(model);\n    }\n  }\n  return {\n    coord: coord,\n    from: from\n  };\n}\n/**\n * - \"dataCoordSys\": each data item is laid out based on a coord sys.\n * - \"boxCoordSys\": the overall bounding rect or anchor point is calculated based on a coord sys.\n *   e.g.,\n *      grid rect (cartesian rect) is calculate based on matrix/calendar coord sys;\n *      pie center is calculated based on calendar/cartesian;\n *\n * The default value (if not declared in option `coordinateSystemUsage`):\n *  For series, use `dataCoordSys`, since this is the most case and backward compatible.\n *  For non-series components, use `boxCoordSys`, since `dataCoordSys` is not applicable.\n */\nexport var CoordinateSystemUsageKind = {\n  none: 0,\n  dataCoordSys: 1,\n  boxCoordSys: 2\n};\nexport function decideCoordSysUsageKind(\n// Component or series\nmodel, printError) {\n  // For backward compat, still not use `true` in model.get.\n  var coordSysType = model.getShallow('coordinateSystem');\n  var coordSysUsageOption = model.getShallow('coordinateSystemUsage', true);\n  var isDeclaredExplicitly = coordSysUsageOption != null;\n  var kind = CoordinateSystemUsageKind.none;\n  if (coordSysType) {\n    var isSeries = model.mainType === 'series';\n    if (coordSysUsageOption == null) {\n      coordSysUsageOption = isSeries ? 'data' : 'box';\n    }\n    if (coordSysUsageOption === 'data') {\n      kind = CoordinateSystemUsageKind.dataCoordSys;\n      if (!isSeries) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (isDeclaredExplicitly && printError) {\n            error('coordinateSystemUsage \"data\" is not supported in non-series components.');\n          }\n        }\n        kind = CoordinateSystemUsageKind.none;\n      }\n    } else if (coordSysUsageOption === 'box') {\n      kind = CoordinateSystemUsageKind.boxCoordSys;\n      if (!isSeries && !canBeNonSeriesBoxCoordSys(coordSysType)) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (isDeclaredExplicitly && printError) {\n            error(\"coordinateSystem \\\"\" + coordSysType + \"\\\" cannot be used\" + (\" as coordinateSystemUsage \\\"box\\\" for \\\"\" + model.type + \"\\\" yet.\"));\n          }\n        }\n        kind = CoordinateSystemUsageKind.none;\n      }\n    }\n  }\n  return {\n    coordSysType: coordSysType,\n    kind: kind\n  };\n}\n/**\n * These cases are considered:\n *  (A) Most series can use only \"dataCoordSys\", but \"boxCoordSys\" is not applicable:\n *    - e.g., series.heatmap, series.line, series.bar, series.scatter, ...\n *  (B) Some series and most components can use only \"boxCoordSys\", but \"dataCoordSys\" is not applicable:\n *    - e.g., series.pie, series.funnel, ...\n *    - e.g., grid, polar, geo, title, ...\n *  (C) Several series can use both \"boxCoordSys\" and \"dataCoordSys\", even at the same time:\n *    - e.g., series.graph, series.map\n *      - If graph or map series use a \"boxCoordSys\", it creates a internal \"dataCoordSys\" to lay out its data.\n *      - Graph series can use matrix coord sys as either the \"dataCoordSys\" (each item layout on one cell)\n *        or \"boxCoordSys\" (the entire series are layout within one cell).\n *    - To achieve this effect,\n *      `series.coordinateSystemUsage: 'box'` needs to be specified explicitly.\n *\n * Check these echarts option settings:\n *  - If `series: {type: 'bar'}`:\n *      dataCoordSys: \"cartesian2d\", boxCoordSys: \"none\".\n *      (since `coordinateSystem: 'cartesian2d'` is the default option in bar.)\n *  - If `grid: {coordinateSystem: 'matrix'}`\n *      dataCoordSys: \"none\", boxCoordSys: \"matrix\".\n *  - If `series: {type: 'pie', coordinateSystem: 'matrix'}`:\n *      dataCoordSys: \"none\", boxCoordSys: \"matrix\".\n *      (since `coordinateSystemUsage: 'box'` is the default option in pie.)\n *  - If `series: {type: 'graph', coordinateSystem: 'matrix'}`:\n *      dataCoordSys: \"matrix\", boxCoordSys: \"none\"\n *  - If `series: {type: 'graph', coordinateSystem: 'matrix', coordinateSystemUsage: 'box'}`:\n *      dataCoordSys: \"an internal view\", boxCoordSys: \"the internal view is laid out on a matrix\"\n *  - If `series: {type: 'map'}`:\n *      dataCoordSys: \"a internal geo\", boxCoordSys: \"none\"\n *  - If `series: {type: 'map', coordinateSystem: 'geo', geoIndex: 0}`:\n *      dataCoordSys: \"a geo\", boxCoordSys: \"none\"\n *  - If `series: {type: 'map', coordinateSystem: 'matrix'}`:\n *      not_applicable\n *  - If `series: {type: 'map', coordinateSystem: 'matrix', coordinateSystemUsage: 'box'}`:\n *      dataCoordSys: \"an internal geo\", boxCoordSys: \"the internal geo is laid out on a matrix\"\n *\n * @usage\n * For case (A) & (B),\n *  call `injectCoordSysByOption({coordSysType: 'aaa', ...})` once for each series/components.\n * For case (C),\n *  call `injectCoordSysByOption({coordSysType: 'aaa', ...})` once for each series/components,\n *  and then call `injectCoordSysByOption({coordSysType: 'bbb', ..., isDefaultDataCoordSys: true})`\n *  once for each series/components.\n *\n * @return Whether injected.\n */\nexport function injectCoordSysByOption(opt) {\n  var targetModel = opt.targetModel,\n    coordSysType = opt.coordSysType,\n    coordSysProvider = opt.coordSysProvider,\n    isDefaultDataCoordSys = opt.isDefaultDataCoordSys,\n    allowNotFound = opt.allowNotFound;\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(!!coordSysType);\n  }\n  var _a = decideCoordSysUsageKind(targetModel, true),\n    kind = _a.kind,\n    declaredType = _a.coordSysType;\n  if (isDefaultDataCoordSys && kind !== CoordinateSystemUsageKind.dataCoordSys) {\n    // If both dataCoordSys and boxCoordSys declared in one model.\n    // There is the only case in series-graph, and no other cases yet.\n    kind = CoordinateSystemUsageKind.dataCoordSys;\n    declaredType = coordSysType;\n  }\n  if (kind === CoordinateSystemUsageKind.none || declaredType !== coordSysType) {\n    return false;\n  }\n  var coordSys = coordSysProvider(coordSysType, targetModel);\n  if (!coordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!allowNotFound) {\n        error(coordSysType + \" cannot be found for\" + (\" \" + targetModel.type + \" (index: \" + targetModel.componentIndex + \").\"));\n      }\n    }\n    return false;\n  }\n  if (kind === CoordinateSystemUsageKind.dataCoordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(targetModel.mainType === 'series');\n    }\n    targetModel.coordinateSystem = coordSys;\n  } else {\n    // kind === 'boxCoordSys'\n    targetModel.boxCoordinateSystem = coordSys;\n  }\n  return true;\n}\nexport var simpleCoordSysInjectionProvider = function (coordSysType, injectTargetModel) {\n  var coordSysModel = injectTargetModel.getReferringComponents(coordSysType, SINGLE_REFERRING).models[0];\n  return coordSysModel && coordSysModel.coordinateSystem;\n};\nexport default CoordinateSystemManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Layout helpers for each component positioning\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parsePercent } from './number.js';\nimport * as formatUtil from './format.js';\nimport { error } from './log.js';\nimport { BoxCoordinateSystemCoordFrom, getCoordForBoxCoordSys } from '../core/CoordinateSystem.js';\nvar each = zrUtil.each;\n/**\n * @public\n */\nexport var LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n/**\n * @public\n */\nexport var HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\nfunction boxLayout(orient, group, gap, maxWidth, maxHeight) {\n  var x = 0;\n  var y = 0;\n  if (maxWidth == null) {\n    maxWidth = Infinity;\n  }\n  if (maxHeight == null) {\n    maxHeight = Infinity;\n  }\n  var currentLineMaxSize = 0;\n  group.eachChild(function (child, idx) {\n    var rect = child.getBoundingRect();\n    var nextChild = group.childAt(idx + 1);\n    var nextChildRect = nextChild && nextChild.getBoundingRect();\n    var nextX;\n    var nextY;\n    if (orient === 'horizontal') {\n      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n      nextX = x + moveX;\n      // Wrap when width exceeds maxWidth or meet a `newline` group\n      // FIXME compare before adding gap?\n      if (nextX > maxWidth || child.newline) {\n        x = 0;\n        nextX = moveX;\n        y += currentLineMaxSize + gap;\n        currentLineMaxSize = rect.height;\n      } else {\n        // FIXME: consider rect.y is not `0`?\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n      }\n    } else {\n      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n      nextY = y + moveY;\n      // Wrap when width exceeds maxHeight or meet a `newline` group\n      if (nextY > maxHeight || child.newline) {\n        x += currentLineMaxSize + gap;\n        y = 0;\n        nextY = moveY;\n        currentLineMaxSize = rect.width;\n      } else {\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n      }\n    }\n    if (child.newline) {\n      return;\n    }\n    child.x = x;\n    child.y = y;\n    child.markRedraw();\n    orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n  });\n}\n/**\n * VBox or HBox layouting\n * @param {string} orient\n * @param {module:zrender/graphic/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\nexport var box = boxLayout;\n/**\n * VBox layouting\n * @param {module:zrender/graphic/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\nexport var vbox = zrUtil.curry(boxLayout, 'vertical');\n/**\n * HBox layouting\n * @param {module:zrender/graphic/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\nexport var hbox = zrUtil.curry(boxLayout, 'horizontal');\nexport function getBoxLayoutParams(boxLayoutModel, ignoreParent) {\n  return {\n    left: boxLayoutModel.getShallow('left', ignoreParent),\n    top: boxLayoutModel.getShallow('top', ignoreParent),\n    right: boxLayoutModel.getShallow('right', ignoreParent),\n    bottom: boxLayoutModel.getShallow('bottom', ignoreParent),\n    width: boxLayoutModel.getShallow('width', ignoreParent),\n    height: boxLayoutModel.getShallow('height', ignoreParent)\n  };\n}\nfunction getViewRectAndCenterForCircleLayout(seriesModel, api) {\n  var layoutRef = createBoxLayoutReference(seriesModel, api, {\n    enableLayoutOnlyByCenter: true\n  });\n  var boxLayoutParams = seriesModel.getBoxLayoutParams();\n  var viewRect;\n  var center;\n  if (layoutRef.type === BoxLayoutReferenceType.point) {\n    center = layoutRef.refPoint;\n    // `viewRect` is required in `pie/labelLayout.ts`.\n    viewRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  } else {\n    // layoutRef.type === layout.BoxLayoutReferenceType.rect\n    var centerOption = seriesModel.get('center');\n    var centerOptionArr = zrUtil.isArray(centerOption) ? centerOption : [centerOption, centerOption];\n    viewRect = getLayoutRect(boxLayoutParams, layoutRef.refContainer);\n    center = layoutRef.boxCoordFrom === BoxCoordinateSystemCoordFrom.coord2 ? layoutRef.refPoint // option `series.center` has been used as coord.\n    : [parsePercent(centerOptionArr[0], viewRect.width) + viewRect.x, parsePercent(centerOptionArr[1], viewRect.height) + viewRect.y];\n  }\n  return {\n    viewRect: viewRect,\n    center: center\n  };\n}\nexport function getCircleLayout(seriesModel, api) {\n  // center can be string or number when coordinateSystem is specified\n  var _a = getViewRectAndCenterForCircleLayout(seriesModel, api),\n    viewRect = _a.viewRect,\n    center = _a.center;\n  var radius = seriesModel.get('radius');\n  if (!zrUtil.isArray(radius)) {\n    radius = [0, radius];\n  }\n  var width = parsePercent(viewRect.width, api.getWidth());\n  var height = parsePercent(viewRect.height, api.getHeight());\n  var size = Math.min(width, height);\n  var r0 = parsePercent(radius[0], size / 2);\n  var r = parsePercent(radius[1], size / 2);\n  return {\n    cx: center[0],\n    cy: center[1],\n    r0: r0,\n    r: r,\n    viewRect: viewRect\n  };\n}\n/**\n * Parse position info.\n */\nexport function getLayoutRect(positionInfo, containerRect,\n// This is the space from the `containerRect` to the returned bounding rect.\n// Commonly used in option `legend.padding`, `timeline.padding`, `title.padding`,\n//  `visualMap.padding`, ...\n// [NOTICE]:\n//  It's named `margin`, because it's the space that outside the bounding rect. But from\n//  the perspective of the the caller, it's commonly used as the `padding` of a component,\n//  because conventionally background color covers this space.\n// [BEHAVIOR]:\n//  - If width/height is specified, `margin` does not effect them.\n//  - Otherwise, they are calculated based on the rect that `containerRect` shrinked by `margin`.\n//  - left/right/top/bottom are based on the rect that `containerRect` shrinked by `margin`.\nmargin) {\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var left = parsePercent(positionInfo.left, containerWidth);\n  var top = parsePercent(positionInfo.top, containerHeight);\n  var right = parsePercent(positionInfo.right, containerWidth);\n  var bottom = parsePercent(positionInfo.bottom, containerHeight);\n  var width = parsePercent(positionInfo.width, containerWidth);\n  var height = parsePercent(positionInfo.height, containerHeight);\n  var verticalMargin = margin[2] + margin[0];\n  var horizontalMargin = margin[1] + margin[3];\n  var aspect = positionInfo.aspect;\n  // If width is not specified, calculate width from left and right\n  if (isNaN(width)) {\n    width = containerWidth - right - horizontalMargin - left;\n  }\n  if (isNaN(height)) {\n    height = containerHeight - bottom - verticalMargin - top;\n  }\n  if (aspect != null) {\n    // If width and height are not given\n    // 1. Graph should not exceeds the container\n    // 2. Aspect must be keeped\n    // 3. Graph should take the space as more as possible\n    // FIXME\n    // Margin is not considered, because there is no case that both\n    // using margin and aspect so far.\n    if (isNaN(width) && isNaN(height)) {\n      // PENDING: if only `left` or `right` is defined, perhaps it's more preferable to\n      // calculate size based on `containerWidth - left` or `containerWidth - left` here,\n      // but for backward compatibility we do not change it.\n      if (aspect > containerWidth / containerHeight) {\n        width = containerWidth * 0.8;\n      } else {\n        height = containerHeight * 0.8;\n      }\n    }\n    // Calculate width or height with given aspect\n    if (isNaN(width)) {\n      width = aspect * height;\n    }\n    if (isNaN(height)) {\n      height = width / aspect;\n    }\n  }\n  // If left is not specified, calculate left from right and width\n  if (isNaN(left)) {\n    left = containerWidth - right - width - horizontalMargin;\n  }\n  if (isNaN(top)) {\n    top = containerHeight - bottom - height - verticalMargin;\n  }\n  // Align left and top\n  switch (positionInfo.left || positionInfo.right) {\n    case 'center':\n      left = containerWidth / 2 - width / 2 - margin[3];\n      break;\n    case 'right':\n      left = containerWidth - width - horizontalMargin;\n      break;\n  }\n  switch (positionInfo.top || positionInfo.bottom) {\n    case 'middle':\n    case 'center':\n      top = containerHeight / 2 - height / 2 - margin[0];\n      break;\n    case 'bottom':\n      top = containerHeight - height - verticalMargin;\n      break;\n  }\n  // If something is wrong and left, top, width, height are calculated as NaN\n  left = left || 0;\n  top = top || 0;\n  if (isNaN(width)) {\n    // Width may be NaN if only one value is given except width\n    width = containerWidth - horizontalMargin - left - (right || 0);\n  }\n  if (isNaN(height)) {\n    // Height may be NaN if only one value is given except height\n    height = containerHeight - verticalMargin - top - (bottom || 0);\n  }\n  var rect = new BoundingRect((containerRect.x || 0) + left + margin[3], (containerRect.y || 0) + top + margin[0], width, height);\n  rect.margin = margin;\n  return rect;\n}\n/**\n * PENDING:\n *  when preserveAspect: 'cover' and aspect is near Infinity\n *  or when preserveAspect: 'contain' and aspect is near 0,\n *  the result width or height is near Inifity. It's logically correct,\n *  Therefore currently we do not handle it, until bad cases arise.\n */\nexport function applyPreserveAspect(component, layoutRect,\n// That is, `width / height`.\n// Assume `aspect` is positive.\naspect) {\n  var preserveAspect = component.getShallow('preserveAspect', true);\n  if (!preserveAspect) {\n    return layoutRect;\n  }\n  var actualAspect = layoutRect.width / layoutRect.height;\n  if (Math.abs(Math.atan(aspect) - Math.atan(actualAspect)) < 1e-9) {\n    return layoutRect;\n  }\n  var preserveAspectAlign = component.getShallow('preserveAspectAlign', true);\n  var preserveAspectVerticalAlign = component.getShallow('preserveAspectVerticalAlign', true);\n  var layoutOptInner = {\n    width: layoutRect.width,\n    height: layoutRect.height\n  };\n  var isCover = preserveAspect === 'cover';\n  if (actualAspect > aspect && !isCover || actualAspect < aspect && isCover) {\n    layoutOptInner.width = layoutRect.height * aspect;\n    preserveAspectAlign === 'left' ? layoutOptInner.left = 0 : preserveAspectAlign === 'right' ? layoutOptInner.right = 0 : layoutOptInner.left = 'center';\n  } else {\n    layoutOptInner.height = layoutRect.width / aspect;\n    preserveAspectVerticalAlign === 'top' ? layoutOptInner.top = 0 : preserveAspectVerticalAlign === 'bottom' ? layoutOptInner.bottom = 0 : layoutOptInner.top = 'middle';\n  }\n  return getLayoutRect(layoutOptInner, layoutRect);\n}\nexport var BoxLayoutReferenceType = {\n  rect: 1,\n  point: 2\n};\n/**\n * Uniformly calculate layout reference (rect or center) based on either:\n *  - viewport:\n *      - Get `refContainer` as `{x: 0, y: 0, width: api.getWidth(), height: api.getHeight()}`\n *  - coordinate system, which can serve in several ways:\n *      - Use `dataToPoint` to get the `refPoint`, such as, in cartesian2d coord sys.\n *      - Use `dataToLayout` to get the `refContainer`, such as, in matrix coord sys.\n */\nexport function createBoxLayoutReference(model, api, opt) {\n  var refContainer;\n  var refPoint;\n  var layoutRefType;\n  var boxCoordSys = model.boxCoordinateSystem;\n  var boxCoordFrom;\n  if (boxCoordSys) {\n    var _a = getCoordForBoxCoordSys(model),\n      coord = _a.coord,\n      from = _a.from;\n    // Do not use `clamp` in `dataToLayout` and `dataToPoint`, because:\n    //  1. Should support overflow (such as, by dataZoom), where NaN should be in the result.\n    //  2. Be consistent with the way used in `series.data`\n    if (boxCoordSys.dataToLayout) {\n      layoutRefType = BoxLayoutReferenceType.rect;\n      boxCoordFrom = from;\n      var result = boxCoordSys.dataToLayout(coord);\n      refContainer = result.contentRect || result.rect;\n    } else if (opt && opt.enableLayoutOnlyByCenter && boxCoordSys.dataToPoint) {\n      layoutRefType = BoxLayoutReferenceType.point;\n      boxCoordFrom = from;\n      refPoint = boxCoordSys.dataToPoint(coord);\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        error(model.type + \"[\" + model.componentIndex + \"]\" + (\" layout based on \" + boxCoordSys.type + \" is not supported.\"));\n      }\n    }\n  }\n  if (layoutRefType == null) {\n    layoutRefType = BoxLayoutReferenceType.rect;\n  }\n  if (layoutRefType === BoxLayoutReferenceType.rect) {\n    if (!refContainer) {\n      refContainer = {\n        x: 0,\n        y: 0,\n        width: api.getWidth(),\n        height: api.getHeight()\n      };\n    }\n    refPoint = [refContainer.x + refContainer.width / 2, refContainer.y + refContainer.height / 2];\n  }\n  return {\n    type: layoutRefType,\n    refContainer: refContainer,\n    refPoint: refPoint,\n    boxCoordFrom: boxCoordFrom\n  };\n}\n/**\n * Position a zr element in viewport\n *  Group position is specified by either\n *  {left, top}, {right, bottom}\n *  If all properties exists, right and bottom will be igonred.\n *\n * Logic:\n *     1. Scale (against origin point in parent coord)\n *     2. Rotate (against origin point in parent coord)\n *     3. Translate (with el.position by this method)\n * So this method only fixes the last step 'Translate', which does not affect\n * scaling and rotating.\n *\n * If be called repeatedly with the same input el, the same result will be gotten.\n *\n * Return true if the layout happened.\n *\n * @param el Should have `getBoundingRect` method.\n * @param positionInfo\n * @param positionInfo.left\n * @param positionInfo.top\n * @param positionInfo.right\n * @param positionInfo.bottom\n * @param positionInfo.width Only for opt.boundingModel: 'raw'\n * @param positionInfo.height Only for opt.boundingModel: 'raw'\n * @param containerRect\n * @param margin\n * @param opt\n * @param opt.hv Only horizontal or only vertical. Default to be [1, 1]\n * @param opt.boundingMode\n *        Specify how to calculate boundingRect when locating.\n *        'all': Position the boundingRect that is transformed and uioned\n *               both itself and its descendants.\n *               This mode simplies confine the elements in the bounding\n *               of their container (e.g., using 'right: 0').\n *        'raw': Position the boundingRect that is not transformed and only itself.\n *               This mode is useful when you want a element can overflow its\n *               container. (Consider a rotated circle needs to be located in a corner.)\n *               In this mode positionInfo.width/height can only be number.\n */\nexport function positionElement(el, positionInfo, containerRect, margin, opt, out) {\n  var h = !opt || !opt.hv || opt.hv[0];\n  var v = !opt || !opt.hv || opt.hv[1];\n  var boundingMode = opt && opt.boundingMode || 'all';\n  out = out || el;\n  out.x = el.x;\n  out.y = el.y;\n  if (!h && !v) {\n    return false;\n  }\n  var rect;\n  if (boundingMode === 'raw') {\n    rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n  } else {\n    rect = el.getBoundingRect();\n    if (el.needLocalTransform()) {\n      var transform = el.getLocalTransform();\n      // Notice: raw rect may be inner object of el,\n      // which should not be modified.\n      rect = rect.clone();\n      rect.applyTransform(transform);\n    }\n  }\n  // The real width and height can not be specified but calculated by the given el.\n  var layoutRect = getLayoutRect(zrUtil.defaults({\n    width: rect.width,\n    height: rect.height\n  }, positionInfo), containerRect, margin);\n  // Because 'tranlate' is the last step in transform\n  // (see zrender/core/Transformable#getLocalTransform),\n  // we can just only modify el.position to get final result.\n  var dx = h ? layoutRect.x - rect.x : 0;\n  var dy = v ? layoutRect.y - rect.y : 0;\n  if (boundingMode === 'raw') {\n    out.x = dx;\n    out.y = dy;\n  } else {\n    out.x += dx;\n    out.y += dy;\n  }\n  if (out === el) {\n    el.markRedraw();\n  }\n  return true;\n}\n/**\n * @param option Contains some of the properties in HV_NAMES.\n * @param hvIdx 0: horizontal; 1: vertical.\n */\nexport function sizeCalculable(option, hvIdx) {\n  return option[HV_NAMES[hvIdx][0]] != null || option[HV_NAMES[hvIdx][1]] != null && option[HV_NAMES[hvIdx][2]] != null;\n}\nexport function fetchLayoutMode(ins) {\n  var layoutMode = ins.layoutMode || ins.constructor.layoutMode;\n  return zrUtil.isObject(layoutMode) ? layoutMode : layoutMode ? {\n    type: layoutMode\n  } : null;\n}\n/**\n * Consider Case:\n * When default option has {left: 0, width: 100}, and we set {right: 0}\n * through setOption or media query, using normal zrUtil.merge will cause\n * {right: 0} does not take effect.\n *\n * @example\n * ComponentModel.extend({\n *     init: function () {\n *         ...\n *         let inputPositionParams = layout.getLayoutParams(option);\n *         this.mergeOption(inputPositionParams);\n *     },\n *     mergeOption: function (newOption) {\n *         newOption && zrUtil.merge(thisOption, newOption, true);\n *         layout.mergeLayoutParam(thisOption, newOption);\n *     }\n * });\n *\n * @param targetOption\n * @param newOption\n * @param opt\n */\nexport function mergeLayoutParam(targetOption, newOption, opt) {\n  var ignoreSize = opt && opt.ignoreSize;\n  !zrUtil.isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n  var hResult = merge(HV_NAMES[0], 0);\n  var vResult = merge(HV_NAMES[1], 1);\n  copy(HV_NAMES[0], targetOption, hResult);\n  copy(HV_NAMES[1], targetOption, vResult);\n  function merge(names, hvIdx) {\n    var newParams = {};\n    var newValueCount = 0;\n    var merged = {};\n    var mergedValueCount = 0;\n    var enoughParamNumber = 2;\n    each(names, function (name) {\n      merged[name] = targetOption[name];\n    });\n    each(names, function (name) {\n      // Consider case: newOption.width is null, which is\n      // set by user for removing width setting.\n      zrUtil.hasOwn(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n      hasValue(newParams, name) && newValueCount++;\n      hasValue(merged, name) && mergedValueCount++;\n    });\n    if (ignoreSize[hvIdx]) {\n      // Only one of left/right is premitted to exist.\n      if (hasValue(newOption, names[1])) {\n        merged[names[2]] = null;\n      } else if (hasValue(newOption, names[2])) {\n        merged[names[1]] = null;\n      }\n      return merged;\n    }\n    // Case: newOption: {width: ..., right: ...},\n    // or targetOption: {right: ...} and newOption: {width: ...},\n    // There is no conflict when merged only has params count\n    // little than enoughParamNumber.\n    if (mergedValueCount === enoughParamNumber || !newValueCount) {\n      return merged;\n    }\n    // Case: newOption: {width: ..., right: ...},\n    // Than we can make sure user only want those two, and ignore\n    // all origin params in targetOption.\n    else if (newValueCount >= enoughParamNumber) {\n      return newParams;\n    } else {\n      // Chose another param from targetOption by priority.\n      for (var i = 0; i < names.length; i++) {\n        var name_1 = names[i];\n        if (!zrUtil.hasOwn(newParams, name_1) && zrUtil.hasOwn(targetOption, name_1)) {\n          newParams[name_1] = targetOption[name_1];\n          break;\n        }\n      }\n      return newParams;\n    }\n  }\n  function hasValue(obj, name) {\n    return obj[name] != null && obj[name] !== 'auto';\n  }\n  function copy(names, target, source) {\n    each(names, function (name) {\n      target[name] = source[name];\n    });\n  }\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n */\nexport function getLayoutParams(source) {\n  return copyLayoutParams({}, source);\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\nexport function copyLayoutParams(target, source) {\n  source && target && each(LOCATION_PARAMS, function (name) {\n    zrUtil.hasOwn(source, name) && (target[name] = source[name]);\n  });\n  return target;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from './Model.js';\nimport * as componentUtil from '../util/component.js';\nimport { enableClassManagement, parseClassType, isExtendedClass, mountExtend } from '../util/clazz.js';\nimport { makeInner, queryReferringComponents } from '../util/model.js';\nimport * as layout from '../util/layout.js';\nvar inner = makeInner();\nvar ComponentModel = /** @class */function (_super) {\n  __extends(ComponentModel, _super);\n  function ComponentModel(option, parentModel, ecModel) {\n    var _this = _super.call(this, option, parentModel, ecModel) || this;\n    _this.uid = componentUtil.getUID('ec_cpt_model');\n    return _this;\n  }\n  ComponentModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  ComponentModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var layoutMode = layout.fetchLayoutMode(this);\n    var inputPositionParams = layoutMode ? layout.getLayoutParams(option) : {};\n    var themeModel = ecModel.getTheme();\n    zrUtil.merge(option, themeModel.get(this.mainType));\n    zrUtil.merge(option, this.getDefaultOption());\n    if (layoutMode) {\n      layout.mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  };\n  ComponentModel.prototype.mergeOption = function (option, ecModel) {\n    zrUtil.merge(this.option, option, true);\n    var layoutMode = layout.fetchLayoutMode(this);\n    if (layoutMode) {\n      layout.mergeLayoutParam(this.option, option, layoutMode);\n    }\n  };\n  /**\n   * Called immediately after `init` or `mergeOption` of this instance called.\n   */\n  ComponentModel.prototype.optionUpdated = function (newCptOption, isInit) {};\n  /**\n   * [How to declare defaultOption]:\n   *\n   * (A) If using class declaration in typescript (since echarts 5):\n   * ```ts\n   * import {ComponentOption} from '../model/option.js';\n   * export interface XxxOption extends ComponentOption {\n   *     aaa: number\n   * }\n   * export class XxxModel extends Component {\n   *     static type = 'xxx';\n   *     static defaultOption: XxxOption = {\n   *         aaa: 123\n   *     }\n   * }\n   * Component.registerClass(XxxModel);\n   * ```\n   * ```ts\n   * import {inheritDefaultOption} from '../util/component.js';\n   * import {XxxModel, XxxOption} from './XxxModel.js';\n   * export interface XxxSubOption extends XxxOption {\n   *     bbb: number\n   * }\n   * class XxxSubModel extends XxxModel {\n   *     static defaultOption: XxxSubOption = inheritDefaultOption(XxxModel.defaultOption, {\n   *         bbb: 456\n   *     })\n   *     fn() {\n   *         let opt = this.getDefaultOption();\n   *         // opt is {aaa: 123, bbb: 456}\n   *     }\n   * }\n   * ```\n   *\n   * (B) If using class extend (previous approach in echarts 3 & 4):\n   * ```js\n   * let XxxComponent = Component.extend({\n   *     defaultOption: {\n   *         xx: 123\n   *     }\n   * })\n   * ```\n   * ```js\n   * let XxxSubComponent = XxxComponent.extend({\n   *     defaultOption: {\n   *         yy: 456\n   *     },\n   *     fn: function () {\n   *         let opt = this.getDefaultOption();\n   *         // opt is {xx: 123, yy: 456}\n   *     }\n   * })\n   * ```\n   */\n  ComponentModel.prototype.getDefaultOption = function () {\n    var ctor = this.constructor;\n    if (!isExtendedClass(ctor)) {\n      // When using ES class declaration, defaultOption must be declared as static.\n      // And manually inherit the defaultOption from its parent class if needed, such as,\n      //  ```ts\n      //  static defaultOption = inheritDefaultOption(ParentModel.defaultOption, {...});\n      //  ```\n      return ctor.defaultOption;\n    }\n    // FIXME: remove this approach?\n    // Legacy: auto merge defaultOption from ancestor classes if using ParentClass.extend(subProto)\n    var fields = inner(this);\n    if (!fields.defaultOption) {\n      var optList = [];\n      var clz = ctor;\n      while (clz) {\n        var opt = clz.prototype.defaultOption;\n        opt && optList.push(opt);\n        clz = clz.superClass;\n      }\n      var defaultOption = {};\n      for (var i = optList.length - 1; i >= 0; i--) {\n        defaultOption = zrUtil.merge(defaultOption, optList[i], true);\n      }\n      fields.defaultOption = defaultOption;\n    }\n    return fields.defaultOption;\n  };\n  /**\n   * Notice: always force to input param `useDefault` in case that forget to consider it.\n   * The same behavior as `modelUtil.parseFinder`.\n   *\n   * @param useDefault In many cases like series refer axis and axis refer grid,\n   *        If axis index / axis id not specified, use the first target as default.\n   *        In other cases like dataZoom refer axis, if not specified, measn no refer.\n   */\n  ComponentModel.prototype.getReferringComponents = function (mainType, opt) {\n    var indexKey = mainType + 'Index';\n    var idKey = mainType + 'Id';\n    return queryReferringComponents(this.ecModel, mainType, {\n      index: this.get(indexKey, true),\n      id: this.get(idKey, true)\n    }, opt);\n  };\n  ComponentModel.prototype.getBoxLayoutParams = function () {\n    // Consider itself having box layout configs.\n    // For backward compatibility, by default do not `ignoreParent`.\n    return layout.getBoxLayoutParams(this, false);\n  };\n  /**\n   * Get key for zlevel.\n   * If developers don't configure zlevel. We will assign zlevel to series based on the key.\n   * For example, lines with trail effect and progressive series will in an individual zlevel.\n   */\n  ComponentModel.prototype.getZLevelKey = function () {\n    return '';\n  };\n  ComponentModel.prototype.setZLevel = function (zlevel) {\n    this.option.zlevel = zlevel;\n  };\n  ComponentModel.protoInitialize = function () {\n    var proto = ComponentModel.prototype;\n    proto.type = 'component';\n    proto.id = '';\n    proto.name = '';\n    proto.mainType = '';\n    proto.subType = '';\n    proto.componentIndex = 0;\n  }();\n  return ComponentModel;\n}(Model);\nmountExtend(ComponentModel, Model);\nenableClassManagement(ComponentModel);\ncomponentUtil.enableSubTypeDefaulter(ComponentModel);\ncomponentUtil.enableTopologicalTravel(ComponentModel, getDependencies);\nfunction getDependencies(componentType) {\n  var deps = [];\n  zrUtil.each(ComponentModel.getClassesByMainType(componentType), function (clz) {\n    deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);\n  });\n  // Ensure main type.\n  deps = zrUtil.map(deps, function (type) {\n    return parseClassType(type).main;\n  });\n  // Hack dataset for convenience.\n  if (componentType !== 'dataset' && zrUtil.indexOf(deps, 'dataset') <= 0) {\n    deps.unshift('dataset');\n  }\n  return deps;\n}\nexport default ComponentModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nimport { modifyHSL } from 'zrender/lib/tool/color.js';\nvar tokens = {\n  color: {},\n  darkColor: {},\n  size: {}\n};\nvar color = tokens.color = {\n  theme: ['#5070dd', '#b6d634', '#505372', '#ff994d', '#0ca8df', '#ffd10a', '#fb628b', '#785db0', '#3fbe95'],\n  neutral00: '#fff',\n  neutral05: '#f4f7fd',\n  neutral10: '#e8ebf0',\n  neutral15: '#dbdee4',\n  neutral20: '#cfd2d7',\n  neutral25: '#c3c5cb',\n  neutral30: '#b7b9be',\n  neutral35: '#aaacb2',\n  neutral40: '#9ea0a5',\n  neutral45: '#929399',\n  neutral50: '#86878c',\n  neutral55: '#797b7f',\n  neutral60: '#6d6e73',\n  neutral65: '#616266',\n  neutral70: '#54555a',\n  neutral75: '#48494d',\n  neutral80: '#3c3c41',\n  neutral85: '#303034',\n  neutral90: '#232328',\n  neutral95: '#17171b',\n  neutral99: '#000',\n  accent05: '#eff1f9',\n  accent10: '#e0e4f2',\n  accent15: '#d0d6ec',\n  accent20: '#c0c9e6',\n  accent25: '#b1bbdf',\n  accent30: '#a1aed9',\n  accent35: '#91a0d3',\n  accent40: '#8292cc',\n  accent45: '#7285c6',\n  accent50: '#6578ba',\n  accent55: '#5c6da9',\n  accent60: '#536298',\n  accent65: '#4a5787',\n  accent70: '#404c76',\n  accent75: '#374165',\n  accent80: '#2e3654',\n  accent85: '#252b43',\n  accent90: '#1b2032',\n  accent95: '#121521',\n  transparent: 'rgba(0,0,0,0)',\n  highlight: 'rgba(255,231,130,0.8)'\n};\nextend(color, {\n  primary: color.neutral80,\n  secondary: color.neutral70,\n  tertiary: color.neutral60,\n  quaternary: color.neutral50,\n  disabled: color.neutral20,\n  border: color.neutral30,\n  borderTint: color.neutral20,\n  borderShade: color.neutral40,\n  background: color.neutral05,\n  backgroundTint: 'rgba(234,237,245,0.5)',\n  backgroundTransparent: 'rgba(255,255,255,0)',\n  backgroundShade: color.neutral10,\n  shadow: 'rgba(0,0,0,0.2)',\n  shadowTint: 'rgba(129,130,136,0.2)',\n  axisLine: color.neutral70,\n  axisLineTint: color.neutral40,\n  axisTick: color.neutral70,\n  axisTickMinor: color.neutral60,\n  axisLabel: color.neutral70,\n  axisSplitLine: color.neutral15,\n  axisMinorSplitLine: color.neutral05\n});\nfor (var key in color) {\n  if (color.hasOwnProperty(key)) {\n    var hex = color[key];\n    if (key === 'theme') {\n      // Don't modify theme colors.\n      tokens.darkColor.theme = color.theme.slice();\n    } else if (key === 'highlight') {\n      tokens.darkColor.highlight = 'rgba(255,231,130,0.4)';\n    } else if (key.indexOf('accent') === 0) {\n      // Desaturate and lighten accent colors.\n      tokens.darkColor[key] = modifyHSL(hex, null, function (s) {\n        return s * 0.5;\n      }, function (l) {\n        return Math.min(1, 1.3 - l);\n      });\n    } else {\n      tokens.darkColor[key] = modifyHSL(hex, null, function (s) {\n        return s * 0.9;\n      }, function (l) {\n        return 1 - Math.pow(l, 1.5);\n      });\n    }\n  }\n}\ntokens.size = {\n  xxs: 2,\n  xs: 5,\n  s: 10,\n  m: 15,\n  l: 20,\n  xl: 30,\n  xxl: 40,\n  xxxl: 50\n};\nexport default tokens;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { modifyHSL } from 'zrender/lib/tool/color.js';\nimport tokens from '../visual/tokens.js';\nvar platform = '';\n// Navigator not exists in node\nif (typeof navigator !== 'undefined') {\n  /* global navigator */\n  platform = navigator.platform || '';\n}\nvar decalColor = 'rgba(0, 0, 0, 0.2)';\nvar themeColor = tokens.color.theme[0];\nvar lightThemeColor = modifyHSL(themeColor, null, null, 0.9);\nexport default {\n  darkMode: 'auto',\n  // backgroundColor: 'rgba(0,0,0,0)',\n  colorBy: 'series',\n  color: tokens.color.theme,\n  gradientColor: [lightThemeColor, themeColor],\n  aria: {\n    decal: {\n      decals: [{\n        color: decalColor,\n        dashArrayX: [1, 0],\n        dashArrayY: [2, 5],\n        symbolSize: 1,\n        rotation: Math.PI / 6\n      }, {\n        color: decalColor,\n        symbol: 'circle',\n        dashArrayX: [[8, 8], [0, 8, 8, 0]],\n        dashArrayY: [6, 0],\n        symbolSize: 0.8\n      }, {\n        color: decalColor,\n        dashArrayX: [1, 0],\n        dashArrayY: [4, 3],\n        rotation: -Math.PI / 4\n      }, {\n        color: decalColor,\n        dashArrayX: [[6, 6], [0, 6, 6, 0]],\n        dashArrayY: [6, 0]\n      }, {\n        color: decalColor,\n        dashArrayX: [[1, 0], [1, 6]],\n        dashArrayY: [1, 0, 6, 0],\n        rotation: Math.PI / 4\n      }, {\n        color: decalColor,\n        symbol: 'triangle',\n        dashArrayX: [[9, 9], [0, 9, 9, 0]],\n        dashArrayY: [7, 2],\n        symbolSize: 0.75\n      }]\n    }\n  },\n  // If xAxis and yAxis declared, grid is created by default.\n  // grid: {},\n  textStyle: {\n    // color: '#000',\n    // decoration: 'none',\n    // PENDING\n    fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n    // fontFamily: 'Arial, Verdana, sans-serif',\n    fontSize: 12,\n    fontStyle: 'normal',\n    fontWeight: 'normal'\n  },\n  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n  // Default is source-over\n  blendMode: null,\n  stateAnimation: {\n    duration: 300,\n    easing: 'cubicOut'\n  },\n  animation: 'auto',\n  animationDuration: 1000,\n  animationDurationUpdate: 500,\n  animationEasing: 'cubicInOut',\n  animationEasingUpdate: 'cubicInOut',\n  animationThreshold: 2000,\n  // Configuration for progressive/incremental rendering\n  progressiveThreshold: 3000,\n  progressive: 400,\n  // Threshold of if use single hover layer to optimize.\n  // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n  // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n  // which is unexpected.\n  // see example <echarts/test/heatmap-large.html>.\n  hoverLayerThreshold: 3000,\n  // See: module:echarts/scale/Time\n  useUTC: false\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap } from 'zrender/lib/core/util.js';\n;\n;\n;\nexport var VISUAL_DIMENSIONS = createHashMap(['tooltip', 'label', 'itemName', 'itemId', 'itemGroupId', 'itemChildGroupId', 'seriesName']);\nexport var SOURCE_FORMAT_ORIGINAL = 'original';\nexport var SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\nexport var SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\nexport var SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\nexport var SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\nexport var SOURCE_FORMAT_UNKNOWN = 'unknown';\nexport var SERIES_LAYOUT_BY_COLUMN = 'column';\nexport var SERIES_LAYOUT_BY_ROW = 'row';\n;\n;\n;\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner, getDataItemValue, queryReferringComponents, SINGLE_REFERRING } from '../../util/model.js';\nimport { createHashMap, each, isArray, isString, isObject, isTypedArray } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW, SOURCE_FORMAT_KEYED_COLUMNS } from '../../util/types.js';\n// The result of `guessOrdinal`.\nexport var BE_ORDINAL = {\n  Must: 1,\n  Might: 2,\n  Not: 3 // Other cases\n};\nvar innerGlobalModel = makeInner();\n/**\n * MUST be called before mergeOption of all series.\n */\nexport function resetSourceDefaulter(ecModel) {\n  // `datasetMap` is used to make default encode.\n  innerGlobalModel(ecModel).datasetMap = createHashMap();\n}\n/**\n * [The strategy of the arrengment of data dimensions for dataset]:\n * \"value way\": all axes are non-category axes. So series one by one take\n *     several (the number is coordSysDims.length) dimensions from dataset.\n *     The result of data arrengment of data dimensions like:\n *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\n * \"category way\": at least one axis is category axis. So the the first data\n *     dimension is always mapped to the first category axis and shared by\n *     all of the series. The other data dimensions are taken by series like\n *     \"value way\" does.\n *     The result of data arrengment of data dimensions like:\n *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\n *\n * @return encode Never be `null/undefined`.\n */\nexport function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\n  // Currently only make default when using dataset, util more reqirements occur.\n  if (!datasetModel || !coordDimensions) {\n    return encode;\n  }\n  var encodeItemName = [];\n  var encodeSeriesName = [];\n  var ecModel = seriesModel.ecModel;\n  var datasetMap = innerGlobalModel(ecModel).datasetMap;\n  var key = datasetModel.uid + '_' + source.seriesLayoutBy;\n  var baseCategoryDimIndex;\n  var categoryWayValueDimStart;\n  coordDimensions = coordDimensions.slice();\n  each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\n    var coordDimInfo = isObject(coordDimInfoLoose) ? coordDimInfoLoose : coordDimensions[coordDimIdx] = {\n      name: coordDimInfoLoose\n    };\n    if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\n      baseCategoryDimIndex = coordDimIdx;\n      categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\n    }\n    encode[coordDimInfo.name] = [];\n  });\n  var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\n    categoryWayDim: categoryWayValueDimStart,\n    valueWayDim: 0\n  });\n  // TODO\n  // Auto detect first time axis and do arrangement.\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n    var coordDimName = coordDimInfo.name;\n    var count = getDataDimCountOnCoordDim(coordDimInfo);\n    // In value way.\n    if (baseCategoryDimIndex == null) {\n      var start = datasetRecord.valueWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.valueWayDim += count;\n      // ??? TODO give a better default series name rule?\n      // especially when encode x y specified.\n      // consider: when multiple series share one dimension\n      // category axis, series name should better use\n      // the other dimension name. On the other hand, use\n      // both dimensions name.\n    }\n    // In category way, the first category axis.\n    else if (baseCategoryDimIndex === coordDimIdx) {\n      pushDim(encode[coordDimName], 0, count);\n      pushDim(encodeItemName, 0, count);\n    }\n    // In category way, the other axis.\n    else {\n      var start = datasetRecord.categoryWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.categoryWayDim += count;\n    }\n  });\n  function pushDim(dimIdxArr, idxFrom, idxCount) {\n    for (var i = 0; i < idxCount; i++) {\n      dimIdxArr.push(idxFrom + i);\n    }\n  }\n  function getDataDimCountOnCoordDim(coordDimInfo) {\n    var dimsDef = coordDimInfo.dimsDef;\n    return dimsDef ? dimsDef.length : 1;\n  }\n  encodeItemName.length && (encode.itemName = encodeItemName);\n  encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\n  return encode;\n}\n/**\n * Work for data like [{name: ..., value: ...}, ...].\n *\n * @return encode Never be `null/undefined`.\n */\nexport function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\n  // Currently only make default when using dataset, util more reqirements occur.\n  if (!datasetModel) {\n    return encode;\n  }\n  var sourceFormat = source.sourceFormat;\n  var dimensionsDefine = source.dimensionsDefine;\n  var potentialNameDimIndex;\n  if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    each(dimensionsDefine, function (dim, idx) {\n      if ((isObject(dim) ? dim.name : dim) === 'name') {\n        potentialNameDimIndex = idx;\n      }\n    });\n  }\n  var idxResult = function () {\n    var idxRes0 = {};\n    var idxRes1 = {};\n    var guessRecords = [];\n    // 5 is an experience value.\n    for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\n      var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\n      guessRecords.push(guessResult);\n      var isPureNumber = guessResult === BE_ORDINAL.Not;\n      // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\n      // and then find a name dim with the priority:\n      // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\n      if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\n        idxRes0.v = i;\n      }\n      if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\n        idxRes0.n = i;\n      }\n      if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\n        return idxRes0;\n      }\n      // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\n      // find the first BE_ORDINAL.Might as the value dim,\n      // and then find a name dim with the priority:\n      // \"other dim\" > \"the value dim itself\".\n      // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\n      // treated as number.\n      if (!isPureNumber) {\n        if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\n          idxRes1.v = i;\n        }\n        if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\n          idxRes1.n = i;\n        }\n      }\n    }\n    function fulfilled(idxResult) {\n      return idxResult.v != null && idxResult.n != null;\n    }\n    return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\n  }();\n  if (idxResult) {\n    encode.value = [idxResult.v];\n    // `potentialNameDimIndex` has highest priority.\n    var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n;\n    // By default, label uses itemName in charts.\n    // So we don't set encodeLabel here.\n    encode.itemName = [nameDimIndex];\n    encode.seriesName = [nameDimIndex];\n  }\n  return encode;\n}\n/**\n * @return If return null/undefined, indicate that should not use datasetModel.\n */\nexport function querySeriesUpstreamDatasetModel(seriesModel) {\n  // Caution: consider the scenario:\n  // A dataset is declared and a series is not expected to use the dataset,\n  // and at the beginning `setOption({series: { noData })` (just prepare other\n  // option but no data), then `setOption({series: {data: [...]}); In this case,\n  // the user should set an empty array to avoid that dataset is used by default.\n  var thisData = seriesModel.get('data', true);\n  if (!thisData) {\n    return queryReferringComponents(seriesModel.ecModel, 'dataset', {\n      index: seriesModel.get('datasetIndex', true),\n      id: seriesModel.get('datasetId', true)\n    }, SINGLE_REFERRING).models[0];\n  }\n}\n/**\n * @return Always return an array event empty.\n */\nexport function queryDatasetUpstreamDatasetModels(datasetModel) {\n  // Only these attributes declared, we by default reference to `datasetIndex: 0`.\n  // Otherwise, no reference.\n  if (!datasetModel.get('transform', true) && !datasetModel.get('fromTransformResult', true)) {\n    return [];\n  }\n  return queryReferringComponents(datasetModel.ecModel, 'dataset', {\n    index: datasetModel.get('fromDatasetIndex', true),\n    id: datasetModel.get('fromDatasetId', true)\n  }, SINGLE_REFERRING).models;\n}\n/**\n * The rule should not be complex, otherwise user might not\n * be able to known where the data is wrong.\n * The code is ugly, but how to make it neat?\n */\nexport function guessOrdinal(source, dimIndex) {\n  return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\n}\n// dimIndex may be overflow source data.\n// return {BE_ORDINAL}\nfunction doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\n  var result;\n  // Experience value.\n  var maxLoop = 5;\n  if (isTypedArray(data)) {\n    return BE_ORDINAL.Not;\n  }\n  // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\n  // always exists in source.\n  var dimName;\n  var dimType;\n  if (dimensionsDefine) {\n    var dimDefItem = dimensionsDefine[dimIndex];\n    if (isObject(dimDefItem)) {\n      dimName = dimDefItem.name;\n      dimType = dimDefItem.type;\n    } else if (isString(dimDefItem)) {\n      dimName = dimDefItem;\n    }\n  }\n  if (dimType != null) {\n    return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data;\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n      var sample = dataArrayRows[dimIndex];\n      for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\n        if ((result = detectValue(sample[startIndex + i])) != null) {\n          return result;\n        }\n      }\n    } else {\n      for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\n        var row = dataArrayRows[startIndex + i];\n        if (row && (result = detectValue(row[dimIndex])) != null) {\n          return result;\n        }\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var dataObjectRows = data;\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n    for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\n      var item = dataObjectRows[i];\n      if (item && (result = detectValue(item[dimName])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    var dataKeyedColumns = data;\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n    var sample = dataKeyedColumns[dimName];\n    if (!sample || isTypedArray(sample)) {\n      return BE_ORDINAL.Not;\n    }\n    for (var i = 0; i < sample.length && i < maxLoop; i++) {\n      if ((result = detectValue(sample[i])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var dataOriginal = data;\n    for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\n      var item = dataOriginal[i];\n      var val = getDataItemValue(item);\n      if (!isArray(val)) {\n        return BE_ORDINAL.Not;\n      }\n      if ((result = detectValue(val[dimIndex])) != null) {\n        return result;\n      }\n    }\n  }\n  function detectValue(val) {\n    var beStr = isString(val);\n    // Consider usage convenience, '1', '2' will be treated as \"number\".\n    // `Number('')` (or any whitespace) is `0`.\n    if (val != null && Number.isFinite(Number(val)) && val !== '') {\n      return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\n    } else if (beStr && val !== '-') {\n      return BE_ORDINAL.Must;\n    }\n  }\n  return BE_ORDINAL.Not;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, assert } from 'zrender/lib/core/util.js';\nimport { isComponentIdInternal } from '../util/model.js';\nvar internalOptionCreatorMap = createHashMap();\nexport function registerInternalOptionCreator(mainType, creator) {\n  assert(internalOptionCreatorMap.get(mainType) == null && creator);\n  internalOptionCreatorMap.set(mainType, creator);\n}\nexport function concatInternalOptions(ecModel, mainType, newCmptOptionList) {\n  var internalOptionCreator = internalOptionCreatorMap.get(mainType);\n  if (!internalOptionCreator) {\n    return newCmptOptionList;\n  }\n  var internalOptions = internalOptionCreator(ecModel);\n  if (!internalOptions) {\n    return newCmptOptionList;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < internalOptions.length; i++) {\n      assert(isComponentIdInternal(internalOptions[i]));\n    }\n  }\n  return newCmptOptionList.concat(internalOptions);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner, normalizeToArray } from '../../util/model.js';\nvar innerColor = makeInner();\nvar innerDecal = makeInner();\nvar PaletteMixin = /** @class */function () {\n  function PaletteMixin() {}\n  PaletteMixin.prototype.getColorFromPalette = function (name, scope, requestNum) {\n    var defaultPalette = normalizeToArray(this.get('color', true));\n    var layeredPalette = this.get('colorLayer', true);\n    return getFromPalette(this, innerColor, defaultPalette, layeredPalette, name, scope, requestNum);\n  };\n  PaletteMixin.prototype.clearColorPalette = function () {\n    clearPalette(this, innerColor);\n  };\n  return PaletteMixin;\n}();\nexport function getDecalFromPalette(ecModel, name, scope, requestNum) {\n  var defaultDecals = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n  return getFromPalette(ecModel, innerDecal, defaultDecals, null, name, scope, requestNum);\n}\nfunction getNearestPalette(palettes, requestColorNum) {\n  var paletteNum = palettes.length;\n  // TODO palettes must be in order\n  for (var i = 0; i < paletteNum; i++) {\n    if (palettes[i].length > requestColorNum) {\n      return palettes[i];\n    }\n  }\n  return palettes[paletteNum - 1];\n}\n/**\n * @param name MUST NOT be null/undefined. Otherwise call this function\n *             twise with the same parameters will get different result.\n * @param scope default this.\n * @return Can be null/undefined\n */\nfunction getFromPalette(that, inner, defaultPalette, layeredPalette, name, scope, requestNum) {\n  scope = scope || that;\n  var scopeFields = inner(scope);\n  var paletteIdx = scopeFields.paletteIdx || 0;\n  var paletteNameMap = scopeFields.paletteNameMap = scopeFields.paletteNameMap || {};\n  // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n  if (paletteNameMap.hasOwnProperty(name)) {\n    return paletteNameMap[name];\n  }\n  var palette = requestNum == null || !layeredPalette ? defaultPalette : getNearestPalette(layeredPalette, requestNum);\n  // In case can't find in layered color palette.\n  palette = palette || defaultPalette;\n  if (!palette || !palette.length) {\n    return;\n  }\n  var pickedPaletteItem = palette[paletteIdx];\n  if (name) {\n    paletteNameMap[name] = pickedPaletteItem;\n  }\n  scopeFields.paletteIdx = (paletteIdx + 1) % palette.length;\n  return pickedPaletteItem;\n}\nfunction clearPalette(that, inner) {\n  inner(that).paletteIdx = 0;\n  inner(that).paletteNameMap = {};\n}\nexport { PaletteMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Caution: If the mechanism should be changed some day, these cases\n * should be considered:\n *\n * (1) In `merge option` mode, if using the same option to call `setOption`\n * many times, the result should be the same (try our best to ensure that).\n * (2) In `merge option` mode, if a component has no id/name specified, it\n * will be merged by index, and the result sequence of the components is\n * consistent to the original sequence.\n * (3) In `replaceMerge` mode, keep the result sequence of the components is\n * consistent to the original sequence, even though there might result in \"hole\".\n * (4) `reset` feature (in toolbox). Find detailed info in comments about\n * `mergeOption` in module:echarts/model/OptionManager.\n */\nimport { each, filter, isArray, isObject, isString, createHashMap, assert, clone, merge, extend, mixin, isFunction } from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../util/model.js';\nimport Model from './Model.js';\nimport ComponentModel from './Component.js';\nimport globalDefault from './globalDefault.js';\nimport { resetSourceDefaulter } from '../data/helper/sourceHelper.js';\nimport { concatInternalOptions } from './internalComponentCreator.js';\nimport { PaletteMixin } from './mixin/palette.js';\nimport { error, warn } from '../util/log.js';\n// -----------------------\n// Internal method names:\n// -----------------------\nvar reCreateSeriesIndices;\nvar assertSeriesInitialized;\nvar initBase;\nvar OPTION_INNER_KEY = '\\0_ec_inner';\nvar OPTION_INNER_VALUE = 1;\nvar BUITIN_COMPONENTS_MAP = {\n  grid: 'GridComponent',\n  polar: 'PolarComponent',\n  geo: 'GeoComponent',\n  singleAxis: 'SingleAxisComponent',\n  parallel: 'ParallelComponent',\n  calendar: 'CalendarComponent',\n  matrix: 'MatrixComponent',\n  graphic: 'GraphicComponent',\n  toolbox: 'ToolboxComponent',\n  tooltip: 'TooltipComponent',\n  axisPointer: 'AxisPointerComponent',\n  brush: 'BrushComponent',\n  title: 'TitleComponent',\n  timeline: 'TimelineComponent',\n  markPoint: 'MarkPointComponent',\n  markLine: 'MarkLineComponent',\n  markArea: 'MarkAreaComponent',\n  legend: 'LegendComponent',\n  dataZoom: 'DataZoomComponent',\n  visualMap: 'VisualMapComponent',\n  // aria: 'AriaComponent',\n  // dataset: 'DatasetComponent',\n  // Dependencies\n  xAxis: 'GridComponent',\n  yAxis: 'GridComponent',\n  angleAxis: 'PolarComponent',\n  radiusAxis: 'PolarComponent'\n};\nvar BUILTIN_CHARTS_MAP = {\n  line: 'LineChart',\n  bar: 'BarChart',\n  pie: 'PieChart',\n  scatter: 'ScatterChart',\n  radar: 'RadarChart',\n  map: 'MapChart',\n  tree: 'TreeChart',\n  treemap: 'TreemapChart',\n  graph: 'GraphChart',\n  chord: 'ChordChart',\n  gauge: 'GaugeChart',\n  funnel: 'FunnelChart',\n  parallel: 'ParallelChart',\n  sankey: 'SankeyChart',\n  boxplot: 'BoxplotChart',\n  candlestick: 'CandlestickChart',\n  effectScatter: 'EffectScatterChart',\n  lines: 'LinesChart',\n  heatmap: 'HeatmapChart',\n  pictorialBar: 'PictorialBarChart',\n  themeRiver: 'ThemeRiverChart',\n  sunburst: 'SunburstChart',\n  custom: 'CustomChart'\n};\nvar componetsMissingLogPrinted = {};\nfunction checkMissingComponents(option) {\n  each(option, function (componentOption, mainType) {\n    if (!ComponentModel.hasClass(mainType)) {\n      var componentImportName = BUITIN_COMPONENTS_MAP[mainType];\n      if (componentImportName && !componetsMissingLogPrinted[componentImportName]) {\n        error(\"Component \" + mainType + \" is used but not imported.\\nimport { \" + componentImportName + \" } from 'echarts/components';\\necharts.use([\" + componentImportName + \"]);\");\n        componetsMissingLogPrinted[componentImportName] = true;\n      }\n    }\n  });\n}\nvar GlobalModel = /** @class */function (_super) {\n  __extends(GlobalModel, _super);\n  function GlobalModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GlobalModel.prototype.init = function (option, parentModel, ecModel, theme, locale, optionManager) {\n    theme = theme || {};\n    this.option = null; // Mark as not initialized.\n    this._theme = new Model(theme);\n    this._locale = new Model(locale);\n    this._optionManager = optionManager;\n  };\n  GlobalModel.prototype.setOption = function (option, opts, optionPreprocessorFuncs) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(option != null, 'option is null/undefined');\n      assert(option[OPTION_INNER_KEY] !== OPTION_INNER_VALUE, 'please use chart.getOption()');\n    }\n    var innerOpt = normalizeSetOptionInput(opts);\n    this._optionManager.setOption(option, optionPreprocessorFuncs, innerOpt);\n    this._resetOption(null, innerOpt);\n  };\n  /**\n   * @param type null/undefined: reset all.\n   *        'recreate': force recreate all.\n   *        'timeline': only reset timeline option\n   *        'media': only reset media query option\n   * @return Whether option changed.\n   */\n  GlobalModel.prototype.resetOption = function (type, opt) {\n    return this._resetOption(type, normalizeSetOptionInput(opt));\n  };\n  GlobalModel.prototype._resetOption = function (type, opt) {\n    var optionChanged = false;\n    var optionManager = this._optionManager;\n    if (!type || type === 'recreate') {\n      var baseOption = optionManager.mountOption(type === 'recreate');\n      if (process.env.NODE_ENV !== 'production') {\n        checkMissingComponents(baseOption);\n      }\n      if (!this.option || type === 'recreate') {\n        initBase(this, baseOption);\n      } else {\n        this.restoreData();\n        this._mergeOption(baseOption, opt);\n      }\n      optionChanged = true;\n    }\n    if (type === 'timeline' || type === 'media') {\n      this.restoreData();\n    }\n    // By design, if `setOption(option2)` at the second time, and `option2` is a `ECUnitOption`,\n    // it should better not have the same props with `MediaUnit['option']`.\n    // Because either `option2` or `MediaUnit['option']` will be always merged to \"current option\"\n    // rather than original \"baseOption\". If they both override a prop, the result might be\n    // unexpected when media state changed after `setOption` called.\n    // If we really need to modify a props in each `MediaUnit['option']`, use the full version\n    // (`{baseOption, media}`) in `setOption`.\n    // For `timeline`, the case is the same.\n    if (!type || type === 'recreate' || type === 'timeline') {\n      var timelineOption = optionManager.getTimelineOption(this);\n      if (timelineOption) {\n        optionChanged = true;\n        this._mergeOption(timelineOption, opt);\n      }\n    }\n    if (!type || type === 'recreate' || type === 'media') {\n      var mediaOptions = optionManager.getMediaOption(this);\n      if (mediaOptions.length) {\n        each(mediaOptions, function (mediaOption) {\n          optionChanged = true;\n          this._mergeOption(mediaOption, opt);\n        }, this);\n      }\n    }\n    return optionChanged;\n  };\n  GlobalModel.prototype.mergeOption = function (option) {\n    this._mergeOption(option, null);\n  };\n  GlobalModel.prototype._mergeOption = function (newOption, opt) {\n    var option = this.option;\n    var componentsMap = this._componentsMap;\n    var componentsCount = this._componentsCount;\n    var newCmptTypes = [];\n    var newCmptTypeMap = createHashMap();\n    var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;\n    resetSourceDefaulter(this);\n    // If no component class, merge directly.\n    // For example: color, animaiton options, etc.\n    each(newOption, function (componentOption, mainType) {\n      if (componentOption == null) {\n        return;\n      }\n      if (!ComponentModel.hasClass(mainType)) {\n        // globalSettingTask.dirty();\n        option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\n      } else if (mainType) {\n        newCmptTypes.push(mainType);\n        newCmptTypeMap.set(mainType, true);\n      }\n    });\n    if (replaceMergeMainTypeMap) {\n      // If there is a mainType `xxx` in `replaceMerge` but not declared in option,\n      // we trade it as it is declared in option as `{xxx: []}`. Because:\n      // (1) for normal merge, `{xxx: null/undefined}` are the same meaning as `{xxx: []}`.\n      // (2) some preprocessor may convert some of `{xxx: null/undefined}` to `{xxx: []}`.\n      replaceMergeMainTypeMap.each(function (val, mainTypeInReplaceMerge) {\n        if (ComponentModel.hasClass(mainTypeInReplaceMerge) && !newCmptTypeMap.get(mainTypeInReplaceMerge)) {\n          newCmptTypes.push(mainTypeInReplaceMerge);\n          newCmptTypeMap.set(mainTypeInReplaceMerge, true);\n        }\n      });\n    }\n    ComponentModel.topologicalTravel(newCmptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n    function visitComponent(mainType) {\n      var newCmptOptionList = concatInternalOptions(this, mainType, modelUtil.normalizeToArray(newOption[mainType]));\n      var oldCmptList = componentsMap.get(mainType);\n      var mergeMode =\n      // `!oldCmptList` means init. See the comment in `mappingToExists`\n      !oldCmptList ? 'replaceAll' : replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType) ? 'replaceMerge' : 'normalMerge';\n      var mappingResult = modelUtil.mappingToExists(oldCmptList, newCmptOptionList, mergeMode);\n      // Set mainType and complete subType.\n      modelUtil.setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel);\n      // Empty it before the travel, in order to prevent `this._componentsMap`\n      // from being used in the `init`/`mergeOption`/`optionUpdated` of some\n      // components, which is probably incorrect logic.\n      option[mainType] = null;\n      componentsMap.set(mainType, null);\n      componentsCount.set(mainType, 0);\n      var optionsByMainType = [];\n      var cmptsByMainType = [];\n      var cmptsCountByMainType = 0;\n      var tooltipExists;\n      var tooltipWarningLogged;\n      each(mappingResult, function (resultItem, index) {\n        var componentModel = resultItem.existing;\n        var newCmptOption = resultItem.newOption;\n        if (!newCmptOption) {\n          if (componentModel) {\n            // Consider where is no new option and should be merged using {},\n            // see removeEdgeAndAdd in topologicalTravel and\n            // ComponentModel.getAllClassMainTypes.\n            componentModel.mergeOption({}, this);\n            componentModel.optionUpdated({}, false);\n          }\n          // If no both `resultItem.exist` and `resultItem.option`,\n          // either it is in `replaceMerge` and not matched by any id,\n          // or it has been removed in previous `replaceMerge` and left a \"hole\" in this component index.\n        } else {\n          var isSeriesType = mainType === 'series';\n          var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, !isSeriesType // Give a more detailed warn later if series don't exists\n          );\n          if (!ComponentModelClass) {\n            if (process.env.NODE_ENV !== 'production') {\n              var subType = resultItem.keyInfo.subType;\n              var seriesImportName = BUILTIN_CHARTS_MAP[subType];\n              if (!componetsMissingLogPrinted[subType]) {\n                componetsMissingLogPrinted[subType] = true;\n                if (seriesImportName) {\n                  error(\"Series \" + subType + \" is used but not imported.\\nimport { \" + seriesImportName + \" } from 'echarts/charts';\\necharts.use([\" + seriesImportName + \"]);\");\n                } else {\n                  error(\"Unknown series \" + subType);\n                }\n              }\n            }\n            return;\n          }\n          // TODO Before multiple tooltips get supported, we do this check to avoid unexpected exception.\n          if (mainType === 'tooltip') {\n            if (tooltipExists) {\n              if (process.env.NODE_ENV !== 'production') {\n                if (!tooltipWarningLogged) {\n                  warn('Currently only one tooltip component is allowed.');\n                  tooltipWarningLogged = true;\n                }\n              }\n              return;\n            }\n            tooltipExists = true;\n          }\n          if (componentModel && componentModel.constructor === ComponentModelClass) {\n            componentModel.name = resultItem.keyInfo.name;\n            // componentModel.settingTask && componentModel.settingTask.dirty();\n            componentModel.mergeOption(newCmptOption, this);\n            componentModel.optionUpdated(newCmptOption, false);\n          } else {\n            // PENDING Global as parent ?\n            var extraOpt = extend({\n              componentIndex: index\n            }, resultItem.keyInfo);\n            componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt);\n            // Assign `keyInfo`\n            extend(componentModel, extraOpt);\n            if (resultItem.brandNew) {\n              componentModel.__requireNewView = true;\n            }\n            componentModel.init(newCmptOption, this, this);\n            // Call optionUpdated after init.\n            // newCmptOption has been used as componentModel.option\n            // and may be merged with theme and default, so pass null\n            // to avoid confusion.\n            componentModel.optionUpdated(null, true);\n          }\n        }\n        if (componentModel) {\n          optionsByMainType.push(componentModel.option);\n          cmptsByMainType.push(componentModel);\n          cmptsCountByMainType++;\n        } else {\n          // Always do assign to avoid elided item in array.\n          optionsByMainType.push(void 0);\n          cmptsByMainType.push(void 0);\n        }\n      }, this);\n      option[mainType] = optionsByMainType;\n      componentsMap.set(mainType, cmptsByMainType);\n      componentsCount.set(mainType, cmptsCountByMainType);\n      // Backup series for filtering.\n      if (mainType === 'series') {\n        reCreateSeriesIndices(this);\n      }\n    }\n    // If no series declared, ensure `_seriesIndices` initialized.\n    if (!this._seriesIndices) {\n      reCreateSeriesIndices(this);\n    }\n  };\n  /**\n   * Get option for output (cloned option and inner info removed)\n   */\n  GlobalModel.prototype.getOption = function () {\n    var option = clone(this.option);\n    each(option, function (optInMainType, mainType) {\n      if (ComponentModel.hasClass(mainType)) {\n        var opts = modelUtil.normalizeToArray(optInMainType);\n        // Inner cmpts need to be removed.\n        // Inner cmpts might not be at last since ec5.0, but still\n        // compatible for users: if inner cmpt at last, splice the returned array.\n        var realLen = opts.length;\n        var metNonInner = false;\n        for (var i = realLen - 1; i >= 0; i--) {\n          // Remove options with inner id.\n          if (opts[i] && !modelUtil.isComponentIdInternal(opts[i])) {\n            metNonInner = true;\n          } else {\n            opts[i] = null;\n            !metNonInner && realLen--;\n          }\n        }\n        opts.length = realLen;\n        option[mainType] = opts;\n      }\n    });\n    delete option[OPTION_INNER_KEY];\n    return option;\n  };\n  GlobalModel.prototype.setTheme = function (theme) {\n    this._theme = new Model(theme);\n    this._resetOption('recreate', null);\n  };\n  GlobalModel.prototype.getTheme = function () {\n    return this._theme;\n  };\n  GlobalModel.prototype.getLocaleModel = function () {\n    return this._locale;\n  };\n  GlobalModel.prototype.setUpdatePayload = function (payload) {\n    this._payload = payload;\n  };\n  GlobalModel.prototype.getUpdatePayload = function () {\n    return this._payload;\n  };\n  /**\n   * @param idx If not specified, return the first one.\n   */\n  GlobalModel.prototype.getComponent = function (mainType, idx) {\n    var list = this._componentsMap.get(mainType);\n    if (list) {\n      var cmpt = list[idx || 0];\n      if (cmpt) {\n        return cmpt;\n      } else if (idx == null) {\n        for (var i = 0; i < list.length; i++) {\n          if (list[i]) {\n            return list[i];\n          }\n        }\n      }\n    }\n  };\n  /**\n   * @return Never be null/undefined.\n   */\n  GlobalModel.prototype.queryComponents = function (condition) {\n    var mainType = condition.mainType;\n    if (!mainType) {\n      return [];\n    }\n    var index = condition.index;\n    var id = condition.id;\n    var name = condition.name;\n    var cmpts = this._componentsMap.get(mainType);\n    if (!cmpts || !cmpts.length) {\n      return [];\n    }\n    var result;\n    if (index != null) {\n      result = [];\n      each(modelUtil.normalizeToArray(index), function (idx) {\n        cmpts[idx] && result.push(cmpts[idx]);\n      });\n    } else if (id != null) {\n      result = queryByIdOrName('id', id, cmpts);\n    } else if (name != null) {\n      result = queryByIdOrName('name', name, cmpts);\n    } else {\n      // Return all non-empty components in that mainType\n      result = filter(cmpts, function (cmpt) {\n        return !!cmpt;\n      });\n    }\n    return filterBySubType(result, condition);\n  };\n  /**\n   * The interface is different from queryComponents,\n   * which is convenient for inner usage.\n   *\n   * @usage\n   * let result = findComponents(\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\n   * );\n   * let result = findComponents(\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\n   * );\n   * let result = findComponents(\n   *     {mainType: 'series',\n   *     filter: function (model, index) {...}}\n   * );\n   * // result like [component0, componnet1, ...]\n   */\n  GlobalModel.prototype.findComponents = function (condition) {\n    var query = condition.query;\n    var mainType = condition.mainType;\n    var queryCond = getQueryCond(query);\n    var result = queryCond ? this.queryComponents(queryCond)\n    // Retrieve all non-empty components.\n    : filter(this._componentsMap.get(mainType), function (cmpt) {\n      return !!cmpt;\n    });\n    return doFilter(filterBySubType(result, condition));\n    function getQueryCond(q) {\n      var indexAttr = mainType + 'Index';\n      var idAttr = mainType + 'Id';\n      var nameAttr = mainType + 'Name';\n      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n        mainType: mainType,\n        // subType will be filtered finally.\n        index: q[indexAttr],\n        id: q[idAttr],\n        name: q[nameAttr]\n      } : null;\n    }\n    function doFilter(res) {\n      return condition.filter ? filter(res, condition.filter) : res;\n    }\n  };\n  GlobalModel.prototype.eachComponent = function (mainType, cb, context) {\n    var componentsMap = this._componentsMap;\n    if (isFunction(mainType)) {\n      var ctxForAll_1 = cb;\n      var cbForAll_1 = mainType;\n      componentsMap.each(function (cmpts, componentType) {\n        for (var i = 0; cmpts && i < cmpts.length; i++) {\n          var cmpt = cmpts[i];\n          cmpt && cbForAll_1.call(ctxForAll_1, componentType, cmpt, cmpt.componentIndex);\n        }\n      });\n    } else {\n      var cmpts = isString(mainType) ? componentsMap.get(mainType) : isObject(mainType) ? this.findComponents(mainType) : null;\n      for (var i = 0; cmpts && i < cmpts.length; i++) {\n        var cmpt = cmpts[i];\n        cmpt && cb.call(context, cmpt, cmpt.componentIndex);\n      }\n    }\n  };\n  /**\n   * Get series list before filtered by name.\n   */\n  GlobalModel.prototype.getSeriesByName = function (name) {\n    var nameStr = modelUtil.convertOptionIdName(name, null);\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries && nameStr != null && oneSeries.name === nameStr;\n    });\n  };\n  /**\n   * Get series list before filtered by index.\n   */\n  GlobalModel.prototype.getSeriesByIndex = function (seriesIndex) {\n    return this._componentsMap.get('series')[seriesIndex];\n  };\n  /**\n   * Get series list before filtered by type.\n   * FIXME: rename to getRawSeriesByType?\n   */\n  GlobalModel.prototype.getSeriesByType = function (subType) {\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries && oneSeries.subType === subType;\n    });\n  };\n  /**\n   * Get all series before filtered.\n   */\n  GlobalModel.prototype.getSeries = function () {\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries;\n    });\n  };\n  /**\n   * Count series before filtered.\n   */\n  GlobalModel.prototype.getSeriesCount = function () {\n    return this._componentsCount.get('series');\n  };\n  /**\n   * After filtering, series may be different\n   * from raw series.\n   */\n  GlobalModel.prototype.eachSeries = function (cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n      cb.call(context, series, rawSeriesIndex);\n    }, this);\n  };\n  /**\n   * Iterate raw series before filtered.\n   *\n   * @param {Function} cb\n   * @param {*} context\n   */\n  GlobalModel.prototype.eachRawSeries = function (cb, context) {\n    each(this._componentsMap.get('series'), function (series) {\n      series && cb.call(context, series, series.componentIndex);\n    });\n  };\n  /**\n   * After filtering, series may be different.\n   * from raw series.\n   */\n  GlobalModel.prototype.eachSeriesByType = function (subType, cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n      if (series.subType === subType) {\n        cb.call(context, series, rawSeriesIndex);\n      }\n    }, this);\n  };\n  /**\n   * Iterate raw series before filtered of given type.\n   */\n  GlobalModel.prototype.eachRawSeriesByType = function (subType, cb, context) {\n    return each(this.getSeriesByType(subType), cb, context);\n  };\n  GlobalModel.prototype.isSeriesFiltered = function (seriesModel) {\n    assertSeriesInitialized(this);\n    return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\n  };\n  GlobalModel.prototype.getCurrentSeriesIndices = function () {\n    return (this._seriesIndices || []).slice();\n  };\n  GlobalModel.prototype.filterSeries = function (cb, context) {\n    assertSeriesInitialized(this);\n    var newSeriesIndices = [];\n    each(this._seriesIndices, function (seriesRawIdx) {\n      var series = this._componentsMap.get('series')[seriesRawIdx];\n      cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);\n    }, this);\n    this._seriesIndices = newSeriesIndices;\n    this._seriesIndicesMap = createHashMap(newSeriesIndices);\n  };\n  GlobalModel.prototype.restoreData = function (payload) {\n    reCreateSeriesIndices(this);\n    var componentsMap = this._componentsMap;\n    var componentTypes = [];\n    componentsMap.each(function (components, componentType) {\n      if (ComponentModel.hasClass(componentType)) {\n        componentTypes.push(componentType);\n      }\n    });\n    ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType) {\n      each(componentsMap.get(componentType), function (component) {\n        if (component && (componentType !== 'series' || !isNotTargetSeries(component, payload))) {\n          component.restoreData();\n        }\n      });\n    });\n  };\n  GlobalModel.internalField = function () {\n    reCreateSeriesIndices = function (ecModel) {\n      var seriesIndices = ecModel._seriesIndices = [];\n      each(ecModel._componentsMap.get('series'), function (series) {\n        // series may have been removed by `replaceMerge`.\n        series && seriesIndices.push(series.componentIndex);\n      });\n      ecModel._seriesIndicesMap = createHashMap(seriesIndices);\n    };\n    assertSeriesInitialized = function (ecModel) {\n      // Components that use _seriesIndices should depends on series component,\n      // which make sure that their initialization is after series.\n      if (process.env.NODE_ENV !== 'production') {\n        if (!ecModel._seriesIndices) {\n          throw new Error('Option should contains series.');\n        }\n      }\n    };\n    initBase = function (ecModel, baseOption) {\n      // Using OPTION_INNER_KEY to mark that this option cannot be used outside,\n      // i.e. `chart.setOption(chart.getModel().option);` is forbidden.\n      ecModel.option = {};\n      ecModel.option[OPTION_INNER_KEY] = OPTION_INNER_VALUE;\n      // Init with series: [], in case of calling findSeries method\n      // before series initialized.\n      ecModel._componentsMap = createHashMap({\n        series: []\n      });\n      ecModel._componentsCount = createHashMap();\n      // If user spefied `option.aria`, aria will be enable. This detection should be\n      // performed before theme and globalDefault merge.\n      var airaOption = baseOption.aria;\n      if (isObject(airaOption) && airaOption.enabled == null) {\n        airaOption.enabled = true;\n      }\n      mergeTheme(baseOption, ecModel._theme.option);\n      // TODO Needs clone when merging to the unexisted property\n      merge(baseOption, globalDefault, false);\n      ecModel._mergeOption(baseOption, null);\n    };\n  }();\n  return GlobalModel;\n}(Model);\nfunction isNotTargetSeries(seriesModel, payload) {\n  if (payload) {\n    var index = payload.seriesIndex;\n    var id = payload.seriesId;\n    var name_1 = payload.seriesName;\n    return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name_1 != null && seriesModel.name !== name_1;\n  }\n}\nfunction mergeTheme(option, theme) {\n  // PENDING\n  // NOT use `colorLayer` in theme if option has `color`\n  var notMergeColorLayer = option.color && !option.colorLayer;\n  each(theme, function (themeItem, name) {\n    if (name === 'colorLayer' && notMergeColorLayer || name === 'color' && option.color) {\n      return;\n    }\n    // If it is component model mainType, the model handles that merge later.\n    // otherwise, merge them here.\n    if (!ComponentModel.hasClass(name)) {\n      if (typeof themeItem === 'object') {\n        option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\n      } else {\n        if (option[name] == null) {\n          option[name] = themeItem;\n        }\n      }\n    }\n  });\n}\nfunction queryByIdOrName(attr, idOrName, cmpts) {\n  // Here is a break from echarts4: string and number are\n  // treated as equal.\n  if (isArray(idOrName)) {\n    var keyMap_1 = createHashMap();\n    each(idOrName, function (idOrNameItem) {\n      if (idOrNameItem != null) {\n        var idName = modelUtil.convertOptionIdName(idOrNameItem, null);\n        idName != null && keyMap_1.set(idOrNameItem, true);\n      }\n    });\n    return filter(cmpts, function (cmpt) {\n      return cmpt && keyMap_1.get(cmpt[attr]);\n    });\n  } else {\n    var idName_1 = modelUtil.convertOptionIdName(idOrName, null);\n    return filter(cmpts, function (cmpt) {\n      return cmpt && idName_1 != null && cmpt[attr] === idName_1;\n    });\n  }\n}\nfunction filterBySubType(components, condition) {\n  // Using hasOwnProperty for restrict. Consider\n  // subType is undefined in user payload.\n  return condition.hasOwnProperty('subType') ? filter(components, function (cmpt) {\n    return cmpt && cmpt.subType === condition.subType;\n  }) : components;\n}\nfunction normalizeSetOptionInput(opts) {\n  var replaceMergeMainTypeMap = createHashMap();\n  opts && each(modelUtil.normalizeToArray(opts.replaceMerge), function (mainType) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(ComponentModel.hasClass(mainType), '\"' + mainType + '\" is not valid component main type in \"replaceMerge\"');\n    }\n    replaceMergeMainTypeMap.set(mainType, true);\n  });\n  return {\n    replaceMergeMainTypeMap: replaceMergeMainTypeMap\n  };\n}\nmixin(GlobalModel, PaletteMixin);\nexport default GlobalModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar availableMethods = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isSSR', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL',\n// 'getModel',\n'getOption',\n// 'getViewOfComponentModel',\n// 'getViewOfSeriesModel',\n'getId', 'updateLabelLayout'];\nvar ExtensionAPI = /** @class */function () {\n  function ExtensionAPI(ecInstance) {\n    zrUtil.each(availableMethods, function (methodName) {\n      this[methodName] = zrUtil.bind(ecInstance[methodName], ecInstance);\n    }, this);\n  }\n  return ExtensionAPI;\n}();\nexport default ExtensionAPI;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { normalizeToArray\n// , MappingExistingItem, setComponentTypeToKeyInfo, mappingToExists\n} from '../util/model.js';\nimport { each, clone, map, isTypedArray, setAsPrimitive, isArray, isObject\n// , HashMap , createHashMap, extend, merge,\n} from 'zrender/lib/core/util.js';\nimport { error } from '../util/log.js';\nvar QUERY_REG = /^(min|max)?(.+)$/;\n// Key: mainType\n// type FakeComponentsMap = HashMap<(MappingExistingItem & { subType: string })[]>;\n/**\n * TERM EXPLANATIONS:\n * See `ECOption` and `ECUnitOption` in `src/util/types.ts`.\n */\nvar OptionManager = /** @class */function () {\n  // timeline.notMerge is not supported in ec3. Firstly there is rearly\n  // case that notMerge is needed. Secondly supporting 'notMerge' requires\n  // rawOption cloned and backuped when timeline changed, which does no\n  // good to performance. What's more, that both timeline and setOption\n  // method supply 'notMerge' brings complex and some problems.\n  // Consider this case:\n  // (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n  // (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n  function OptionManager(api) {\n    this._timelineOptions = [];\n    this._mediaList = [];\n    /**\n     * -1, means default.\n     * empty means no media.\n     */\n    this._currentMediaIndices = [];\n    this._api = api;\n  }\n  OptionManager.prototype.setOption = function (rawOption, optionPreprocessorFuncs, opt) {\n    if (rawOption) {\n      // That set dat primitive is dangerous if user reuse the data when setOption again.\n      each(normalizeToArray(rawOption.series), function (series) {\n        series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);\n      });\n      each(normalizeToArray(rawOption.dataset), function (dataset) {\n        dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);\n      });\n    }\n    // Caution: some series modify option data, if do not clone,\n    // it should ensure that the repeat modify correctly\n    // (create a new object when modify itself).\n    rawOption = clone(rawOption);\n    // FIXME\n    // If some property is set in timeline options or media option but\n    // not set in baseOption, a warning should be given.\n    var optionBackup = this._optionBackup;\n    var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs, !optionBackup);\n    this._newBaseOption = newParsedOption.baseOption;\n    // For setOption at second time (using merge mode);\n    if (optionBackup) {\n      // FIXME\n      // the restore merge solution is essentially incorrect.\n      // the mapping can not be 100% consistent with ecModel, which probably brings\n      // potential bug!\n      // The first merge is delayed, because in most cases, users do not call `setOption` twice.\n      // let fakeCmptsMap = this._fakeCmptsMap;\n      // if (!fakeCmptsMap) {\n      //     fakeCmptsMap = this._fakeCmptsMap = createHashMap();\n      //     mergeToBackupOption(fakeCmptsMap, null, optionBackup.baseOption, null);\n      // }\n      // mergeToBackupOption(\n      //     fakeCmptsMap, optionBackup.baseOption, newParsedOption.baseOption, opt\n      // );\n      // For simplicity, timeline options and media options do not support merge,\n      // that is, if you `setOption` twice and both has timeline options, the latter\n      // timeline options will not be merged to the former, but just substitute them.\n      if (newParsedOption.timelineOptions.length) {\n        optionBackup.timelineOptions = newParsedOption.timelineOptions;\n      }\n      if (newParsedOption.mediaList.length) {\n        optionBackup.mediaList = newParsedOption.mediaList;\n      }\n      if (newParsedOption.mediaDefault) {\n        optionBackup.mediaDefault = newParsedOption.mediaDefault;\n      }\n    } else {\n      this._optionBackup = newParsedOption;\n    }\n  };\n  OptionManager.prototype.mountOption = function (isRecreate) {\n    var optionBackup = this._optionBackup;\n    this._timelineOptions = optionBackup.timelineOptions;\n    this._mediaList = optionBackup.mediaList;\n    this._mediaDefault = optionBackup.mediaDefault;\n    this._currentMediaIndices = [];\n    return clone(isRecreate\n    // this._optionBackup.baseOption, which is created at the first `setOption`\n    // called, and is merged into every new option by inner method `mergeToBackupOption`\n    // each time `setOption` called, can be only used in `isRecreate`, because\n    // its reliability is under suspicion. In other cases option merge is\n    // performed by `model.mergeOption`.\n    ? optionBackup.baseOption : this._newBaseOption);\n  };\n  OptionManager.prototype.getTimelineOption = function (ecModel) {\n    var option;\n    var timelineOptions = this._timelineOptions;\n    if (timelineOptions.length) {\n      // getTimelineOption can only be called after ecModel inited,\n      // so we can get currentIndex from timelineModel.\n      var timelineModel = ecModel.getComponent('timeline');\n      if (timelineModel) {\n        option = clone(\n        // FIXME:TS as TimelineModel or quivlant interface\n        timelineOptions[timelineModel.getCurrentIndex()]);\n      }\n    }\n    return option;\n  };\n  OptionManager.prototype.getMediaOption = function (ecModel) {\n    var ecWidth = this._api.getWidth();\n    var ecHeight = this._api.getHeight();\n    var mediaList = this._mediaList;\n    var mediaDefault = this._mediaDefault;\n    var indices = [];\n    var result = [];\n    // No media defined.\n    if (!mediaList.length && !mediaDefault) {\n      return result;\n    }\n    // Multi media may be applied, the latter defined media has higher priority.\n    for (var i = 0, len = mediaList.length; i < len; i++) {\n      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n        indices.push(i);\n      }\n    }\n    // FIXME\n    // Whether mediaDefault should force users to provide? Otherwise\n    // the change by media query can not be recorvered.\n    if (!indices.length && mediaDefault) {\n      indices = [-1];\n    }\n    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n      result = map(indices, function (index) {\n        return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n      });\n    }\n    // Otherwise return nothing.\n    this._currentMediaIndices = indices;\n    return result;\n  };\n  return OptionManager;\n}();\n/**\n * [RAW_OPTION_PATTERNS]\n * (Note: \"series: []\" represents all other props in `ECUnitOption`)\n *\n * (1) No prop \"baseOption\" declared:\n * Root option is used as \"baseOption\" (except prop \"options\" and \"media\").\n * ```js\n * option = {\n *     series: [],\n *     timeline: {},\n *     options: [],\n * };\n * option = {\n *     series: [],\n *     media: {},\n * };\n * option = {\n *     series: [],\n *     timeline: {},\n *     options: [],\n *     media: {},\n * }\n * ```\n *\n * (2) Prop \"baseOption\" declared:\n * If \"baseOption\" declared, `ECUnitOption` props can only be declared\n * inside \"baseOption\" except prop \"timeline\" (compat ec2).\n * ```js\n * option = {\n *     baseOption: {\n *         timeline: {},\n *         series: [],\n *     },\n *     options: []\n * };\n * option = {\n *     baseOption: {\n *         series: [],\n *     },\n *     media: []\n * };\n * option = {\n *     baseOption: {\n *         timeline: {},\n *         series: [],\n *     },\n *     options: []\n *     media: []\n * };\n * option = {\n *     // ec3 compat ec2: allow (only) `timeline` declared\n *     // outside baseOption. Keep this setting for compat.\n *     timeline: {},\n *     baseOption: {\n *         series: [],\n *     },\n *     options: [],\n *     media: []\n * };\n * ```\n */\nfunction parseRawOption(\n// `rawOption` May be modified\nrawOption, optionPreprocessorFuncs, isNew) {\n  var mediaList = [];\n  var mediaDefault;\n  var baseOption;\n  var declaredBaseOption = rawOption.baseOption;\n  // Compatible with ec2, [RAW_OPTION_PATTERNS] above.\n  var timelineOnRoot = rawOption.timeline;\n  var timelineOptionsOnRoot = rawOption.options;\n  var mediaOnRoot = rawOption.media;\n  var hasMedia = !!rawOption.media;\n  var hasTimeline = !!(timelineOptionsOnRoot || timelineOnRoot || declaredBaseOption && declaredBaseOption.timeline);\n  if (declaredBaseOption) {\n    baseOption = declaredBaseOption;\n    // For merge option.\n    if (!baseOption.timeline) {\n      baseOption.timeline = timelineOnRoot;\n    }\n  }\n  // For convenience, enable to use the root option as the `baseOption`:\n  // `{ ...normalOptionProps, media: [{ ... }, { ... }] }`\n  else {\n    if (hasTimeline || hasMedia) {\n      rawOption.options = rawOption.media = null;\n    }\n    baseOption = rawOption;\n  }\n  if (hasMedia) {\n    if (isArray(mediaOnRoot)) {\n      each(mediaOnRoot, function (singleMedia) {\n        if (process.env.NODE_ENV !== 'production') {\n          // Real case of wrong config.\n          if (singleMedia && !singleMedia.option && isObject(singleMedia.query) && isObject(singleMedia.query.option)) {\n            error('Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }');\n          }\n        }\n        if (singleMedia && singleMedia.option) {\n          if (singleMedia.query) {\n            mediaList.push(singleMedia);\n          } else if (!mediaDefault) {\n            // Use the first media default.\n            mediaDefault = singleMedia;\n          }\n        }\n      });\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        // Real case of wrong config.\n        error('Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }');\n      }\n    }\n  }\n  doPreprocess(baseOption);\n  each(timelineOptionsOnRoot, function (option) {\n    return doPreprocess(option);\n  });\n  each(mediaList, function (media) {\n    return doPreprocess(media.option);\n  });\n  function doPreprocess(option) {\n    each(optionPreprocessorFuncs, function (preProcess) {\n      preProcess(option, isNew);\n    });\n  }\n  return {\n    baseOption: baseOption,\n    timelineOptions: timelineOptionsOnRoot || [],\n    mediaDefault: mediaDefault,\n    mediaList: mediaList\n  };\n}\n/**\n * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\n * Support: width, height, aspectRatio\n * Can use max or min as prefix.\n */\nfunction applyMediaQuery(query, ecWidth, ecHeight) {\n  var realMap = {\n    width: ecWidth,\n    height: ecHeight,\n    aspectratio: ecWidth / ecHeight // lower case for convenience.\n  };\n  var applicable = true;\n  each(query, function (value, attr) {\n    var matched = attr.match(QUERY_REG);\n    if (!matched || !matched[1] || !matched[2]) {\n      return;\n    }\n    var operator = matched[1];\n    var realAttr = matched[2].toLowerCase();\n    if (!compare(realMap[realAttr], value, operator)) {\n      applicable = false;\n    }\n  });\n  return applicable;\n}\nfunction compare(real, expect, operator) {\n  if (operator === 'min') {\n    return real >= expect;\n  } else if (operator === 'max') {\n    return real <= expect;\n  } else {\n    // Equals\n    return real === expect;\n  }\n}\nfunction indicesEquals(indices1, indices2) {\n  // indices is always order by asc and has only finite number.\n  return indices1.join(',') === indices2.join(',');\n}\n/**\n * Consider case:\n * `chart.setOption(opt1);`\n * Then user do some interaction like dataZoom, dataView changing.\n * `chart.setOption(opt2);`\n * Then user press 'reset button' in toolbox.\n *\n * After doing that all of the interaction effects should be reset, the\n * chart should be the same as the result of invoke\n * `chart.setOption(opt1); chart.setOption(opt2);`.\n *\n * Although it is not able ensure that\n * `chart.setOption(opt1); chart.setOption(opt2);` is equivalents to\n * `chart.setOption(merge(opt1, opt2));` exactly,\n * this might be the only simple way to implement that feature.\n *\n * MEMO: We've considered some other approaches:\n * 1. Each model handles its self restoration but not uniform treatment.\n *     (Too complex in logic and error-prone)\n * 2. Use a shadow ecModel. (Performance expensive)\n *\n * FIXME: A possible solution:\n * Add a extra level of model for each component model. The inheritance chain would be:\n * ecModel <- componentModel <- componentActionModel <- dataItemModel\n * And all of the actions can only modify the `componentActionModel` rather than\n * `componentModel`. `setOption` will only modify the `ecModel` and `componentModel`.\n * When \"resotre\" action triggered, model from `componentActionModel` will be discarded\n * instead of recreating the \"ecModel\" from the \"_optionBackup\".\n */\n// function mergeToBackupOption(\n//     fakeCmptsMap: FakeComponentsMap,\n//     // `tarOption` Can be null/undefined, means init\n//     tarOption: ECUnitOption,\n//     newOption: ECUnitOption,\n//     // Can be null/undefined\n//     opt: InnerSetOptionOpts\n// ): void {\n//     newOption = newOption || {} as ECUnitOption;\n//     const notInit = !!tarOption;\n//     each(newOption, function (newOptsInMainType, mainType) {\n//         if (newOptsInMainType == null) {\n//             return;\n//         }\n//         if (!ComponentModel.hasClass(mainType)) {\n//             if (tarOption) {\n//                 tarOption[mainType] = merge(tarOption[mainType], newOptsInMainType, true);\n//             }\n//         }\n//         else {\n//             const oldTarOptsInMainType = notInit ? normalizeToArray(tarOption[mainType]) : null;\n//             const oldFakeCmptsInMainType = fakeCmptsMap.get(mainType) || [];\n//             const resultTarOptsInMainType = notInit ? (tarOption[mainType] = [] as ComponentOption[]) : null;\n//             const resultFakeCmptsInMainType = fakeCmptsMap.set(mainType, []);\n//             const mappingResult = mappingToExists(\n//                 oldFakeCmptsInMainType,\n//                 normalizeToArray(newOptsInMainType),\n//                 (opt && opt.replaceMergeMainTypeMap.get(mainType)) ? 'replaceMerge' : 'normalMerge'\n//             );\n//             setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel as ComponentModelConstructor);\n//             each(mappingResult, function (resultItem, index) {\n//                 // The same logic as `Global.ts#_mergeOption`.\n//                 let fakeCmpt = resultItem.existing;\n//                 const newOption = resultItem.newOption;\n//                 const keyInfo = resultItem.keyInfo;\n//                 let fakeCmptOpt;\n//                 if (!newOption) {\n//                     fakeCmptOpt = oldTarOptsInMainType[index];\n//                 }\n//                 else {\n//                     if (fakeCmpt && fakeCmpt.subType === keyInfo.subType) {\n//                         fakeCmpt.name = keyInfo.name;\n//                         if (notInit) {\n//                             fakeCmptOpt = merge(oldTarOptsInMainType[index], newOption, true);\n//                         }\n//                     }\n//                     else {\n//                         fakeCmpt = extend({}, keyInfo);\n//                         if (notInit) {\n//                             fakeCmptOpt = clone(newOption);\n//                         }\n//                     }\n//                 }\n//                 if (fakeCmpt) {\n//                     notInit && resultTarOptsInMainType.push(fakeCmptOpt);\n//                     resultFakeCmptsInMainType.push(fakeCmpt);\n//                 }\n//                 else {\n//                     notInit && resultTarOptsInMainType.push(void 0);\n//                     resultFakeCmptsInMainType.push(void 0);\n//                 }\n//             });\n//         }\n//     });\n// }\nexport default OptionManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport { deprecateLog, deprecateReplaceLog } from '../../util/log.js';\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\nfunction compatEC2ItemStyle(opt) {\n  var itemStyleOpt = opt && opt.itemStyle;\n  if (!itemStyleOpt) {\n    return;\n  }\n  for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n    var styleName = POSSIBLE_STYLES[i];\n    var normalItemStyleOpt = itemStyleOpt.normal;\n    var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(\"itemStyle.normal.\" + styleName, styleName);\n      }\n      opt[styleName] = opt[styleName] || {};\n      if (!opt[styleName].normal) {\n        opt[styleName].normal = normalItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n      }\n      normalItemStyleOpt[styleName] = null;\n    }\n    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(\"itemStyle.emphasis.\" + styleName, \"emphasis.\" + styleName);\n      }\n      opt[styleName] = opt[styleName] || {};\n      if (!opt[styleName].emphasis) {\n        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n      }\n      emphasisItemStyleOpt[styleName] = null;\n    }\n  }\n}\nfunction convertNormalEmphasis(opt, optType, useExtend) {\n  if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\n    var normalOpt = opt[optType].normal;\n    var emphasisOpt = opt[optType].emphasis;\n    if (normalOpt) {\n      if (process.env.NODE_ENV !== 'production') {\n        // eslint-disable-next-line max-len\n        deprecateLog(\"'normal' hierarchy in \" + optType + \" has been removed since 4.0. All style properties are configured in \" + optType + \" directly now.\");\n      }\n      // Timeline controlStyle has other properties besides normal and emphasis\n      if (useExtend) {\n        opt[optType].normal = opt[optType].emphasis = null;\n        zrUtil.defaults(opt[optType], normalOpt);\n      } else {\n        opt[optType] = normalOpt;\n      }\n    }\n    if (emphasisOpt) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog(optType + \".emphasis has been changed to emphasis.\" + optType + \" since 4.0\");\n      }\n      opt.emphasis = opt.emphasis || {};\n      opt.emphasis[optType] = emphasisOpt;\n      // Also compat the case user mix the style and focus together in ec3 style\n      // for example: { itemStyle: { normal: {}, emphasis: {focus, shadowBlur} } }\n      if (emphasisOpt.focus) {\n        opt.emphasis.focus = emphasisOpt.focus;\n      }\n      if (emphasisOpt.blurScope) {\n        opt.emphasis.blurScope = emphasisOpt.blurScope;\n      }\n    }\n  }\n}\nfunction removeEC3NormalStatus(opt) {\n  convertNormalEmphasis(opt, 'itemStyle');\n  convertNormalEmphasis(opt, 'lineStyle');\n  convertNormalEmphasis(opt, 'areaStyle');\n  convertNormalEmphasis(opt, 'label');\n  convertNormalEmphasis(opt, 'labelLine');\n  // treemap\n  convertNormalEmphasis(opt, 'upperLabel');\n  // graph\n  convertNormalEmphasis(opt, 'edgeLabel');\n}\nfunction compatTextStyle(opt, propName) {\n  // Check whether is not object (string\\null\\undefined ...)\n  var labelOptSingle = isObject(opt) && opt[propName];\n  var textStyle = isObject(labelOptSingle) && labelOptSingle.textStyle;\n  if (textStyle) {\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line max-len\n      deprecateLog(\"textStyle hierarchy in \" + propName + \" has been removed since 4.0. All textStyle properties are configured in \" + propName + \" directly now.\");\n    }\n    for (var i = 0, len = modelUtil.TEXT_STYLE_OPTIONS.length; i < len; i++) {\n      var textPropName = modelUtil.TEXT_STYLE_OPTIONS[i];\n      if (textStyle.hasOwnProperty(textPropName)) {\n        labelOptSingle[textPropName] = textStyle[textPropName];\n      }\n    }\n  }\n}\nfunction compatEC3CommonStyles(opt) {\n  if (opt) {\n    removeEC3NormalStatus(opt);\n    compatTextStyle(opt, 'label');\n    opt.emphasis && compatTextStyle(opt.emphasis, 'label');\n  }\n}\nfunction processSeries(seriesOpt) {\n  if (!isObject(seriesOpt)) {\n    return;\n  }\n  compatEC2ItemStyle(seriesOpt);\n  removeEC3NormalStatus(seriesOpt);\n  compatTextStyle(seriesOpt, 'label');\n  // treemap\n  compatTextStyle(seriesOpt, 'upperLabel');\n  // graph\n  compatTextStyle(seriesOpt, 'edgeLabel');\n  if (seriesOpt.emphasis) {\n    compatTextStyle(seriesOpt.emphasis, 'label');\n    // treemap\n    compatTextStyle(seriesOpt.emphasis, 'upperLabel');\n    // graph\n    compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\n  }\n  var markPoint = seriesOpt.markPoint;\n  if (markPoint) {\n    compatEC2ItemStyle(markPoint);\n    compatEC3CommonStyles(markPoint);\n  }\n  var markLine = seriesOpt.markLine;\n  if (markLine) {\n    compatEC2ItemStyle(markLine);\n    compatEC3CommonStyles(markLine);\n  }\n  var markArea = seriesOpt.markArea;\n  if (markArea) {\n    compatEC3CommonStyles(markArea);\n  }\n  var data = seriesOpt.data;\n  // Break with ec3: if `setOption` again, there may be no `type` in option,\n  // then the backward compat based on option type will not be performed.\n  if (seriesOpt.type === 'graph') {\n    data = data || seriesOpt.nodes;\n    var edgeData = seriesOpt.links || seriesOpt.edges;\n    if (edgeData && !zrUtil.isTypedArray(edgeData)) {\n      for (var i = 0; i < edgeData.length; i++) {\n        compatEC3CommonStyles(edgeData[i]);\n      }\n    }\n    zrUtil.each(seriesOpt.categories, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  }\n  if (data && !zrUtil.isTypedArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      compatEC3CommonStyles(data[i]);\n    }\n  }\n  // mark point data\n  markPoint = seriesOpt.markPoint;\n  if (markPoint && markPoint.data) {\n    var mpData = markPoint.data;\n    for (var i = 0; i < mpData.length; i++) {\n      compatEC3CommonStyles(mpData[i]);\n    }\n  }\n  // mark line data\n  markLine = seriesOpt.markLine;\n  if (markLine && markLine.data) {\n    var mlData = markLine.data;\n    for (var i = 0; i < mlData.length; i++) {\n      if (zrUtil.isArray(mlData[i])) {\n        compatEC3CommonStyles(mlData[i][0]);\n        compatEC3CommonStyles(mlData[i][1]);\n      } else {\n        compatEC3CommonStyles(mlData[i]);\n      }\n    }\n  }\n  // Series\n  if (seriesOpt.type === 'gauge') {\n    compatTextStyle(seriesOpt, 'axisLabel');\n    compatTextStyle(seriesOpt, 'title');\n    compatTextStyle(seriesOpt, 'detail');\n  } else if (seriesOpt.type === 'treemap') {\n    convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\n    zrUtil.each(seriesOpt.levels, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  } else if (seriesOpt.type === 'tree') {\n    removeEC3NormalStatus(seriesOpt.leaves);\n  }\n  // sunburst starts from ec4, so it does not need to compat levels.\n}\nfunction toArr(o) {\n  return zrUtil.isArray(o) ? o : o ? [o] : [];\n}\nfunction toObj(o) {\n  return (zrUtil.isArray(o) ? o[0] : o) || {};\n}\nexport default function globalCompatStyle(option, isTheme) {\n  each(toArr(option.series), function (seriesOpt) {\n    isObject(seriesOpt) && processSeries(seriesOpt);\n  });\n  var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n  isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n  each(axes, function (axisName) {\n    each(toArr(option[axisName]), function (axisOpt) {\n      if (axisOpt) {\n        compatTextStyle(axisOpt, 'axisLabel');\n        compatTextStyle(axisOpt.axisPointer, 'label');\n      }\n    });\n  });\n  each(toArr(option.parallel), function (parallelOpt) {\n    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n    compatTextStyle(parallelAxisDefault, 'axisLabel');\n    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n  });\n  each(toArr(option.calendar), function (calendarOpt) {\n    convertNormalEmphasis(calendarOpt, 'itemStyle');\n    compatTextStyle(calendarOpt, 'dayLabel');\n    compatTextStyle(calendarOpt, 'monthLabel');\n    compatTextStyle(calendarOpt, 'yearLabel');\n  });\n  // radar.name.textStyle\n  each(toArr(option.radar), function (radarOpt) {\n    compatTextStyle(radarOpt, 'name');\n    // Use axisName instead of name because component has name property\n    if (radarOpt.name && radarOpt.axisName == null) {\n      radarOpt.axisName = radarOpt.name;\n      delete radarOpt.name;\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog('name property in radar component has been changed to axisName');\n      }\n    }\n    if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {\n      radarOpt.axisNameGap = radarOpt.nameGap;\n      delete radarOpt.nameGap;\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog('nameGap property in radar component has been changed to axisNameGap');\n      }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      each(radarOpt.indicator, function (indicatorOpt) {\n        if (indicatorOpt.text) {\n          deprecateReplaceLog('text', 'name', 'radar.indicator');\n        }\n      });\n    }\n  });\n  each(toArr(option.geo), function (geoOpt) {\n    if (isObject(geoOpt)) {\n      compatEC3CommonStyles(geoOpt);\n      each(toArr(geoOpt.regions), function (regionObj) {\n        compatEC3CommonStyles(regionObj);\n      });\n    }\n  });\n  each(toArr(option.timeline), function (timelineOpt) {\n    compatEC3CommonStyles(timelineOpt);\n    convertNormalEmphasis(timelineOpt, 'label');\n    convertNormalEmphasis(timelineOpt, 'itemStyle');\n    convertNormalEmphasis(timelineOpt, 'controlStyle', true);\n    var data = timelineOpt.data;\n    zrUtil.isArray(data) && zrUtil.each(data, function (item) {\n      if (zrUtil.isObject(item)) {\n        convertNormalEmphasis(item, 'label');\n        convertNormalEmphasis(item, 'itemStyle');\n      }\n    });\n  });\n  each(toArr(option.toolbox), function (toolboxOpt) {\n    convertNormalEmphasis(toolboxOpt, 'iconStyle');\n    each(toolboxOpt.feature, function (featureOpt) {\n      convertNormalEmphasis(featureOpt, 'iconStyle');\n    });\n  });\n  compatTextStyle(toObj(option.axisPointer), 'label');\n  compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\n  // Clean logs\n  // storedLogs = {};\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isArray, isObject, isTypedArray, defaults } from 'zrender/lib/core/util.js';\nimport compatStyle from './helper/compatStyle.js';\nimport { normalizeToArray } from '../util/model.js';\nimport { deprecateLog, deprecateReplaceLog } from '../util/log.js';\nfunction get(opt, path) {\n  var pathArr = path.split(',');\n  var obj = opt;\n  for (var i = 0; i < pathArr.length; i++) {\n    obj = obj && obj[pathArr[i]];\n    if (obj == null) {\n      break;\n    }\n  }\n  return obj;\n}\nfunction set(opt, path, val, overwrite) {\n  var pathArr = path.split(',');\n  var obj = opt;\n  var key;\n  var i = 0;\n  for (; i < pathArr.length - 1; i++) {\n    key = pathArr[i];\n    if (obj[key] == null) {\n      obj[key] = {};\n    }\n    obj = obj[key];\n  }\n  if (overwrite || obj[pathArr[i]] == null) {\n    obj[pathArr[i]] = val;\n  }\n}\nfunction compatLayoutProperties(option) {\n  option && each(LAYOUT_PROPERTIES, function (prop) {\n    if (prop[0] in option && !(prop[1] in option)) {\n      option[prop[1]] = option[prop[0]];\n    }\n  });\n}\nvar LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\nvar COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\nvar BAR_ITEM_STYLE_MAP = [['borderRadius', 'barBorderRadius'], ['borderColor', 'barBorderColor'], ['borderWidth', 'barBorderWidth']];\nfunction compatBarItemStyle(option) {\n  var itemStyle = option && option.itemStyle;\n  if (itemStyle) {\n    for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {\n      var oldName = BAR_ITEM_STYLE_MAP[i][1];\n      var newName = BAR_ITEM_STYLE_MAP[i][0];\n      if (itemStyle[oldName] != null) {\n        itemStyle[newName] = itemStyle[oldName];\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog(oldName, newName);\n        }\n      }\n    }\n  }\n}\nfunction compatPieLabel(option) {\n  if (!option) {\n    return;\n  }\n  if (option.alignTo === 'edge' && option.margin != null && option.edgeDistance == null) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('label.margin', 'label.edgeDistance', 'pie');\n    }\n    option.edgeDistance = option.margin;\n  }\n}\nfunction compatSunburstState(option) {\n  if (!option) {\n    return;\n  }\n  if (option.downplay && !option.blur) {\n    option.blur = option.downplay;\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('downplay', 'blur', 'sunburst');\n    }\n  }\n}\nfunction compatGraphFocus(option) {\n  if (!option) {\n    return;\n  }\n  if (option.focusNodeAdjacency != null) {\n    option.emphasis = option.emphasis || {};\n    if (option.emphasis.focus == null) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog('focusNodeAdjacency', 'emphasis: { focus: \\'adjacency\\'}', 'graph/sankey');\n      }\n      option.emphasis.focus = 'adjacency';\n    }\n  }\n}\nfunction traverseTree(data, cb) {\n  if (data) {\n    for (var i = 0; i < data.length; i++) {\n      cb(data[i]);\n      data[i] && traverseTree(data[i].children, cb);\n    }\n  }\n}\nexport default function globalBackwardCompat(option, isTheme) {\n  compatStyle(option, isTheme);\n  // Make sure series array for model initialization.\n  option.series = normalizeToArray(option.series);\n  each(option.series, function (seriesOpt) {\n    if (!isObject(seriesOpt)) {\n      return;\n    }\n    var seriesType = seriesOpt.type;\n    if (seriesType === 'line') {\n      if (seriesOpt.clipOverflow != null) {\n        seriesOpt.clip = seriesOpt.clipOverflow;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('clipOverflow', 'clip', 'line');\n        }\n      }\n    } else if (seriesType === 'pie' || seriesType === 'gauge') {\n      if (seriesOpt.clockWise != null) {\n        seriesOpt.clockwise = seriesOpt.clockWise;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('clockWise', 'clockwise');\n        }\n      }\n      compatPieLabel(seriesOpt.label);\n      var data = seriesOpt.data;\n      if (data && !isTypedArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n          compatPieLabel(data[i]);\n        }\n      }\n      if (seriesOpt.hoverOffset != null) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n        if (seriesOpt.emphasis.scaleSize = null) {\n          if (process.env.NODE_ENV !== 'production') {\n            deprecateReplaceLog('hoverOffset', 'emphasis.scaleSize');\n          }\n          seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;\n        }\n      }\n    } else if (seriesType === 'gauge') {\n      var pointerColor = get(seriesOpt, 'pointer.color');\n      pointerColor != null && set(seriesOpt, 'itemStyle.color', pointerColor);\n    } else if (seriesType === 'bar') {\n      compatBarItemStyle(seriesOpt);\n      compatBarItemStyle(seriesOpt.backgroundStyle);\n      compatBarItemStyle(seriesOpt.emphasis);\n      var data = seriesOpt.data;\n      if (data && !isTypedArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n          if (typeof data[i] === 'object') {\n            compatBarItemStyle(data[i]);\n            compatBarItemStyle(data[i] && data[i].emphasis);\n          }\n        }\n      }\n    } else if (seriesType === 'sunburst') {\n      var highlightPolicy = seriesOpt.highlightPolicy;\n      if (highlightPolicy) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n        if (!seriesOpt.emphasis.focus) {\n          seriesOpt.emphasis.focus = highlightPolicy;\n          if (process.env.NODE_ENV !== 'production') {\n            deprecateReplaceLog('highlightPolicy', 'emphasis.focus', 'sunburst');\n          }\n        }\n      }\n      compatSunburstState(seriesOpt);\n      traverseTree(seriesOpt.data, compatSunburstState);\n    } else if (seriesType === 'graph' || seriesType === 'sankey') {\n      compatGraphFocus(seriesOpt);\n      // TODO nodes, edges?\n    } else if (seriesType === 'map') {\n      if (seriesOpt.mapType && !seriesOpt.map) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('mapType', 'map', 'map');\n        }\n        seriesOpt.map = seriesOpt.mapType;\n      }\n      if (seriesOpt.mapLocation) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('`mapLocation` is not used anymore.');\n        }\n        defaults(seriesOpt, seriesOpt.mapLocation);\n      }\n    }\n    if (seriesOpt.hoverAnimation != null) {\n      seriesOpt.emphasis = seriesOpt.emphasis || {};\n      if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('hoverAnimation', 'emphasis.scale');\n        }\n        seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;\n      }\n    }\n    compatLayoutProperties(seriesOpt);\n  });\n  // dataRange has changed to visualMap\n  if (option.dataRange) {\n    option.visualMap = option.dataRange;\n  }\n  each(COMPATITABLE_COMPONENTS, function (componentName) {\n    var options = option[componentName];\n    if (options) {\n      if (!isArray(options)) {\n        options = [options];\n      }\n      each(options, function (option) {\n        compatLayoutProperties(option);\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { addSafe } from '../util/number.js';\n// (1) [Caution]: the logic is correct based on the premises:\n//     data processing stage is blocked in stream.\n//     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\n// (2) Only register once when import repeatedly.\n//     Should be executed after series is filtered and before stack calculation.\nexport default function dataStack(ecModel) {\n  var stackInfoMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var stack = seriesModel.get('stack');\n    // Compatible: when `stack` is set as '', do not stack.\n    if (stack) {\n      var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\n      var data = seriesModel.getData();\n      var stackInfo = {\n        // Used for calculate axis extent automatically.\n        // TODO: Type getCalculationInfo return more specific type?\n        stackResultDimension: data.getCalculationInfo('stackResultDimension'),\n        stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\n        stackedDimension: data.getCalculationInfo('stackedDimension'),\n        stackedByDimension: data.getCalculationInfo('stackedByDimension'),\n        isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\n        data: data,\n        seriesModel: seriesModel\n      };\n      // If stacked on axis that do not support data stack.\n      if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\n        return;\n      }\n      stackInfoList.push(stackInfo);\n    }\n  });\n  // Process each stack group\n  stackInfoMap.each(function (stackInfoList) {\n    if (stackInfoList.length === 0) {\n      return;\n    }\n    // Check if stack order needs to be reversed\n    var firstSeries = stackInfoList[0].seriesModel;\n    var stackOrder = firstSeries.get('stackOrder') || 'seriesAsc';\n    if (stackOrder === 'seriesDesc') {\n      stackInfoList.reverse();\n    }\n    // Set stackedOnSeries for each series in the final order\n    each(stackInfoList, function (stackInfo, index) {\n      stackInfo.data.setCalculationInfo('stackedOnSeries', index > 0 ? stackInfoList[index - 1].seriesModel : null);\n    });\n    // Calculate stack values\n    calculateStack(stackInfoList);\n  });\n}\nfunction calculateStack(stackInfoList) {\n  each(stackInfoList, function (targetStackInfo, idxInStack) {\n    var resultVal = [];\n    var resultNaN = [NaN, NaN];\n    var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\n    var targetData = targetStackInfo.data;\n    var isStackedByIndex = targetStackInfo.isStackedByIndex;\n    var stackStrategy = targetStackInfo.seriesModel.get('stackStrategy') || 'samesign';\n    // Should not write on raw data, because stack series model list changes\n    // depending on legend selection.\n    targetData.modify(dims, function (v0, v1, dataIndex) {\n      var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex);\n      // Consider `connectNulls` of line area, if value is NaN, stackedOver\n      // should also be NaN, to draw a appropriate belt area.\n      if (isNaN(sum)) {\n        return resultNaN;\n      }\n      var byValue;\n      var stackedDataRawIndex;\n      if (isStackedByIndex) {\n        stackedDataRawIndex = targetData.getRawIndex(dataIndex);\n      } else {\n        byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\n      }\n      // If stackOver is NaN, chart view will render point on value start.\n      var stackedOver = NaN;\n      for (var j = idxInStack - 1; j >= 0; j--) {\n        var stackInfo = stackInfoList[j];\n        // Has been optimized by inverted indices on `stackedByDimension`.\n        if (!isStackedByIndex) {\n          stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\n        }\n        if (stackedDataRawIndex >= 0) {\n          var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex);\n          // Considering positive stack, negative stack and empty data\n          if (stackStrategy === 'all' // single stack group\n          || stackStrategy === 'positive' && val > 0 || stackStrategy === 'negative' && val < 0 || stackStrategy === 'samesign' && sum >= 0 && val > 0 // All positive stack\n          || stackStrategy === 'samesign' && sum <= 0 && val < 0 // All negative stack\n          ) {\n            // The sum has to be very small to be affected by the\n            // floating arithmetic problem. An incorrect result will probably\n            // cause axis min/max to be filtered incorrectly.\n            sum = addSafe(sum, val);\n            stackedOver = val;\n            break;\n          }\n        }\n      }\n      resultVal[0] = sum;\n      resultVal[1] = stackedOver;\n      return resultVal;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isTypedArray, clone, createHashMap, isArray, isObject, isArrayLike, hasOwn, assert, each, map, isNumber, isString, keys } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_UNKNOWN, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW } from '../util/types.js';\nimport { getDataItemValue } from '../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './helper/sourceHelper.js';\n;\n// @inner\nvar SourceImpl = /** @class */function () {\n  function SourceImpl(fields) {\n    this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\n    this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN;\n    // Visit config\n    this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\n    this.startIndex = fields.startIndex || 0;\n    this.dimensionsDetectedCount = fields.dimensionsDetectedCount;\n    this.metaRawOption = fields.metaRawOption;\n    var dimensionsDefine = this.dimensionsDefine = fields.dimensionsDefine;\n    if (dimensionsDefine) {\n      for (var i = 0; i < dimensionsDefine.length; i++) {\n        var dim = dimensionsDefine[i];\n        if (dim.type == null) {\n          if (guessOrdinal(this, i) === BE_ORDINAL.Must) {\n            dim.type = 'ordinal';\n          }\n        }\n      }\n    }\n  }\n  return SourceImpl;\n}();\nexport function isSourceInstance(val) {\n  return val instanceof SourceImpl;\n}\n/**\n * Create a source from option.\n * NOTE: Created source is immutable. Don't change any properties in it.\n */\nexport function createSource(sourceData, thisMetaRawOption,\n// can be null. If not provided, auto detect it from `sourceData`.\nsourceFormat) {\n  sourceFormat = sourceFormat || detectSourceFormat(sourceData);\n  var seriesLayoutBy = thisMetaRawOption.seriesLayoutBy;\n  var determined = determineSourceDimensions(sourceData, sourceFormat, seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);\n  var source = new SourceImpl({\n    data: sourceData,\n    sourceFormat: sourceFormat,\n    seriesLayoutBy: seriesLayoutBy,\n    dimensionsDefine: determined.dimensionsDefine,\n    startIndex: determined.startIndex,\n    dimensionsDetectedCount: determined.dimensionsDetectedCount,\n    metaRawOption: clone(thisMetaRawOption)\n  });\n  return source;\n}\n/**\n * Wrap original series data for some compatibility cases.\n */\nexport function createSourceFromSeriesDataOption(data) {\n  return new SourceImpl({\n    data: data,\n    sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL\n  });\n}\n/**\n * Clone source but excludes source data.\n */\nexport function cloneSourceShallow(source) {\n  return new SourceImpl({\n    data: source.data,\n    sourceFormat: source.sourceFormat,\n    seriesLayoutBy: source.seriesLayoutBy,\n    dimensionsDefine: clone(source.dimensionsDefine),\n    startIndex: source.startIndex,\n    dimensionsDetectedCount: source.dimensionsDetectedCount\n  });\n}\n/**\n * Note: An empty array will be detected as `SOURCE_FORMAT_ARRAY_ROWS`.\n */\nexport function detectSourceFormat(data) {\n  var sourceFormat = SOURCE_FORMAT_UNKNOWN;\n  if (isTypedArray(data)) {\n    sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\n  } else if (isArray(data)) {\n    // FIXME Whether tolerate null in top level array?\n    if (data.length === 0) {\n      sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n    }\n    for (var i = 0, len = data.length; i < len; i++) {\n      var item = data[i];\n      if (item == null) {\n        continue;\n      } else if (isArray(item) || isTypedArray(item)) {\n        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n        break;\n      } else if (isObject(item)) {\n        sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\n        break;\n      }\n    }\n  } else if (isObject(data)) {\n    for (var key in data) {\n      if (hasOwn(data, key) && isArrayLike(data[key])) {\n        sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\n        break;\n      }\n    }\n  }\n  return sourceFormat;\n}\n/**\n * Determine the source definitions from data standalone dimensions definitions\n * are not specified.\n */\nfunction determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader,\n// standalone raw dimensions definition, like:\n// {\n//     dimensions: ['aa', 'bb', { name: 'cc', type: 'time' }]\n// }\n// in `dataset` or `series`\ndimensionsDefine) {\n  var dimensionsDetectedCount;\n  var startIndex;\n  // PENDING: Could data be null/undefined here?\n  // currently, if `dataset.source` not specified, error thrown.\n  // if `series.data` not specified, nothing rendered without error thrown.\n  // Should test these cases.\n  if (!data) {\n    return {\n      dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n      startIndex: startIndex,\n      dimensionsDetectedCount: dimensionsDetectedCount\n    };\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data;\n    // Rule: Most of the first line are string: it is header.\n    // Caution: consider a line with 5 string and 1 number,\n    // it still can not be sure it is a head, because the\n    // 5 string may be 5 values of category columns.\n    if (sourceHeader === 'auto' || sourceHeader == null) {\n      arrayRowsTravelFirst(function (val) {\n        // '-' is regarded as null/undefined.\n        if (val != null && val !== '-') {\n          if (isString(val)) {\n            startIndex == null && (startIndex = 1);\n          } else {\n            startIndex = 0;\n          }\n        }\n        // 10 is an experience number, avoid long loop.\n      }, seriesLayoutBy, dataArrayRows, 10);\n    } else {\n      startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;\n    }\n    if (!dimensionsDefine && startIndex === 1) {\n      dimensionsDefine = [];\n      arrayRowsTravelFirst(function (val, index) {\n        dimensionsDefine[index] = val != null ? val + '' : '';\n      }, seriesLayoutBy, dataArrayRows, Infinity);\n    }\n    dimensionsDetectedCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? dataArrayRows.length : dataArrayRows[0] ? dataArrayRows[0].length : null;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = objectRowsCollectDimensions(data);\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = [];\n      each(data, function (colArr, key) {\n        dimensionsDefine.push(key);\n      });\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var value0 = getDataItemValue(data[0]);\n    dimensionsDetectedCount = isArray(value0) && value0.length || 1;\n  } else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!!dimensionsDefine, 'dimensions must be given if data is TypedArray.');\n    }\n  }\n  return {\n    startIndex: startIndex,\n    dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n    dimensionsDetectedCount: dimensionsDetectedCount\n  };\n}\nfunction objectRowsCollectDimensions(data) {\n  var firstIndex = 0;\n  var obj;\n  while (firstIndex < data.length && !(obj = data[firstIndex++])) {} // jshint ignore: line\n  if (obj) {\n    return keys(obj);\n  }\n}\n// Consider dimensions defined like ['A', 'price', 'B', 'price', 'C', 'price'],\n// which is reasonable. But dimension name is duplicated.\n// Returns undefined or an array contains only object without null/undefined or string.\nfunction normalizeDimensionsOption(dimensionsDefine) {\n  if (!dimensionsDefine) {\n    // The meaning of null/undefined is different from empty array.\n    return;\n  }\n  var nameMap = createHashMap();\n  return map(dimensionsDefine, function (rawItem, index) {\n    rawItem = isObject(rawItem) ? rawItem : {\n      name: rawItem\n    };\n    // Other fields will be discarded.\n    var item = {\n      name: rawItem.name,\n      displayName: rawItem.displayName,\n      type: rawItem.type\n    };\n    // User can set null in dimensions.\n    // We don't auto specify name, otherwise a given name may\n    // cause it to be referred unexpectedly.\n    if (item.name == null) {\n      return item;\n    }\n    // Also consider number form like 2012.\n    item.name += '';\n    // User may also specify displayName.\n    // displayName will always exists except user not\n    // specified or dim name is not specified or detected.\n    // (A auto generated dim name will not be used as\n    // displayName).\n    if (item.displayName == null) {\n      item.displayName = item.name;\n    }\n    var exist = nameMap.get(item.name);\n    if (!exist) {\n      nameMap.set(item.name, {\n        count: 1\n      });\n    } else {\n      item.name += '-' + exist.count++;\n    }\n    return item;\n  });\n}\nfunction arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\n  if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      cb(data[i] ? data[i][0] : null, i);\n    }\n  } else {\n    var value0 = data[0] || [];\n    for (var i = 0; i < value0.length && i < maxLoop; i++) {\n      cb(value0[i], i);\n    }\n  }\n}\nexport function shouldRetrieveDataByName(source) {\n  var sourceFormat = source.sourceFormat;\n  return sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _a, _b, _c, _d;\n// TODO\n// ??? refactor? check the outer usage of data provider.\n// merge with defaultDimValueGetter?\nimport { isTypedArray, extend, assert, each, isObject, bind, isArray } from 'zrender/lib/core/util.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SERIES_LAYOUT_BY_COLUMN, SERIES_LAYOUT_BY_ROW } from '../../util/types.js';\nimport { error } from '../../util/log.js';\nvar providerMethods;\nvar mountMethods;\n/**\n * If normal array used, mutable chunk size is supported.\n * If typed array used, chunk size must be fixed.\n */\nvar DefaultDataProvider = /** @class */function () {\n  function DefaultDataProvider(sourceParam, dimSize) {\n    // let source: Source;\n    var source = !isSourceInstance(sourceParam) ? createSourceFromSeriesDataOption(sourceParam) : sourceParam;\n    // declare source is Source;\n    this._source = source;\n    var data = this._data = source.data;\n    var sourceFormat = source.sourceFormat;\n    var seriesLayoutBy = source.seriesLayoutBy;\n    // Typed array. TODO IE10+?\n    if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (dimSize == null) {\n          throw new Error('Typed array data must specify dimension size');\n        }\n      }\n      this._offset = 0;\n      this._dimSize = dimSize;\n      this._data = data;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      var validator = rawSourceDataValidatorMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n      validator && validator(data, source.dimensionsDefine);\n    }\n    mountMethods(this, data, source);\n  }\n  DefaultDataProvider.prototype.getSource = function () {\n    return this._source;\n  };\n  DefaultDataProvider.prototype.count = function () {\n    return 0;\n  };\n  DefaultDataProvider.prototype.getItem = function (idx, out) {\n    return;\n  };\n  DefaultDataProvider.prototype.appendData = function (newData) {};\n  DefaultDataProvider.prototype.clean = function () {};\n  DefaultDataProvider.protoInitialize = function () {\n    // PENDING: To avoid potential incompat (e.g., prototype\n    // is visited somewhere), still init them on prototype.\n    var proto = DefaultDataProvider.prototype;\n    proto.pure = false;\n    proto.persistent = true;\n  }();\n  DefaultDataProvider.internalField = function () {\n    var _a;\n    mountMethods = function (provider, data, source) {\n      var sourceFormat = source.sourceFormat;\n      var seriesLayoutBy = source.seriesLayoutBy;\n      var startIndex = source.startIndex;\n      var dimsDef = source.dimensionsDefine;\n      var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n      if (process.env.NODE_ENV !== 'production') {\n        assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\n      }\n      extend(provider, methods);\n      if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n        provider.getItem = getItemForTypedArray;\n        provider.count = countForTypedArray;\n        provider.fillStorage = fillStorageForTypedArray;\n      } else {\n        var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\n        provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\n        var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\n        provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\n      }\n    };\n    var getItemForTypedArray = function (idx, out) {\n      idx = idx - this._offset;\n      out = out || [];\n      var data = this._data;\n      var dimSize = this._dimSize;\n      var offset = dimSize * idx;\n      for (var i = 0; i < dimSize; i++) {\n        out[i] = data[offset + i];\n      }\n      return out;\n    };\n    var fillStorageForTypedArray = function (start, end, storage, extent) {\n      var data = this._data;\n      var dimSize = this._dimSize;\n      for (var dim = 0; dim < dimSize; dim++) {\n        var dimExtent = extent[dim];\n        var min = dimExtent[0] == null ? Infinity : dimExtent[0];\n        var max = dimExtent[1] == null ? -Infinity : dimExtent[1];\n        var count = end - start;\n        var arr = storage[dim];\n        for (var i = 0; i < count; i++) {\n          // appendData with TypedArray will always do replace in provider.\n          var val = data[i * dimSize + dim];\n          arr[start + i] = val;\n          val < min && (min = val);\n          val > max && (max = val);\n        }\n        dimExtent[0] = min;\n        dimExtent[1] = max;\n      }\n    };\n    var countForTypedArray = function () {\n      return this._data ? this._data.length / this._dimSize : 0;\n    };\n    providerMethods = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\n      pure: true,\n      appendData: function () {\n        throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\n      }\n    }, _a[SOURCE_FORMAT_OBJECT_ROWS] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\n      pure: true,\n      appendData: function (newData) {\n        var data = this._data;\n        each(newData, function (newCol, key) {\n          var oldCol = data[key] || (data[key] = []);\n          for (var i = 0; i < (newCol || []).length; i++) {\n            oldCol.push(newCol[i]);\n          }\n        });\n      }\n    }, _a[SOURCE_FORMAT_ORIGINAL] = {\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_TYPED_ARRAY] = {\n      persistent: false,\n      pure: true,\n      appendData: function (newData) {\n        if (process.env.NODE_ENV !== 'production') {\n          assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\n        }\n        this._data = newData;\n      },\n      // Clean self if data is already used.\n      clean: function () {\n        // PENDING\n        this._offset += this.count();\n        this._data = null;\n      }\n    }, _a);\n    function appendDataSimply(newData) {\n      for (var i = 0; i < newData.length; i++) {\n        this._data.push(newData[i]);\n      }\n    }\n  }();\n  return DefaultDataProvider;\n}();\nexport { DefaultDataProvider };\nvar validateSimply = function (rawData) {\n  if (!isArray(rawData)) {\n    error('series.data or dataset.source must be an array.');\n  }\n};\n/**\n * Only run in dev mode - hint users for debug.\n */\nvar rawSourceDataValidatorMap = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = validateSimply, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = validateSimply, _a[SOURCE_FORMAT_OBJECT_ROWS] = validateSimply, _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, dimsDef) {\n  for (var i = 0; i < dimsDef.length; i++) {\n    var dimName = dimsDef[i].name;\n    if (dimName == null) {\n      error('dimension name must not be null/undefined.');\n    }\n  }\n}, _a[SOURCE_FORMAT_ORIGINAL] = validateSimply, _a);\nvar getItemSimply = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx];\n};\nvar rawSourceItemGetterMap = (_b = {}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx + startIndex];\n}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx, out) {\n  idx += startIndex;\n  var item = out || [];\n  var data = rawData;\n  for (var i = 0; i < data.length; i++) {\n    var row = data[i];\n    item[i] = row ? row[idx] : null;\n  }\n  return item;\n}, _b[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply, _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx, out) {\n  var item = out || [];\n  for (var i = 0; i < dimsDef.length; i++) {\n    var dimName = dimsDef[i].name;\n    var col = dimName != null ? rawData[dimName] : null;\n    item[i] = col ? col[idx] : null;\n  }\n  return item;\n}, _b[SOURCE_FORMAT_ORIGINAL] = getItemSimply, _b);\nexport function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n  return method;\n}\nvar countSimply = function (rawData, startIndex, dimsDef) {\n  return rawData.length;\n};\nvar rawSourceDataCounterMap = (_c = {}, _c[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\n  return Math.max(0, rawData.length - startIndex);\n}, _c[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\n  var row = rawData[0];\n  return row ? Math.max(0, row.length - startIndex) : 0;\n}, _c[SOURCE_FORMAT_OBJECT_ROWS] = countSimply, _c[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\n  var dimName = dimsDef[0].name;\n  var col = dimName != null ? rawData[dimName] : null;\n  return col ? col.length : 0;\n}, _c[SOURCE_FORMAT_ORIGINAL] = countSimply, _c);\nexport function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n  return method;\n}\nvar getRawValueSimply = function (dataItem, dimIndex, property) {\n  return dataItem[dimIndex];\n};\nvar rawSourceValueGetterMap = (_d = {}, _d[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply, _d[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, property) {\n  return dataItem[property];\n}, _d[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply, _d[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, property) {\n  // FIXME: In some case (markpoint in geo (geo-map.html)),\n  // dataItem is {coord: [...]}\n  var value = getDataItemValue(dataItem);\n  return !(value instanceof Array) ? value : value[dimIndex];\n}, _d[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply, _d);\nexport function getRawSourceValueGetter(sourceFormat) {\n  var method = rawSourceValueGetterMap[sourceFormat];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get value on \"' + sourceFormat + '\".');\n  }\n  return method;\n}\nfunction getMethodMapKey(sourceFormat, seriesLayoutBy) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + '_' + seriesLayoutBy : sourceFormat;\n}\n// ??? FIXME can these logic be more neat: getRawValue, getRawDataItem,\n// Consider persistent.\n// Caution: why use raw value to display on label or tooltip?\n// A reason is to avoid format. For example time value we do not know\n// how to format is expected. More over, if stack is used, calculated\n// value may be 0.91000000001, which have brings trouble to display.\n// TODO: consider how to treat null/undefined/NaN when display?\nexport function retrieveRawValue(data, dataIndex,\n// If dimIndex is null/undefined, return OptionDataItem.\n// Otherwise, return OptionDataValue.\ndim) {\n  if (!data) {\n    return;\n  }\n  // Consider data may be not persistent.\n  var dataItem = data.getRawDataItem(dataIndex);\n  if (dataItem == null) {\n    return;\n  }\n  var store = data.getStore();\n  var sourceFormat = store.getSource().sourceFormat;\n  if (dim != null) {\n    var dimIndex = data.getDimensionIndex(dim);\n    var property = store.getDimensionProperty(dimIndex);\n    return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, property);\n  } else {\n    var result = dataItem;\n    if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      result = getDataItemValue(dataItem);\n    }\n    return result;\n  }\n}\n/**\n * Compatible with some cases (in pie, map) like:\n * data: [{name: 'xx', value: 5, selected: true}, ...]\n * where only sourceFormat is 'original' and 'objectRows' supported.\n *\n * // TODO\n * Supported detail options in data item when using 'arrayRows'.\n *\n * @param data\n * @param dataIndex\n * @param attr like 'selected'\n */\nexport function retrieveRawAttr(data, dataIndex, attr) {\n  if (!data) {\n    return;\n  }\n  var sourceFormat = data.getStore().getSource().sourceFormat;\n  if (sourceFormat !== SOURCE_FORMAT_ORIGINAL && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n    return;\n  }\n  var dataItem = data.getRawDataItem(dataIndex);\n  if (sourceFormat === SOURCE_FORMAT_ORIGINAL && !isObject(dataItem)) {\n    dataItem = null;\n  }\n  if (dataItem) {\n    return dataItem[attr];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { formatTpl } from '../../util/format.js';\nimport { error, makePrintable } from '../../util/log.js';\nvar DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g;\nvar DataFormatMixin = /** @class */function () {\n  function DataFormatMixin() {}\n  /**\n   * Get params for formatter\n   */\n  DataFormatMixin.prototype.getDataParams = function (dataIndex, dataType) {\n    var data = this.getData(dataType);\n    var rawValue = this.getRawValue(dataIndex, dataType);\n    var rawDataIndex = data.getRawIndex(dataIndex);\n    var name = data.getName(dataIndex);\n    var itemOpt = data.getRawDataItem(dataIndex);\n    var style = data.getItemVisual(dataIndex, 'style');\n    var color = style && style[data.getItemVisual(dataIndex, 'drawType') || 'fill'];\n    var borderColor = style && style.stroke;\n    var mainType = this.mainType;\n    var isSeries = mainType === 'series';\n    var userOutput = data.userOutput && data.userOutput.get();\n    return {\n      componentType: mainType,\n      componentSubType: this.subType,\n      componentIndex: this.componentIndex,\n      seriesType: isSeries ? this.subType : null,\n      seriesIndex: this.seriesIndex,\n      seriesId: isSeries ? this.id : null,\n      seriesName: isSeries ? this.name : null,\n      name: name,\n      dataIndex: rawDataIndex,\n      data: itemOpt,\n      dataType: dataType,\n      value: rawValue,\n      color: color,\n      borderColor: borderColor,\n      dimensionNames: userOutput ? userOutput.fullDimensions : null,\n      encode: userOutput ? userOutput.encode : null,\n      // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n      $vars: ['seriesName', 'name', 'value']\n    };\n  };\n  /**\n   * Format label\n   * @param dataIndex\n   * @param status 'normal' by default\n   * @param dataType\n   * @param labelDimIndex Only used in some chart that\n   *        use formatter in different dimensions, like radar.\n   * @param formatter Formatter given outside.\n   * @return return null/undefined if no formatter\n   */\n  DataFormatMixin.prototype.getFormattedLabel = function (dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {\n    status = status || 'normal';\n    var data = this.getData(dataType);\n    var params = this.getDataParams(dataIndex, dataType);\n    if (extendParams) {\n      params.value = extendParams.interpolatedValue;\n    }\n    if (labelDimIndex != null && zrUtil.isArray(params.value)) {\n      params.value = params.value[labelDimIndex];\n    }\n    if (!formatter) {\n      var itemModel = data.getItemModel(dataIndex);\n      // @ts-ignore\n      formatter = itemModel.get(status === 'normal' ? ['label', 'formatter'] : [status, 'label', 'formatter']);\n    }\n    if (zrUtil.isFunction(formatter)) {\n      params.status = status;\n      params.dimensionIndex = labelDimIndex;\n      return formatter(params);\n    } else if (zrUtil.isString(formatter)) {\n      var str = formatTpl(formatter, params);\n      // Support 'aaa{@[3]}bbb{@product}ccc'.\n      // Do not support '}' in dim name util have to.\n      return str.replace(DIMENSION_LABEL_REG, function (origin, dimStr) {\n        var len = dimStr.length;\n        var dimLoose = dimStr;\n        if (dimLoose.charAt(0) === '[' && dimLoose.charAt(len - 1) === ']') {\n          dimLoose = +dimLoose.slice(1, len - 1); // Also support: '[]' => 0\n          if (process.env.NODE_ENV !== 'production') {\n            if (isNaN(dimLoose)) {\n              error(\"Invalide label formatter: @\" + dimStr + \", only support @[0], @[1], @[2], ...\");\n            }\n          }\n        }\n        var val = retrieveRawValue(data, dataIndex, dimLoose);\n        if (extendParams && zrUtil.isArray(extendParams.interpolatedValue)) {\n          var dimIndex = data.getDimensionIndex(dimLoose);\n          if (dimIndex >= 0) {\n            val = extendParams.interpolatedValue[dimIndex];\n          }\n        }\n        return val != null ? val + '' : '';\n      });\n    }\n  };\n  /**\n   * Get raw value in option\n   */\n  DataFormatMixin.prototype.getRawValue = function (idx, dataType) {\n    return retrieveRawValue(this.getData(dataType), idx);\n  };\n  /**\n   * Should be implemented.\n   * @param {number} dataIndex\n   * @param {boolean} [multipleSeries=false]\n   * @param {string} [dataType]\n   */\n  DataFormatMixin.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    // Empty function\n    return;\n  };\n  return DataFormatMixin;\n}();\nexport { DataFormatMixin };\n;\n// PENDING: previously we accept this type when calling `formatTooltip`,\n// but guess little chance has been used outside. Do we need to backward\n// compat it?\n// type TooltipFormatResultLegacyObject = {\n//     // `html` means the markup language text, either in 'html' or 'richText'.\n//     // The name `html` is not appropriate because in 'richText' it is not a HTML\n//     // string. But still support it for backward compatibility.\n//     html: string;\n//     markers: Dictionary<ColorString>;\n// };\n/**\n * For backward compat, normalize the return from `formatTooltip`.\n */\nexport function normalizeTooltipFormatResult(result) {\n  var markupText;\n  // let markers: Dictionary<ColorString>;\n  var markupFragment;\n  if (zrUtil.isObject(result)) {\n    if (result.type) {\n      markupFragment = result;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('The return type of `formatTooltip` is not supported: ' + makePrintable(result));\n      }\n    }\n    // else {\n    //     markupText = (result as TooltipFormatResultLegacyObject).html;\n    //     markers = (result as TooltipFormatResultLegacyObject).markers;\n    //     if (markersExisting) {\n    //         markers = zrUtil.merge(markersExisting, markers);\n    //     }\n    // }\n  } else {\n    markupText = result;\n  }\n  return {\n    text: markupText,\n    // markers: markers || markersExisting,\n    frag: markupFragment\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, isArray } from 'zrender/lib/core/util.js';\n;\n/**\n * @param {Object} define\n * @return See the return of `createTask`.\n */\nexport function createTask(define) {\n  return new Task(define);\n}\nvar Task = /** @class */function () {\n  function Task(define) {\n    define = define || {};\n    this._reset = define.reset;\n    this._plan = define.plan;\n    this._count = define.count;\n    this._onDirty = define.onDirty;\n    this._dirty = true;\n  }\n  /**\n   * @param step Specified step.\n   * @param skip Skip customer perform call.\n   * @param modBy Sampling window size.\n   * @param modDataCount Sampling count.\n   * @return whether unfinished.\n   */\n  Task.prototype.perform = function (performArgs) {\n    var upTask = this._upstream;\n    var skip = performArgs && performArgs.skip;\n    // TODO some refactor.\n    // Pull data. Must pull data each time, because context.data\n    // may be updated by Series.setData.\n    if (this._dirty && upTask) {\n      var context = this.context;\n      context.data = context.outputData = upTask.context.outputData;\n    }\n    if (this.__pipeline) {\n      this.__pipeline.currentTask = this;\n    }\n    var planResult;\n    if (this._plan && !skip) {\n      planResult = this._plan(this.context);\n    }\n    // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n    // elements uniformed distributed when progress, especially when moving or zooming.\n    var lastModBy = normalizeModBy(this._modBy);\n    var lastModDataCount = this._modDataCount || 0;\n    var modBy = normalizeModBy(performArgs && performArgs.modBy);\n    var modDataCount = performArgs && performArgs.modDataCount || 0;\n    if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n      planResult = 'reset';\n    }\n    function normalizeModBy(val) {\n      !(val >= 1) && (val = 1); // jshint ignore:line\n      return val;\n    }\n    var forceFirstProgress;\n    if (this._dirty || planResult === 'reset') {\n      this._dirty = false;\n      forceFirstProgress = this._doReset(skip);\n    }\n    this._modBy = modBy;\n    this._modDataCount = modDataCount;\n    var step = performArgs && performArgs.step;\n    if (upTask) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(upTask._outputDueEnd != null);\n      }\n      this._dueEnd = upTask._outputDueEnd;\n    }\n    // DataTask or overallTask\n    else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!this._progress || this._count);\n      }\n      this._dueEnd = this._count ? this._count(this.context) : Infinity;\n    }\n    // Note: Stubs, that its host overall task let it has progress, has progress.\n    // If no progress, pass index from upstream to downstream each time plan called.\n    if (this._progress) {\n      var start = this._dueIndex;\n      var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n      if (!skip && (forceFirstProgress || start < end)) {\n        var progress = this._progress;\n        if (isArray(progress)) {\n          for (var i = 0; i < progress.length; i++) {\n            this._doProgress(progress[i], start, end, modBy, modDataCount);\n          }\n        } else {\n          this._doProgress(progress, start, end, modBy, modDataCount);\n        }\n      }\n      this._dueIndex = end;\n      // If no `outputDueEnd`, assume that output data and\n      // input data is the same, so use `dueIndex` as `outputDueEnd`.\n      var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n      if (process.env.NODE_ENV !== 'production') {\n        // ??? Can not rollback.\n        assert(outputDueEnd >= this._outputDueEnd);\n      }\n      this._outputDueEnd = outputDueEnd;\n    } else {\n      // (1) Some overall task has no progress.\n      // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n      // This should always be performed so it can be passed to downstream.\n      this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n    }\n    return this.unfinished();\n  };\n  Task.prototype.dirty = function () {\n    this._dirty = true;\n    this._onDirty && this._onDirty(this.context);\n  };\n  Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\n    iterator.reset(start, end, modBy, modDataCount);\n    this._callingProgress = progress;\n    this._callingProgress({\n      start: start,\n      end: end,\n      count: end - start,\n      next: iterator.next\n    }, this.context);\n  };\n  Task.prototype._doReset = function (skip) {\n    this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\n    this._settedOutputEnd = null;\n    var progress;\n    var forceFirstProgress;\n    if (!skip && this._reset) {\n      progress = this._reset(this.context);\n      if (progress && progress.progress) {\n        forceFirstProgress = progress.forceFirstProgress;\n        progress = progress.progress;\n      }\n      // To simplify no progress checking, array must has item.\n      if (isArray(progress) && !progress.length) {\n        progress = null;\n      }\n    }\n    this._progress = progress;\n    this._modBy = this._modDataCount = null;\n    var downstream = this._downstream;\n    downstream && downstream.dirty();\n    return forceFirstProgress;\n  };\n  Task.prototype.unfinished = function () {\n    return this._progress && this._dueIndex < this._dueEnd;\n  };\n  /**\n   * @param downTask The downstream task.\n   * @return The downstream task.\n   */\n  Task.prototype.pipe = function (downTask) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(downTask && !downTask._disposed && downTask !== this);\n    }\n    // If already downstream, do not dirty downTask.\n    if (this._downstream !== downTask || this._dirty) {\n      this._downstream = downTask;\n      downTask._upstream = this;\n      downTask.dirty();\n    }\n  };\n  Task.prototype.dispose = function () {\n    if (this._disposed) {\n      return;\n    }\n    this._upstream && (this._upstream._downstream = null);\n    this._downstream && (this._downstream._upstream = null);\n    this._dirty = false;\n    this._disposed = true;\n  };\n  Task.prototype.getUpstream = function () {\n    return this._upstream;\n  };\n  Task.prototype.getDownstream = function () {\n    return this._downstream;\n  };\n  Task.prototype.setOutputEnd = function (end) {\n    // This only happens in dataTask, dataZoom, map, currently.\n    // where dataZoom do not set end each time, but only set\n    // when reset. So we should record the set end, in case\n    // that the stub of dataZoom perform again and earse the\n    // set end by upstream.\n    this._outputDueEnd = this._settedOutputEnd = end;\n  };\n  return Task;\n}();\nexport { Task };\nvar iterator = function () {\n  var end;\n  var current;\n  var modBy;\n  var modDataCount;\n  var winCount;\n  var it = {\n    reset: function (s, e, sStep, sCount) {\n      current = s;\n      end = e;\n      modBy = sStep;\n      modDataCount = sCount;\n      winCount = Math.ceil(modDataCount / modBy);\n      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n    }\n  };\n  return it;\n  function sequentialNext() {\n    return current < end ? current++ : null;\n  }\n  function modNext() {\n    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n    var result = current >= end ? null : dataIndex < modDataCount ? dataIndex\n    // If modDataCount is smaller than data.count() (consider `appendData` case),\n    // Use normal linear rendering mode.\n    : current;\n    current++;\n    return result;\n  }\n}();\n// -----------------------------------------------------------------------------\n// For stream debug (Should be commented out after used!)\n// @usage: printTask(this, 'begin');\n// @usage: printTask(this, null, {someExtraProp});\n// @usage: Use `__idxInPipeline` as conditional breakpiont.\n//\n// window.printTask = function (task: any, prefix: string, extra: { [key: string]: unknown }): void {\n//     window.ecTaskUID == null && (window.ecTaskUID = 0);\n//     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n//     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n//     let props = [];\n//     if (task.__pipeline) {\n//         let val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n//         props.push({text: '__idxInPipeline/total', value: val});\n//     } else {\n//         let stubCount = 0;\n//         task.agentStubMap.each(() => stubCount++);\n//         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n//     }\n//     props.push({text: 'uid', value: task.uidDebug});\n//     if (task.__pipeline) {\n//         props.push({text: 'pipelineId', value: task.__pipeline.id});\n//         task.agent && props.push(\n//             {text: 'stubFor', value: task.agent.uidDebug}\n//         );\n//     }\n//     props.push(\n//         {text: 'dirty', value: task._dirty},\n//         {text: 'dueIndex', value: task._dueIndex},\n//         {text: 'dueEnd', value: task._dueEnd},\n//         {text: 'outputDueEnd', value: task._outputDueEnd}\n//     );\n//     if (extra) {\n//         Object.keys(extra).forEach(key => {\n//             props.push({text: key, value: extra[key]});\n//         });\n//     }\n//     let args = ['color: blue'];\n//     let msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n//         args.push('color: green', 'color: red'),\n//         `${item.text}: %c${item.value}`\n//     )).join('%c, ');\n//     console.log.apply(console, [msg].concat(args));\n//     // console.log(this);\n// };\n// window.printPipeline = function (task: any, prefix: string) {\n//     const pipeline = task.__pipeline;\n//     let currTask = pipeline.head;\n//     while (currTask) {\n//         window.printTask(currTask, prefix);\n//         currTask = currTask._downstream;\n//     }\n// };\n// window.showChain = function (chainHeadTask) {\n//     var chain = [];\n//     var task = chainHeadTask;\n//     while (task) {\n//         chain.push({\n//             task: task,\n//             up: task._upstream,\n//             down: task._downstream,\n//             idxInPipeline: task.__idxInPipeline\n//         });\n//         task = task._downstream;\n//     }\n//     return chain;\n// };\n// window.findTaskInChain = function (task, chainHeadTask) {\n//     let chain = window.showChain(chainHeadTask);\n//     let result = [];\n//     for (let i = 0; i < chain.length; i++) {\n//         let chainItem = chain[i];\n//         if (chainItem.task === task) {\n//             result.push(i);\n//         }\n//     }\n//     return result;\n// };\n// window.printChainAEachInChainB = function (chainHeadTaskA, chainHeadTaskB) {\n//     let chainA = window.showChain(chainHeadTaskA);\n//     for (let i = 0; i < chainA.length; i++) {\n//         console.log('chainAIdx:', i, 'inChainB:', window.findTaskInChain(chainA[i].task, chainHeadTaskB));\n//     }\n// };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseDate, numericToNumber } from '../../util/number.js';\nimport { createHashMap, trim, hasOwn, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { throwError } from '../../util/log.js';\n/**\n * Convert raw the value in to inner value in List.\n *\n * [Performance sensitive]\n *\n * [Caution]: this is the key logic of user value parser.\n * For backward compatibility, do not modify it until you have to!\n */\nexport function parseDataValue(value,\n// For high performance, do not omit the second param.\nopt) {\n  // Performance sensitive.\n  var dimType = opt && opt.type;\n  if (dimType === 'ordinal') {\n    // If given value is a category string\n    return value;\n  }\n  if (dimType === 'time'\n  // spead up when using timestamp\n  && !isNumber(value) && value != null && value !== '-') {\n    value = +parseDate(value);\n  }\n  // dimType defaults 'number'.\n  // If dimType is not ordinal and value is null or undefined or NaN or '-',\n  // parse to NaN.\n  // number-like string (like ' 123 ') can be converted to a number.\n  // where null/undefined or other string will be converted to NaN.\n  return value == null || value === '' ? NaN\n  // If string (like '-'), using '+' parse to NaN\n  // If object, also parse to NaN\n  : Number(value);\n}\n;\nvar valueParserMap = createHashMap({\n  'number': function (val) {\n    // Do not use `numericToNumber` here. We have `numericToNumber` by default.\n    // Here the number parser can have loose rule:\n    // enable to cut suffix: \"120px\" => 120, \"14%\" => 14.\n    return parseFloat(val);\n  },\n  'time': function (val) {\n    // return timestamp.\n    return +parseDate(val);\n  },\n  'trim': function (val) {\n    return isString(val) ? trim(val) : val;\n  }\n});\nexport function getRawValueParser(type) {\n  return valueParserMap.get(type);\n}\nvar ORDER_COMPARISON_OP_MAP = {\n  lt: function (lval, rval) {\n    return lval < rval;\n  },\n  lte: function (lval, rval) {\n    return lval <= rval;\n  },\n  gt: function (lval, rval) {\n    return lval > rval;\n  },\n  gte: function (lval, rval) {\n    return lval >= rval;\n  }\n};\nvar FilterOrderComparator = /** @class */function () {\n  function FilterOrderComparator(op, rval) {\n    if (!isNumber(rval)) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'rvalue of \"<\", \">\", \"<=\", \">=\" can only be number in filter.';\n      }\n      throwError(errMsg);\n    }\n    this._opFn = ORDER_COMPARISON_OP_MAP[op];\n    this._rvalFloat = numericToNumber(rval);\n  }\n  // Performance sensitive.\n  FilterOrderComparator.prototype.evaluate = function (lval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    return isNumber(lval) ? this._opFn(lval, this._rvalFloat) : this._opFn(numericToNumber(lval), this._rvalFloat);\n  };\n  return FilterOrderComparator;\n}();\nvar SortOrderComparator = /** @class */function () {\n  /**\n   * @param order by default: 'asc'\n   * @param incomparable by default: Always on the tail.\n   *        That is, if 'asc' => 'max', if 'desc' => 'min'\n   *        See the definition of \"incomparable\" in [SORT_COMPARISON_RULE].\n   */\n  function SortOrderComparator(order, incomparable) {\n    var isDesc = order === 'desc';\n    this._resultLT = isDesc ? 1 : -1;\n    if (incomparable == null) {\n      incomparable = isDesc ? 'min' : 'max';\n    }\n    this._incomparable = incomparable === 'min' ? -Infinity : Infinity;\n  }\n  // See [SORT_COMPARISON_RULE].\n  // Performance sensitive.\n  SortOrderComparator.prototype.evaluate = function (lval, rval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    var lvalFloat = isNumber(lval) ? lval : numericToNumber(lval);\n    var rvalFloat = isNumber(rval) ? rval : numericToNumber(rval);\n    var lvalNotNumeric = isNaN(lvalFloat);\n    var rvalNotNumeric = isNaN(rvalFloat);\n    if (lvalNotNumeric) {\n      lvalFloat = this._incomparable;\n    }\n    if (rvalNotNumeric) {\n      rvalFloat = this._incomparable;\n    }\n    if (lvalNotNumeric && rvalNotNumeric) {\n      var lvalIsStr = isString(lval);\n      var rvalIsStr = isString(rval);\n      if (lvalIsStr) {\n        lvalFloat = rvalIsStr ? lval : 0;\n      }\n      if (rvalIsStr) {\n        rvalFloat = lvalIsStr ? rval : 0;\n      }\n    }\n    return lvalFloat < rvalFloat ? this._resultLT : lvalFloat > rvalFloat ? -this._resultLT : 0;\n  };\n  return SortOrderComparator;\n}();\nexport { SortOrderComparator };\nvar FilterEqualityComparator = /** @class */function () {\n  function FilterEqualityComparator(isEq, rval) {\n    this._rval = rval;\n    this._isEQ = isEq;\n    this._rvalTypeof = typeof rval;\n    this._rvalFloat = numericToNumber(rval);\n  }\n  // Performance sensitive.\n  FilterEqualityComparator.prototype.evaluate = function (lval) {\n    var eqResult = lval === this._rval;\n    if (!eqResult) {\n      var lvalTypeof = typeof lval;\n      if (lvalTypeof !== this._rvalTypeof && (lvalTypeof === 'number' || this._rvalTypeof === 'number')) {\n        eqResult = numericToNumber(lval) === this._rvalFloat;\n      }\n    }\n    return this._isEQ ? eqResult : !eqResult;\n  };\n  return FilterEqualityComparator;\n}();\n/**\n * [FILTER_COMPARISON_RULE]\n * `lt`|`lte`|`gt`|`gte`:\n * + rval must be a number. And lval will be converted to number (`numericToNumber`) to compare.\n * `eq`:\n * + If same type, compare with `===`.\n * + If there is one number, convert to number (`numericToNumber`) to compare.\n * + Else return `false`.\n * `ne`:\n * + Not `eq`.\n *\n *\n * [SORT_COMPARISON_RULE]\n * All the values are grouped into three categories:\n * + \"numeric\" (number and numeric string)\n * + \"non-numeric-string\" (string that excluding numeric string)\n * + \"others\"\n * \"numeric\" vs \"numeric\": values are ordered by number order.\n * \"non-numeric-string\" vs \"non-numeric-string\": values are ordered by ES spec (#sec-abstract-relational-comparison).\n * \"others\" vs \"others\": do not change order (always return 0).\n * \"numeric\" vs \"non-numeric-string\": \"non-numeric-string\" is treated as \"incomparable\".\n * \"number\" vs \"others\": \"others\" is treated as \"incomparable\".\n * \"non-numeric-string\" vs \"others\": \"others\" is treated as \"incomparable\".\n * \"incomparable\" will be seen as -Infinity or Infinity (depends on the settings).\n * MEMO:\n *   Non-numeric string sort makes sense when we need to put the items with the same tag together.\n *   But if we support string sort, we still need to avoid the misleading like `'2' > '12'`,\n *   So we treat \"numeric-string\" sorted by number order rather than string comparison.\n *\n *\n * [CHECK_LIST_OF_THE_RULE_DESIGN]\n * + Do not support string comparison until required. And also need to\n *   avoid the misleading of \"2\" > \"12\".\n * + Should avoid the misleading case:\n *   `\" 22 \" gte \"22\"` is `true` but `\" 22 \" eq \"22\"` is `false`.\n * + JS bad case should be avoided: null <= 0, [] <= 0, ' ' <= 0, ...\n * + Only \"numeric\" can be converted to comparable number, otherwise converted to NaN.\n *   See `util/number.ts#numericToNumber`.\n *\n * @return If `op` is not `RelationalOperator`, return null;\n */\nexport function createFilterComparator(op, rval) {\n  return op === 'eq' || op === 'ne' ? new FilterEqualityComparator(op === 'eq', rval) : hasOwn(ORDER_COMPARISON_OP_MAP, op) ? new FilterOrderComparator(op, rval) : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createHashMap, bind, each, hasOwn, map, clone, isObject, extend, isNumber } from 'zrender/lib/core/util.js';\nimport { getRawSourceItemGetter, getRawSourceDataCounter, getRawSourceValueGetter } from './dataProvider.js';\nimport { parseDataValue } from './dataValueHelper.js';\nimport { log, makePrintable, throwError } from '../../util/log.js';\nimport { createSource, detectSourceFormat } from '../Source.js';\n/**\n * TODO: disable writable.\n * This structure will be exposed to users.\n */\nvar ExternalSource = /** @class */function () {\n  function ExternalSource() {}\n  ExternalSource.prototype.getRawData = function () {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n  ExternalSource.prototype.getRawDataItem = function (dataIndex) {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n  ExternalSource.prototype.cloneRawData = function () {\n    return;\n  };\n  /**\n   * @return If dimension not found, return null/undefined.\n   */\n  ExternalSource.prototype.getDimensionInfo = function (dim) {\n    return;\n  };\n  /**\n   * dimensions defined if and only if either:\n   * (a) dataset.dimensions are declared.\n   * (b) dataset data include dimensions definitions in data (detected or via specified `sourceHeader`).\n   * If dimensions are defined, `dimensionInfoAll` is corresponding to\n   * the defined dimensions.\n   * Otherwise, `dimensionInfoAll` is determined by data columns.\n   * @return Always return an array (even empty array).\n   */\n  ExternalSource.prototype.cloneAllDimensionInfo = function () {\n    return;\n  };\n  ExternalSource.prototype.count = function () {\n    return;\n  };\n  /**\n   * Only support by dimension index.\n   * No need to support by dimension name in transform function,\n   * because transform function is not case-specific, no need to use name literally.\n   */\n  ExternalSource.prototype.retrieveValue = function (dataIndex, dimIndex) {\n    return;\n  };\n  ExternalSource.prototype.retrieveValueFromItem = function (dataItem, dimIndex) {\n    return;\n  };\n  ExternalSource.prototype.convertValue = function (rawVal, dimInfo) {\n    return parseDataValue(rawVal, dimInfo);\n  };\n  return ExternalSource;\n}();\nexport { ExternalSource };\nfunction createExternalSource(internalSource, externalTransform) {\n  var extSource = new ExternalSource();\n  var data = internalSource.data;\n  var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;\n  var sourceHeaderCount = internalSource.startIndex;\n  var errMsg = '';\n  if (internalSource.seriesLayoutBy !== SERIES_LAYOUT_BY_COLUMN) {\n    // For the logic simplicity in transformer, only 'culumn' is\n    // supported in data transform. Otherwise, the `dimensionsDefine`\n    // might be detected by 'row', which probably confuses users.\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`seriesLayoutBy` of upstream dataset can only be \"column\" in data transform.';\n    }\n    throwError(errMsg);\n  }\n  // [MEMO]\n  // Create a new dimensions structure for exposing.\n  // Do not expose all dimension info to users directly.\n  // Because the dimension is probably auto detected from data and not might reliable.\n  // Should not lead the transformers to think that is reliable and return it.\n  // See [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n  var dimensions = [];\n  var dimsByName = {};\n  var dimsDef = internalSource.dimensionsDefine;\n  if (dimsDef) {\n    each(dimsDef, function (dimDef, idx) {\n      var name = dimDef.name;\n      var dimDefExt = {\n        index: idx,\n        name: name,\n        displayName: dimDef.displayName\n      };\n      dimensions.push(dimDefExt);\n      // Users probably do not specify dimension name. For simplicity, data transform\n      // does not generate dimension name.\n      if (name != null) {\n        // Dimension name should not be duplicated.\n        // For simplicity, data transform forbids name duplication, do not generate\n        // new name like module `completeDimensions.ts` did, but just tell users.\n        var errMsg_1 = '';\n        if (hasOwn(dimsByName, name)) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg_1 = 'dimension name \"' + name + '\" duplicated.';\n          }\n          throwError(errMsg_1);\n        }\n        dimsByName[name] = dimDefExt;\n      }\n    });\n  }\n  // If dimension definitions are not defined and can not be detected.\n  // e.g., pure data `[[11, 22], ...]`.\n  else {\n    for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {\n      // Do not generete name or anything others. The consequence process in\n      // `transform` or `series` probably have there own name generation strategry.\n      dimensions.push({\n        index: i\n      });\n    }\n  }\n  // Implement public methods:\n  var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n  if (externalTransform.__isBuiltIn) {\n    extSource.getRawDataItem = function (dataIndex) {\n      return rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    };\n    extSource.getRawData = bind(getRawData, null, internalSource);\n  }\n  extSource.cloneRawData = bind(cloneRawData, null, internalSource);\n  var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n  extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\n  var rawValueGetter = getRawSourceValueGetter(sourceFormat);\n  extSource.retrieveValue = function (dataIndex, dimIndex) {\n    var rawItem = rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    return retrieveValueFromItem(rawItem, dimIndex);\n  };\n  var retrieveValueFromItem = extSource.retrieveValueFromItem = function (dataItem, dimIndex) {\n    if (dataItem == null) {\n      return;\n    }\n    var dimDef = dimensions[dimIndex];\n    // When `dimIndex` is `null`, `rawValueGetter` return the whole item.\n    if (dimDef) {\n      return rawValueGetter(dataItem, dimIndex, dimDef.name);\n    }\n  };\n  extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\n  extSource.cloneAllDimensionInfo = bind(cloneAllDimensionInfo, null, dimensions);\n  return extSource;\n}\nfunction getRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`getRawData` is not supported in source format ' + sourceFormat;\n    }\n    throwError(errMsg);\n  }\n  return upstream.data;\n}\nfunction cloneRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n  var data = upstream.data;\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`cloneRawData` is not supported in source format ' + sourceFormat;\n    }\n    throwError(errMsg);\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var result = [];\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(data[i].slice());\n    }\n    return result;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var result = [];\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(extend({}, data[i]));\n    }\n    return result;\n  }\n}\nfunction getDimensionInfo(dimensions, dimsByName, dim) {\n  if (dim == null) {\n    return;\n  }\n  // Keep the same logic as `List::getDimension` did.\n  if (isNumber(dim)\n  // If being a number-like string but not being defined a dimension name.\n  || !isNaN(dim) && !hasOwn(dimsByName, dim)) {\n    return dimensions[dim];\n  } else if (hasOwn(dimsByName, dim)) {\n    return dimsByName[dim];\n  }\n}\nfunction cloneAllDimensionInfo(dimensions) {\n  return clone(dimensions);\n}\nvar externalTransformMap = createHashMap();\nexport function registerExternalTransform(externalTransform) {\n  externalTransform = clone(externalTransform);\n  var type = externalTransform.type;\n  var errMsg = '';\n  if (!type) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have a `type` when `registerTransform`.';\n    }\n    throwError(errMsg);\n  }\n  var typeParsed = type.split(':');\n  if (typeParsed.length !== 2) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Name must include namespace like \"ns:regression\".';\n    }\n    throwError(errMsg);\n  }\n  // Namespace 'echarts:xxx' is official namespace, where the transforms should\n  // be called directly via 'xxx' rather than 'echarts:xxx'.\n  var isBuiltIn = false;\n  if (typeParsed[0] === 'echarts') {\n    type = typeParsed[1];\n    isBuiltIn = true;\n  }\n  externalTransform.__isBuiltIn = isBuiltIn;\n  externalTransformMap.set(type, externalTransform);\n}\nexport function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\n  var pipedTransOption = normalizeToArray(rawTransOption);\n  var pipeLen = pipedTransOption.length;\n  var errMsg = '';\n  if (!pipeLen) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'If `transform` declared, it should at least contain one transform.';\n    }\n    throwError(errMsg);\n  }\n  for (var i = 0, len = pipeLen; i < len; i++) {\n    var transOption = pipedTransOption[i];\n    sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, pipeLen === 1 ? null : i);\n    // piped transform only support single input, except the fist one.\n    // piped transform only support single output, except the last one.\n    if (i !== len - 1) {\n      sourceList.length = Math.max(sourceList.length, 1);\n    }\n  }\n  return sourceList;\n}\nfunction applySingleDataTransform(transOption, upSourceList, infoForPrint,\n// If `pipeIndex` is null/undefined, no piped transform.\npipeIndex) {\n  var errMsg = '';\n  if (!upSourceList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have at least one upstream dataset.';\n    }\n    throwError(errMsg);\n  }\n  if (!isObject(transOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'transform declaration must be an object rather than ' + typeof transOption + '.';\n    }\n    throwError(errMsg);\n  }\n  var transType = transOption.type;\n  var externalTransform = externalTransformMap.get(transType);\n  if (!externalTransform) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Can not find transform on type \"' + transType + '\".';\n    }\n    throwError(errMsg);\n  }\n  // Prepare source\n  var extUpSourceList = map(upSourceList, function (upSource) {\n    return createExternalSource(upSource, externalTransform);\n  });\n  var resultList = normalizeToArray(externalTransform.transform({\n    upstream: extUpSourceList[0],\n    upstreamList: extUpSourceList,\n    config: clone(transOption.config)\n  }));\n  if (process.env.NODE_ENV !== 'production') {\n    if (transOption.print) {\n      var printStrArr = map(resultList, function (extSource) {\n        var pipeIndexStr = pipeIndex != null ? ' === pipe index: ' + pipeIndex : '';\n        return ['=== dataset index: ' + infoForPrint.datasetIndex + pipeIndexStr + ' ===', '- transform result data:', makePrintable(extSource.data), '- transform result dimensions:', makePrintable(extSource.dimensions)].join('\\n');\n      }).join('\\n');\n      log(printStrArr);\n    }\n  }\n  return map(resultList, function (result, resultIndex) {\n    var errMsg = '';\n    if (!isObject(result)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'A transform should not return some empty results.';\n      }\n      throwError(errMsg);\n    }\n    if (!result.data) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be not be null or undefined';\n      }\n      throwError(errMsg);\n    }\n    var sourceFormat = detectSourceFormat(result.data);\n    if (!isSupportedSourceFormat(sourceFormat)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be array rows or object rows.';\n      }\n      throwError(errMsg);\n    }\n    var resultMetaRawOption;\n    var firstUpSource = upSourceList[0];\n    /**\n     * Intuitively, the end users known the content of the original `dataset.source`,\n     * calucating the transform result in mind.\n     * Suppose the original `dataset.source` is:\n     * ```js\n     * [\n     *     ['product', '2012', '2013', '2014', '2015'],\n     *     ['AAA', 41.1, 30.4, 65.1, 53.3],\n     *     ['BBB', 86.5, 92.1, 85.7, 83.1],\n     *     ['CCC', 24.1, 67.2, 79.5, 86.4]\n     * ]\n     * ```\n     * The dimension info have to be detected from the source data.\n     * Some of the transformers (like filter, sort) will follow the dimension info\n     * of upstream, while others use new dimensions (like aggregate).\n     * Transformer can output a field `dimensions` to define the its own output dimensions.\n     * We also allow transformers to ignore the output `dimensions` field, and\n     * inherit the upstream dimensions definition. It can reduce the burden of handling\n     * dimensions in transformers.\n     *\n     * See also [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n     */\n    if (firstUpSource && resultIndex === 0\n    // If transformer returns `dimensions`, it means that the transformer has different\n    // dimensions definitions. We do not inherit anything from upstream.\n    && !result.dimensions) {\n      var startIndex = firstUpSource.startIndex;\n      // We copy the header of upstream to the result, because:\n      // (1) The returned data always does not contain header line and can not be used\n      // as dimension-detection. In this case we can not use \"detected dimensions\" of\n      // upstream directly, because it might be detected based on different `seriesLayoutBy`.\n      // (2) We should support that the series read the upstream source in `seriesLayoutBy: 'row'`.\n      // So the original detected header should be add to the result, otherwise they can not be read.\n      if (startIndex) {\n        result.data = firstUpSource.data.slice(0, startIndex).concat(result.data);\n      }\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: startIndex,\n        dimensions: firstUpSource.metaRawOption.dimensions\n      };\n    } else {\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: 0,\n        dimensions: result.dimensions\n      };\n    }\n    return createSource(result.data, resultMetaRawOption, null);\n  });\n}\nfunction isSupportedSourceFormat(sourceFormat) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS || sourceFormat === SOURCE_FORMAT_OBJECT_ROWS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, clone, createHashMap, isFunction, keys, map, reduce } from 'zrender/lib/core/util.js';\nimport { parseDataValue } from './helper/dataValueHelper.js';\nimport { shouldRetrieveDataByName } from './Source.js';\nvar UNDEFINED = 'undefined';\n/* global Float64Array, Int32Array, Uint32Array, Uint16Array */\n// Caution: MUST not use `new CtorUint32Array(arr, 0, len)`, because the Ctor of array is\n// different from the Ctor of typed array.\nexport var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\nexport var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\nexport var CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\nexport var CtorFloat64Array = typeof Float64Array === UNDEFINED ? Array : Float64Array;\n/**\n * Multi dimensional data store\n */\nvar dataCtors = {\n  'float': CtorFloat64Array,\n  'int': CtorInt32Array,\n  // Ordinal data type can be string or int\n  'ordinal': Array,\n  'number': Array,\n  'time': CtorFloat64Array\n};\nvar defaultDimValueGetters;\nfunction getIndicesCtor(rawCount) {\n  // The possible max value in this._indicies is always this._rawCount despite of filtering.\n  return rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\n}\n;\nfunction getInitialExtent() {\n  return [Infinity, -Infinity];\n}\n;\nfunction cloneChunk(originalChunk) {\n  var Ctor = originalChunk.constructor;\n  // Only shallow clone is enough when Array.\n  return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);\n}\nfunction prepareStore(store, dimIdx, dimType, end, append) {\n  var DataCtor = dataCtors[dimType || 'float'];\n  if (append) {\n    var oldStore = store[dimIdx];\n    var oldLen = oldStore && oldStore.length;\n    if (!(oldLen === end)) {\n      var newStore = new DataCtor(end);\n      // The cost of the copy is probably inconsiderable\n      // within the initial chunkSize.\n      for (var j = 0; j < oldLen; j++) {\n        newStore[j] = oldStore[j];\n      }\n      store[dimIdx] = newStore;\n    }\n  } else {\n    store[dimIdx] = new DataCtor(end);\n  }\n}\n;\n/**\n * Basically, DataStore API keep immutable.\n */\nvar DataStore = /** @class */function () {\n  function DataStore() {\n    this._chunks = [];\n    // It will not be calculated until needed.\n    this._rawExtent = [];\n    this._extent = [];\n    this._count = 0;\n    this._rawCount = 0;\n    this._calcDimNameToIdx = createHashMap();\n  }\n  /**\n   * Initialize from data\n   */\n  DataStore.prototype.initData = function (provider, inputDimensions, dimValueGetter) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isFunction(provider.getItem) && isFunction(provider.count), 'Invalid data provider.');\n    }\n    this._provider = provider;\n    // Clear\n    this._chunks = [];\n    this._indices = null;\n    this.getRawIndex = this._getRawIdxIdentity;\n    var source = provider.getSource();\n    var defaultGetter = this.defaultDimValueGetter = defaultDimValueGetters[source.sourceFormat];\n    // Default dim value getter\n    this._dimValueGetter = dimValueGetter || defaultGetter;\n    // Reset raw extent.\n    this._rawExtent = [];\n    var willRetrieveDataByName = shouldRetrieveDataByName(source);\n    this._dimensions = map(inputDimensions, function (dim) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (willRetrieveDataByName) {\n          assert(dim.property != null);\n        }\n      }\n      return {\n        // Only pick these two props. Not leak other properties like orderMeta.\n        type: dim.type,\n        property: dim.property\n      };\n    });\n    this._initDataFromProvider(0, provider.count());\n  };\n  DataStore.prototype.getProvider = function () {\n    return this._provider;\n  };\n  /**\n   * Caution: even when a `source` instance owned by a series, the created data store\n   * may still be shared by different sereis (the source hash does not use all `source`\n   * props, see `sourceManager`). In this case, the `source` props that are not used in\n   * hash (like `source.dimensionDefine`) probably only belongs to a certain series and\n   * thus should not be fetch here.\n   */\n  DataStore.prototype.getSource = function () {\n    return this._provider.getSource();\n  };\n  /**\n   * @caution Only used in dataStack.\n   */\n  DataStore.prototype.ensureCalculationDimension = function (dimName, type) {\n    var calcDimNameToIdx = this._calcDimNameToIdx;\n    var dimensions = this._dimensions;\n    var calcDimIdx = calcDimNameToIdx.get(dimName);\n    if (calcDimIdx != null) {\n      if (dimensions[calcDimIdx].type === type) {\n        return calcDimIdx;\n      }\n    } else {\n      calcDimIdx = dimensions.length;\n    }\n    dimensions[calcDimIdx] = {\n      type: type\n    };\n    calcDimNameToIdx.set(dimName, calcDimIdx);\n    this._chunks[calcDimIdx] = new dataCtors[type || 'float'](this._rawCount);\n    this._rawExtent[calcDimIdx] = getInitialExtent();\n    return calcDimIdx;\n  };\n  DataStore.prototype.collectOrdinalMeta = function (dimIdx, ordinalMeta) {\n    var chunk = this._chunks[dimIdx];\n    var dim = this._dimensions[dimIdx];\n    var rawExtents = this._rawExtent;\n    var offset = dim.ordinalOffset || 0;\n    var len = chunk.length;\n    if (offset === 0) {\n      // We need to reset the rawExtent if collect is from start.\n      // Because this dimension may be guessed as number and calcuating a wrong extent.\n      rawExtents[dimIdx] = getInitialExtent();\n    }\n    var dimRawExtent = rawExtents[dimIdx];\n    // Parse from previous data offset. len may be changed after appendData\n    for (var i = offset; i < len; i++) {\n      var val = chunk[i] = ordinalMeta.parseAndCollect(chunk[i]);\n      if (!isNaN(val)) {\n        dimRawExtent[0] = Math.min(val, dimRawExtent[0]);\n        dimRawExtent[1] = Math.max(val, dimRawExtent[1]);\n      }\n    }\n    dim.ordinalMeta = ordinalMeta;\n    dim.ordinalOffset = len;\n    dim.type = 'ordinal'; // Force to be ordinal\n  };\n  DataStore.prototype.getOrdinalMeta = function (dimIdx) {\n    var dimInfo = this._dimensions[dimIdx];\n    var ordinalMeta = dimInfo.ordinalMeta;\n    return ordinalMeta;\n  };\n  DataStore.prototype.getDimensionProperty = function (dimIndex) {\n    var item = this._dimensions[dimIndex];\n    return item && item.property;\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   */\n  DataStore.prototype.appendData = function (data) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this._indices, 'appendData can only be called on raw data.');\n    }\n    var provider = this._provider;\n    var start = this.count();\n    provider.appendData(data);\n    var end = provider.count();\n    if (!provider.persistent) {\n      end += start;\n    }\n    if (start < end) {\n      this._initDataFromProvider(start, end, true);\n    }\n    return [start, end];\n  };\n  DataStore.prototype.appendValues = function (values, minFillLen) {\n    var chunks = this._chunks;\n    var dimensions = this._dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var start = this.count();\n    var end = start + Math.max(values.length, minFillLen || 0);\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n      prepareStore(chunks, i, dim.type, end, true);\n    }\n    var emptyDataItem = [];\n    for (var idx = start; idx < end; idx++) {\n      var sourceIdx = idx - start;\n      // Store the data by dimensions\n      for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n        var dim = dimensions[dimIdx];\n        var val = defaultDimValueGetters.arrayRows.call(this, values[sourceIdx] || emptyDataItem, dim.property, sourceIdx, dimIdx);\n        chunks[dimIdx][idx] = val;\n        var dimRawExtent = rawExtent[dimIdx];\n        val < dimRawExtent[0] && (dimRawExtent[0] = val);\n        val > dimRawExtent[1] && (dimRawExtent[1] = val);\n      }\n    }\n    this._rawCount = this._count = end;\n    return {\n      start: start,\n      end: end\n    };\n  };\n  DataStore.prototype._initDataFromProvider = function (start, end, append) {\n    var provider = this._provider;\n    var chunks = this._chunks;\n    var dimensions = this._dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var dimNames = map(dimensions, function (dim) {\n      return dim.property;\n    });\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n      if (!rawExtent[i]) {\n        rawExtent[i] = getInitialExtent();\n      }\n      prepareStore(chunks, i, dim.type, end, append);\n    }\n    if (provider.fillStorage) {\n      provider.fillStorage(start, end, chunks, rawExtent);\n    } else {\n      var dataItem = [];\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        dataItem = provider.getItem(idx, dataItem);\n        // Each data item is value\n        // [1, 2]\n        // 2\n        // Bar chart, line chart which uses category axis\n        // only gives the 'y' value. 'x' value is the indices of category\n        // Use a tempValue to normalize the value to be a (x, y) value\n        // Store the data by dimensions\n        for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n          var dimStorage = chunks[dimIdx];\n          // PENDING NULL is empty or zero\n          var val = this._dimValueGetter(dataItem, dimNames[dimIdx], idx, dimIdx);\n          dimStorage[idx] = val;\n          var dimRawExtent = rawExtent[dimIdx];\n          val < dimRawExtent[0] && (dimRawExtent[0] = val);\n          val > dimRawExtent[1] && (dimRawExtent[1] = val);\n        }\n      }\n    }\n    if (!provider.persistent && provider.clean) {\n      // Clean unused data if data source is typed array.\n      provider.clean();\n    }\n    this._rawCount = this._count = end;\n    // Reset data extent\n    this._extent = [];\n  };\n  DataStore.prototype.count = function () {\n    return this._count;\n  };\n  /**\n   * Get value. Return NaN if idx is out of range.\n   */\n  DataStore.prototype.get = function (dim, idx) {\n    if (!(idx >= 0 && idx < this._count)) {\n      return NaN;\n    }\n    var dimStore = this._chunks[dim];\n    return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\n  };\n  DataStore.prototype.getValues = function (dimensions, idx) {\n    var values = [];\n    var dimArr = [];\n    if (idx == null) {\n      idx = dimensions;\n      // TODO get all from store?\n      dimensions = [];\n      // All dimensions\n      for (var i = 0; i < this._dimensions.length; i++) {\n        dimArr.push(i);\n      }\n    } else {\n      dimArr = dimensions;\n    }\n    for (var i = 0, len = dimArr.length; i < len; i++) {\n      values.push(this.get(dimArr[i], idx));\n    }\n    return values;\n  };\n  /**\n   * @param dim concrete dim\n   */\n  DataStore.prototype.getByRawIndex = function (dim, rawIdx) {\n    if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\n      return NaN;\n    }\n    var dimStore = this._chunks[dim];\n    return dimStore ? dimStore[rawIdx] : NaN;\n  };\n  /**\n   * Get sum of data in one dimension\n   */\n  DataStore.prototype.getSum = function (dim) {\n    var dimData = this._chunks[dim];\n    var sum = 0;\n    if (dimData) {\n      for (var i = 0, len = this.count(); i < len; i++) {\n        var value = this.get(dim, i);\n        if (!isNaN(value)) {\n          sum += value;\n        }\n      }\n    }\n    return sum;\n  };\n  /**\n   * Get median of data in one dimension\n   */\n  DataStore.prototype.getMedian = function (dim) {\n    var dimDataArray = [];\n    // map all data of one dimension\n    this.each([dim], function (val) {\n      if (!isNaN(val)) {\n        dimDataArray.push(val);\n      }\n    });\n    // TODO\n    // Use quick select?\n    var sortedDimDataArray = dimDataArray.sort(function (a, b) {\n      return a - b;\n    });\n    var len = this.count();\n    // calculate median\n    return len === 0 ? 0 : len % 2 === 1 ? sortedDimDataArray[(len - 1) / 2] : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\n  };\n  /**\n   * Retrieve the index with given raw data index.\n   */\n  DataStore.prototype.indexOfRawIndex = function (rawIndex) {\n    if (rawIndex >= this._rawCount || rawIndex < 0) {\n      return -1;\n    }\n    if (!this._indices) {\n      return rawIndex;\n    }\n    // Indices are ascending\n    var indices = this._indices;\n    // If rawIndex === dataIndex\n    var rawDataIndex = indices[rawIndex];\n    if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\n      return rawIndex;\n    }\n    var left = 0;\n    var right = this._count - 1;\n    while (left <= right) {\n      var mid = (left + right) / 2 | 0;\n      if (indices[mid] < rawIndex) {\n        left = mid + 1;\n      } else if (indices[mid] > rawIndex) {\n        right = mid - 1;\n      } else {\n        return mid;\n      }\n    }\n    return -1;\n  };\n  DataStore.prototype.getIndices = function () {\n    var newIndices;\n    var indices = this._indices;\n    if (indices) {\n      var Ctor = indices.constructor;\n      var thisCount = this._count;\n      // `new Array(a, b, c)` is different from `new Uint32Array(a, b, c)`.\n      if (Ctor === Array) {\n        newIndices = new Ctor(thisCount);\n        for (var i = 0; i < thisCount; i++) {\n          newIndices[i] = indices[i];\n        }\n      } else {\n        newIndices = new Ctor(indices.buffer, 0, thisCount);\n      }\n    } else {\n      var Ctor = getIndicesCtor(this._rawCount);\n      newIndices = new Ctor(this.count());\n      for (var i = 0; i < newIndices.length; i++) {\n        newIndices[i] = i;\n      }\n    }\n    return newIndices;\n  };\n  /**\n   * Data filter.\n   */\n  DataStore.prototype.filter = function (dims, cb) {\n    if (!this._count) {\n      return this;\n    }\n    var newStore = this.clone();\n    var count = newStore.count();\n    var Ctor = getIndicesCtor(newStore._rawCount);\n    var newIndices = new Ctor(count);\n    var value = [];\n    var dimSize = dims.length;\n    var offset = 0;\n    var dim0 = dims[0];\n    var chunks = newStore._chunks;\n    for (var i = 0; i < count; i++) {\n      var keep = void 0;\n      var rawIdx = newStore.getRawIndex(i);\n      // Simple optimization\n      if (dimSize === 0) {\n        keep = cb(i);\n      } else if (dimSize === 1) {\n        var val = chunks[dim0][rawIdx];\n        keep = cb(val, i);\n      } else {\n        var k = 0;\n        for (; k < dimSize; k++) {\n          value[k] = chunks[dims[k]][rawIdx];\n        }\n        value[k] = i;\n        keep = cb.apply(null, value);\n      }\n      if (keep) {\n        newIndices[offset++] = rawIdx;\n      }\n    }\n    // Set indices after filtered.\n    if (offset < count) {\n      newStore._indices = newIndices;\n    }\n    newStore._count = offset;\n    // Reset data extent\n    newStore._extent = [];\n    newStore._updateGetRawIdx();\n    return newStore;\n  };\n  /**\n   * Select data in range. (For optimization of filter)\n   * (Manually inline code, support 5 million data filtering in data zoom.)\n   */\n  DataStore.prototype.selectRange = function (range) {\n    var newStore = this.clone();\n    var len = newStore._count;\n    if (!len) {\n      return this;\n    }\n    var dims = keys(range);\n    var dimSize = dims.length;\n    if (!dimSize) {\n      return this;\n    }\n    var originalCount = newStore.count();\n    var Ctor = getIndicesCtor(newStore._rawCount);\n    var newIndices = new Ctor(originalCount);\n    var offset = 0;\n    var dim0 = dims[0];\n    var min = range[dim0][0];\n    var max = range[dim0][1];\n    var storeArr = newStore._chunks;\n    var quickFinished = false;\n    if (!newStore._indices) {\n      // Extreme optimization for common case. About 2x faster in chrome.\n      var idx = 0;\n      if (dimSize === 1) {\n        var dimStorage = storeArr[dims[0]];\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i];\n          // NaN will not be filtered. Consider the case, in line chart, empty\n          // value indicates the line should be broken. But for the case like\n          // scatter plot, a data item with empty value will not be rendered,\n          // but the axis extent may be effected if some other dim of the data\n          // item has value. Fortunately it is not a significant negative effect.\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = idx;\n          }\n          idx++;\n        }\n        quickFinished = true;\n      } else if (dimSize === 2) {\n        var dimStorage = storeArr[dims[0]];\n        var dimStorage2 = storeArr[dims[1]];\n        var min2 = range[dims[1]][0];\n        var max2 = range[dims[1]][1];\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i];\n          var val2 = dimStorage2[i];\n          // Do not filter NaN, see comment above.\n          if ((val >= min && val <= max || isNaN(val)) && (val2 >= min2 && val2 <= max2 || isNaN(val2))) {\n            newIndices[offset++] = idx;\n          }\n          idx++;\n        }\n        quickFinished = true;\n      }\n    }\n    if (!quickFinished) {\n      if (dimSize === 1) {\n        for (var i = 0; i < originalCount; i++) {\n          var rawIndex = newStore.getRawIndex(i);\n          var val = storeArr[dims[0]][rawIndex];\n          // Do not filter NaN, see comment above.\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = rawIndex;\n          }\n        }\n      } else {\n        for (var i = 0; i < originalCount; i++) {\n          var keep = true;\n          var rawIndex = newStore.getRawIndex(i);\n          for (var k = 0; k < dimSize; k++) {\n            var dimk = dims[k];\n            var val = storeArr[dimk][rawIndex];\n            // Do not filter NaN, see comment above.\n            if (val < range[dimk][0] || val > range[dimk][1]) {\n              keep = false;\n            }\n          }\n          if (keep) {\n            newIndices[offset++] = newStore.getRawIndex(i);\n          }\n        }\n      }\n    }\n    // Set indices after filtered.\n    if (offset < originalCount) {\n      newStore._indices = newIndices;\n    }\n    newStore._count = offset;\n    // Reset data extent\n    newStore._extent = [];\n    newStore._updateGetRawIdx();\n    return newStore;\n  };\n  // /**\n  //  * Data mapping to a plain array\n  //  */\n  // mapArray(dims: DimensionIndex[], cb: MapArrayCb): any[] {\n  //     const result: any[] = [];\n  //     this.each(dims, function () {\n  //         result.push(cb && (cb as MapArrayCb).apply(null, arguments));\n  //     });\n  //     return result;\n  // }\n  /**\n   * Data mapping to a new List with given dimensions\n   */\n  DataStore.prototype.map = function (dims, cb) {\n    // TODO only clone picked chunks.\n    var target = this.clone(dims);\n    this._updateDims(target, dims, cb);\n    return target;\n  };\n  /**\n   * @caution Danger!! Only used in dataStack.\n   */\n  DataStore.prototype.modify = function (dims, cb) {\n    this._updateDims(this, dims, cb);\n  };\n  DataStore.prototype._updateDims = function (target, dims, cb) {\n    var targetChunks = target._chunks;\n    var tmpRetValue = [];\n    var dimSize = dims.length;\n    var dataCount = target.count();\n    var values = [];\n    var rawExtent = target._rawExtent;\n    for (var i = 0; i < dims.length; i++) {\n      rawExtent[dims[i]] = getInitialExtent();\n    }\n    for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\n      var rawIndex = target.getRawIndex(dataIndex);\n      for (var k = 0; k < dimSize; k++) {\n        values[k] = targetChunks[dims[k]][rawIndex];\n      }\n      values[dimSize] = dataIndex;\n      var retValue = cb && cb.apply(null, values);\n      if (retValue != null) {\n        // a number or string (in oridinal dimension)?\n        if (typeof retValue !== 'object') {\n          tmpRetValue[0] = retValue;\n          retValue = tmpRetValue;\n        }\n        for (var i = 0; i < retValue.length; i++) {\n          var dim = dims[i];\n          var val = retValue[i];\n          var rawExtentOnDim = rawExtent[dim];\n          var dimStore = targetChunks[dim];\n          if (dimStore) {\n            dimStore[rawIndex] = val;\n          }\n          if (val < rawExtentOnDim[0]) {\n            rawExtentOnDim[0] = val;\n          }\n          if (val > rawExtentOnDim[1]) {\n            rawExtentOnDim[1] = val;\n          }\n        }\n      }\n    }\n  };\n  /**\n   * Large data down sampling using largest-triangle-three-buckets\n   * @param {string} valueDimension\n   * @param {number} targetCount\n   */\n  DataStore.prototype.lttbDownSample = function (valueDimension, rate) {\n    var target = this.clone([valueDimension], true);\n    var targetStorage = target._chunks;\n    var dimStore = targetStorage[valueDimension];\n    var len = this.count();\n    var sampledIndex = 0;\n    var frameSize = Math.floor(1 / rate);\n    var currentRawIndex = this.getRawIndex(0);\n    var maxArea;\n    var area;\n    var nextRawIndex;\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.min((Math.ceil(len / frameSize) + 2) * 2, len));\n    // First frame use the first data.\n    newIndices[sampledIndex++] = currentRawIndex;\n    for (var i = 1; i < len - 1; i += frameSize) {\n      var nextFrameStart = Math.min(i + frameSize, len - 1);\n      var nextFrameEnd = Math.min(i + frameSize * 2, len);\n      var avgX = (nextFrameEnd + nextFrameStart) / 2;\n      var avgY = 0;\n      for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n        if (isNaN(y)) {\n          continue;\n        }\n        avgY += y;\n      }\n      avgY /= nextFrameEnd - nextFrameStart;\n      var frameStart = i;\n      var frameEnd = Math.min(i + frameSize, len);\n      var pointAX = i - 1;\n      var pointAY = dimStore[currentRawIndex];\n      maxArea = -1;\n      nextRawIndex = frameStart;\n      var firstNaNIndex = -1;\n      var countNaN = 0;\n      // Find a point from current frame that construct a triangle with largest area with previous selected point\n      // And the average of next frame.\n      for (var idx = frameStart; idx < frameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n        if (isNaN(y)) {\n          countNaN++;\n          if (firstNaNIndex < 0) {\n            firstNaNIndex = rawIndex;\n          }\n          continue;\n        }\n        // Calculate triangle area over three buckets\n        area = Math.abs((pointAX - avgX) * (y - pointAY) - (pointAX - idx) * (avgY - pointAY));\n        if (area > maxArea) {\n          maxArea = area;\n          nextRawIndex = rawIndex; // Next a is this b\n        }\n      }\n      if (countNaN > 0 && countNaN < frameEnd - frameStart) {\n        // Append first NaN point in every bucket.\n        // It is necessary to ensure the correct order of indices.\n        newIndices[sampledIndex++] = Math.min(firstNaNIndex, nextRawIndex);\n        nextRawIndex = Math.max(firstNaNIndex, nextRawIndex);\n      }\n      newIndices[sampledIndex++] = nextRawIndex;\n      currentRawIndex = nextRawIndex; // This a is the next a (chosen b)\n    }\n    // First frame use the last data.\n    newIndices[sampledIndex++] = this.getRawIndex(len - 1);\n    target._count = sampledIndex;\n    target._indices = newIndices;\n    target.getRawIndex = this._getRawIdx;\n    return target;\n  };\n  /**\n   * Large data down sampling using min-max\n   * @param {string} valueDimension\n   * @param {number} rate\n   */\n  DataStore.prototype.minmaxDownSample = function (valueDimension, rate) {\n    var target = this.clone([valueDimension], true);\n    var targetStorage = target._chunks;\n    var frameSize = Math.floor(1 / rate);\n    var dimStore = targetStorage[valueDimension];\n    var len = this.count();\n    // Each frame results in 2 data points, one for min and one for max\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize) * 2);\n    var offset = 0;\n    for (var i = 0; i < len; i += frameSize) {\n      var minIndex = i;\n      var minValue = dimStore[this.getRawIndex(minIndex)];\n      var maxIndex = i;\n      var maxValue = dimStore[this.getRawIndex(maxIndex)];\n      var thisFrameSize = frameSize;\n      // Handle final smaller frame\n      if (i + frameSize > len) {\n        thisFrameSize = len - i;\n      }\n      // Determine min and max within the current frame\n      for (var k = 0; k < thisFrameSize; k++) {\n        var rawIndex = this.getRawIndex(i + k);\n        var value = dimStore[rawIndex];\n        if (value < minValue) {\n          minValue = value;\n          minIndex = i + k;\n        }\n        if (value > maxValue) {\n          maxValue = value;\n          maxIndex = i + k;\n        }\n      }\n      var rawMinIndex = this.getRawIndex(minIndex);\n      var rawMaxIndex = this.getRawIndex(maxIndex);\n      // Set the order of the min and max values, based on their ordering in the frame\n      if (minIndex < maxIndex) {\n        newIndices[offset++] = rawMinIndex;\n        newIndices[offset++] = rawMaxIndex;\n      } else {\n        newIndices[offset++] = rawMaxIndex;\n        newIndices[offset++] = rawMinIndex;\n      }\n    }\n    target._count = offset;\n    target._indices = newIndices;\n    target._updateGetRawIdx();\n    return target;\n  };\n  /**\n   * Large data down sampling on given dimension\n   * @param sampleIndex Sample index for name and id\n   */\n  DataStore.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var target = this.clone([dimension], true);\n    var targetStorage = target._chunks;\n    var frameValues = [];\n    var frameSize = Math.floor(1 / rate);\n    var dimStore = targetStorage[dimension];\n    var len = this.count();\n    var rawExtentOnDim = target._rawExtent[dimension] = getInitialExtent();\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize));\n    var offset = 0;\n    for (var i = 0; i < len; i += frameSize) {\n      // Last frame\n      if (frameSize > len - i) {\n        frameSize = len - i;\n        frameValues.length = frameSize;\n      }\n      for (var k = 0; k < frameSize; k++) {\n        var dataIdx = this.getRawIndex(i + k);\n        frameValues[k] = dimStore[dataIdx];\n      }\n      var value = sampleValue(frameValues);\n      var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1));\n      // Only write value on the filtered data\n      dimStore[sampleFrameIdx] = value;\n      if (value < rawExtentOnDim[0]) {\n        rawExtentOnDim[0] = value;\n      }\n      if (value > rawExtentOnDim[1]) {\n        rawExtentOnDim[1] = value;\n      }\n      newIndices[offset++] = sampleFrameIdx;\n    }\n    target._count = offset;\n    target._indices = newIndices;\n    target._updateGetRawIdx();\n    return target;\n  };\n  /**\n   * Data iteration\n   * @param ctx default this\n   * @example\n   *  list.each('x', function (x, idx) {});\n   *  list.each(['x', 'y'], function (x, y, idx) {});\n   *  list.each(function (idx) {})\n   */\n  DataStore.prototype.each = function (dims, cb) {\n    if (!this._count) {\n      return;\n    }\n    var dimSize = dims.length;\n    var chunks = this._chunks;\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var rawIdx = this.getRawIndex(i);\n      // Simple optimization\n      switch (dimSize) {\n        case 0:\n          cb(i);\n          break;\n        case 1:\n          cb(chunks[dims[0]][rawIdx], i);\n          break;\n        case 2:\n          cb(chunks[dims[0]][rawIdx], chunks[dims[1]][rawIdx], i);\n          break;\n        default:\n          var k = 0;\n          var value = [];\n          for (; k < dimSize; k++) {\n            value[k] = chunks[dims[k]][rawIdx];\n          }\n          // Index\n          value[k] = i;\n          cb.apply(null, value);\n      }\n    }\n  };\n  /**\n   * Get extent of data in one dimension\n   */\n  DataStore.prototype.getDataExtent = function (dim) {\n    // Make sure use concrete dim as cache name.\n    var dimData = this._chunks[dim];\n    var initialExtent = getInitialExtent();\n    if (!dimData) {\n      return initialExtent;\n    }\n    // Make more strict checkings to ensure hitting cache.\n    var currEnd = this.count();\n    // Consider the most cases when using data zoom, `getDataExtent`\n    // happened before filtering. We cache raw extent, which is not\n    // necessary to be cleared and recalculated when restore data.\n    var useRaw = !this._indices;\n    var dimExtent;\n    if (useRaw) {\n      return this._rawExtent[dim].slice();\n    }\n    dimExtent = this._extent[dim];\n    if (dimExtent) {\n      return dimExtent.slice();\n    }\n    dimExtent = initialExtent;\n    var min = dimExtent[0];\n    var max = dimExtent[1];\n    for (var i = 0; i < currEnd; i++) {\n      var rawIdx = this.getRawIndex(i);\n      var value = dimData[rawIdx];\n      value < min && (min = value);\n      value > max && (max = value);\n    }\n    dimExtent = [min, max];\n    this._extent[dim] = dimExtent;\n    return dimExtent;\n  };\n  /**\n   * Get raw data item\n   */\n  DataStore.prototype.getRawDataItem = function (idx) {\n    var rawIdx = this.getRawIndex(idx);\n    if (!this._provider.persistent) {\n      var val = [];\n      var chunks = this._chunks;\n      for (var i = 0; i < chunks.length; i++) {\n        val.push(chunks[i][rawIdx]);\n      }\n      return val;\n    } else {\n      return this._provider.getItem(rawIdx);\n    }\n  };\n  /**\n   * Clone shallow.\n   *\n   * @param clonedDims Determine which dims to clone. Will share the data if not specified.\n   */\n  DataStore.prototype.clone = function (clonedDims, ignoreIndices) {\n    var target = new DataStore();\n    var chunks = this._chunks;\n    var clonedDimsMap = clonedDims && reduce(clonedDims, function (obj, dimIdx) {\n      obj[dimIdx] = true;\n      return obj;\n    }, {});\n    if (clonedDimsMap) {\n      for (var i = 0; i < chunks.length; i++) {\n        // Not clone if dim is not picked.\n        target._chunks[i] = !clonedDimsMap[i] ? chunks[i] : cloneChunk(chunks[i]);\n      }\n    } else {\n      target._chunks = chunks;\n    }\n    this._copyCommonProps(target);\n    if (!ignoreIndices) {\n      target._indices = this._cloneIndices();\n    }\n    target._updateGetRawIdx();\n    return target;\n  };\n  DataStore.prototype._copyCommonProps = function (target) {\n    target._count = this._count;\n    target._rawCount = this._rawCount;\n    target._provider = this._provider;\n    target._dimensions = this._dimensions;\n    target._extent = clone(this._extent);\n    target._rawExtent = clone(this._rawExtent);\n  };\n  DataStore.prototype._cloneIndices = function () {\n    if (this._indices) {\n      var Ctor = this._indices.constructor;\n      var indices = void 0;\n      if (Ctor === Array) {\n        var thisCount = this._indices.length;\n        indices = new Ctor(thisCount);\n        for (var i = 0; i < thisCount; i++) {\n          indices[i] = this._indices[i];\n        }\n      } else {\n        indices = new Ctor(this._indices);\n      }\n      return indices;\n    }\n    return null;\n  };\n  DataStore.prototype._getRawIdxIdentity = function (idx) {\n    return idx;\n  };\n  DataStore.prototype._getRawIdx = function (idx) {\n    if (idx < this._count && idx >= 0) {\n      return this._indices[idx];\n    }\n    return -1;\n  };\n  DataStore.prototype._updateGetRawIdx = function () {\n    this.getRawIndex = this._indices ? this._getRawIdx : this._getRawIdxIdentity;\n  };\n  DataStore.internalField = function () {\n    function getDimValueSimply(dataItem, property, dataIndex, dimIndex) {\n      return parseDataValue(dataItem[dimIndex], this._dimensions[dimIndex]);\n    }\n    defaultDimValueGetters = {\n      arrayRows: getDimValueSimply,\n      objectRows: function (dataItem, property, dataIndex, dimIndex) {\n        return parseDataValue(dataItem[property], this._dimensions[dimIndex]);\n      },\n      keyedColumns: getDimValueSimply,\n      original: function (dataItem, property, dataIndex, dimIndex) {\n        // Performance sensitive, do not use modelUtil.getDataItemValue.\n        // If dataItem is an plain object with no value field, the let `value`\n        // will be assigned with the object, but it will be tread correctly\n        // in the `convertValue`.\n        var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);\n        return parseDataValue(value instanceof Array ? value[dimIndex]\n        // If value is a single number or something else not array.\n        : value, this._dimensions[dimIndex]);\n      },\n      typedArray: function (dataItem, property, dataIndex, dimIndex) {\n        return dataItem[dimIndex];\n      }\n    };\n  }();\n  return DataStore;\n}();\nexport default DataStore;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { setAsPrimitive, map, isTypedArray, assert, each, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createSource, cloneSourceShallow } from '../Source.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nimport { querySeriesUpstreamDatasetModel, queryDatasetUpstreamDatasetModels } from './sourceHelper.js';\nimport { applyDataTransform } from './transform.js';\nimport DataStore from '../DataStore.js';\nimport { DefaultDataProvider } from './dataProvider.js';\n/**\n * [REQUIREMENT_MEMO]:\n * (0) `metaRawOption` means `dimensions`/`sourceHeader`/`seriesLayoutBy` in raw option.\n * (1) Keep support the feature: `metaRawOption` can be specified both on `series` and\n * `root-dataset`. Them on `series` has higher priority.\n * (2) Do not support to set `metaRawOption` on a `non-root-dataset`, because it might\n * confuse users: whether those props indicate how to visit the upstream source or visit\n * the transform result source, and some transforms has nothing to do with these props,\n * and some transforms might have multiple upstream.\n * (3) Transforms should specify `metaRawOption` in each output, just like they can be\n * declared in `root-dataset`.\n * (4) At present only support visit source in `SERIES_LAYOUT_BY_COLUMN` in transforms.\n * That is for reducing complexity in transforms.\n * PENDING: Whether to provide transposition transform?\n *\n * [IMPLEMENTAION_MEMO]:\n * \"sourceVisitConfig\" are calculated from `metaRawOption` and `data`.\n * They will not be calculated until `source` is about to be visited (to prevent from\n * duplicate calcuation). `source` is visited only in series and input to transforms.\n *\n * [DIMENSION_INHERIT_RULE]:\n * By default the dimensions are inherited from ancestors, unless a transform return\n * a new dimensions definition.\n * Consider the case:\n * ```js\n * dataset: [{\n *     source: [ ['Product', 'Sales', 'Prise'], ['Cookies', 321, 44.21], ...]\n * }, {\n *     transform: { type: 'filter', ... }\n * }]\n * dataset: [{\n *     dimension: ['Product', 'Sales', 'Prise'],\n *     source: [ ['Cookies', 321, 44.21], ...]\n * }, {\n *     transform: { type: 'filter', ... }\n * }]\n * ```\n * The two types of option should have the same behavior after transform.\n *\n *\n * [SCENARIO]:\n * (1) Provide source data directly:\n * ```js\n * series: {\n *     encode: {...},\n *     dimensions: [...]\n *     seriesLayoutBy: 'row',\n *     data: [[...]]\n * }\n * ```\n * (2) Series refer to dataset.\n * ```js\n * series: [{\n *     encode: {...}\n *     // Ignore datasetIndex means `datasetIndex: 0`\n *     // and the dimensions defination in dataset is used\n * }, {\n *     encode: {...},\n *     seriesLayoutBy: 'column',\n *     datasetIndex: 1\n * }]\n * ```\n * (3) dataset transform\n * ```js\n * dataset: [{\n *     source: [...]\n * }, {\n *     source: [...]\n * }, {\n *     // By default from 0.\n *     transform: { type: 'filter', config: {...} }\n * }, {\n *     // Piped.\n *     transform: [\n *         { type: 'filter', config: {...} },\n *         { type: 'sort', config: {...} }\n *     ]\n * }, {\n *     id: 'regressionData',\n *     fromDatasetIndex: 1,\n *     // Third-party transform\n *     transform: { type: 'ecStat:regression', config: {...} }\n * }, {\n *     // retrieve the extra result.\n *     id: 'regressionFormula',\n *     fromDatasetId: 'regressionData',\n *     fromTransformResult: 1\n * }]\n * ```\n */\nvar SourceManager = /** @class */function () {\n  function SourceManager(sourceHost) {\n    // Cached source. Do not repeat calculating if not dirty.\n    this._sourceList = [];\n    this._storeList = [];\n    // version sign of each upstream source manager.\n    this._upstreamSignList = [];\n    this._versionSignBase = 0;\n    this._dirty = true;\n    this._sourceHost = sourceHost;\n  }\n  /**\n   * Mark dirty.\n   */\n  SourceManager.prototype.dirty = function () {\n    this._setLocalSource([], []);\n    this._storeList = [];\n    this._dirty = true;\n  };\n  SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\n    this._sourceList = sourceList;\n    this._upstreamSignList = upstreamSignList;\n    this._versionSignBase++;\n    if (this._versionSignBase > 9e10) {\n      this._versionSignBase = 0;\n    }\n  };\n  /**\n   * For detecting whether the upstream source is dirty, so that\n   * the local cached source (in `_sourceList`) should be discarded.\n   */\n  SourceManager.prototype._getVersionSign = function () {\n    return this._sourceHost.uid + '_' + this._versionSignBase;\n  };\n  /**\n   * Always return a source instance. Otherwise throw error.\n   */\n  SourceManager.prototype.prepareSource = function () {\n    // For the case that call `setOption` multiple time but no data changed,\n    // cache the result source to prevent from repeating transform.\n    if (this._isDirty()) {\n      this._createSource();\n      this._dirty = false;\n    }\n  };\n  SourceManager.prototype._createSource = function () {\n    this._setLocalSource([], []);\n    var sourceHost = this._sourceHost;\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n    var hasUpstream = !!upSourceMgrList.length;\n    var resultSourceList;\n    var upstreamSignList;\n    if (isSeries(sourceHost)) {\n      var seriesModel = sourceHost;\n      var data = void 0;\n      var sourceFormat = void 0;\n      var upSource = void 0;\n      // Has upstream dataset\n      if (hasUpstream) {\n        var upSourceMgr = upSourceMgrList[0];\n        upSourceMgr.prepareSource();\n        upSource = upSourceMgr.getSource();\n        data = upSource.data;\n        sourceFormat = upSource.sourceFormat;\n        upstreamSignList = [upSourceMgr._getVersionSign()];\n      }\n      // Series data is from own.\n      else {\n        data = seriesModel.get('data', true);\n        sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\n        upstreamSignList = [];\n      }\n      // See [REQUIREMENT_MEMO], merge settings on series and parent dataset if it is root.\n      var newMetaRawOption = this._getSourceMetaRawOption() || {};\n      var upMetaRawOption = upSource && upSource.metaRawOption || {};\n      var seriesLayoutBy = retrieve2(newMetaRawOption.seriesLayoutBy, upMetaRawOption.seriesLayoutBy) || null;\n      var sourceHeader = retrieve2(newMetaRawOption.sourceHeader, upMetaRawOption.sourceHeader);\n      // Note here we should not use `upSource.dimensionsDefine`. Consider the case:\n      // `upSource.dimensionsDefine` is detected by `seriesLayoutBy: 'column'`,\n      // but series need `seriesLayoutBy: 'row'`.\n      var dimensions = retrieve2(newMetaRawOption.dimensions, upMetaRawOption.dimensions);\n      // We share source with dataset as much as possible\n      // to avoid extra memory cost of high dimensional data.\n      var needsCreateSource = seriesLayoutBy !== upMetaRawOption.seriesLayoutBy || !!sourceHeader !== !!upMetaRawOption.sourceHeader || dimensions;\n      resultSourceList = needsCreateSource ? [createSource(data, {\n        seriesLayoutBy: seriesLayoutBy,\n        sourceHeader: sourceHeader,\n        dimensions: dimensions\n      }, sourceFormat)] : [];\n    } else {\n      var datasetModel = sourceHost;\n      // Has upstream dataset.\n      if (hasUpstream) {\n        var result = this._applyTransform(upSourceMgrList);\n        resultSourceList = result.sourceList;\n        upstreamSignList = result.upstreamSignList;\n      }\n      // Is root dataset.\n      else {\n        var sourceData = datasetModel.get('source', true);\n        resultSourceList = [createSource(sourceData, this._getSourceMetaRawOption(), null)];\n        upstreamSignList = [];\n      }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      assert(resultSourceList && upstreamSignList);\n    }\n    this._setLocalSource(resultSourceList, upstreamSignList);\n  };\n  SourceManager.prototype._applyTransform = function (upMgrList) {\n    var datasetModel = this._sourceHost;\n    var transformOption = datasetModel.get('transform', true);\n    var fromTransformResult = datasetModel.get('fromTransformResult', true);\n    if (process.env.NODE_ENV !== 'production') {\n      assert(fromTransformResult != null || transformOption != null);\n    }\n    if (fromTransformResult != null) {\n      var errMsg = '';\n      if (upMgrList.length !== 1) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\n        }\n        doThrow(errMsg);\n      }\n    }\n    var sourceList;\n    var upSourceList = [];\n    var upstreamSignList = [];\n    each(upMgrList, function (upMgr) {\n      upMgr.prepareSource();\n      var upSource = upMgr.getSource(fromTransformResult || 0);\n      var errMsg = '';\n      if (fromTransformResult != null && !upSource) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Can not retrieve result by `fromTransformResult`: ' + fromTransformResult;\n        }\n        doThrow(errMsg);\n      }\n      upSourceList.push(upSource);\n      upstreamSignList.push(upMgr._getVersionSign());\n    });\n    if (transformOption) {\n      sourceList = applyDataTransform(transformOption, upSourceList, {\n        datasetIndex: datasetModel.componentIndex\n      });\n    } else if (fromTransformResult != null) {\n      sourceList = [cloneSourceShallow(upSourceList[0])];\n    }\n    return {\n      sourceList: sourceList,\n      upstreamSignList: upstreamSignList\n    };\n  };\n  SourceManager.prototype._isDirty = function () {\n    if (this._dirty) {\n      return true;\n    }\n    // All sourceList is from the some upstream.\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n    for (var i = 0; i < upSourceMgrList.length; i++) {\n      var upSrcMgr = upSourceMgrList[i];\n      if (\n      // Consider the case that there is ancestor diry, call it recursively.\n      // The performance is probably not an issue because usually the chain is not long.\n      upSrcMgr._isDirty() || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\n        return true;\n      }\n    }\n  };\n  /**\n   * @param sourceIndex By default 0, means \"main source\".\n   *                    In most cases there is only one source.\n   */\n  SourceManager.prototype.getSource = function (sourceIndex) {\n    sourceIndex = sourceIndex || 0;\n    var source = this._sourceList[sourceIndex];\n    if (!source) {\n      // Series may share source instance with dataset.\n      var upSourceMgrList = this._getUpstreamSourceManagers();\n      return upSourceMgrList[0] && upSourceMgrList[0].getSource(sourceIndex);\n    }\n    return source;\n  };\n  /**\n   *\n   * Get a data store which can be shared across series.\n   * Only available for series.\n   *\n   * @param seriesDimRequest Dimensions that are generated in series.\n   *        Should have been sorted by `storeDimIndex` asc.\n   */\n  SourceManager.prototype.getSharedDataStore = function (seriesDimRequest) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isSeries(this._sourceHost), 'Can only call getDataStore on series source manager.');\n    }\n    var schema = seriesDimRequest.makeStoreSchema();\n    return this._innerGetDataStore(schema.dimensions, seriesDimRequest.source, schema.hash);\n  };\n  SourceManager.prototype._innerGetDataStore = function (storeDims, seriesSource, sourceReadKey) {\n    // TODO Can use other sourceIndex?\n    var sourceIndex = 0;\n    var storeList = this._storeList;\n    var cachedStoreMap = storeList[sourceIndex];\n    if (!cachedStoreMap) {\n      cachedStoreMap = storeList[sourceIndex] = {};\n    }\n    var cachedStore = cachedStoreMap[sourceReadKey];\n    if (!cachedStore) {\n      var upSourceMgr = this._getUpstreamSourceManagers()[0];\n      if (isSeries(this._sourceHost) && upSourceMgr) {\n        cachedStore = upSourceMgr._innerGetDataStore(storeDims, seriesSource, sourceReadKey);\n      } else {\n        cachedStore = new DataStore();\n        // Always create store from source of series.\n        cachedStore.initData(new DefaultDataProvider(seriesSource, storeDims.length), storeDims);\n      }\n      cachedStoreMap[sourceReadKey] = cachedStore;\n    }\n    return cachedStore;\n  };\n  /**\n   * PENDING: Is it fast enough?\n   * If no upstream, return empty array.\n   */\n  SourceManager.prototype._getUpstreamSourceManagers = function () {\n    // Always get the relationship from the raw option.\n    // Do not cache the link of the dependency graph, so that\n    // there is no need to update them when change happens.\n    var sourceHost = this._sourceHost;\n    if (isSeries(sourceHost)) {\n      var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\n      return !datasetModel ? [] : [datasetModel.getSourceManager()];\n    } else {\n      return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) {\n        return datasetModel.getSourceManager();\n      });\n    }\n  };\n  SourceManager.prototype._getSourceMetaRawOption = function () {\n    var sourceHost = this._sourceHost;\n    var seriesLayoutBy;\n    var sourceHeader;\n    var dimensions;\n    if (isSeries(sourceHost)) {\n      seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\n      sourceHeader = sourceHost.get('sourceHeader', true);\n      dimensions = sourceHost.get('dimensions', true);\n    }\n    // See [REQUIREMENT_MEMO], `non-root-dataset` do not support them.\n    else if (!this._getUpstreamSourceManagers().length) {\n      var model = sourceHost;\n      seriesLayoutBy = model.get('seriesLayoutBy', true);\n      sourceHeader = model.get('sourceHeader', true);\n      dimensions = model.get('dimensions', true);\n    }\n    return {\n      seriesLayoutBy: seriesLayoutBy,\n      sourceHeader: sourceHeader,\n      dimensions: dimensions\n    };\n  };\n  return SourceManager;\n}();\nexport { SourceManager };\n// Call this method after `super.init` and `super.mergeOption` to\n// disable the transform merge, but do not disable transform clone from rawOption.\nexport function disableTransformOptionMerge(datasetModel) {\n  var transformOption = datasetModel.option.transform;\n  transformOption && setAsPrimitive(datasetModel.option.transform);\n}\nfunction isSeries(sourceHost) {\n  // Avoid circular dependency with Series.ts\n  return sourceHost.mainType === 'series';\n}\nfunction doThrow(errMsg) {\n  throw new Error(errMsg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getTooltipMarker, encodeHTML, makeValueReadable, convertToColorString } from '../../util/format.js';\nimport { isString, each, hasOwn, isArray, map, assert, extend } from 'zrender/lib/core/util.js';\nimport { SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nimport { getRandomIdBase } from '../../util/number.js';\nimport tokens from '../../visual/tokens.js';\nvar TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1';\nfunction getTooltipLineHeight(textStyle) {\n  var lineHeight = textStyle.lineHeight;\n  if (lineHeight == null) {\n    return TOOLTIP_LINE_HEIGHT_CSS;\n  } else {\n    return \"line-height:\" + encodeHTML(lineHeight + '') + \"px\";\n  }\n}\n// TODO: more textStyle option\nfunction getTooltipTextStyle(textStyle, renderMode) {\n  var nameFontColor = textStyle.color || tokens.color.tertiary;\n  var nameFontSize = textStyle.fontSize || 12;\n  var nameFontWeight = textStyle.fontWeight || '400';\n  var valueFontColor = textStyle.color || tokens.color.secondary;\n  var valueFontSize = textStyle.fontSize || 14;\n  var valueFontWeight = textStyle.fontWeight || '900';\n  if (renderMode === 'html') {\n    // `textStyle` is probably from user input, should be encoded to reduce security risk.\n    return {\n      // eslint-disable-next-line max-len\n      nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\n      // eslint-disable-next-line max-len\n      valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\n    };\n  } else {\n    return {\n      nameStyle: {\n        fontSize: nameFontSize,\n        fill: nameFontColor,\n        fontWeight: nameFontWeight\n      },\n      valueStyle: {\n        fontSize: valueFontSize,\n        fill: valueFontColor,\n        fontWeight: valueFontWeight\n      }\n    };\n  }\n}\n// See `TooltipMarkupLayoutIntent['innerGapLevel']`.\n// (value from UI design)\nvar HTML_GAPS = [0, 10, 20, 30];\nvar RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n'];\n// eslint-disable-next-line max-len\nexport function createTooltipMarkup(type, option) {\n  option.type = type;\n  return option;\n}\nfunction isSectionFragment(frag) {\n  return frag.type === 'section';\n}\nfunction getBuilder(frag) {\n  return isSectionFragment(frag) ? buildSection : buildNameValue;\n}\nfunction getBlockGapLevel(frag) {\n  if (isSectionFragment(frag)) {\n    var gapLevel_1 = 0;\n    var subBlockLen = frag.blocks.length;\n    var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\n    each(frag.blocks, function (subBlock) {\n      var subGapLevel = getBlockGapLevel(subBlock);\n      // If the some of the sub-blocks have some gaps (like 10px) inside, this block\n      // should use a larger gap (like 20px) to distinguish those sub-blocks.\n      if (subGapLevel >= gapLevel_1) {\n        gapLevel_1 = subGapLevel + +(hasInnerGap_1 && (\n        // 0 always can not be readable gap level.\n        !subGapLevel\n        // If no header, always keep the sub gap level. Otherwise\n        // look weird in case `multipleSeries`.\n        || isSectionFragment(subBlock) && !subBlock.noHeader));\n      }\n    });\n    return gapLevel_1;\n  }\n  return 0;\n}\nfunction buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var noHeader = fragment.noHeader;\n  var gaps = getGap(getBlockGapLevel(fragment));\n  var subMarkupTextList = [];\n  var subBlocks = fragment.blocks || [];\n  assert(!subBlocks || isArray(subBlocks));\n  subBlocks = subBlocks || [];\n  var orderMode = ctx.orderMode;\n  if (fragment.sortBlocks && orderMode) {\n    subBlocks = subBlocks.slice();\n    var orderMap = {\n      valueAsc: 'asc',\n      valueDesc: 'desc'\n    };\n    if (hasOwn(orderMap, orderMode)) {\n      var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\n      subBlocks.sort(function (a, b) {\n        return comparator_1.evaluate(a.sortParam, b.sortParam);\n      });\n    }\n    // FIXME 'seriesDesc' necessary?\n    else if (orderMode === 'seriesDesc') {\n      subBlocks.reverse();\n    }\n  }\n  each(subBlocks, function (subBlock, idx) {\n    var valueFormatter = fragment.valueFormatter;\n    var subMarkupText = getBuilder(subBlock)(\n    // Inherit valueFormatter\n    valueFormatter ? extend(extend({}, ctx), {\n      valueFormatter: valueFormatter\n    }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\n    subMarkupText != null && subMarkupTextList.push(subMarkupText);\n  });\n  var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(toolTipTextStyle, subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\n  if (noHeader) {\n    return subMarkupText;\n  }\n  var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\n  var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\n  var tooltipLineHeight = getTooltipLineHeight(toolTipTextStyle);\n  if (ctx.renderMode === 'richText') {\n    return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\n  } else {\n    return wrapBlockHTML(toolTipTextStyle, \"<div style=\\\"\" + nameStyle + \";\" + tooltipLineHeight + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\n  }\n}\nfunction buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var renderMode = ctx.renderMode;\n  var noName = fragment.noName;\n  var noValue = fragment.noValue;\n  var noMarker = !fragment.markerType;\n  var name = fragment.name;\n  var useUTC = ctx.useUTC;\n  var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\n    value = isArray(value) ? value : [value];\n    return map(value, function (val, idx) {\n      return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\n    });\n  };\n  if (noName && noValue) {\n    return;\n  }\n  var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || tokens.color.secondary, renderMode);\n  var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\n  var valueTypeOption = fragment.valueType;\n  var readableValueList = noValue ? [] : valueFormatter(fragment.value, fragment.dataIndex);\n  var valueAlignRight = !noMarker || !noName;\n  // It little weird if only value next to marker but far from marker.\n  var valueCloseToMarker = !noMarker && noName;\n  var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\n    nameStyle = _a.nameStyle,\n    valueStyle = _a.valueStyle;\n  return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle))\n  // Value has commas inside, so use ' ' as delimiter for multiple values.\n  + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML(toolTipTextStyle, (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\n}\n/**\n * @return markupText. null/undefined means no content.\n */\nexport function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\n  if (!fragment) {\n    return;\n  }\n  var builder = getBuilder(fragment);\n  var ctx = {\n    useUTC: useUTC,\n    renderMode: renderMode,\n    orderMode: orderMode,\n    markupStyleCreator: markupStyleCreator,\n    valueFormatter: fragment.valueFormatter\n  };\n  return builder(ctx, fragment, 0, toolTipTextStyle);\n}\nfunction getGap(gapLevel) {\n  return {\n    html: HTML_GAPS[gapLevel],\n    richText: RICH_TEXT_GAPS[gapLevel]\n  };\n}\nfunction wrapBlockHTML(textStyle, encodedContent, topGap) {\n  var clearfix = '<div style=\"clear:both\"></div>';\n  var marginCSS = \"margin: \" + topGap + \"px 0 0\";\n  var tooltipLineHeight = getTooltipLineHeight(textStyle);\n  return \"<div style=\\\"\" + marginCSS + \";\" + tooltipLineHeight + \";\\\">\" + encodedContent + clearfix + '</div>';\n}\nfunction wrapInlineNameHTML(name, leftHasMarker, style) {\n  var marginCss = leftHasMarker ? 'margin-left:2px' : '';\n  return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\n}\nfunction wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\n  // Do not too close to marker, considering there are multiple values separated by spaces.\n  var paddingStr = valueCloseToMarker ? '10px' : '20px';\n  var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\n  valueList = isArray(valueList) ? valueList : [valueList];\n  return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\"\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\n  + map(valueList, function (value) {\n    return encodeHTML(value);\n  }).join('&nbsp;&nbsp;') + '</span>';\n}\nfunction wrapInlineNameRichText(ctx, name, style) {\n  return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\n}\nfunction wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\n  var styles = [style];\n  var paddingLeft = valueCloseToMarker ? 10 : 20;\n  alignRight && styles.push({\n    padding: [0, 0, 0, paddingLeft],\n    align: 'right'\n  });\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\n  return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\n}\nexport function retrieveVisualColorForTooltipMarker(series, dataIndex) {\n  var style = series.getData().getItemVisual(dataIndex, 'style');\n  var color = style[series.visualDrawType];\n  return convertToColorString(color);\n}\nexport function getPaddingFromTooltipModel(model, renderMode) {\n  var padding = model.get('padding');\n  return padding != null ? padding\n  // We give slightly different to look pretty.\n  : renderMode === 'richText' ? [8, 10] : 10;\n}\n/**\n * The major feature is generate styles for `renderMode: 'richText'`.\n * But it also serves `renderMode: 'html'` to provide\n * \"renderMode-independent\" API.\n */\nvar TooltipMarkupStyleCreator = /** @class */function () {\n  function TooltipMarkupStyleCreator() {\n    this.richTextStyles = {};\n    // Notice that \"generate a style name\" usually happens repeatedly when mouse is moving and\n    // a tooltip is displayed. So we put the `_nextStyleNameId` as a member of each creator\n    // rather than static shared by all creators (which will cause it increase to fast).\n    this._nextStyleNameId = getRandomIdBase();\n  }\n  TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\n    return '__EC_aUTo_' + this._nextStyleNameId++;\n  };\n  TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\n    var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\n    var marker = getTooltipMarker({\n      color: colorStr,\n      type: markerType,\n      renderMode: renderMode,\n      markerId: markerId\n    });\n    if (isString(marker)) {\n      return marker;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(markerId);\n      }\n      this.richTextStyles[markerId] = marker.style;\n      return marker.content;\n    }\n  };\n  /**\n   * @usage\n   * ```ts\n   * const styledText = markupStyleCreator.wrapRichTextStyle([\n   *     // The styles will be auto merged.\n   *     {\n   *         fontSize: 12,\n   *         color: 'blue'\n   *     },\n   *     {\n   *         padding: 20\n   *     }\n   * ]);\n   * ```\n   */\n  TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\n    var finalStl = {};\n    if (isArray(styles)) {\n      each(styles, function (stl) {\n        return extend(finalStl, stl);\n      });\n    } else {\n      extend(finalStl, styles);\n    }\n    var styleName = this._generateStyleName();\n    this.richTextStyles[styleName] = finalStl;\n    return \"{\" + styleName + \"|\" + text + \"}\";\n  };\n  return TooltipMarkupStyleCreator;\n}();\nexport { TooltipMarkupStyleCreator };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { trim, isArray, each, reduce } from 'zrender/lib/core/util.js';\nimport { retrieveVisualColorForTooltipMarker, createTooltipMarkup } from './tooltipMarkup.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isNameSpecified } from '../../util/model.js';\nexport function defaultSeriesFormatTooltip(opt) {\n  var series = opt.series;\n  var dataIndex = opt.dataIndex;\n  var multipleSeries = opt.multipleSeries;\n  var data = series.getData();\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n  var tooltipDimLen = tooltipDims.length;\n  var value = series.getRawValue(dataIndex);\n  var isValueArr = isArray(value);\n  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex);\n  // Complicated rule for pretty tooltip.\n  var inlineValue;\n  var inlineValueType;\n  var subBlocks;\n  var sortParam;\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n    inlineValue = formatArrResult.inlineValues;\n    inlineValueType = formatArrResult.inlineValueTypes;\n    subBlocks = formatArrResult.blocks;\n    // Only support tooltip sort by the first inline value. It's enough in most cases.\n    sortParam = formatArrResult.inlineValues[0];\n  } else if (tooltipDimLen) {\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n    inlineValueType = dimInfo.type;\n  } else {\n    sortParam = inlineValue = isValueArr ? value[0] : value;\n  }\n  // Do not show generated series name. It might not be readable.\n  var seriesNameSpecified = isNameSpecified(series);\n  var seriesName = seriesNameSpecified && series.name || '';\n  var itemName = data.getName(dataIndex);\n  var inlineName = multipleSeries ? seriesName : itemName;\n  return createTooltipMarkup('section', {\n    header: seriesName,\n    // When series name is not specified, do not show a header line with only '-'.\n    // This case always happens in tooltip.trigger: 'item'.\n    noHeader: multipleSeries || !seriesNameSpecified,\n    sortParam: sortParam,\n    blocks: [createTooltipMarkup('nameValue', {\n      markerType: 'item',\n      markerColor: markerColor,\n      // Do not mix display seriesName and itemName in one tooltip,\n      // which might confuses users.\n      name: inlineName,\n      // name dimension might be auto assigned, where the name might\n      // be not readable. So we check trim here.\n      noName: !trim(inlineName),\n      value: inlineValue,\n      valueType: inlineValueType,\n      dataIndex: dataIndex\n    })].concat(subBlocks || [])\n  });\n}\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n  // check: category-no-encode-has-axis-data in dataset.html\n  var data = series.getData();\n  var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n    var dimItem = data.getDimensionInfo(idx);\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n  }, false);\n  var inlineValues = [];\n  var inlineValueTypes = [];\n  var blocks = [];\n  tooltipDims.length ? each(tooltipDims, function (dim) {\n    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n  })\n  // By default, all dims is used on tooltip.\n  : each(value, setEachItem);\n  function setEachItem(val, dim) {\n    var dimInfo = data.getDimensionInfo(dim);\n    // If `dimInfo.tooltip` is not set, show tooltip.\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n      return;\n    }\n    if (isValueMultipleLine) {\n      blocks.push(createTooltipMarkup('nameValue', {\n        markerType: 'subItem',\n        markerColor: colorStr,\n        name: dimInfo.displayName,\n        value: val,\n        valueType: dimInfo.type\n      }));\n    } else {\n      inlineValues.push(val);\n      inlineValueTypes.push(dimInfo.type);\n    }\n  }\n  return {\n    inlineValues: inlineValues,\n    inlineValueTypes: inlineValueTypes,\n    blocks: blocks\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport * as modelUtil from '../util/model.js';\nimport ComponentModel from './Component.js';\nimport { PaletteMixin } from './mixin/palette.js';\nimport { DataFormatMixin } from '../model/mixin/dataFormat.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport { createTask } from '../core/task.js';\nimport { mountExtend } from '../util/clazz.js';\nimport { SourceManager } from '../data/helper/sourceManager.js';\nimport { defaultSeriesFormatTooltip } from '../component/tooltip/seriesFormatTooltip.js';\nvar inner = modelUtil.makeInner();\nfunction getSelectionKey(data, dataIndex) {\n  return data.getName(dataIndex) || data.getId(dataIndex);\n}\nexport var SERIES_UNIVERSAL_TRANSITION_PROP = '__universalTransitionEnabled';\nvar SeriesModel = /** @class */function (_super) {\n  __extends(SeriesModel, _super);\n  function SeriesModel() {\n    // [Caution]: Because this class or desecendants can be used as `XXX.extend(subProto)`,\n    // the class members must not be initialized in constructor or declaration place.\n    // Otherwise there is bad case:\n    //   class A {xxx = 1;}\n    //   enableClassExtend(A);\n    //   class B extends A {}\n    //   var C = B.extend({xxx: 5});\n    //   var c = new C();\n    //   console.log(c.xxx); // expect 5 but always 1.\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    // ---------------------------------------\n    // Props about data selection\n    // ---------------------------------------\n    _this._selectedDataIndicesMap = {};\n    return _this;\n  }\n  SeriesModel.prototype.init = function (option, parentModel, ecModel) {\n    this.seriesIndex = this.componentIndex;\n    this.dataTask = createTask({\n      count: dataTaskCount,\n      reset: dataTaskReset\n    });\n    this.dataTask.context = {\n      model: this\n    };\n    this.mergeDefaultAndTheme(option, ecModel);\n    var sourceManager = inner(this).sourceManager = new SourceManager(this);\n    sourceManager.prepareSource();\n    var data = this.getInitialData(option, ecModel);\n    wrapData(data, this);\n    this.dataTask.context.data = data;\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(data, 'getInitialData returned invalid data.');\n    }\n    inner(this).dataBeforeProcessed = data;\n    // If we reverse the order (make data firstly, and then make\n    // dataBeforeProcessed by cloneShallow), cloneShallow will\n    // cause data.graph.data !== data when using\n    // module:echarts/data/Graph or module:echarts/data/Tree.\n    // See module:echarts/data/helper/linkSeriesData\n    // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\n    // init or merge stage, because the data can be restored. So we do not `restoreData`\n    // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\n    // Call `seriesModel.getRawData()` instead.\n    // this.restoreData();\n    autoSeriesName(this);\n    this._initSelectedMapFromData(data);\n  };\n  /**\n   * Util for merge default and theme to option\n   */\n  SeriesModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var layoutMode = fetchLayoutMode(this);\n    var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n    // Backward compat: using subType on theme.\n    // But if name duplicate between series subType\n    // (for example: parallel) add component mainType,\n    // add suffix 'Series'.\n    var themeSubType = this.subType;\n    if (ComponentModel.hasClass(themeSubType)) {\n      themeSubType += 'Series';\n    }\n    zrUtil.merge(option, ecModel.getTheme().get(this.subType));\n    zrUtil.merge(option, this.getDefaultOption());\n    // Default label emphasis `show`\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n    this.fillDataTextStyle(option.data);\n    if (layoutMode) {\n      mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  };\n  SeriesModel.prototype.mergeOption = function (newSeriesOption, ecModel) {\n    // this.settingTask.dirty();\n    newSeriesOption = zrUtil.merge(this.option, newSeriesOption, true);\n    this.fillDataTextStyle(newSeriesOption.data);\n    var layoutMode = fetchLayoutMode(this);\n    if (layoutMode) {\n      mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n    }\n    var sourceManager = inner(this).sourceManager;\n    sourceManager.dirty();\n    sourceManager.prepareSource();\n    var data = this.getInitialData(newSeriesOption, ecModel);\n    wrapData(data, this);\n    this.dataTask.dirty();\n    this.dataTask.context.data = data;\n    inner(this).dataBeforeProcessed = data;\n    autoSeriesName(this);\n    this._initSelectedMapFromData(data);\n  };\n  SeriesModel.prototype.fillDataTextStyle = function (data) {\n    // Default data label emphasis `show`\n    // FIXME Tree structure data ?\n    // FIXME Performance ?\n    if (data && !zrUtil.isTypedArray(data)) {\n      var props = ['show'];\n      for (var i = 0; i < data.length; i++) {\n        if (data[i] && data[i].label) {\n          modelUtil.defaultEmphasis(data[i], 'label', props);\n        }\n      }\n    }\n  };\n  /**\n   * Init a data structure from data related option in series\n   * Must be overridden.\n   */\n  SeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return;\n  };\n  /**\n   * Append data to list\n   */\n  SeriesModel.prototype.appendData = function (params) {\n    // FIXME ???\n    // (1) If data from dataset, forbidden append.\n    // (2) support append data of dataset.\n    var data = this.getRawData();\n    data.appendData(params.data);\n  };\n  /**\n   * Consider some method like `filter`, `map` need make new data,\n   * We should make sure that `seriesModel.getData()` get correct\n   * data in the stream procedure. So we fetch data from upstream\n   * each time `task.perform` called.\n   */\n  SeriesModel.prototype.getData = function (dataType) {\n    var task = getCurrentTask(this);\n    if (task) {\n      var data = task.context.data;\n      return dataType == null || !data.getLinkedData ? data : data.getLinkedData(dataType);\n    } else {\n      // When series is not alive (that may happen when click toolbox\n      // restore or setOption with not merge mode), series data may\n      // be still need to judge animation or something when graphic\n      // elements want to know whether fade out.\n      return inner(this).data;\n    }\n  };\n  SeriesModel.prototype.getAllData = function () {\n    var mainData = this.getData();\n    return mainData && mainData.getLinkedDataAll ? mainData.getLinkedDataAll() : [{\n      data: mainData\n    }];\n  };\n  SeriesModel.prototype.setData = function (data) {\n    var task = getCurrentTask(this);\n    if (task) {\n      var context = task.context;\n      // Consider case: filter, data sample.\n      // FIXME:TS never used, so comment it\n      // if (context.data !== data && task.modifyOutputEnd) {\n      //     task.setOutputEnd(data.count());\n      // }\n      context.outputData = data;\n      // Caution: setData should update context.data,\n      // Because getData may be called multiply in a\n      // single stage and expect to get the data just\n      // set. (For example, AxisProxy, x y both call\n      // getData and setDate sequentially).\n      // So the context.data should be fetched from\n      // upstream each time when a stage starts to be\n      // performed.\n      if (task !== this.dataTask) {\n        context.data = data;\n      }\n    }\n    inner(this).data = data;\n  };\n  SeriesModel.prototype.getEncode = function () {\n    var encode = this.get('encode', true);\n    if (encode) {\n      return zrUtil.createHashMap(encode);\n    }\n  };\n  SeriesModel.prototype.getSourceManager = function () {\n    return inner(this).sourceManager;\n  };\n  SeriesModel.prototype.getSource = function () {\n    return this.getSourceManager().getSource();\n  };\n  /**\n   * Get data before processed\n   */\n  SeriesModel.prototype.getRawData = function () {\n    return inner(this).dataBeforeProcessed;\n  };\n  SeriesModel.prototype.getColorBy = function () {\n    var colorBy = this.get('colorBy');\n    return colorBy || 'series';\n  };\n  SeriesModel.prototype.isColorBySeries = function () {\n    return this.getColorBy() === 'series';\n  };\n  /**\n   * Get base axis if has coordinate system and has axis.\n   * By default use coordSys.getBaseAxis();\n   * Can be overridden for some chart.\n   * @return {type} description\n   */\n  SeriesModel.prototype.getBaseAxis = function () {\n    var coordSys = this.coordinateSystem;\n    // @ts-ignore\n    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n  };\n  /**\n   * Retrieve the index of nearest value in the view coordinate.\n   * Data position is compared with each axis's dataToCoord.\n   *\n   * @param axisDim axis dimension\n   * @param dim data dimension\n   * @param value\n   * @param [maxDistance=Infinity] The maximum distance in view coordinate space\n   * @return If and only if multiple indices has\n   *         the same value, they are put to the result.\n   */\n  SeriesModel.prototype.indicesOfNearest = function (axisDim, dim, value, maxDistance) {\n    var data = this.getData();\n    var coordSys = this.coordinateSystem;\n    var axis = coordSys && coordSys.getAxis(axisDim);\n    if (!coordSys || !axis) {\n      return [];\n    }\n    var targetCoord = axis.dataToCoord(value);\n    if (maxDistance == null) {\n      maxDistance = Infinity;\n    }\n    var nearestIndices = [];\n    var minDist = Infinity;\n    var minDiff = -1;\n    var nearestIndicesLen = 0;\n    data.each(dim, function (dimValue, idx) {\n      var dataCoord = axis.dataToCoord(dimValue);\n      var diff = targetCoord - dataCoord;\n      var dist = Math.abs(diff);\n      if (dist <= maxDistance) {\n        // When the `value` is at the middle of `this.get(dim, i)` and `this.get(dim, i+1)`,\n        // we'd better not push both of them to `nearestIndices`, otherwise it is easy to\n        // get more than one item in `nearestIndices` (more specifically, in `tooltip`).\n        // So we choose the one that `diff >= 0` in this case.\n        // But if `this.get(dim, i)` and `this.get(dim, j)` get the same value, both of them\n        // should be push to `nearestIndices`.\n        if (dist < minDist || dist === minDist && diff >= 0 && minDiff < 0) {\n          minDist = dist;\n          minDiff = diff;\n          nearestIndicesLen = 0;\n        }\n        if (diff === minDiff) {\n          nearestIndices[nearestIndicesLen++] = idx;\n        }\n      }\n    });\n    nearestIndices.length = nearestIndicesLen;\n    return nearestIndices;\n  };\n  /**\n   * Default tooltip formatter\n   *\n   * @param dataIndex\n   * @param multipleSeries\n   * @param dataType\n   * @param renderMode valid values: 'html'(by default) and 'richText'.\n   *        'html' is used for rendering tooltip in extra DOM form, and the result\n   *        string is used as DOM HTML content.\n   *        'richText' is used for rendering tooltip in rich text form, for those where\n   *        DOM operation is not supported.\n   * @return formatted tooltip with `html` and `markers`\n   *        Notice: The override method can also return string\n   */\n  SeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    return defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n  };\n  SeriesModel.prototype.isAnimationEnabled = function () {\n    var ecModel = this.ecModel;\n    // Disable animation if using echarts in node but not give ssr flag.\n    // In ssr mode, renderToString will generate svg with css animation.\n    if (env.node && !(ecModel && ecModel.ssr)) {\n      return false;\n    }\n    var animationEnabled = this.getShallow('animation');\n    if (animationEnabled) {\n      if (this.getData().count() > this.getShallow('animationThreshold')) {\n        animationEnabled = false;\n      }\n    }\n    return !!animationEnabled;\n  };\n  SeriesModel.prototype.restoreData = function () {\n    this.dataTask.dirty();\n  };\n  SeriesModel.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\n    var ecModel = this.ecModel;\n    // PENDING\n    var color = PaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);\n    if (!color) {\n      color = ecModel.getColorFromPalette(name, scope, requestColorNum);\n    }\n    return color;\n  };\n  /**\n   * Use `data.mapDimensionsAll(coordDim)` instead.\n   * @deprecated\n   */\n  SeriesModel.prototype.coordDimToDataDim = function (coordDim) {\n    return this.getRawData().mapDimensionsAll(coordDim);\n  };\n  /**\n   * Get progressive rendering count each step\n   */\n  SeriesModel.prototype.getProgressive = function () {\n    return this.get('progressive');\n  };\n  /**\n   * Get progressive rendering count each step\n   */\n  SeriesModel.prototype.getProgressiveThreshold = function () {\n    return this.get('progressiveThreshold');\n  };\n  // PENGING If selectedMode is null ?\n  SeriesModel.prototype.select = function (innerDataIndices, dataType) {\n    this._innerSelect(this.getData(dataType), innerDataIndices);\n  };\n  SeriesModel.prototype.unselect = function (innerDataIndices, dataType) {\n    var selectedMap = this.option.selectedMap;\n    if (!selectedMap) {\n      return;\n    }\n    var selectedMode = this.option.selectedMode;\n    var data = this.getData(dataType);\n    if (selectedMode === 'series' || selectedMap === 'all') {\n      this.option.selectedMap = {};\n      this._selectedDataIndicesMap = {};\n      return;\n    }\n    for (var i = 0; i < innerDataIndices.length; i++) {\n      var dataIndex = innerDataIndices[i];\n      var nameOrId = getSelectionKey(data, dataIndex);\n      selectedMap[nameOrId] = false;\n      this._selectedDataIndicesMap[nameOrId] = -1;\n    }\n  };\n  SeriesModel.prototype.toggleSelect = function (innerDataIndices, dataType) {\n    var tmpArr = [];\n    for (var i = 0; i < innerDataIndices.length; i++) {\n      tmpArr[0] = innerDataIndices[i];\n      this.isSelected(innerDataIndices[i], dataType) ? this.unselect(tmpArr, dataType) : this.select(tmpArr, dataType);\n    }\n  };\n  SeriesModel.prototype.getSelectedDataIndices = function () {\n    if (this.option.selectedMap === 'all') {\n      return [].slice.call(this.getData().getIndices());\n    }\n    var selectedDataIndicesMap = this._selectedDataIndicesMap;\n    var nameOrIds = zrUtil.keys(selectedDataIndicesMap);\n    var dataIndices = [];\n    for (var i = 0; i < nameOrIds.length; i++) {\n      var dataIndex = selectedDataIndicesMap[nameOrIds[i]];\n      if (dataIndex >= 0) {\n        dataIndices.push(dataIndex);\n      }\n    }\n    return dataIndices;\n  };\n  SeriesModel.prototype.isSelected = function (dataIndex, dataType) {\n    var selectedMap = this.option.selectedMap;\n    if (!selectedMap) {\n      return false;\n    }\n    var data = this.getData(dataType);\n    return (selectedMap === 'all' || selectedMap[getSelectionKey(data, dataIndex)]) && !data.getItemModel(dataIndex).get(['select', 'disabled']);\n  };\n  SeriesModel.prototype.isUniversalTransitionEnabled = function () {\n    if (this[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n      return true;\n    }\n    var universalTransitionOpt = this.option.universalTransition;\n    // Quick reject\n    if (!universalTransitionOpt) {\n      return false;\n    }\n    if (universalTransitionOpt === true) {\n      return true;\n    }\n    // Can be simply 'universalTransition: true'\n    return universalTransitionOpt && universalTransitionOpt.enabled;\n  };\n  SeriesModel.prototype._innerSelect = function (data, innerDataIndices) {\n    var _a, _b;\n    var option = this.option;\n    var selectedMode = option.selectedMode;\n    var len = innerDataIndices.length;\n    if (!selectedMode || !len) {\n      return;\n    }\n    if (selectedMode === 'series') {\n      option.selectedMap = 'all';\n    } else if (selectedMode === 'multiple') {\n      if (!zrUtil.isObject(option.selectedMap)) {\n        option.selectedMap = {};\n      }\n      var selectedMap = option.selectedMap;\n      for (var i = 0; i < len; i++) {\n        var dataIndex = innerDataIndices[i];\n        // TODO different types of data share same object.\n        var nameOrId = getSelectionKey(data, dataIndex);\n        selectedMap[nameOrId] = true;\n        this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);\n      }\n    } else if (selectedMode === 'single' || selectedMode === true) {\n      var lastDataIndex = innerDataIndices[len - 1];\n      var nameOrId = getSelectionKey(data, lastDataIndex);\n      option.selectedMap = (_a = {}, _a[nameOrId] = true, _a);\n      this._selectedDataIndicesMap = (_b = {}, _b[nameOrId] = data.getRawIndex(lastDataIndex), _b);\n    }\n  };\n  SeriesModel.prototype._initSelectedMapFromData = function (data) {\n    // Ignore select info in data if selectedMap exists.\n    // NOTE It's only for legacy usage. edge data is not supported.\n    if (this.option.selectedMap) {\n      return;\n    }\n    var dataIndices = [];\n    if (data.hasItemOption) {\n      data.each(function (idx) {\n        var rawItem = data.getRawDataItem(idx);\n        if (rawItem && rawItem.selected) {\n          dataIndices.push(idx);\n        }\n      });\n    }\n    if (dataIndices.length > 0) {\n      this._innerSelect(data, dataIndices);\n    }\n  };\n  // /**\n  //  * @see {module:echarts/stream/Scheduler}\n  //  */\n  // abstract pipeTask: null\n  SeriesModel.registerClass = function (clz) {\n    return ComponentModel.registerClass(clz);\n  };\n  SeriesModel.protoInitialize = function () {\n    var proto = SeriesModel.prototype;\n    proto.type = 'series.__base__';\n    proto.seriesIndex = 0;\n    proto.ignoreStyleOnData = false;\n    proto.hasSymbolVisual = false;\n    proto.defaultSymbol = 'circle';\n    // Make sure the values can be accessed!\n    proto.visualStyleAccessPath = 'itemStyle';\n    proto.visualDrawType = 'fill';\n  }();\n  return SeriesModel;\n}(ComponentModel);\nzrUtil.mixin(SeriesModel, DataFormatMixin);\nzrUtil.mixin(SeriesModel, PaletteMixin);\nmountExtend(SeriesModel, ComponentModel);\n/**\n * MUST be called after `prepareSource` called\n * Here we need to make auto series, especially for auto legend. But we\n * do not modify series.name in option to avoid side effects.\n */\nfunction autoSeriesName(seriesModel) {\n  // User specified name has higher priority, otherwise it may cause\n  // series can not be queried unexpectedly.\n  var name = seriesModel.name;\n  if (!modelUtil.isNameSpecified(seriesModel)) {\n    seriesModel.name = getSeriesAutoName(seriesModel) || name;\n  }\n}\nfunction getSeriesAutoName(seriesModel) {\n  var data = seriesModel.getRawData();\n  var dataDims = data.mapDimensionsAll('seriesName');\n  var nameArr = [];\n  zrUtil.each(dataDims, function (dataDim) {\n    var dimInfo = data.getDimensionInfo(dataDim);\n    dimInfo.displayName && nameArr.push(dimInfo.displayName);\n  });\n  return nameArr.join(' ');\n}\nfunction dataTaskCount(context) {\n  return context.model.getRawData().count();\n}\nfunction dataTaskReset(context) {\n  var seriesModel = context.model;\n  seriesModel.setData(seriesModel.getRawData().cloneShallow());\n  return dataTaskProgress;\n}\nfunction dataTaskProgress(param, context) {\n  // Avoid repeat cloneShallow when data just created in reset.\n  if (context.outputData && param.end > context.outputData.count()) {\n    context.model.getRawData().cloneShallow(context.outputData);\n  }\n}\n// TODO refactor\nfunction wrapData(data, seriesModel) {\n  zrUtil.each(zrUtil.concatArray(data.CHANGABLE_METHODS, data.DOWNSAMPLE_METHODS), function (methodName) {\n    data.wrapMethod(methodName, zrUtil.curry(onDataChange, seriesModel));\n  });\n}\nfunction onDataChange(seriesModel, newList) {\n  var task = getCurrentTask(seriesModel);\n  if (task) {\n    // Consider case: filter, selectRange\n    task.setOutputEnd((newList || this).count());\n  }\n  return newList;\n}\nfunction getCurrentTask(seriesModel) {\n  var scheduler = (seriesModel.ecModel || {}).scheduler;\n  var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\n  if (pipeline) {\n    // When pipline finished, the currrentTask keep the last\n    // task (renderTask).\n    var task = pipeline.currentTask;\n    if (task) {\n      var agentStubMap = task.agentStubMap;\n      if (agentStubMap) {\n        task = agentStubMap.get(seriesModel.uid);\n      }\n    }\n    return task;\n  }\n}\nexport default SeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Group from 'zrender/lib/graphic/Group.js';\nimport * as componentUtil from '../util/component.js';\nimport * as clazzUtil from '../util/clazz.js';\nvar ComponentView = /** @class */function () {\n  function ComponentView() {\n    this.group = new Group();\n    this.uid = componentUtil.getUID('viewComponent');\n  }\n  ComponentView.prototype.init = function (ecModel, api) {};\n  ComponentView.prototype.render = function (model, ecModel, api, payload) {};\n  ComponentView.prototype.dispose = function (ecModel, api) {};\n  ComponentView.prototype.updateView = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  ComponentView.prototype.updateLayout = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  ComponentView.prototype.updateVisual = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  /**\n   * Hook for toggle blur target series.\n   * Can be used in marker for blur or leave blur the markers\n   */\n  ComponentView.prototype.toggleBlurSeries = function (seriesModels, isBlur, ecModel) {\n    // Do nothing;\n  };\n  /**\n   * Traverse the new rendered elements.\n   *\n   * It will traverse the new added element in progressive rendering.\n   * And traverse all in normal rendering.\n   */\n  ComponentView.prototype.eachRendered = function (cb) {\n    var group = this.group;\n    if (group) {\n      group.traverse(cb);\n    }\n  };\n  return ComponentView;\n}();\n;\nclazzUtil.enableClassExtend(ComponentView);\nclazzUtil.enableClassManagement(ComponentView);\nexport default ComponentView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model.js';\n/**\n * @return {string} If large mode changed, return string 'reset';\n */\nexport default function createRenderPlanner() {\n  var inner = makeInner();\n  return function (seriesModel) {\n    var fields = inner(seriesModel);\n    var pipelineContext = seriesModel.pipelineContext;\n    var originalLarge = !!fields.large;\n    var originalProgressive = !!fields.progressiveRender;\n    // FIXME: if the planner works on a filtered series, `pipelineContext` does not\n    // exists. See #11611 . Probably we need to modify this structure, see the comment\n    // on `performRawSeries` in `Schedular.js`.\n    var large = fields.large = !!(pipelineContext && pipelineContext.large);\n    var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);\n    return !!(originalLarge !== large || originalProgressive !== progressive) && 'reset';\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport * as componentUtil from '../util/component.js';\nimport * as clazzUtil from '../util/clazz.js';\nimport * as modelUtil from '../util/model.js';\nimport { enterEmphasis, leaveEmphasis, getHighlightDigit, isHighDownDispatcher } from '../util/states.js';\nimport { createTask } from '../core/task.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { traverseElements } from '../util/graphic.js';\nimport { error } from '../util/log.js';\nvar inner = modelUtil.makeInner();\nvar renderPlanner = createRenderPlanner();\nvar ChartView = /** @class */function () {\n  function ChartView() {\n    this.group = new Group();\n    this.uid = componentUtil.getUID('viewChart');\n    this.renderTask = createTask({\n      plan: renderTaskPlan,\n      reset: renderTaskReset\n    });\n    this.renderTask.context = {\n      view: this\n    };\n  }\n  ChartView.prototype.init = function (ecModel, api) {};\n  ChartView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error('render method must been implemented');\n    }\n  };\n  /**\n   * Highlight series or specified data item.\n   */\n  ChartView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData(payload && payload.dataType);\n    if (!data) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n      return;\n    }\n    toggleHighlight(data, payload, 'emphasis');\n  };\n  /**\n   * Downplay series or specified data item.\n   */\n  ChartView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData(payload && payload.dataType);\n    if (!data) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n      return;\n    }\n    toggleHighlight(data, payload, 'normal');\n  };\n  /**\n   * Remove self.\n   */\n  ChartView.prototype.remove = function (ecModel, api) {\n    this.group.removeAll();\n  };\n  /**\n   * Dispose self.\n   */\n  ChartView.prototype.dispose = function (ecModel, api) {};\n  ChartView.prototype.updateView = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  // FIXME never used?\n  ChartView.prototype.updateLayout = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  // FIXME never used?\n  ChartView.prototype.updateVisual = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  /**\n   * Traverse the new rendered elements.\n   *\n   * It will traverse the new added element in progressive rendering.\n   * And traverse all in normal rendering.\n   */\n  ChartView.prototype.eachRendered = function (cb) {\n    traverseElements(this.group, cb);\n  };\n  ChartView.markUpdateMethod = function (payload, methodName) {\n    inner(payload).updateMethod = methodName;\n  };\n  ChartView.protoInitialize = function () {\n    var proto = ChartView.prototype;\n    proto.type = 'chart';\n  }();\n  return ChartView;\n}();\n;\n/**\n * Set state of single element\n */\nfunction elSetState(el, state, highlightDigit) {\n  if (el && isHighDownDispatcher(el)) {\n    (state === 'emphasis' ? enterEmphasis : leaveEmphasis)(el, highlightDigit);\n  }\n}\nfunction toggleHighlight(data, payload, state) {\n  var dataIndex = modelUtil.queryDataIndex(data, payload);\n  var highlightDigit = payload && payload.highlightKey != null ? getHighlightDigit(payload.highlightKey) : null;\n  if (dataIndex != null) {\n    each(modelUtil.normalizeToArray(dataIndex), function (dataIdx) {\n      elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\n    });\n  } else {\n    data.eachItemGraphicEl(function (el) {\n      elSetState(el, state, highlightDigit);\n    });\n  }\n}\nclazzUtil.enableClassExtend(ChartView, ['dispose']);\nclazzUtil.enableClassManagement(ChartView);\nfunction renderTaskPlan(context) {\n  return renderPlanner(context.model);\n}\nfunction renderTaskReset(context) {\n  var seriesModel = context.model;\n  var ecModel = context.ecModel;\n  var api = context.api;\n  var payload = context.payload;\n  // FIXME: remove updateView updateVisual\n  var progressiveRender = seriesModel.pipelineContext.progressiveRender;\n  var view = context.view;\n  var updateMethod = payload && inner(payload).updateMethod;\n  var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod\n  // `appendData` is also supported when data amount\n  // is less than progressive threshold.\n  : 'render';\n  if (methodName !== 'render') {\n    view[methodName](seriesModel, ecModel, api, payload);\n  }\n  return progressMethodMap[methodName];\n}\nvar progressMethodMap = {\n  incrementalPrepareRender: {\n    progress: function (params, context) {\n      context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\n    }\n  },\n  render: {\n    // Put view.render in `progress` to support appendData. But in this case\n    // view.render should not be called in reset, otherwise it will be called\n    // twise. Use `forceFirstProgress` to make sure that view.render is called\n    // in any cases.\n    forceFirstProgress: true,\n    progress: function (params, context) {\n      context.view.render(context.model, context.ecModel, context.api, context.payload);\n    }\n  }\n};\nexport default ChartView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar ORIGIN_METHOD = '\\0__throttleOriginMethod';\nvar RATE = '\\0__throttleRate';\nvar THROTTLE_TYPE = '\\0__throttleType';\n;\n/**\n * @public\n * @param {(Function)} fn\n * @param {number} [delay=0] Unit: ms.\n * @param {boolean} [debounce=false]\n *        true: If call interval less than `delay`, only the last call works.\n *        false: If call interval less than `delay, call works on fixed rate.\n * @return {(Function)} throttled fn.\n */\nexport function throttle(fn, delay, debounce) {\n  var currCall;\n  var lastCall = 0;\n  var lastExec = 0;\n  var timer = null;\n  var diff;\n  var scope;\n  var args;\n  var debounceNextCall;\n  delay = delay || 0;\n  function exec() {\n    lastExec = new Date().getTime();\n    timer = null;\n    fn.apply(scope, args || []);\n  }\n  var cb = function () {\n    var cbArgs = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      cbArgs[_i] = arguments[_i];\n    }\n    currCall = new Date().getTime();\n    scope = this;\n    args = cbArgs;\n    var thisDelay = debounceNextCall || delay;\n    var thisDebounce = debounceNextCall || debounce;\n    debounceNextCall = null;\n    diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\n    clearTimeout(timer);\n    // Here we should make sure that: the `exec` SHOULD NOT be called later\n    // than a new call of `cb`, that is, preserving the command order. Consider\n    // calculating \"scale rate\" when roaming as an example. When a call of `cb`\n    // happens, either the `exec` is called dierectly, or the call is delayed.\n    // But the delayed call should never be later than next call of `cb`. Under\n    // this assurance, we can simply update view state each time `dispatchAction`\n    // triggered by user roaming, but not need to add extra code to avoid the\n    // state being \"rolled-back\".\n    if (thisDebounce) {\n      timer = setTimeout(exec, thisDelay);\n    } else {\n      if (diff >= 0) {\n        exec();\n      } else {\n        timer = setTimeout(exec, -diff);\n      }\n    }\n    lastCall = currCall;\n  };\n  /**\n   * Clear throttle.\n   * @public\n   */\n  cb.clear = function () {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  };\n  /**\n   * Enable debounce once.\n   */\n  cb.debounceNextCall = function (debounceDelay) {\n    debounceNextCall = debounceDelay;\n  };\n  return cb;\n}\n/**\n * Create throttle method or update throttle rate.\n *\n * @example\n * ComponentView.prototype.render = function () {\n *     ...\n *     throttle.createOrUpdate(\n *         this,\n *         '_dispatchAction',\n *         this.model.get('throttle'),\n *         'fixRate'\n *     );\n * };\n * ComponentView.prototype.remove = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n * ComponentView.prototype.dispose = function () {\n *     throttle.clear(this, '_dispatchAction');\n * };\n *\n */\nexport function createOrUpdate(obj, fnAttr, rate, throttleType) {\n  var fn = obj[fnAttr];\n  if (!fn) {\n    return;\n  }\n  var originFn = fn[ORIGIN_METHOD] || fn;\n  var lastThrottleType = fn[THROTTLE_TYPE];\n  var lastRate = fn[RATE];\n  if (lastRate !== rate || lastThrottleType !== throttleType) {\n    if (rate == null || !throttleType) {\n      return obj[fnAttr] = originFn;\n    }\n    fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\n    fn[ORIGIN_METHOD] = originFn;\n    fn[THROTTLE_TYPE] = throttleType;\n    fn[RATE] = rate;\n  }\n  return fn;\n}\n/**\n * Clear throttle. Example see throttle.createOrUpdate.\n */\nexport function clear(obj, fnAttr) {\n  var fn = obj[fnAttr];\n  if (fn && fn[ORIGIN_METHOD]) {\n    // Clear throttle\n    fn.clear && fn.clear();\n    obj[fnAttr] = fn[ORIGIN_METHOD];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isFunction, extend, createHashMap } from 'zrender/lib/core/util.js';\nimport makeStyleMapper from '../model/mixin/makeStyleMapper.js';\nimport { ITEM_STYLE_KEY_MAP } from '../model/mixin/itemStyle.js';\nimport { LINE_STYLE_KEY_MAP } from '../model/mixin/lineStyle.js';\nimport Model from '../model/Model.js';\nimport { makeInner } from '../util/model.js';\nvar inner = makeInner();\nvar defaultStyleMappers = {\n  itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),\n  lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)\n};\nvar defaultColorKey = {\n  lineStyle: 'stroke',\n  itemStyle: 'fill'\n};\nfunction getStyleMapper(seriesModel, stylePath) {\n  var styleMapper = seriesModel.visualStyleMapper || defaultStyleMappers[stylePath];\n  if (!styleMapper) {\n    console.warn(\"Unknown style type '\" + stylePath + \"'.\");\n    return defaultStyleMappers.itemStyle;\n  }\n  return styleMapper;\n}\nfunction getDefaultColorKey(seriesModel, stylePath) {\n  // return defaultColorKey[stylePath] ||\n  var colorKey = seriesModel.visualDrawType || defaultColorKey[stylePath];\n  if (!colorKey) {\n    console.warn(\"Unknown style type '\" + stylePath + \"'.\");\n    return 'fill';\n  }\n  return colorKey;\n}\nvar seriesStyleTask = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n    // Set in itemStyle\n    var styleModel = seriesModel.getModel(stylePath);\n    var getStyle = getStyleMapper(seriesModel, stylePath);\n    var globalStyle = getStyle(styleModel);\n    var decalOption = styleModel.getShallow('decal');\n    if (decalOption) {\n      data.setVisual('decal', decalOption);\n      decalOption.dirty = true;\n    }\n    // TODO\n    var colorKey = getDefaultColorKey(seriesModel, stylePath);\n    var color = globalStyle[colorKey];\n    // TODO style callback\n    var colorCallback = isFunction(color) ? color : null;\n    var hasAutoColor = globalStyle.fill === 'auto' || globalStyle.stroke === 'auto';\n    // Get from color palette by default.\n    if (!globalStyle[colorKey] || colorCallback || hasAutoColor) {\n      // Note: If some series has color specified (e.g., by itemStyle.color), we DO NOT\n      // make it effect palette. Because some scenarios users need to make some series\n      // transparent or as background, which should better not effect the palette.\n      var colorPalette = seriesModel.getColorFromPalette(\n      // TODO series count changed.\n      seriesModel.name, null, ecModel.getSeriesCount());\n      if (!globalStyle[colorKey]) {\n        globalStyle[colorKey] = colorPalette;\n        data.setVisual('colorFromPalette', true);\n      }\n      globalStyle.fill = globalStyle.fill === 'auto' || isFunction(globalStyle.fill) ? colorPalette : globalStyle.fill;\n      globalStyle.stroke = globalStyle.stroke === 'auto' || isFunction(globalStyle.stroke) ? colorPalette : globalStyle.stroke;\n    }\n    data.setVisual('style', globalStyle);\n    data.setVisual('drawType', colorKey);\n    // Only visible series has each data be visual encoded\n    if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {\n      data.setVisual('colorFromPalette', false);\n      return {\n        dataEach: function (data, idx) {\n          var dataParams = seriesModel.getDataParams(idx);\n          var itemStyle = extend({}, globalStyle);\n          itemStyle[colorKey] = colorCallback(dataParams);\n          data.setItemVisual(idx, 'style', itemStyle);\n        }\n      };\n    }\n  }\n};\nvar sharedModel = new Model();\nvar dataStyleTask = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n    // Set in itemStyle\n    var getStyle = getStyleMapper(seriesModel, stylePath);\n    var colorKey = data.getVisual('drawType');\n    return {\n      dataEach: data.hasItemOption ? function (data, idx) {\n        // Not use getItemModel for performance considuration\n        var rawItem = data.getRawDataItem(idx);\n        if (rawItem && rawItem[stylePath]) {\n          sharedModel.option = rawItem[stylePath];\n          var style = getStyle(sharedModel);\n          var existsStyle = data.ensureUniqueItemVisual(idx, 'style');\n          extend(existsStyle, style);\n          if (sharedModel.option.decal) {\n            data.setItemVisual(idx, 'decal', sharedModel.option.decal);\n            sharedModel.option.decal.dirty = true;\n          }\n          if (colorKey in style) {\n            data.setItemVisual(idx, 'colorFromPalette', false);\n          }\n        }\n      } : null\n    };\n  }\n};\n// Pick color from palette for the data which has not been set with color yet.\n// Note: do not support stream rendering. No such cases yet.\nvar dataColorPaletteTask = {\n  performRawSeries: true,\n  overallReset: function (ecModel) {\n    // Each type of series uses one scope.\n    // Pie and funnel are using different scopes.\n    var paletteScopeGroupByType = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var colorBy = seriesModel.getColorBy();\n      if (seriesModel.isColorBySeries()) {\n        return;\n      }\n      var key = seriesModel.type + '-' + colorBy;\n      var colorScope = paletteScopeGroupByType.get(key);\n      if (!colorScope) {\n        colorScope = {};\n        paletteScopeGroupByType.set(key, colorScope);\n      }\n      inner(seriesModel).scope = colorScope;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.isColorBySeries() || ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      var colorScope = inner(seriesModel).scope;\n      var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n      var colorKey = getDefaultColorKey(seriesModel, stylePath);\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      // Iterate on data before filtered. To make sure color from palette can be\n      // Consistent when toggling legend.\n      dataAll.each(function (rawIdx) {\n        var idx = idxMap[rawIdx];\n        var fromPalette = data.getItemVisual(idx, 'colorFromPalette');\n        // Get color from palette for each data only when the color is inherited from series color, which is\n        // also picked from color palette. So following situation is not in the case:\n        // 1. series.itemStyle.color is set\n        // 2. color is encoded by visualMap\n        if (fromPalette) {\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n          var name_1 = dataAll.getName(rawIdx) || rawIdx + '';\n          var dataCount = dataAll.count();\n          itemStyle[colorKey] = seriesModel.getColorFromPalette(name_1, colorScope, dataCount);\n        }\n      });\n    });\n  }\n};\nexport { seriesStyleTask, dataStyleTask, dataColorPaletteTask };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../util/graphic.js';\nimport tokens from '../visual/tokens.js';\nvar PI = Math.PI;\n/**\n * @param {module:echarts/ExtensionAPI} api\n * @param {Object} [opts]\n * @param {string} [opts.text]\n * @param {string} [opts.color]\n * @param {string} [opts.textColor]\n * @return {module:zrender/Element}\n */\nexport default function defaultLoading(api, opts) {\n  opts = opts || {};\n  zrUtil.defaults(opts, {\n    text: 'loading',\n    textColor: tokens.color.primary,\n    fontSize: 12,\n    fontWeight: 'normal',\n    fontStyle: 'normal',\n    fontFamily: 'sans-serif',\n    maskColor: 'rgba(255,255,255,0.8)',\n    showSpinner: true,\n    color: tokens.color.theme[0],\n    spinnerRadius: 10,\n    lineWidth: 5,\n    zlevel: 0\n  });\n  var group = new graphic.Group();\n  var mask = new graphic.Rect({\n    style: {\n      fill: opts.maskColor\n    },\n    zlevel: opts.zlevel,\n    z: 10000\n  });\n  group.add(mask);\n  var textContent = new graphic.Text({\n    style: {\n      text: opts.text,\n      fill: opts.textColor,\n      fontSize: opts.fontSize,\n      fontWeight: opts.fontWeight,\n      fontStyle: opts.fontStyle,\n      fontFamily: opts.fontFamily\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  var labelRect = new graphic.Rect({\n    style: {\n      fill: 'none'\n    },\n    textContent: textContent,\n    textConfig: {\n      position: 'right',\n      distance: 10\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  group.add(labelRect);\n  var arc;\n  if (opts.showSpinner) {\n    arc = new graphic.Arc({\n      shape: {\n        startAngle: -PI / 2,\n        endAngle: -PI / 2 + 0.1,\n        r: opts.spinnerRadius\n      },\n      style: {\n        stroke: opts.color,\n        lineCap: 'round',\n        lineWidth: opts.lineWidth\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    arc.animateShape(true).when(1000, {\n      endAngle: PI * 3 / 2\n    }).start('circularInOut');\n    arc.animateShape(true).when(1000, {\n      startAngle: PI * 3 / 2\n    }).delay(300).start('circularInOut');\n    group.add(arc);\n  }\n  // Inject resize\n  group.resize = function () {\n    var textWidth = textContent.getBoundingRect().width;\n    var r = opts.showSpinner ? opts.spinnerRadius : 0;\n    // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\n    // textDistance needs to be calculated when both animation and text exist\n    var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 - (opts.showSpinner && textWidth ? 0 : 5 + textWidth / 2)\n    // only show the text\n    + (opts.showSpinner ? 0 : textWidth / 2)\n    // only show the spinner\n    + (textWidth ? 0 : r);\n    var cy = api.getHeight() / 2;\n    opts.showSpinner && arc.setShape({\n      cx: cx,\n      cy: cy\n    });\n    labelRect.setShape({\n      x: cx - r,\n      y: cy - r,\n      width: r * 2,\n      height: r * 2\n    });\n    mask.setShape({\n      x: 0,\n      y: 0,\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n  group.resize();\n  return group;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map, isFunction, createHashMap, noop, assert } from 'zrender/lib/core/util.js';\nimport { createTask } from './task.js';\nimport { getUID } from '../util/component.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport { normalizeToArray } from '../util/model.js';\n;\nvar Scheduler = /** @class */function () {\n  function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n    // key: handlerUID\n    this._stageTaskMap = createHashMap();\n    this.ecInstance = ecInstance;\n    this.api = api;\n    // Fix current processors in case that in some rear cases that\n    // processors might be registered after echarts instance created.\n    // Register processors incrementally for a echarts instance is\n    // not supported by this stream architecture.\n    dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n    visualHandlers = this._visualHandlers = visualHandlers.slice();\n    this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n  }\n  Scheduler.prototype.restoreData = function (ecModel, payload) {\n    // TODO: Only restore needed series and components, but not all components.\n    // Currently `restoreData` of all of the series and component will be called.\n    // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n    // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n    // and some components like coordinate system, axes, dataZoom, visualMap only\n    // need their target series refresh.\n    // (1) If we are implementing this feature some day, we should consider these cases:\n    // if a data processor depends on a component (e.g., dataZoomProcessor depends\n    // on the settings of `dataZoom`), it should be re-performed if the component\n    // is modified by `setOption`.\n    // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n    // it should be re-performed when the result array of `getTargetSeries` changed.\n    // We use `dependencies` to cover these issues.\n    // (3) How to update target series when coordinate system related components modified.\n    // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n    // and this case all of the tasks will be set as dirty.\n    ecModel.restoreData(payload);\n    // Theoretically an overall task not only depends on each of its target series, but also\n    // depends on all of the series.\n    // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n    // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n    // that the overall task is set as dirty and to be performed, otherwise it probably cause\n    // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n    // probably cause state chaos (consider `dataZoomProcessor`).\n    this._stageTaskMap.each(function (taskRecord) {\n      var overallTask = taskRecord.overallTask;\n      overallTask && overallTask.dirty();\n    });\n  };\n  // If seriesModel provided, incremental threshold is check by series data.\n  Scheduler.prototype.getPerformArgs = function (task, isBlock) {\n    // For overall task\n    if (!task.__pipeline) {\n      return;\n    }\n    var pipeline = this._pipelineMap.get(task.__pipeline.id);\n    var pCtx = pipeline.context;\n    var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n    var step = incremental ? pipeline.step : null;\n    var modDataCount = pCtx && pCtx.modDataCount;\n    var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n    return {\n      step: step,\n      modBy: modBy,\n      modDataCount: modDataCount\n    };\n  };\n  Scheduler.prototype.getPipeline = function (pipelineId) {\n    return this._pipelineMap.get(pipelineId);\n  };\n  /**\n   * Current, progressive rendering starts from visual and layout.\n   * Always detect render mode in the same stage, avoiding that incorrect\n   * detection caused by data filtering.\n   * Caution:\n   * `updateStreamModes` use `seriesModel.getData()`.\n   */\n  Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\n    var pipeline = this._pipelineMap.get(seriesModel.uid);\n    var data = seriesModel.getData();\n    var dataLen = data.count();\n    // `progressiveRender` means that can render progressively in each\n    // animation frame. Note that some types of series do not provide\n    // `view.incrementalPrepareRender` but support `chart.appendData`. We\n    // use the term `incremental` but not `progressive` to describe the\n    // case that `chart.appendData`.\n    var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n    var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold');\n    // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n    // see `test/candlestick-large3.html`\n    var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n    seriesModel.pipelineContext = pipeline.context = {\n      progressiveRender: progressiveRender,\n      modDataCount: modDataCount,\n      large: large\n    };\n  };\n  Scheduler.prototype.restorePipelines = function (ecModel) {\n    var scheduler = this;\n    var pipelineMap = scheduler._pipelineMap = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var progressive = seriesModel.getProgressive();\n      var pipelineId = seriesModel.uid;\n      pipelineMap.set(pipelineId, {\n        id: pipelineId,\n        head: null,\n        tail: null,\n        threshold: seriesModel.getProgressiveThreshold(),\n        progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n        blockIndex: -1,\n        step: Math.round(progressive || 700),\n        count: 0\n      });\n      scheduler._pipe(seriesModel, seriesModel.dataTask);\n    });\n  };\n  Scheduler.prototype.prepareStageTasks = function () {\n    var stageTaskMap = this._stageTaskMap;\n    var ecModel = this.api.getModel();\n    var api = this.api;\n    each(this._allHandlers, function (handler) {\n      var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        // Currently do not need to support to sepecify them both.\n        errMsg = '\"reset\" and \"overallReset\" must not be both specified.';\n      }\n      assert(!(handler.reset && handler.overallReset), errMsg);\n      handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\n      handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\n    }, this);\n  };\n  Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\n    var renderTask = view.renderTask;\n    var context = renderTask.context;\n    context.model = model;\n    context.ecModel = ecModel;\n    context.api = api;\n    renderTask.__block = !view.incrementalPrepareRender;\n    this._pipe(model, renderTask);\n  };\n  Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\n    // If we do not use `block` here, it should be considered when to update modes.\n    this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, {\n      block: true\n    });\n  };\n  Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\n    this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\n  };\n  Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\n    opt = opt || {};\n    var unfinished = false;\n    var scheduler = this;\n    each(stageHandlers, function (stageHandler, idx) {\n      if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n        return;\n      }\n      var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n      var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n      var overallTask = stageHandlerRecord.overallTask;\n      if (overallTask) {\n        var overallNeedDirty_1;\n        var agentStubMap = overallTask.agentStubMap;\n        agentStubMap.each(function (stub) {\n          if (needSetDirty(opt, stub)) {\n            stub.dirty();\n            overallNeedDirty_1 = true;\n          }\n        });\n        overallNeedDirty_1 && overallTask.dirty();\n        scheduler.updatePayload(overallTask, payload);\n        var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block);\n        // Execute stubs firstly, which may set the overall task dirty,\n        // then execute the overall task. And stub will call seriesModel.setData,\n        // which ensures that in the overallTask seriesModel.getData() will not\n        // return incorrect data.\n        agentStubMap.each(function (stub) {\n          stub.perform(performArgs_1);\n        });\n        if (overallTask.perform(performArgs_1)) {\n          unfinished = true;\n        }\n      } else if (seriesTaskMap) {\n        seriesTaskMap.each(function (task, pipelineId) {\n          if (needSetDirty(opt, task)) {\n            task.dirty();\n          }\n          var performArgs = scheduler.getPerformArgs(task, opt.block);\n          // FIXME\n          // if intending to declare `performRawSeries` in handlers, only\n          // stream-independent (specifically, data item independent) operations can be\n          // performed. Because if a series is filtered, most of the tasks will not\n          // be performed. A stream-dependent operation probably cause wrong biz logic.\n          // Perhaps we should not provide a separate callback for this case instead\n          // of providing the config `performRawSeries`. The stream-dependent operations\n          // and stream-independent operations should better not be mixed.\n          performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n          scheduler.updatePayload(task, payload);\n          if (task.perform(performArgs)) {\n            unfinished = true;\n          }\n        });\n      }\n    });\n    function needSetDirty(opt, task) {\n      return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n    }\n    this.unfinished = unfinished || this.unfinished;\n  };\n  Scheduler.prototype.performSeriesTasks = function (ecModel) {\n    var unfinished;\n    ecModel.eachSeries(function (seriesModel) {\n      // Progress to the end for dataInit and dataRestore.\n      unfinished = seriesModel.dataTask.perform() || unfinished;\n    });\n    this.unfinished = unfinished || this.unfinished;\n  };\n  Scheduler.prototype.plan = function () {\n    // Travel pipelines, check block.\n    this._pipelineMap.each(function (pipeline) {\n      var task = pipeline.tail;\n      do {\n        if (task.__block) {\n          pipeline.blockIndex = task.__idxInPipeline;\n          break;\n        }\n        task = task.getUpstream();\n      } while (task);\n    });\n  };\n  Scheduler.prototype.updatePayload = function (task, payload) {\n    payload !== 'remain' && (task.context.payload = payload);\n  };\n  Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var oldSeriesTaskMap = stageHandlerRecord.seriesTaskMap;\n    // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n    var newSeriesTaskMap = stageHandlerRecord.seriesTaskMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries;\n    // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n    // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n    // it works but it may cause other irrelevant charts blocked.\n    if (stageHandler.createOnAllSeries) {\n      ecModel.eachRawSeries(create);\n    } else if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, create);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(create);\n    }\n    function create(seriesModel) {\n      var pipelineId = seriesModel.uid;\n      // Init tasks for each seriesModel only once.\n      // Reuse original task instance.\n      var task = newSeriesTaskMap.set(pipelineId, oldSeriesTaskMap && oldSeriesTaskMap.get(pipelineId) || createTask({\n        plan: seriesTaskPlan,\n        reset: seriesTaskReset,\n        count: seriesTaskCount\n      }));\n      task.context = {\n        model: seriesModel,\n        ecModel: ecModel,\n        api: api,\n        // PENDING: `useClearVisual` not used?\n        useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n        plan: stageHandler.plan,\n        reset: stageHandler.reset,\n        scheduler: scheduler\n      };\n      scheduler._pipe(seriesModel, task);\n    }\n  };\n  Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask\n    // For overall task, the function only be called on reset stage.\n    || createTask({\n      reset: overallTaskReset\n    });\n    overallTask.context = {\n      ecModel: ecModel,\n      api: api,\n      overallReset: stageHandler.overallReset,\n      scheduler: scheduler\n    };\n    var oldAgentStubMap = overallTask.agentStubMap;\n    // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n    var newAgentStubMap = overallTask.agentStubMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries;\n    var overallProgress = true;\n    var shouldOverallTaskDirty = false;\n    // FIXME:TS never used, so comment it\n    // let modifyOutputEnd = stageHandler.modifyOutputEnd;\n    // An overall task with seriesType detected or has `getTargetSeries`, we add\n    // stub in each pipelines, it will set the overall task dirty when the pipeline\n    // progress. Moreover, to avoid call the overall task each frame (too frequent),\n    // we set the pipeline block.\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '\"createOnAllSeries\" is not supported for \"overallReset\", ' + 'because it will block all streams.';\n    }\n    assert(!stageHandler.createOnAllSeries, errMsg);\n    if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, createStub);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(createStub);\n    }\n    // Otherwise, (usually it is legacy case), the overall task will only be\n    // executed when upstream is dirty. Otherwise the progressive rendering of all\n    // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n    // dirty info from upstream.\n    else {\n      overallProgress = false;\n      each(ecModel.getSeries(), createStub);\n    }\n    function createStub(seriesModel) {\n      var pipelineId = seriesModel.uid;\n      var stub = newAgentStubMap.set(pipelineId, oldAgentStubMap && oldAgentStubMap.get(pipelineId) || (\n      // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n      shouldOverallTaskDirty = true, createTask({\n        reset: stubReset,\n        onDirty: stubOnDirty\n      })));\n      stub.context = {\n        model: seriesModel,\n        overallProgress: overallProgress\n        // FIXME:TS never used, so comment it\n        // modifyOutputEnd: modifyOutputEnd\n      };\n      stub.agent = overallTask;\n      stub.__block = overallProgress;\n      scheduler._pipe(seriesModel, stub);\n    }\n    if (shouldOverallTaskDirty) {\n      overallTask.dirty();\n    }\n  };\n  Scheduler.prototype._pipe = function (seriesModel, task) {\n    var pipelineId = seriesModel.uid;\n    var pipeline = this._pipelineMap.get(pipelineId);\n    !pipeline.head && (pipeline.head = task);\n    pipeline.tail && pipeline.tail.pipe(task);\n    pipeline.tail = task;\n    task.__idxInPipeline = pipeline.count++;\n    task.__pipeline = pipeline;\n  };\n  Scheduler.wrapStageHandler = function (stageHandler, visualType) {\n    if (isFunction(stageHandler)) {\n      stageHandler = {\n        overallReset: stageHandler,\n        seriesType: detectSeriseType(stageHandler)\n      };\n    }\n    stageHandler.uid = getUID('stageHandler');\n    visualType && (stageHandler.visualType = visualType);\n    return stageHandler;\n  };\n  ;\n  return Scheduler;\n}();\nfunction overallTaskReset(context) {\n  context.overallReset(context.ecModel, context.api, context.payload);\n}\nfunction stubReset(context) {\n  return context.overallProgress && stubProgress;\n}\nfunction stubProgress() {\n  this.agent.dirty();\n  this.getDownstream().dirty();\n}\nfunction stubOnDirty() {\n  this.agent && this.agent.dirty();\n}\nfunction seriesTaskPlan(context) {\n  return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\n}\nfunction seriesTaskReset(context) {\n  if (context.useClearVisual) {\n    context.data.clearAllVisual();\n  }\n  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n  return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n    return makeSeriesTaskProgress(idx);\n  }) : singleSeriesTaskProgress;\n}\nvar singleSeriesTaskProgress = makeSeriesTaskProgress(0);\nfunction makeSeriesTaskProgress(resetDefineIdx) {\n  return function (params, context) {\n    var data = context.data;\n    var resetDefine = context.resetDefines[resetDefineIdx];\n    if (resetDefine && resetDefine.dataEach) {\n      for (var i = params.start; i < params.end; i++) {\n        resetDefine.dataEach(data, i);\n      }\n    } else if (resetDefine && resetDefine.progress) {\n      resetDefine.progress(params, data);\n    }\n  };\n}\nfunction seriesTaskCount(context) {\n  return context.data.count();\n}\n/**\n * Only some legacy stage handlers (usually in echarts extensions) are pure function.\n * To ensure that they can work normally, they should work in block mode, that is,\n * they should not be started util the previous tasks finished. So they cause the\n * progressive rendering disabled. We try to detect the series type, to narrow down\n * the block range to only the series type they concern, but not all series.\n */\nfunction detectSeriseType(legacyFunc) {\n  seriesType = null;\n  try {\n    // Assume there is no async when calling `eachSeriesByType`.\n    legacyFunc(ecModelMock, apiMock);\n  } catch (e) {}\n  return seriesType;\n}\nvar ecModelMock = {};\nvar apiMock = {};\nvar seriesType;\nmockMethods(ecModelMock, GlobalModel);\nmockMethods(apiMock, ExtensionAPI);\necModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n  seriesType = type;\n};\necModelMock.eachComponent = function (cond) {\n  if (cond.mainType === 'series' && cond.subType) {\n    seriesType = cond.subType;\n  }\n};\nfunction mockMethods(target, Clz) {\n  /* eslint-disable */\n  for (var name_1 in Clz.prototype) {\n    // Do not use hasOwnProperty\n    target[name_1] = noop;\n  }\n  /* eslint-enable */\n}\nexport default Scheduler;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport tokens from '../visual/tokens.js';\nvar color = tokens.darkColor;\nvar backgroundColor = color.background;\nvar axisCommon = function () {\n  return {\n    axisLine: {\n      lineStyle: {\n        color: color.axisLine\n      }\n    },\n    splitLine: {\n      lineStyle: {\n        color: color.axisSplitLine\n      }\n    },\n    splitArea: {\n      areaStyle: {\n        color: [color.backgroundTint, color.backgroundTransparent]\n      }\n    },\n    minorSplitLine: {\n      lineStyle: {\n        color: color.axisMinorSplitLine\n      }\n    },\n    axisLabel: {\n      color: color.axisLabel\n    },\n    axisName: {}\n  };\n};\nvar matrixAxis = {\n  label: {\n    color: color.secondary\n  },\n  itemStyle: {\n    borderColor: color.borderTint\n  },\n  dividerLineStyle: {\n    color: color.border\n  }\n};\nvar theme = {\n  darkMode: true,\n  color: color.theme,\n  backgroundColor: backgroundColor,\n  axisPointer: {\n    lineStyle: {\n      color: color.border\n    },\n    crossStyle: {\n      color: color.borderShade\n    },\n    label: {\n      color: color.tertiary\n    }\n  },\n  legend: {\n    textStyle: {\n      color: color.secondary\n    },\n    pageTextStyle: {\n      color: color.tertiary\n    }\n  },\n  textStyle: {\n    color: color.secondary\n  },\n  title: {\n    textStyle: {\n      color: color.primary\n    },\n    subtextStyle: {\n      color: color.quaternary\n    }\n  },\n  toolbox: {\n    iconStyle: {\n      borderColor: color.accent50\n    }\n  },\n  tooltip: {\n    backgroundColor: color.neutral20,\n    defaultBorderColor: color.border,\n    textStyle: {\n      color: color.tertiary\n    }\n  },\n  dataZoom: {\n    borderColor: color.accent10,\n    textStyle: {\n      color: color.tertiary\n    },\n    brushStyle: {\n      color: color.backgroundTint\n    },\n    handleStyle: {\n      color: color.neutral00,\n      borderColor: color.accent20\n    },\n    moveHandleStyle: {\n      color: color.accent40\n    },\n    emphasis: {\n      handleStyle: {\n        borderColor: color.accent50\n      }\n    },\n    dataBackground: {\n      lineStyle: {\n        color: color.accent30\n      },\n      areaStyle: {\n        color: color.accent20\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: color.accent50\n      },\n      areaStyle: {\n        color: color.accent30\n      }\n    }\n  },\n  visualMap: {\n    textStyle: {\n      color: color.secondary\n    },\n    handleStyle: {\n      borderColor: color.neutral30\n    }\n  },\n  timeline: {\n    lineStyle: {\n      color: color.accent10\n    },\n    label: {\n      color: color.tertiary\n    },\n    controlStyle: {\n      color: color.accent30,\n      borderColor: color.accent30\n    }\n  },\n  calendar: {\n    itemStyle: {\n      color: color.neutral00,\n      borderColor: color.neutral20\n    },\n    dayLabel: {\n      color: color.tertiary\n    },\n    monthLabel: {\n      color: color.secondary\n    },\n    yearLabel: {\n      color: color.secondary\n    }\n  },\n  matrix: {\n    x: matrixAxis,\n    y: matrixAxis,\n    backgroundColor: {\n      borderColor: color.axisLine\n    },\n    body: {\n      itemStyle: {\n        borderColor: color.borderTint\n      }\n    }\n  },\n  timeAxis: axisCommon(),\n  logAxis: axisCommon(),\n  valueAxis: axisCommon(),\n  categoryAxis: axisCommon(),\n  line: {\n    symbol: 'circle'\n  },\n  graph: {\n    color: color.theme\n  },\n  gauge: {\n    title: {\n      color: color.secondary\n    },\n    axisLine: {\n      lineStyle: {\n        color: [[1, color.neutral05]]\n      }\n    },\n    axisLabel: {\n      color: color.axisLabel\n    },\n    detail: {\n      color: color.primary\n    }\n  },\n  candlestick: {\n    itemStyle: {\n      color: '#f64e56',\n      color0: '#54ea92',\n      borderColor: '#f64e56',\n      borderColor0: '#54ea92'\n      // borderColor: '#ca2824',\n      // borderColor0: '#09a443'\n    }\n  },\n  funnel: {\n    itemStyle: {\n      borderColor: color.background\n    }\n  },\n  radar: function () {\n    var radar = axisCommon();\n    radar.axisName = {\n      color: color.axisLabel\n    };\n    radar.axisLine.lineStyle.color = color.neutral20;\n    return radar;\n  }(),\n  treemap: {\n    breadcrumb: {\n      itemStyle: {\n        color: color.neutral20,\n        textStyle: {\n          color: color.secondary\n        }\n      },\n      emphasis: {\n        itemStyle: {\n          color: color.neutral30\n        }\n      }\n    }\n  },\n  sunburst: {\n    itemStyle: {\n      borderColor: color.background\n    }\n  },\n  map: {\n    itemStyle: {\n      borderColor: color.border,\n      areaColor: color.neutral10\n    },\n    label: {\n      color: color.tertiary\n    },\n    emphasis: {\n      label: {\n        color: color.primary\n      },\n      itemStyle: {\n        areaColor: color.highlight\n      }\n    },\n    select: {\n      label: {\n        color: color.primary\n      },\n      itemStyle: {\n        areaColor: color.highlight\n      }\n    }\n  },\n  geo: {\n    itemStyle: {\n      borderColor: color.border,\n      areaColor: color.neutral10\n    },\n    emphasis: {\n      label: {\n        color: color.primary\n      },\n      itemStyle: {\n        areaColor: color.highlight\n      }\n    },\n    select: {\n      label: {\n        color: color.primary\n      },\n      itemStyle: {\n        color: color.highlight\n      }\n    }\n  }\n};\ntheme.categoryAxis.splitLine.show = false;\nexport default theme;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\n/**\n * Usage of query:\n * `chart.on('click', query, handler);`\n * The `query` can be:\n * + The component type query string, only `mainType` or `mainType.subType`,\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\n * + The component query object, like:\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\n * + The data query object, like:\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\n * + The other query object (cmponent customized query), like:\n *   `{element: 'some'}` (only available in custom series).\n *\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\n * same as there is no such prop in the `query` object.\n */\nvar ECEventProcessor = /** @class */function () {\n  function ECEventProcessor() {}\n  ECEventProcessor.prototype.normalizeQuery = function (query) {\n    var cptQuery = {};\n    var dataQuery = {};\n    var otherQuery = {};\n    // `query` is `mainType` or `mainType.subType` of component.\n    if (zrUtil.isString(query)) {\n      var condCptType = parseClassType(query);\n      // `.main` and `.sub` may be ''.\n      cptQuery.mainType = condCptType.main || null;\n      cptQuery.subType = condCptType.sub || null;\n    }\n    // `query` is an object, convert to {mainType, index, name, id}.\n    else {\n      // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n      // can not be used in `compomentModel.filterForExposedEvent`.\n      var suffixes_1 = ['Index', 'Name', 'Id'];\n      var dataKeys_1 = {\n        name: 1,\n        dataIndex: 1,\n        dataType: 1\n      };\n      zrUtil.each(query, function (val, key) {\n        var reserved = false;\n        for (var i = 0; i < suffixes_1.length; i++) {\n          var propSuffix = suffixes_1[i];\n          var suffixPos = key.lastIndexOf(propSuffix);\n          if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n            var mainType = key.slice(0, suffixPos);\n            // Consider `dataIndex`.\n            if (mainType !== 'data') {\n              cptQuery.mainType = mainType;\n              cptQuery[propSuffix.toLowerCase()] = val;\n              reserved = true;\n            }\n          }\n        }\n        if (dataKeys_1.hasOwnProperty(key)) {\n          dataQuery[key] = val;\n          reserved = true;\n        }\n        if (!reserved) {\n          otherQuery[key] = val;\n        }\n      });\n    }\n    return {\n      cptQuery: cptQuery,\n      dataQuery: dataQuery,\n      otherQuery: otherQuery\n    };\n  };\n  ECEventProcessor.prototype.filter = function (eventType, query) {\n    // They should be assigned before each trigger call.\n    var eventInfo = this.eventInfo;\n    if (!eventInfo) {\n      return true;\n    }\n    var targetEl = eventInfo.targetEl;\n    var packedEvent = eventInfo.packedEvent;\n    var model = eventInfo.model;\n    var view = eventInfo.view;\n    // For event like 'globalout'.\n    if (!model || !view) {\n      return true;\n    }\n    var cptQuery = query.cptQuery;\n    var dataQuery = query.dataQuery;\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n    function check(query, host, prop, propOnHost) {\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\n    }\n  };\n  ECEventProcessor.prototype.afterTrigger = function () {\n    // Make sure the eventInfo won't be used in next trigger.\n    this.eventInfo = null;\n  };\n  return ECEventProcessor;\n}();\nexport { ECEventProcessor };\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, isFunction, keys } from 'zrender/lib/core/util.js';\nvar SYMBOL_PROPS_WITH_CB = ['symbol', 'symbolSize', 'symbolRotate', 'symbolOffset'];\nvar SYMBOL_PROPS = SYMBOL_PROPS_WITH_CB.concat(['symbolKeepAspect']);\n// Encoding visual for all series include which is filtered for legend drawing\nvar seriesSymbolTask = {\n  createOnAllSeries: true,\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    if (seriesModel.legendIcon) {\n      data.setVisual('legendIcon', seriesModel.legendIcon);\n    }\n    if (!seriesModel.hasSymbolVisual) {\n      return;\n    }\n    var symbolOptions = {};\n    var symbolOptionsCb = {};\n    var hasCallback = false;\n    for (var i = 0; i < SYMBOL_PROPS_WITH_CB.length; i++) {\n      var symbolPropName = SYMBOL_PROPS_WITH_CB[i];\n      var val = seriesModel.get(symbolPropName);\n      if (isFunction(val)) {\n        hasCallback = true;\n        symbolOptionsCb[symbolPropName] = val;\n      } else {\n        symbolOptions[symbolPropName] = val;\n      }\n    }\n    symbolOptions.symbol = symbolOptions.symbol || seriesModel.defaultSymbol;\n    data.setVisual(extend({\n      legendIcon: seriesModel.legendIcon || symbolOptions.symbol,\n      symbolKeepAspect: seriesModel.get('symbolKeepAspect')\n    }, symbolOptions));\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var symbolPropsCb = keys(symbolOptionsCb);\n    function dataEach(data, idx) {\n      var rawValue = seriesModel.getRawValue(idx);\n      var params = seriesModel.getDataParams(idx);\n      for (var i = 0; i < symbolPropsCb.length; i++) {\n        var symbolPropName = symbolPropsCb[i];\n        data.setItemVisual(idx, symbolPropName, symbolOptionsCb[symbolPropName](rawValue, params));\n      }\n    }\n    return {\n      dataEach: hasCallback ? dataEach : null\n    };\n  }\n};\nvar dataSymbolTask = {\n  createOnAllSeries: true,\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    if (!seriesModel.hasSymbolVisual) {\n      return;\n    }\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n      for (var i = 0; i < SYMBOL_PROPS.length; i++) {\n        var symbolPropName = SYMBOL_PROPS[i];\n        var val = itemModel.getShallow(symbolPropName, true);\n        if (val != null) {\n          data.setItemVisual(idx, symbolPropName, val);\n        }\n      }\n    }\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport { seriesSymbolTask, dataSymbolTask };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getItemVisualFromData(data, dataIndex, key) {\n  switch (key) {\n    case 'color':\n      var style = data.getItemVisual(dataIndex, 'style');\n      return style[data.getVisual('drawType')];\n    case 'opacity':\n      return data.getItemVisual(dataIndex, 'style').opacity;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      return data.getItemVisual(dataIndex, key);\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}\nexport function getVisualFromData(data, key) {\n  switch (key) {\n    case 'color':\n      var style = data.getVisual('style');\n      return style[data.getVisual('drawType')];\n    case 'opacity':\n      return data.getVisual('style').opacity;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      return data.getVisual(key);\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}\nexport function setItemVisualFromData(data, dataIndex, key, value) {\n  switch (key) {\n    case 'color':\n      // Make sure not sharing style object.\n      var style = data.ensureUniqueItemVisual(dataIndex, 'style');\n      style[data.getVisual('drawType')] = value;\n      // Mark the color has been changed, not from palette anymore\n      data.setItemVisual(dataIndex, 'colorFromPalette', false);\n      break;\n    case 'opacity':\n      data.ensureUniqueItemVisual(dataIndex, 'style').opacity = value;\n      break;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      data.setItemVisual(dataIndex, key, value);\n      break;\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, each, isArray, isString } from 'zrender/lib/core/util.js';\nimport { deprecateReplaceLog, deprecateLog } from '../util/log.js';\nimport { queryDataIndex } from '../util/model.js';\n// Legacy data selection action.\n// Includes: pieSelect, pieUnSelect, pieToggleSelect, mapSelect, mapUnSelect, mapToggleSelect\nexport function createLegacyDataSelectAction(seriesType, ecRegisterAction) {\n  function getSeriesIndices(ecModel, payload) {\n    var seriesIndices = [];\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: seriesType,\n      query: payload\n    }, function (seriesModel) {\n      seriesIndices.push(seriesModel.seriesIndex);\n    });\n    return seriesIndices;\n  }\n  each([[seriesType + 'ToggleSelect', 'toggleSelect'], [seriesType + 'Select', 'select'], [seriesType + 'UnSelect', 'unselect']], function (eventsMap) {\n    ecRegisterAction(eventsMap[0], function (payload, ecModel, api) {\n      payload = extend({}, payload);\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(payload.type, eventsMap[1]);\n      }\n      api.dispatchAction(extend(payload, {\n        type: eventsMap[1],\n        seriesIndex: getSeriesIndices(ecModel, payload)\n      }));\n    });\n  });\n}\nfunction handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, ecModel, payload) {\n  var legacyEventName = type + eventPostfix;\n  if (!ecIns.isSilent(legacyEventName)) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateLog(\"event \" + legacyEventName + \" is deprecated.\");\n    }\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'pie'\n    }, function (seriesModel) {\n      var seriesIndex = seriesModel.seriesIndex;\n      var selectedMap = seriesModel.option.selectedMap;\n      var selected = payload.selected;\n      for (var i = 0; i < selected.length; i++) {\n        if (selected[i].seriesIndex === seriesIndex) {\n          var data = seriesModel.getData();\n          var dataIndex = queryDataIndex(data, payload.fromActionPayload);\n          ecIns.trigger(legacyEventName, {\n            type: legacyEventName,\n            seriesId: seriesModel.id,\n            name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),\n            selected: isString(selectedMap) ? selectedMap : extend({}, selectedMap)\n          });\n        }\n      }\n    });\n  }\n}\nexport function handleLegacySelectEvents(messageCenter, ecIns, api) {\n  messageCenter.on('selectchanged', function (params) {\n    var ecModel = api.getModel();\n    if (params.isFromClick) {\n      handleSeriesLegacySelectEvents('map', 'selectchanged', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'selectchanged', ecIns, ecModel, params);\n    } else if (params.fromAction === 'select') {\n      handleSeriesLegacySelectEvents('map', 'selected', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'selected', ecIns, ecModel, params);\n    } else if (params.fromAction === 'unselect') {\n      handleSeriesLegacySelectEvents('map', 'unselected', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'unselected', ecIns, ecModel, params);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function findEventDispatcher(target, det, returnFirstMatch) {\n  var found;\n  while (target) {\n    if (det(target)) {\n      found = target;\n      if (returnFirstMatch) {\n        break;\n      }\n    }\n    target = target.__hostTarget || target.parent;\n  }\n  return found;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Symbol factory\nimport { each, isArray, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as graphic from './graphic.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { parsePercent } from './number.js';\nimport tokens from '../visual/tokens.js';\n/**\n * Triangle shape\n * @inner\n */\nvar Triangle = graphic.Path.extend({\n  type: 'triangle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy + height);\n    path.lineTo(cx - width, cy + height);\n    path.closePath();\n  }\n});\n/**\n * Diamond shape\n * @inner\n */\nvar Diamond = graphic.Path.extend({\n  type: 'diamond',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy);\n    path.lineTo(cx, cy + height);\n    path.lineTo(cx - width, cy);\n    path.closePath();\n  }\n});\n/**\n * Pin shape\n * @inner\n */\nvar Pin = graphic.Path.extend({\n  type: 'pin',\n  shape: {\n    // x, y on the cusp\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var w = shape.width / 5 * 3;\n    // Height must be larger than width\n    var h = Math.max(w, shape.height);\n    var r = w / 2;\n    // Dist on y with tangent point and circle center\n    var dy = r * r / (h - r);\n    var cy = y - h + r + dy;\n    var angle = Math.asin(dy / r);\n    // Dist on x with tangent point and circle center\n    var dx = Math.cos(angle) * r;\n    var tanX = Math.sin(angle);\n    var tanY = Math.cos(angle);\n    var cpLen = r * 0.6;\n    var cpLen2 = r * 0.7;\n    path.moveTo(x - dx, cy + dy);\n    path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\n    path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\n    path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\n    path.closePath();\n  }\n});\n/**\n * Arrow shape\n * @inner\n */\nvar Arrow = graphic.Path.extend({\n  type: 'arrow',\n  shape: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var height = shape.height;\n    var width = shape.width;\n    var x = shape.x;\n    var y = shape.y;\n    var dx = width / 3 * 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + dx, y + height);\n    ctx.lineTo(x, y + height / 4 * 3);\n    ctx.lineTo(x - dx, y + height);\n    ctx.lineTo(x, y);\n    ctx.closePath();\n  }\n});\n/**\n * Map of path constructors\n */\n// TODO Use function to build symbol path.\nvar symbolCtors = {\n  line: graphic.Line,\n  rect: graphic.Rect,\n  roundRect: graphic.Rect,\n  square: graphic.Rect,\n  circle: graphic.Circle,\n  diamond: Diamond,\n  pin: Pin,\n  arrow: Arrow,\n  triangle: Triangle\n};\nvar symbolShapeMakers = {\n  line: function (x, y, w, h, shape) {\n    shape.x1 = x;\n    shape.y1 = y + h / 2;\n    shape.x2 = x + w;\n    shape.y2 = y + h / 2;\n  },\n  rect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n  },\n  roundRect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n    shape.r = Math.min(w, h) / 4;\n  },\n  square: function (x, y, w, h, shape) {\n    var size = Math.min(w, h);\n    shape.x = x;\n    shape.y = y;\n    shape.width = size;\n    shape.height = size;\n  },\n  circle: function (x, y, w, h, shape) {\n    // Put circle in the center of square\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.r = Math.min(w, h) / 2;\n  },\n  diamond: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  pin: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  arrow: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  triangle: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  }\n};\nexport var symbolBuildProxies = {};\neach(symbolCtors, function (Ctor, name) {\n  symbolBuildProxies[name] = new Ctor();\n});\nvar SymbolClz = graphic.Path.extend({\n  type: 'symbol',\n  shape: {\n    symbolType: '',\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  calculateTextPosition: function (out, config, rect) {\n    var res = calculateTextPosition(out, config, rect);\n    var shape = this.shape;\n    if (shape && shape.symbolType === 'pin' && config.position === 'inside') {\n      res.y = rect.y + rect.height * 0.4;\n    }\n    return res;\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    var symbolType = shape.symbolType;\n    if (symbolType !== 'none') {\n      var proxySymbol = symbolBuildProxies[symbolType];\n      if (!proxySymbol) {\n        // Default rect\n        symbolType = 'rect';\n        proxySymbol = symbolBuildProxies[symbolType];\n      }\n      symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\n      proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\n    }\n  }\n});\n// Provide setColor helper method to avoid determine if set the fill or stroke outside\nfunction symbolPathSetColor(color, innerColor) {\n  if (this.type !== 'image') {\n    var symbolStyle = this.style;\n    if (this.__isEmptyBrush) {\n      symbolStyle.stroke = color;\n      symbolStyle.fill = innerColor || tokens.color.neutral00;\n      // TODO Same width with lineStyle in LineView\n      symbolStyle.lineWidth = 2;\n    } else if (this.shape.symbolType === 'line') {\n      symbolStyle.stroke = color;\n    } else {\n      symbolStyle.fill = color;\n    }\n    this.markRedraw();\n  }\n}\n/**\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\n */\nexport function createSymbol(symbolType, x, y, w, h, color,\n// whether to keep the ratio of w/h,\nkeepAspect) {\n  // TODO Support image object, DynamicImage.\n  var isEmpty = symbolType.indexOf('empty') === 0;\n  if (isEmpty) {\n    symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\n  }\n  var symbolPath;\n  if (symbolType.indexOf('image://') === 0) {\n    symbolPath = graphic.makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else if (symbolType.indexOf('path://') === 0) {\n    symbolPath = graphic.makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else {\n    symbolPath = new SymbolClz({\n      shape: {\n        symbolType: symbolType,\n        x: x,\n        y: y,\n        width: w,\n        height: h\n      }\n    });\n  }\n  symbolPath.__isEmptyBrush = isEmpty;\n  // TODO Should deprecate setColor\n  symbolPath.setColor = symbolPathSetColor;\n  if (color) {\n    symbolPath.setColor(color);\n  }\n  return symbolPath;\n}\nexport function normalizeSymbolSize(symbolSize) {\n  if (!isArray(symbolSize)) {\n    symbolSize = [+symbolSize, +symbolSize];\n  }\n  return [symbolSize[0] || 0, symbolSize[1] || 0];\n}\nexport function normalizeSymbolOffset(symbolOffset, symbolSize) {\n  if (symbolOffset == null) {\n    return;\n  }\n  if (!isArray(symbolOffset)) {\n    symbolOffset = [symbolOffset, symbolOffset];\n  }\n  return [parsePercent(symbolOffset[0], symbolSize[0]) || 0, parsePercent(retrieve2(symbolOffset[1], symbolOffset[0]), symbolSize[1]) || 0];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport WeakMap from 'zrender/lib/core/WeakMap.js';\nimport LRU from 'zrender/lib/core/LRU.js';\nimport { defaults, map, isArray, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { getLeastCommonMultiple } from './number.js';\nimport { createSymbol } from './symbol.js';\nimport { brushSingle } from 'zrender/lib/canvas/graphic.js';\nimport { platformApi } from 'zrender/lib/core/platform.js';\nvar decalMap = new WeakMap();\nvar decalCache = new LRU(100);\nvar decalKeys = ['symbol', 'symbolSize', 'symbolKeepAspect', 'color', 'backgroundColor', 'dashArrayX', 'dashArrayY', 'maxTileWidth', 'maxTileHeight'];\n/**\n * Create or update pattern image from decal options\n *\n * @param {InnerDecalObject | 'none'} decalObject decal options, 'none' if no decal\n * @return {Pattern} pattern with generated image, null if no decal\n */\nexport function createOrUpdatePatternFromDecal(decalObject, api) {\n  if (decalObject === 'none') {\n    return null;\n  }\n  var dpr = api.getDevicePixelRatio();\n  var zr = api.getZr();\n  var isSVG = zr.painter.type === 'svg';\n  if (decalObject.dirty) {\n    decalMap[\"delete\"](decalObject);\n  }\n  var oldPattern = decalMap.get(decalObject);\n  if (oldPattern) {\n    return oldPattern;\n  }\n  var decalOpt = defaults(decalObject, {\n    symbol: 'rect',\n    symbolSize: 1,\n    symbolKeepAspect: true,\n    color: 'rgba(0, 0, 0, 0.2)',\n    backgroundColor: null,\n    dashArrayX: 5,\n    dashArrayY: 5,\n    rotation: 0,\n    maxTileWidth: 512,\n    maxTileHeight: 512\n  });\n  if (decalOpt.backgroundColor === 'none') {\n    decalOpt.backgroundColor = null;\n  }\n  var pattern = {\n    repeat: 'repeat'\n  };\n  setPatternnSource(pattern);\n  pattern.rotation = decalOpt.rotation;\n  pattern.scaleX = pattern.scaleY = isSVG ? 1 : 1 / dpr;\n  decalMap.set(decalObject, pattern);\n  decalObject.dirty = false;\n  return pattern;\n  function setPatternnSource(pattern) {\n    var keys = [dpr];\n    var isValidKey = true;\n    for (var i = 0; i < decalKeys.length; ++i) {\n      var value = decalOpt[decalKeys[i]];\n      if (value != null && !isArray(value) && !isString(value) && !isNumber(value) && typeof value !== 'boolean') {\n        isValidKey = false;\n        break;\n      }\n      keys.push(value);\n    }\n    var cacheKey;\n    if (isValidKey) {\n      cacheKey = keys.join(',') + (isSVG ? '-svg' : '');\n      var cache = decalCache.get(cacheKey);\n      if (cache) {\n        isSVG ? pattern.svgElement = cache : pattern.image = cache;\n      }\n    }\n    var dashArrayX = normalizeDashArrayX(decalOpt.dashArrayX);\n    var dashArrayY = normalizeDashArrayY(decalOpt.dashArrayY);\n    var symbolArray = normalizeSymbolArray(decalOpt.symbol);\n    var lineBlockLengthsX = getLineBlockLengthX(dashArrayX);\n    var lineBlockLengthY = getLineBlockLengthY(dashArrayY);\n    var canvas = !isSVG && platformApi.createCanvas();\n    var svgRoot = isSVG && {\n      tag: 'g',\n      attrs: {},\n      key: 'dcl',\n      children: []\n    };\n    var pSize = getPatternSize();\n    var ctx;\n    if (canvas) {\n      canvas.width = pSize.width * dpr;\n      canvas.height = pSize.height * dpr;\n      ctx = canvas.getContext('2d');\n    }\n    brushDecal();\n    if (isValidKey) {\n      decalCache.put(cacheKey, canvas || svgRoot);\n    }\n    pattern.image = canvas;\n    pattern.svgElement = svgRoot;\n    pattern.svgWidth = pSize.width;\n    pattern.svgHeight = pSize.height;\n    /**\n     * Get minimum length that can make a repeatable pattern.\n     *\n     * @return {Object} pattern width and height\n     */\n    function getPatternSize() {\n      /**\n       * For example, if dash is [[3, 2], [2, 1]] for X, it looks like\n       * |---  ---  ---  ---  --- ...\n       * |-- -- -- -- -- -- -- -- ...\n       * |---  ---  ---  ---  --- ...\n       * |-- -- -- -- -- -- -- -- ...\n       * So the minimum length of X is 15,\n       * which is the least common multiple of `3 + 2` and `2 + 1`\n       * |---  ---  ---  |---  --- ...\n       * |-- -- -- -- -- |-- -- -- ...\n       */\n      var width = 1;\n      for (var i = 0, xlen = lineBlockLengthsX.length; i < xlen; ++i) {\n        width = getLeastCommonMultiple(width, lineBlockLengthsX[i]);\n      }\n      var symbolRepeats = 1;\n      for (var i = 0, xlen = symbolArray.length; i < xlen; ++i) {\n        symbolRepeats = getLeastCommonMultiple(symbolRepeats, symbolArray[i].length);\n      }\n      width *= symbolRepeats;\n      var height = lineBlockLengthY * lineBlockLengthsX.length * symbolArray.length;\n      if (process.env.NODE_ENV !== 'production') {\n        var warn = function (attrName) {\n          /* eslint-disable-next-line */\n          console.warn(\"Calculated decal size is greater than \" + attrName + \" due to decal option settings so \" + attrName + \" is used for the decal size. Please consider changing the decal option to make a smaller decal or set \" + attrName + \" to be larger to avoid incontinuity.\");\n        };\n        if (width > decalOpt.maxTileWidth) {\n          warn('maxTileWidth');\n        }\n        if (height > decalOpt.maxTileHeight) {\n          warn('maxTileHeight');\n        }\n      }\n      return {\n        width: Math.max(1, Math.min(width, decalOpt.maxTileWidth)),\n        height: Math.max(1, Math.min(height, decalOpt.maxTileHeight))\n      };\n    }\n    function brushDecal() {\n      if (ctx) {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        if (decalOpt.backgroundColor) {\n          ctx.fillStyle = decalOpt.backgroundColor;\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n        }\n      }\n      var ySum = 0;\n      for (var i = 0; i < dashArrayY.length; ++i) {\n        ySum += dashArrayY[i];\n      }\n      if (ySum <= 0) {\n        // dashArrayY is 0, draw nothing\n        return;\n      }\n      var y = -lineBlockLengthY;\n      var yId = 0;\n      var yIdTotal = 0;\n      var xId0 = 0;\n      while (y < pSize.height) {\n        if (yId % 2 === 0) {\n          var symbolYId = yIdTotal / 2 % symbolArray.length;\n          var x = 0;\n          var xId1 = 0;\n          var xId1Total = 0;\n          while (x < pSize.width * 2) {\n            var xSum = 0;\n            for (var i = 0; i < dashArrayX[xId0].length; ++i) {\n              xSum += dashArrayX[xId0][i];\n            }\n            if (xSum <= 0) {\n              // Skip empty line\n              break;\n            }\n            // E.g., [15, 5, 20, 5] draws only for 15 and 20\n            if (xId1 % 2 === 0) {\n              var size = (1 - decalOpt.symbolSize) * 0.5;\n              var left = x + dashArrayX[xId0][xId1] * size;\n              var top_1 = y + dashArrayY[yId] * size;\n              var width = dashArrayX[xId0][xId1] * decalOpt.symbolSize;\n              var height = dashArrayY[yId] * decalOpt.symbolSize;\n              var symbolXId = xId1Total / 2 % symbolArray[symbolYId].length;\n              brushSymbol(left, top_1, width, height, symbolArray[symbolYId][symbolXId]);\n            }\n            x += dashArrayX[xId0][xId1];\n            ++xId1Total;\n            ++xId1;\n            if (xId1 === dashArrayX[xId0].length) {\n              xId1 = 0;\n            }\n          }\n          ++xId0;\n          if (xId0 === dashArrayX.length) {\n            xId0 = 0;\n          }\n        }\n        y += dashArrayY[yId];\n        ++yIdTotal;\n        ++yId;\n        if (yId === dashArrayY.length) {\n          yId = 0;\n        }\n      }\n      function brushSymbol(x, y, width, height, symbolType) {\n        var scale = isSVG ? 1 : dpr;\n        var symbol = createSymbol(symbolType, x * scale, y * scale, width * scale, height * scale, decalOpt.color, decalOpt.symbolKeepAspect);\n        if (isSVG) {\n          var symbolVNode = zr.painter.renderOneToVNode(symbol);\n          if (symbolVNode) {\n            svgRoot.children.push(symbolVNode);\n          }\n        } else {\n          // Paint to canvas for all other renderers.\n          brushSingle(ctx, symbol);\n        }\n      }\n    }\n  }\n}\n/**\n * Convert symbol array into normalized array\n *\n * @param {string | (string | string[])[]} symbol symbol input\n * @return {string[][]} normolized symbol array\n */\nfunction normalizeSymbolArray(symbol) {\n  if (!symbol || symbol.length === 0) {\n    return [['rect']];\n  }\n  if (isString(symbol)) {\n    return [[symbol]];\n  }\n  var isAllString = true;\n  for (var i = 0; i < symbol.length; ++i) {\n    if (!isString(symbol[i])) {\n      isAllString = false;\n      break;\n    }\n  }\n  if (isAllString) {\n    return normalizeSymbolArray([symbol]);\n  }\n  var result = [];\n  for (var i = 0; i < symbol.length; ++i) {\n    if (isString(symbol[i])) {\n      result.push([symbol[i]]);\n    } else {\n      result.push(symbol[i]);\n    }\n  }\n  return result;\n}\n/**\n * Convert dash input into dashArray\n *\n * @param {DecalDashArrayX} dash dash input\n * @return {number[][]} normolized dash array\n */\nfunction normalizeDashArrayX(dash) {\n  if (!dash || dash.length === 0) {\n    return [[0, 0]];\n  }\n  if (isNumber(dash)) {\n    var dashValue = Math.ceil(dash);\n    return [[dashValue, dashValue]];\n  }\n  /**\n   * [20, 5] should be normalized into [[20, 5]],\n   * while [20, [5, 10]] should be normalized into [[20, 20], [5, 10]]\n   */\n  var isAllNumber = true;\n  for (var i = 0; i < dash.length; ++i) {\n    if (!isNumber(dash[i])) {\n      isAllNumber = false;\n      break;\n    }\n  }\n  if (isAllNumber) {\n    return normalizeDashArrayX([dash]);\n  }\n  var result = [];\n  for (var i = 0; i < dash.length; ++i) {\n    if (isNumber(dash[i])) {\n      var dashValue = Math.ceil(dash[i]);\n      result.push([dashValue, dashValue]);\n    } else {\n      var dashValue = map(dash[i], function (n) {\n        return Math.ceil(n);\n      });\n      if (dashValue.length % 2 === 1) {\n        // [4, 2, 1] means |----  -    -- |----  -    -- |\n        // so normalize it to be [4, 2, 1, 4, 2, 1]\n        result.push(dashValue.concat(dashValue));\n      } else {\n        result.push(dashValue);\n      }\n    }\n  }\n  return result;\n}\n/**\n * Convert dash input into dashArray\n *\n * @param {DecalDashArrayY} dash dash input\n * @return {number[]} normolized dash array\n */\nfunction normalizeDashArrayY(dash) {\n  if (!dash || typeof dash === 'object' && dash.length === 0) {\n    return [0, 0];\n  }\n  if (isNumber(dash)) {\n    var dashValue_1 = Math.ceil(dash);\n    return [dashValue_1, dashValue_1];\n  }\n  var dashValue = map(dash, function (n) {\n    return Math.ceil(n);\n  });\n  return dash.length % 2 ? dashValue.concat(dashValue) : dashValue;\n}\n/**\n * Get block length of each line. A block is the length of dash line and space.\n * For example, a line with [4, 1] has a dash line of 4 and a space of 1 after\n * that, so the block length of this line is 5.\n *\n * @param {number[][]} dash dash array of X or Y\n * @return {number[]} block length of each line\n */\nfunction getLineBlockLengthX(dash) {\n  return map(dash, function (line) {\n    return getLineBlockLengthY(line);\n  });\n}\nfunction getLineBlockLengthY(dash) {\n  var blockLength = 0;\n  for (var i = 0; i < dash.length; ++i) {\n    blockLength += dash[i];\n  }\n  if (dash.length % 2 === 1) {\n    // [4, 2, 1] means |----  -    -- |----  -    -- |\n    // So total length is (4 + 2 + 1) * 2\n    return blockLength * 2;\n  }\n  return blockLength;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createOrUpdatePatternFromDecal } from '../util/decal.js';\nexport default function decalVisual(ecModel, api) {\n  ecModel.eachRawSeries(function (seriesModel) {\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    if (data.hasItemVisual()) {\n      data.each(function (idx) {\n        var decal = data.getItemVisual(idx, 'decal');\n        if (decal) {\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n          itemStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n        }\n      });\n    }\n    var decal = data.getVisual('decal');\n    if (decal) {\n      var style = data.getVisual('style');\n      style.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Eventful from 'zrender/lib/core/Eventful.js';\n;\nvar lifecycle = new Eventful();\nexport default lifecycle;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { error } from '../util/log.js';\n// Implementation of exported APIs. For example registerMap, getMap.\n// The implementations will be registered when installing the component.\n// Avoid these code being bundled to the core module.\nvar implsStore = {};\n// TODO Type\nexport function registerImpl(name, impl) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (implsStore[name]) {\n      error(\"Already has an implementation of \" + name + \".\");\n    }\n  }\n  implsStore[name] = impl;\n}\nexport function getImpl(name) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!implsStore[name]) {\n      error(\"Implementation of \" + name + \" doesn't exists.\");\n    }\n  }\n  return implsStore[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrender from 'zrender/lib/zrender.js';\nimport { assert, each, isFunction, isObject, indexOf, bind, clone, setAsPrimitive, extend, createHashMap, map, defaults, isDom, isArray, noop, isString, retrieve2 } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport timsort from 'zrender/lib/core/timsort.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport CoordinateSystemManager from './CoordinateSystem.js';\nimport OptionManager from '../model/OptionManager.js';\nimport backwardCompat from '../preprocessor/backwardCompat.js';\nimport dataStack from '../processor/dataStack.js';\nimport SeriesModel from '../model/Series.js';\nimport ComponentView from '../view/Component.js';\nimport ChartView from '../view/Chart.js';\nimport * as graphic from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, blurSeriesFromHighlightPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur, allLeaveBlur, findComponentHighDownDispatchers, blurComponent, handleGlobalMouseOverForHighDown, handleGlobalMouseOutForHighDown, SELECT_CHANGED_EVENT_TYPE } from '../util/states.js';\nimport * as modelUtil from '../util/model.js';\nimport { throttle } from '../util/throttle.js';\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from '../visual/style.js';\nimport loadingDefault from '../loading/default.js';\nimport Scheduler from './Scheduler.js';\nimport darkTheme from '../theme/dark.js';\nimport { parseClassType } from '../util/clazz.js';\nimport { ECEventProcessor } from '../util/ECEventProcessor.js';\nimport { seriesSymbolTask, dataSymbolTask } from '../visual/symbol.js';\nimport { getVisualFromData, getItemVisualFromData } from '../visual/helper.js';\nimport { deprecateLog, deprecateReplaceLog, error, warn } from '../util/log.js';\nimport { handleLegacySelectEvents } from '../legacy/dataSelectAction.js';\nimport { registerExternalTransform } from '../data/helper/transform.js';\nimport { createLocaleObject, SYSTEM_LANG } from './locale.js';\nimport { findEventDispatcher } from '../util/event.js';\nimport decal from '../visual/decal.js';\nimport lifecycle from './lifecycle.js';\nimport { platformApi, setPlatformAPI } from 'zrender/lib/core/platform.js';\nimport { getImpl } from './impl.js';\nimport { registerCustomSeries as registerCustom } from '../chart/custom/customSeriesRegister.js';\nexport var version = '6.0.0';\nexport var dependencies = {\n  zrender: '6.0.0'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800;\n// Some data processors depends on the stack result dimension (to calculate data extent).\n// So data stack stage should be in front of data processing stage.\nvar PRIORITY_PROCESSOR_DATASTACK = 900;\n// \"Data filter\" will block the stream, so it should be\n// put at the beginning of data processing.\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000;\n// Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\n// overwrite the viusal result of component (like `visualMap`)\n// using data item specific setting (like itemStyle.xxx on data item)\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500;\n// Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\n// visual result like `symbolSize`.\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY_VISUAL_ARIA = 6000;\nvar PRIORITY_VISUAL_DECAL = 7000;\nexport var PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH,\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n    ARIA: PRIORITY_VISUAL_ARIA,\n    DECAL: PRIORITY_VISUAL_DECAL\n  }\n};\n// Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\n// Useful for detecting outdated rendering results in scenarios that these issues are involved:\n//  - Use shortcut (such as, updateTransform, or no update) to start a main process.\n//  - Asynchronously update rendered view (e.g., graph force layout).\n//  - Multiple ChartView/ComponentView render to one group cooperatively.\nvar MAIN_PROCESS_VERSION_KEY = '__mainProcessVersion';\nvar PENDING_UPDATE = '__pendingUpdate';\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\nvar CONNECT_STATUS_PENDING = 0;\nvar CONNECT_STATUS_UPDATING = 1;\nvar CONNECT_STATUS_UPDATED = 2;\n;\n;\nfunction createRegisterEventWithLowercaseECharts(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (this.isDisposed()) {\n      disposedWarning(this.id);\n      return;\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction toLowercaseNameAndCallEventful(host, method, args) {\n  // `args[0]` is event name. Event name is all lowercase.\n  args[0] = args[0] && args[0].toLowerCase();\n  return Eventful.prototype[method].apply(host, args);\n}\nvar MessageCenter = /** @class */function (_super) {\n  __extends(MessageCenter, _super);\n  function MessageCenter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return MessageCenter;\n}(Eventful);\nvar messageCenterProto = MessageCenter.prototype;\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off');\n// ---------------------------------------\n// Internal method names for class ECharts\n// ---------------------------------------\nvar prepare;\nvar prepareView;\nvar updateDirectly;\nvar updateMethods;\nvar doConvertPixel;\nvar updateStreamModes;\nvar doDispatchAction;\nvar flushPendingActions;\nvar triggerUpdatedEvent;\nvar bindRenderedEvent;\nvar bindMouseEvent;\nvar render;\nvar renderComponents;\nvar renderSeries;\nvar createExtensionAPI;\nvar enableConnect;\nvar markStatusToUpdate;\nvar applyChangedStates;\nvar updateMainProcessVersion;\nvar ECharts = /** @class */function (_super) {\n  __extends(ECharts, _super);\n  function ECharts(dom,\n  // Theme name or themeOption.\n  theme, opts) {\n    var _this = _super.call(this, new ECEventProcessor()) || this;\n    _this._chartsViews = [];\n    _this._chartsMap = {};\n    _this._componentsViews = [];\n    _this._componentsMap = {};\n    // Can't dispatch action during rendering procedure\n    _this._pendingActions = [];\n    opts = opts || {};\n    _this._dom = dom;\n    var defaultRenderer = 'canvas';\n    var defaultCoarsePointer = 'auto';\n    var defaultUseDirtyRect = false;\n    _this[MAIN_PROCESS_VERSION_KEY] = 1;\n    if (process.env.NODE_ENV !== 'production') {\n      var root = /* eslint-disable-next-line */\n      env.hasGlobalWindow ? window : global;\n      if (root) {\n        defaultRenderer = retrieve2(root.__ECHARTS__DEFAULT__RENDERER__, defaultRenderer);\n        defaultCoarsePointer = retrieve2(root.__ECHARTS__DEFAULT__COARSE_POINTER, defaultCoarsePointer);\n        defaultUseDirtyRect = retrieve2(root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__, defaultUseDirtyRect);\n      }\n    }\n    if (opts.ssr) {\n      zrender.registerSSRDataGetter(function (el) {\n        var ecData = getECData(el);\n        var dataIndex = ecData.dataIndex;\n        if (dataIndex == null) {\n          return;\n        }\n        var hashMap = createHashMap();\n        hashMap.set('series_index', ecData.seriesIndex);\n        hashMap.set('data_index', dataIndex);\n        ecData.ssrType && hashMap.set('ssr_type', ecData.ssrType);\n        return hashMap;\n      });\n    }\n    var zr = _this._zr = zrender.init(dom, {\n      renderer: opts.renderer || defaultRenderer,\n      devicePixelRatio: opts.devicePixelRatio,\n      width: opts.width,\n      height: opts.height,\n      ssr: opts.ssr,\n      useDirtyRect: retrieve2(opts.useDirtyRect, defaultUseDirtyRect),\n      useCoarsePointer: retrieve2(opts.useCoarsePointer, defaultCoarsePointer),\n      pointerSize: opts.pointerSize\n    });\n    _this._ssr = opts.ssr;\n    // Expect 60 fps.\n    _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\n    _this._updateTheme(theme);\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n    _this._coordSysMgr = new CoordinateSystemManager();\n    var api = _this._api = createExtensionAPI(_this);\n    // Sort on demand\n    function prioritySortFunc(a, b) {\n      return a.__prio - b.__prio;\n    }\n    timsort(visualFuncs, prioritySortFunc);\n    timsort(dataProcessorFuncs, prioritySortFunc);\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n    _this._messageCenter = new MessageCenter();\n    // Init mouse events\n    _this._initEvents();\n    // In case some people write `window.onresize = chart.resize`\n    _this.resize = bind(_this.resize, _this);\n    zr.animation.on('frame', _this._onframe, _this);\n    bindRenderedEvent(zr, _this);\n    bindMouseEvent(zr, _this);\n    // ECharts instance can be used as value.\n    setAsPrimitive(_this);\n    return _this;\n  }\n  ECharts.prototype._onframe = function () {\n    if (this._disposed) {\n      return;\n    }\n    applyChangedStates(this);\n    var scheduler = this._scheduler;\n    // Lazy update\n    if (this[PENDING_UPDATE]) {\n      var silent = this[PENDING_UPDATE].silent;\n      this[IN_MAIN_PROCESS_KEY] = true;\n      updateMainProcessVersion(this);\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\n      } catch (e) {\n        this[IN_MAIN_PROCESS_KEY] = false;\n        this[PENDING_UPDATE] = null;\n        throw e;\n      }\n      // At present, in each frame, zrender performs:\n      //   (1) animation step forward.\n      //   (2) trigger('frame') (where this `_onframe` is called)\n      //   (3) zrender flush (render).\n      // If we do nothing here, since we use `setToFinal: true`, the step (3) above\n      // will render the final state of the elements before the real animation started.\n      this._zr.flush();\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this[PENDING_UPDATE] = null;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n    // Avoid do both lazy update and progress in one frame.\n    else if (scheduler.unfinished) {\n      // Stream progress.\n      var remainTime = TEST_FRAME_REMAIN_TIME;\n      var ecModel = this._model;\n      var api = this._api;\n      scheduler.unfinished = false;\n      do {\n        var startTime = +new Date();\n        scheduler.performSeriesTasks(ecModel);\n        // Currently dataProcessorFuncs do not check threshold.\n        scheduler.performDataProcessorTasks(ecModel);\n        updateStreamModes(this, ecModel);\n        // Do not update coordinate system here. Because that coord system update in\n        // each frame is not a good user experience. So we follow the rule that\n        // the extent of the coordinate system is determined in the first frame (the\n        // frame is executed immediately after task reset.\n        // this._coordSysMgr.update(ecModel, api);\n        // console.log('--- ec frame visual ---', remainTime);\n        scheduler.performVisualTasks(ecModel);\n        renderSeries(this, this._model, api, 'remain', {});\n        remainTime -= +new Date() - startTime;\n      } while (remainTime > 0 && scheduler.unfinished);\n      // Call flush explicitly for trigger finished event.\n      if (!scheduler.unfinished) {\n        this._zr.flush();\n      }\n      // Else, zr flushing be ensue within the same frame,\n      // because zr flushing is after onframe event.\n    }\n  };\n  ECharts.prototype.getDom = function () {\n    return this._dom;\n  };\n  ECharts.prototype.getId = function () {\n    return this.id;\n  };\n  ECharts.prototype.getZr = function () {\n    return this._zr;\n  };\n  ECharts.prototype.isSSR = function () {\n    return this._ssr;\n  };\n  /* eslint-disable-next-line */\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`setOption` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var silent;\n    var replaceMerge;\n    var transitionOpt;\n    if (isObject(notMerge)) {\n      lazyUpdate = notMerge.lazyUpdate;\n      silent = notMerge.silent;\n      replaceMerge = notMerge.replaceMerge;\n      transitionOpt = notMerge.transition;\n      notMerge = notMerge.notMerge;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    updateMainProcessVersion(this);\n    if (!this._model || notMerge) {\n      var optionManager = new OptionManager(this._api);\n      var theme = this._theme;\n      var ecModel = this._model = new GlobalModel();\n      ecModel.scheduler = this._scheduler;\n      ecModel.ssr = this._ssr;\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\n    }\n    this._model.setOption(option, {\n      replaceMerge: replaceMerge\n    }, optionPreprocessorFuncs);\n    var updateParams = {\n      seriesTransition: transitionOpt,\n      optionChanged: true\n    };\n    if (lazyUpdate) {\n      this[PENDING_UPDATE] = {\n        silent: silent,\n        updateParams: updateParams\n      };\n      this[IN_MAIN_PROCESS_KEY] = false;\n      // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\n      // It should wake it up to make sure zrender start to render at the next frame.\n      this.getZr().wakeUp();\n    } else {\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, updateParams);\n      } catch (e) {\n        this[PENDING_UPDATE] = null;\n        this[IN_MAIN_PROCESS_KEY] = false;\n        throw e;\n      }\n      // Ensure zr refresh sychronously, and then pixel in canvas can be\n      // fetched after `setOption`.\n      if (!this._ssr) {\n        // not use flush when using ssr mode.\n        this._zr.flush();\n      }\n      this[PENDING_UPDATE] = null;\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n  };\n  /**\n   * Update theme with name or theme option and repaint the chart.\n   * @param theme Theme name or theme option.\n   * @param opts Optional settings\n   */\n  ECharts.prototype.setTheme = function (theme, opts) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`setTheme` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var ecModel = this._model;\n    if (!ecModel) {\n      return;\n    }\n    var silent = opts && opts.silent;\n    var updateParams = null;\n    if (this[PENDING_UPDATE]) {\n      if (silent == null) {\n        silent = this[PENDING_UPDATE].silent;\n      }\n      updateParams = this[PENDING_UPDATE].updateParams;\n      this[PENDING_UPDATE] = null;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    updateMainProcessVersion(this);\n    try {\n      this._updateTheme(theme);\n      ecModel.setTheme(this._theme);\n      prepare(this);\n      updateMethods.update.call(this, {\n        type: 'setTheme'\n      }, updateParams);\n    } catch (e) {\n      this[IN_MAIN_PROCESS_KEY] = false;\n      throw e;\n    }\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype._updateTheme = function (theme) {\n    if (isString(theme)) {\n      theme = themeStorage[theme];\n    }\n    if (theme) {\n      theme = clone(theme);\n      theme && backwardCompat(theme, true);\n      this._theme = theme;\n    }\n  };\n  // We don't want developers to use getModel directly.\n  ECharts.prototype.getModel = function () {\n    return this._model;\n  };\n  ECharts.prototype.getOption = function () {\n    return this._model && this._model.getOption();\n  };\n  ECharts.prototype.getWidth = function () {\n    return this._zr.getWidth();\n  };\n  ECharts.prototype.getHeight = function () {\n    return this._zr.getHeight();\n  };\n  ECharts.prototype.getDevicePixelRatio = function () {\n    return this._zr.painter.dpr\n    /* eslint-disable-next-line */ || env.hasGlobalWindow && window.devicePixelRatio || 1;\n  };\n  /**\n   * Get canvas which has all thing rendered\n   * @deprecated Use renderToCanvas instead.\n   */\n  ECharts.prototype.getRenderedCanvas = function (opts) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\n    }\n    return this.renderToCanvas(opts);\n  };\n  ECharts.prototype.renderToCanvas = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'canvas') {\n        throw new Error('renderToCanvas can only be used in the canvas renderer.');\n      }\n    }\n    return painter.getRenderedCanvas({\n      backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\n      pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\n    });\n  };\n  ECharts.prototype.renderToSVGString = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'svg') {\n        throw new Error('renderToSVGString can only be used in the svg renderer.');\n      }\n    }\n    return painter.renderToString({\n      useViewBox: opts.useViewBox\n    });\n  };\n  /**\n   * Get svg data url\n   */\n  ECharts.prototype.getSvgDataURL = function () {\n    var zr = this._zr;\n    var list = zr.storage.getDisplayList();\n    // Stop animations\n    each(list, function (el) {\n      el.stopAnimation(null, true);\n    });\n    return zr.painter.toDataURL();\n  };\n  ECharts.prototype.getDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    opts = opts || {};\n    var excludeComponents = opts.excludeComponents;\n    var ecModel = this._model;\n    var excludesComponentViews = [];\n    var self = this;\n    each(excludeComponents, function (componentType) {\n      ecModel.eachComponent({\n        mainType: componentType\n      }, function (component) {\n        var view = self._componentsMap[component.__viewId];\n        if (!view.group.ignore) {\n          excludesComponentViews.push(view);\n          view.group.ignore = true;\n        }\n      });\n    });\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n    each(excludesComponentViews, function (view) {\n      view.group.ignore = false;\n    });\n    return url;\n  };\n  ECharts.prototype.getConnectedDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var isSvg = opts.type === 'svg';\n    var groupId = this.group;\n    var mathMin = Math.min;\n    var mathMax = Math.max;\n    var MAX_NUMBER = Infinity;\n    if (connectedGroups[groupId]) {\n      var left_1 = MAX_NUMBER;\n      var top_1 = MAX_NUMBER;\n      var right_1 = -MAX_NUMBER;\n      var bottom_1 = -MAX_NUMBER;\n      var canvasList_1 = [];\n      var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\n      each(instances, function (chart, id) {\n        if (chart.group === groupId) {\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\n          var boundingRect = chart.getDom().getBoundingClientRect();\n          left_1 = mathMin(boundingRect.left, left_1);\n          top_1 = mathMin(boundingRect.top, top_1);\n          right_1 = mathMax(boundingRect.right, right_1);\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n          canvasList_1.push({\n            dom: canvas,\n            left: boundingRect.left,\n            top: boundingRect.top\n          });\n        }\n      });\n      left_1 *= dpr_1;\n      top_1 *= dpr_1;\n      right_1 *= dpr_1;\n      bottom_1 *= dpr_1;\n      var width = right_1 - left_1;\n      var height = bottom_1 - top_1;\n      var targetCanvas = platformApi.createCanvas();\n      var zr_1 = zrender.init(targetCanvas, {\n        renderer: isSvg ? 'svg' : 'canvas'\n      });\n      zr_1.resize({\n        width: width,\n        height: height\n      });\n      if (isSvg) {\n        var content_1 = '';\n        each(canvasList_1, function (item) {\n          var x = item.left - left_1;\n          var y = item.top - top_1;\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n        });\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\n        if (opts.connectedBackgroundColor) {\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n        }\n        zr_1.refreshImmediately();\n        return zr_1.painter.toDataURL();\n      } else {\n        // Background between the charts\n        if (opts.connectedBackgroundColor) {\n          zr_1.add(new graphic.Rect({\n            shape: {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            },\n            style: {\n              fill: opts.connectedBackgroundColor\n            }\n          }));\n        }\n        each(canvasList_1, function (item) {\n          var img = new graphic.Image({\n            style: {\n              x: item.left * dpr_1 - left_1,\n              y: item.top * dpr_1 - top_1,\n              image: item.dom\n            }\n          });\n          zr_1.add(img);\n        });\n        zr_1.refreshImmediately();\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n      }\n    } else {\n      return this.getDataURL(opts);\n    }\n  };\n  ECharts.prototype.convertToPixel = function (finder, value, opt) {\n    return doConvertPixel(this, 'convertToPixel', finder, value, opt);\n  };\n  /**\n   * Convert from logical coordinate system to pixel coordinate system.\n   * See CoordinateSystem#convertToPixel.\n   *\n   * @see CoordinateSystem['dataToLayout'] for parameters and return.\n   * @see CoordinateSystemDataCoord\n   */\n  ECharts.prototype.convertToLayout = function (finder, value, opt) {\n    return doConvertPixel(this, 'convertToLayout', finder, value, opt);\n  };\n  // The above are signatures from before v6, thus they should be preserved for backward compat.\n  ECharts.prototype.convertFromPixel = function (finder, value, opt) {\n    return doConvertPixel(this, 'convertFromPixel', finder, value, opt);\n  };\n  /**\n   * Is the specified coordinate systems or components contain the given pixel point.\n   * @param {Array|number} value\n   * @return {boolean} result\n   */\n  ECharts.prototype.containPixel = function (finder, value) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var ecModel = this._model;\n    var result;\n    var findResult = modelUtil.parseFinder(ecModel, finder);\n    each(findResult, function (models, key) {\n      key.indexOf('Models') >= 0 && each(models, function (model) {\n        var coordSys = model.coordinateSystem;\n        if (coordSys && coordSys.containPoint) {\n          result = result || !!coordSys.containPoint(value);\n        } else if (key === 'seriesModels') {\n          var view = this._chartsMap[model.__viewId];\n          if (view && view.containPoint) {\n            result = result || view.containPoint(value, model);\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n            }\n          }\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            warn(key + ': containPoint is not supported');\n          }\n        }\n      }, this);\n    }, this);\n    return !!result;\n  };\n  /**\n   * Get visual from series or data.\n   * @param finder\n   *        If string, e.g., 'series', means {seriesIndex: 0}.\n   *        If Object, could contain some of these properties below:\n   *        {\n   *            seriesIndex / seriesId / seriesName,\n   *            dataIndex / dataIndexInside\n   *        }\n   *        If dataIndex is not specified, series visual will be fetched,\n   *        but not data item visual.\n   *        If all of seriesIndex, seriesId, seriesName are not specified,\n   *        visual will be fetched from first series.\n   * @param visualType 'color', 'symbol', 'symbolSize'\n   */\n  ECharts.prototype.getVisual = function (finder, visualType) {\n    var ecModel = this._model;\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\n      defaultMainType: 'series'\n    });\n    var seriesModel = parsedFinder.seriesModel;\n    if (process.env.NODE_ENV !== 'production') {\n      if (!seriesModel) {\n        warn('There is no specified series model');\n      }\n    }\n    var data = seriesModel.getData();\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n  };\n  /**\n   * Get view of corresponding component model\n   */\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n    return this._componentsMap[componentModel.__viewId];\n  };\n  /**\n   * Get view of corresponding series model\n   */\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n    return this._chartsMap[seriesModel.__viewId];\n  };\n  ECharts.prototype._initEvents = function () {\n    var _this = this;\n    each(MOUSE_EVENT_NAMES, function (eveName) {\n      var handler = function (e) {\n        var ecModel = _this.getModel();\n        var el = e.target;\n        var params;\n        var isGlobalOut = eveName === 'globalout';\n        // no e.target when 'globalout'.\n        if (isGlobalOut) {\n          params = {};\n        } else {\n          el && findEventDispatcher(el, function (parent) {\n            var ecData = getECData(parent);\n            if (ecData && ecData.dataIndex != null) {\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType, el) || {};\n              return true;\n            }\n            // If element has custom eventData of components\n            else if (ecData.eventData) {\n              params = extend({}, ecData.eventData);\n              return true;\n            }\n          }, true);\n        }\n        // Contract: if params prepared in mouse event,\n        // these properties must be specified:\n        // {\n        //    componentType: string (component main type)\n        //    componentIndex: number\n        // }\n        // Otherwise event query can not work.\n        if (params) {\n          var componentType = params.componentType;\n          var componentIndex = params.componentIndex;\n          // Special handling for historic reason: when trigger by\n          // markLine/markPoint/markArea, the componentType is\n          // 'markLine'/'markPoint'/'markArea', but we should better\n          // enable them to be queried by seriesIndex, since their\n          // option is set in each series.\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n            componentType = 'series';\n            componentIndex = params.seriesIndex;\n          }\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n          if (process.env.NODE_ENV !== 'production') {\n            // `event.componentType` and `event[componentTpype + 'Index']` must not\n            // be missed, otherwise there is no way to distinguish source component.\n            // See `dataFormat.getDataParams`.\n            if (!isGlobalOut && !(model && view)) {\n              warn('model or view can not be found by params');\n            }\n          }\n          params.event = e;\n          params.type = eveName;\n          _this._$eventProcessor.eventInfo = {\n            targetEl: el,\n            packedEvent: params,\n            model: model,\n            view: view\n          };\n          _this.trigger(eveName, params);\n        }\n      };\n      // Consider that some component (like tooltip, brush, ...)\n      // register zr event handler, but user event handler might\n      // do anything, such as call `setOption` or `dispatchAction`,\n      // which probably update any of the content and probably\n      // cause problem if it is called previous other inner handlers.\n      handler.zrEventfulCallAtLast = true;\n      _this._zr.on(eveName, handler, _this);\n    });\n    var messageCenter = this._messageCenter;\n    each(publicEventTypeMap, function (_, eventType) {\n      messageCenter.on(eventType, function (event) {\n        _this.trigger(eventType, event);\n      });\n    });\n    handleLegacySelectEvents(messageCenter, this, this._api);\n  };\n  ECharts.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n  ECharts.prototype.clear = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this.setOption({\n      series: []\n    }, true);\n  };\n  ECharts.prototype.dispose = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._disposed = true;\n    var dom = this.getDom();\n    if (dom) {\n      modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n    }\n    var chart = this;\n    var api = chart._api;\n    var ecModel = chart._model;\n    each(chart._componentsViews, function (component) {\n      component.dispose(ecModel, api);\n    });\n    each(chart._chartsViews, function (chart) {\n      chart.dispose(ecModel, api);\n    });\n    // Dispose after all views disposed\n    chart._zr.dispose();\n    // Set properties to null.\n    // To reduce the memory cost in case the top code still holds this instance unexpectedly.\n    chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\n    delete instances[chart.id];\n  };\n  /**\n   * Resize the chart\n   */\n  ECharts.prototype.resize = function (opts) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`resize` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._zr.resize(opts);\n    var ecModel = this._model;\n    // Resize loading effect\n    this._loadingFX && this._loadingFX.resize();\n    if (!ecModel) {\n      return;\n    }\n    var needPrepare = ecModel.resetOption('media');\n    var silent = opts && opts.silent;\n    // There is some real cases that:\n    // chart.setOption(option, { lazyUpdate: true });\n    // chart.resize();\n    if (this[PENDING_UPDATE]) {\n      if (silent == null) {\n        silent = this[PENDING_UPDATE].silent;\n      }\n      needPrepare = true;\n      this[PENDING_UPDATE] = null;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    updateMainProcessVersion(this);\n    try {\n      needPrepare && prepare(this);\n      updateMethods.update.call(this, {\n        type: 'resize',\n        animation: extend({\n          // Disable animation\n          duration: 0\n        }, opts && opts.animation)\n      });\n    } catch (e) {\n      this[IN_MAIN_PROCESS_KEY] = false;\n      throw e;\n    }\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.showLoading = function (name, cfg) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (isObject(name)) {\n      cfg = name;\n      name = '';\n    }\n    name = name || 'default';\n    this.hideLoading();\n    if (!loadingEffects[name]) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Loading effects ' + name + ' not exists.');\n      }\n      return;\n    }\n    var el = loadingEffects[name](this._api, cfg);\n    var zr = this._zr;\n    this._loadingFX = el;\n    zr.add(el);\n  };\n  /**\n   * Hide loading effect\n   */\n  ECharts.prototype.hideLoading = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._loadingFX && this._zr.remove(this._loadingFX);\n    this._loadingFX = null;\n  };\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\n    var payload = extend({}, eventObj);\n    payload.type = connectionEventRevertMap[eventObj.type];\n    return payload;\n  };\n  /**\n   * @param opt If pass boolean, means opt.silent\n   * @param opt.silent Default `false`. Whether trigger events.\n   * @param opt.flush Default `undefined`.\n   *        true: Flush immediately, and then pixel in canvas can be fetched\n   *            immediately. Caution: it might affect performance.\n   *        false: Not flush.\n   *        undefined: Auto decide whether perform flush.\n   */\n  ECharts.prototype.dispatchAction = function (payload, opt) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (!isObject(opt)) {\n      opt = {\n        silent: !!opt\n      };\n    }\n    if (!actions[payload.type]) {\n      return;\n    }\n    // Avoid dispatch action before setOption. Especially in `connect`.\n    if (!this._model) {\n      return;\n    }\n    // May dispatchAction in rendering procedure\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      this._pendingActions.push(payload);\n      return;\n    }\n    var silent = opt.silent;\n    doDispatchAction.call(this, payload, silent);\n    var flush = opt.flush;\n    if (flush) {\n      this._zr.flush();\n    } else if (flush !== false && env.browser.weChat) {\n      // In WeChat embedded browser, `requestAnimationFrame` and `setInterval`\n      // hang when sliding page (on touch event), which cause that zr does not\n      // refresh until user interaction finished, which is not expected.\n      // But `dispatchAction` may be called too frequently when pan on touch\n      // screen, which impacts performance if do not throttle them.\n      this._throttledZrFlush();\n    }\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.updateLabelLayout = function () {\n    lifecycle.trigger('series:layoutlabels', this._model, this._api, {\n      // Not adding series labels.\n      // TODO\n      updatedSeries: []\n    });\n  };\n  ECharts.prototype.appendData = function (params) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var seriesIndex = params.seriesIndex;\n    var ecModel = this.getModel();\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (process.env.NODE_ENV !== 'production') {\n      assert(params.data && seriesModel);\n    }\n    seriesModel.appendData(params);\n    // Note: `appendData` does not support that update extent of coordinate\n    // system, util some scenario require that. In the expected usage of\n    // `appendData`, the initial extent of coordinate system should better\n    // be fixed by axis `min`/`max` setting or initial data, otherwise if\n    // the extent changed while `appendData`, the location of the painted\n    // graphic elements have to be changed, which make the usage of\n    // `appendData` meaningless.\n    this._scheduler.unfinished = true;\n    this.getZr().wakeUp();\n  };\n  // A work around for no `internal` modifier in ts yet but\n  // need to strictly hide private methods to JS users.\n  ECharts.internalField = function () {\n    prepare = function (ecIns) {\n      var scheduler = ecIns._scheduler;\n      scheduler.restorePipelines(ecIns._model);\n      scheduler.prepareStageTasks();\n      prepareView(ecIns, true);\n      prepareView(ecIns, false);\n      scheduler.plan();\n    };\n    /**\n     * Prepare view instances of charts and components\n     */\n    prepareView = function (ecIns, isComponent) {\n      var ecModel = ecIns._model;\n      var scheduler = ecIns._scheduler;\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n      var zr = ecIns._zr;\n      var api = ecIns._api;\n      for (var i = 0; i < viewList.length; i++) {\n        viewList[i].__alive = false;\n      }\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\n        componentType !== 'series' && doPrepare(model);\n      }) : ecModel.eachSeries(doPrepare);\n      function doPrepare(model) {\n        // By default view will be reused if possible for the case that `setOption` with \"notMerge\"\n        // mode and need to enable transition animation. (Usually, when they have the same id, or\n        // especially no id but have the same type & name & index. See the `model.id` generation\n        // rule in `makeIdAndName` and `viewId` generation rule here).\n        // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\n        // the new model has nothing to do with the old model.\n        var requireNewView = model.__requireNewView;\n        // This command should not work twice.\n        model.__requireNewView = false;\n        // Consider: id same and type changed.\n        var viewId = '_ec_' + model.id + '_' + model.type;\n        var view = !requireNewView && viewMap[viewId];\n        if (!view) {\n          var classType = parseClassType(model.type);\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) :\n          // FIXME:TS\n          // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\n          // For backward compat, still support a chart type declared as only subType\n          // like \"liquidfill\", but recommend \"series.liquidfill\"\n          // But need a base class to make a type series.\n          ChartView.getClass(classType.sub);\n          if (process.env.NODE_ENV !== 'production') {\n            assert(Clazz, classType.sub + ' does not exist.');\n          }\n          view = new Clazz();\n          view.init(ecModel, api);\n          viewMap[viewId] = view;\n          viewList.push(view);\n          zr.add(view.group);\n        }\n        model.__viewId = view.__id = viewId;\n        view.__alive = true;\n        view.__model = model;\n        view.group.__ecComponentInfo = {\n          mainType: model.mainType,\n          index: model.componentIndex\n        };\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\n      }\n      for (var i = 0; i < viewList.length;) {\n        var view = viewList[i];\n        if (!view.__alive) {\n          !isComponent && view.renderTask.dispose();\n          zr.remove(view.group);\n          view.dispose(ecModel, api);\n          viewList.splice(i, 1);\n          if (viewMap[view.__id] === view) {\n            delete viewMap[view.__id];\n          }\n          view.__id = view.group.__ecComponentInfo = null;\n        } else {\n          i++;\n        }\n      }\n    };\n    updateDirectly = function (ecIns, method, payload, mainType, subType) {\n      var ecModel = ecIns._model;\n      ecModel.setUpdatePayload(payload);\n      // broadcast\n      if (!mainType) {\n        // FIXME\n        // Chart will not be update directly here, except set dirty.\n        // But there is no such scenario now.\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n        return;\n      }\n      var query = {};\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\n      var condition = {\n        mainType: mainType,\n        query: query\n      };\n      subType && (condition.subType = subType); // subType may be '' by parseClassType;\n      var excludeSeriesId = payload.excludeSeriesId;\n      var excludeSeriesIdMap;\n      if (excludeSeriesId != null) {\n        excludeSeriesIdMap = createHashMap();\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\n          var modelId = modelUtil.convertOptionIdName(id, null);\n          if (modelId != null) {\n            excludeSeriesIdMap.set(modelId, true);\n          }\n        });\n      }\n      // If dispatchAction before setOption, do nothing.\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        if (isHighDownPayload(payload)) {\n          if (model instanceof SeriesModel) {\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\n              blurSeriesFromHighlightPayload(model, payload, ecIns._api);\n            }\n          } else {\n            var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\n              focusSelf = _a.focusSelf,\n              dispatchers = _a.dispatchers;\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\n              blurComponent(model.mainType, model.componentIndex, ecIns._api);\n            }\n            // PENDING:\n            // Whether to put this \"enter emphasis\" code in `ComponentView`,\n            // which will be the same as `ChartView` but might be not necessary\n            // and will be far from this logic.\n            if (dispatchers) {\n              each(dispatchers, function (dispatcher) {\n                payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\n              });\n            }\n          }\n        } else if (isSelectChangePayload(payload)) {\n          // TODO geo\n          if (model instanceof SeriesModel) {\n            toggleSelectionFromPayload(model, payload, ecIns._api);\n            updateSeriesElementSelection(model);\n            markStatusToUpdate(ecIns);\n          }\n        }\n      }, ecIns);\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n      }, ecIns);\n      function callView(view) {\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n      }\n    };\n    updateMethods = {\n      prepareAndUpdate: function (payload) {\n        prepare(this);\n        updateMethods.update.call(this, payload, payload && {\n          // Needs to mark option changed if newOption is given.\n          // It's from MagicType.\n          // TODO If use a separate flag optionChanged in payload?\n          optionChanged: payload.newOption != null\n        });\n      },\n      update: function (payload, updateParams) {\n        var ecModel = this._model;\n        var api = this._api;\n        var zr = this._zr;\n        var coordSysMgr = this._coordSysMgr;\n        var scheduler = this._scheduler;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        scheduler.restoreData(ecModel, payload);\n        scheduler.performSeriesTasks(ecModel);\n        // TODO\n        // Save total ecModel here for undo/redo (after restoring data and before processing data).\n        // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n        // Create new coordinate system each update\n        // In LineView may save the old coordinate system and use it to get the original point.\n        coordSysMgr.create(ecModel, api);\n        scheduler.performDataProcessorTasks(ecModel, payload);\n        // Current stream render is not supported in data process. So we can update\n        // stream modes after data processing, where the filtered data is used to\n        // determine whether to use progressive rendering.\n        updateStreamModes(this, ecModel);\n        // We update stream modes before coordinate system updated, then the modes info\n        // can be fetched when coord sys updating (consider the barGrid extent fix). But\n        // the drawback is the full coord info can not be fetched. Fortunately this full\n        // coord is not required in stream mode updater currently.\n        coordSysMgr.update(ecModel, api);\n        clearColorPalette(ecModel);\n        scheduler.performVisualTasks(ecModel, payload);\n        // Set background and dark mode before rendering, because they affect auto-color-determination\n        // in zrender Text, and consequently affect the bounding rect if stroke is added.\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n        zr.setBackgroundColor(backgroundColor);\n        // Force set dark mode.\n        var darkMode = ecModel.get('darkMode');\n        if (darkMode != null && darkMode !== 'auto') {\n          zr.setDarkMode(darkMode);\n        }\n        render(this, ecModel, api, payload, updateParams);\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateTransform: function (payload) {\n        var _this = this;\n        var ecModel = this._model;\n        var api = this._api;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        // ChartView.markUpdateMethod(payload, 'updateTransform');\n        var componentDirtyList = [];\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType === 'series') {\n            return;\n          }\n          var componentView = _this.getViewOfComponentModel(componentModel);\n          if (componentView && componentView.__alive) {\n            if (componentView.updateTransform) {\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n              result && result.update && componentDirtyList.push(componentView);\n            } else {\n              componentDirtyList.push(componentView);\n            }\n          }\n        });\n        var seriesDirtyMap = createHashMap();\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          if (chartView.updateTransform) {\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n          } else {\n            seriesDirtyMap.set(seriesModel.uid, 1);\n          }\n        });\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true,\n          dirtyMap: seriesDirtyMap\n        });\n        // Currently, not call render of components. Geo render cost a lot.\n        // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n        renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateView: function (payload) {\n        var ecModel = this._model;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        ChartView.markUpdateMethod(payload, 'updateView');\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true\n        });\n        render(this, ecModel, this._api, payload, {});\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateVisual: function (payload) {\n        // updateMethods.update.call(this, payload);\n        var _this = this;\n        var ecModel = this._model;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        // clear all visual\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.getData().clearAllVisual();\n        });\n        // Perform visual\n        ChartView.markUpdateMethod(payload, 'updateVisual');\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          visualType: 'visual',\n          setDirty: true\n        });\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType !== 'series') {\n            var componentView = _this.getViewOfComponentModel(componentModel);\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n          }\n        });\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n        });\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateLayout: function (payload) {\n        updateMethods.update.call(this, payload);\n      }\n    };\n    function doConvertPixelImpl(ecIns, methodName, finder, value, opt) {\n      if (ecIns._disposed) {\n        disposedWarning(ecIns.id);\n        return;\n      }\n      var ecModel = ecIns._model;\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n      var result;\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\n      for (var i = 0; i < coordSysList.length; i++) {\n        var coordSys = coordSysList[i];\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value, opt)) != null) {\n          return result;\n        }\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n      }\n    }\n    ;\n    doConvertPixel = doConvertPixelImpl;\n    updateStreamModes = function (ecIns, ecModel) {\n      var chartsMap = ecIns._chartsMap;\n      var scheduler = ecIns._scheduler;\n      ecModel.eachSeries(function (seriesModel) {\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n      });\n    };\n    doDispatchAction = function (payload, silent) {\n      var _this = this;\n      var ecModel = this.getModel();\n      var payloadType = payload.type;\n      var escapeConnect = payload.escapeConnect;\n      var actionInfo = actions[payloadType];\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\n      var updateMethod = cptTypeTmp.pop();\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n      this[IN_MAIN_PROCESS_KEY] = true;\n      updateMainProcessVersion(this);\n      var payloads = [payload];\n      var batched = false;\n      // Batch action\n      if (payload.batch) {\n        batched = true;\n        payloads = map(payload.batch, function (item) {\n          item = defaults(extend({}, item), payload);\n          item.batch = null;\n          return item;\n        });\n      }\n      var eventObjBatch = [];\n      var eventObj;\n      var actionResultBatch = [];\n      var nonRefinedEventType = actionInfo.nonRefinedEventType;\n      var isSelectChange = isSelectChangePayload(payload);\n      var isHighDown = isHighDownPayload(payload);\n      // Only leave blur once if there are multiple batches.\n      if (isHighDown) {\n        allLeaveBlur(this._api);\n      }\n      each(payloads, function (batchItem) {\n        // Action can specify the event by return it.\n        var actionResult = actionInfo.action(batchItem, ecModel, _this._api);\n        if (actionInfo.refineEvent) {\n          actionResultBatch.push(actionResult);\n        } else {\n          eventObj = actionResult;\n        }\n        eventObj = eventObj || extend({}, batchItem);\n        eventObj.type = nonRefinedEventType;\n        eventObjBatch.push(eventObj);\n        // light update does not perform data process, layout and visual.\n        if (isHighDown) {\n          var _a = modelUtil.preParseFinder(payload),\n            queryOptionMap = _a.queryOptionMap,\n            mainTypeSpecified = _a.mainTypeSpecified;\n          var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\n          updateDirectly(_this, updateMethod, batchItem, componentMainType);\n          markStatusToUpdate(_this);\n        } else if (isSelectChange) {\n          // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\n          // geo still use 'geoselect'.\n          updateDirectly(_this, updateMethod, batchItem, 'series');\n          markStatusToUpdate(_this);\n        } else if (cptType) {\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n        }\n      });\n      if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\n        try {\n          // Still dirty\n          if (this[PENDING_UPDATE]) {\n            prepare(this);\n            updateMethods.update.call(this, payload);\n            this[PENDING_UPDATE] = null;\n          } else {\n            updateMethods[updateMethod].call(this, payload);\n          }\n        } catch (e) {\n          this[IN_MAIN_PROCESS_KEY] = false;\n          throw e;\n        }\n      }\n      // Follow the rule of action batch\n      if (batched) {\n        eventObj = {\n          type: nonRefinedEventType,\n          escapeConnect: escapeConnect,\n          batch: eventObjBatch\n        };\n      } else {\n        eventObj = eventObjBatch[0];\n      }\n      this[IN_MAIN_PROCESS_KEY] = false;\n      if (!silent) {\n        var refinedEvent = void 0;\n        if (actionInfo.refineEvent) {\n          var eventContent = actionInfo.refineEvent(actionResultBatch, payload, ecModel, this._api).eventContent;\n          assert(isObject(eventContent));\n          refinedEvent = defaults({\n            type: actionInfo.refinedEventType\n          }, eventContent);\n          refinedEvent.fromAction = payload.type;\n          refinedEvent.fromActionPayload = payload;\n          refinedEvent.escapeConnect = true;\n        }\n        var messageCenter = this._messageCenter;\n        // - If `refineEvent` created a `refinedEvent`, `eventObj` (replicated from the original payload)\n        //  is still needed to be triggered for the feature `connect`. But it will not be triggered to\n        //  users in this case.\n        // - If no `refineEvent` used, `eventObj` will be triggered for both `connect` and users.\n        messageCenter.trigger(eventObj.type, eventObj);\n        if (refinedEvent) {\n          messageCenter.trigger(refinedEvent.type, refinedEvent);\n        }\n      }\n    };\n    flushPendingActions = function (silent) {\n      var pendingActions = this._pendingActions;\n      while (pendingActions.length) {\n        var payload = pendingActions.shift();\n        doDispatchAction.call(this, payload, silent);\n      }\n    };\n    triggerUpdatedEvent = function (silent) {\n      !silent && this.trigger('updated');\n    };\n    /**\n     * Event `rendered` is triggered when zr\n     * rendered. It is useful for realtime\n     * snapshot (reflect animation).\n     *\n     * Event `finished` is triggered when:\n     * (1) zrender rendering finished.\n     * (2) initial animation finished.\n     * (3) progressive rendering finished.\n     * (4) no pending action.\n     * (5) no delayed setOption needs to be processed.\n     */\n    bindRenderedEvent = function (zr, ecIns) {\n      zr.on('rendered', function (params) {\n        ecIns.trigger('rendered', params);\n        // The `finished` event should not be triggered repeatedly,\n        // so it should only be triggered when rendering indeed happens\n        // in zrender. (Consider the case that dipatchAction is keep\n        // triggering when mouse move).\n        if (\n        // Although zr is dirty if initial animation is not finished\n        // and this checking is called on frame, we also check\n        // animation finished for robustness.\n        zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n          ecIns.trigger('finished');\n        }\n      });\n    };\n    bindMouseEvent = function (zr, ecIns) {\n      zr.on('mouseover', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('mouseout', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('click', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, function (target) {\n          return getECData(target).dataIndex != null;\n        }, true);\n        if (dispatcher) {\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\n          var ecData = getECData(dispatcher);\n          ecIns._api.dispatchAction({\n            type: actionType,\n            dataType: ecData.dataType,\n            dataIndexInside: ecData.dataIndex,\n            seriesIndex: ecData.seriesIndex,\n            isFromClick: true\n          });\n        }\n      });\n    };\n    function clearColorPalette(ecModel) {\n      ecModel.clearColorPalette();\n      ecModel.eachSeries(function (seriesModel) {\n        seriesModel.clearColorPalette();\n      });\n    }\n    ;\n    // Allocate zlevels for series and components\n    function allocateZlevels(ecModel) {\n      ;\n      var componentZLevels = [];\n      var seriesZLevels = [];\n      var hasSeparateZLevel = false;\n      ecModel.eachComponent(function (componentType, componentModel) {\n        var zlevel = componentModel.get('zlevel') || 0;\n        var z = componentModel.get('z') || 0;\n        var zlevelKey = componentModel.getZLevelKey();\n        hasSeparateZLevel = hasSeparateZLevel || !!zlevelKey;\n        (componentType === 'series' ? seriesZLevels : componentZLevels).push({\n          zlevel: zlevel,\n          z: z,\n          idx: componentModel.componentIndex,\n          type: componentType,\n          key: zlevelKey\n        });\n      });\n      if (hasSeparateZLevel) {\n        // Series after component\n        var zLevels = componentZLevels.concat(seriesZLevels);\n        var lastSeriesZLevel_1;\n        var lastSeriesKey_1;\n        timsort(zLevels, function (a, b) {\n          if (a.zlevel === b.zlevel) {\n            return a.z - b.z;\n          }\n          return a.zlevel - b.zlevel;\n        });\n        each(zLevels, function (item) {\n          var componentModel = ecModel.getComponent(item.type, item.idx);\n          var zlevel = item.zlevel;\n          var key = item.key;\n          if (lastSeriesZLevel_1 != null) {\n            zlevel = Math.max(lastSeriesZLevel_1, zlevel);\n          }\n          if (key) {\n            if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = key;\n          } else if (lastSeriesKey_1) {\n            if (zlevel === lastSeriesZLevel_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = '';\n          }\n          lastSeriesZLevel_1 = zlevel;\n          componentModel.setZLevel(zlevel);\n        });\n      }\n    }\n    render = function (ecIns, ecModel, api, payload, updateParams) {\n      allocateZlevels(ecModel);\n      renderComponents(ecIns, ecModel, api, payload, updateParams);\n      each(ecIns._chartsViews, function (chart) {\n        chart.__alive = false;\n      });\n      renderSeries(ecIns, ecModel, api, payload, updateParams);\n      // Remove groups of unrendered charts\n      each(ecIns._chartsViews, function (chart) {\n        if (!chart.__alive) {\n          chart.remove(ecModel, api);\n        }\n      });\n    };\n    renderComponents = function (ecIns, ecModel, api, payload, updateParams, dirtyList) {\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\n        var componentModel = componentView.__model;\n        clearStates(componentModel, componentView);\n        componentView.render(componentModel, ecModel, api, payload);\n        updateZ(componentModel, componentView);\n        updateStates(componentModel, componentView);\n      });\n    };\n    /**\n     * Render each chart and component\n     */\n    renderSeries = function (ecIns, ecModel, api, payload, updateParams, dirtyMap) {\n      // Render all charts\n      var scheduler = ecIns._scheduler;\n      updateParams = extend(updateParams || {}, {\n        updatedSeries: ecModel.getSeries()\n      });\n      // TODO progressive?\n      lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\n      var unfinished = false;\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        chartView.__alive = true;\n        var renderTask = chartView.renderTask;\n        scheduler.updatePayload(renderTask, payload);\n        // TODO states on marker.\n        clearStates(seriesModel, chartView);\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n          renderTask.dirty();\n        }\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n          unfinished = true;\n        }\n        chartView.group.silent = !!seriesModel.get('silent');\n        // Should not call markRedraw on group, because it will disable zrender\n        // incremental render (always render from the __startIndex each frame)\n        // chartView.group.markRedraw();\n        updateBlend(seriesModel, chartView);\n        updateSeriesElementSelection(seriesModel);\n      });\n      scheduler.unfinished = unfinished || scheduler.unfinished;\n      lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams);\n      // transition after label is layouted.\n      lifecycle.trigger('series:transition', ecModel, api, updateParams);\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        // Update Z after labels updated. Before applying states.\n        updateZ(seriesModel, chartView);\n        // NOTE: Update states after label is updated.\n        // label should be in normal status when layouting.\n        updateStates(seriesModel, chartView);\n      });\n      // If use hover layer\n      updateHoverLayerStatus(ecIns, ecModel);\n      lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\n    };\n    markStatusToUpdate = function (ecIns) {\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true;\n      // Wake up zrender if it's sleep. Let it update states in the next frame.\n      ecIns.getZr().wakeUp();\n    };\n    updateMainProcessVersion = function (ecIns) {\n      ecIns[MAIN_PROCESS_VERSION_KEY] = (ecIns[MAIN_PROCESS_VERSION_KEY] + 1) % 1000;\n    };\n    applyChangedStates = function (ecIns) {\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n        return;\n      }\n      ecIns.getZr().storage.traverse(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        applyElementStates(el);\n      });\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n    };\n    function applyElementStates(el) {\n      var newStates = [];\n      var oldStates = el.currentStates;\n      // Keep other states.\n      for (var i = 0; i < oldStates.length; i++) {\n        var stateName = oldStates[i];\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n          newStates.push(stateName);\n        }\n      }\n      // Only use states when it's exists.\n      if (el.selected && el.states.select) {\n        newStates.push('select');\n      }\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n        newStates.push('emphasis');\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n        newStates.push('blur');\n      }\n      el.useStates(newStates);\n    }\n    function updateHoverLayerStatus(ecIns, ecModel) {\n      var zr = ecIns._zr;\n      var storage = zr.storage;\n      var elCount = 0;\n      storage.traverse(function (el) {\n        if (!el.isGroup) {\n          elCount++;\n        }\n      });\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n        ecModel.eachSeries(function (seriesModel) {\n          if (seriesModel.preventUsingHoverLayer) {\n            return;\n          }\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n          if (chartView.__alive) {\n            chartView.eachRendered(function (el) {\n              if (el.states.emphasis) {\n                el.states.emphasis.hoverLayer = true;\n              }\n            });\n          }\n        });\n      }\n    }\n    ;\n    /**\n     * Update chart and blend.\n     */\n    function updateBlend(seriesModel, chartView) {\n      var blendMode = seriesModel.get('blendMode') || null;\n      chartView.eachRendered(function (el) {\n        // FIXME marker and other components\n        if (!el.isGroup) {\n          // DON'T mark the element dirty. In case element is incremental and don't want to rerender.\n          el.style.blend = blendMode;\n        }\n      });\n    }\n    ;\n    function updateZ(model, view) {\n      if (model.preventAutoZ) {\n        return;\n      }\n      var zInfo = graphic.retrieveZInfo(model);\n      // Set z and zlevel\n      view.eachRendered(function (el) {\n        graphic.traverseUpdateZ(el, zInfo.z, zInfo.zlevel);\n        // Don't traverse the children because it has been traversed in _updateZ.\n        return true;\n      });\n    }\n    ;\n    // Clear states without animation.\n    // TODO States on component.\n    function clearStates(model, view) {\n      view.eachRendered(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        var textContent = el.getTextContent();\n        var textGuide = el.getTextGuideLine();\n        if (el.stateTransition) {\n          el.stateTransition = null;\n        }\n        if (textContent && textContent.stateTransition) {\n          textContent.stateTransition = null;\n        }\n        if (textGuide && textGuide.stateTransition) {\n          textGuide.stateTransition = null;\n        }\n        // TODO If el is incremental.\n        if (el.hasState()) {\n          el.prevStates = el.currentStates;\n          el.clearStates();\n        } else if (el.prevStates) {\n          el.prevStates = null;\n        }\n      });\n    }\n    function updateStates(model, view) {\n      var stateAnimationModel = model.getModel('stateAnimation');\n      var enableAnimation = model.isAnimationEnabled();\n      var duration = stateAnimationModel.get('duration');\n      var stateTransition = duration > 0 ? {\n        duration: duration,\n        delay: stateAnimationModel.get('delay'),\n        easing: stateAnimationModel.get('easing')\n        // additive: stateAnimationModel.get('additive')\n      } : null;\n      view.eachRendered(function (el) {\n        if (el.states && el.states.emphasis) {\n          // Not applied on removed elements, it may still in fading.\n          if (graphic.isElementRemoved(el)) {\n            return;\n          }\n          if (el instanceof graphic.Path) {\n            savePathStates(el);\n          }\n          // Only updated on changed element. In case element is incremental and don't want to rerender.\n          // TODO, a more proper way?\n          if (el.__dirty) {\n            var prevStates = el.prevStates;\n            // Restore states without animation\n            if (prevStates) {\n              el.useStates(prevStates);\n            }\n          }\n          // Update state transition and enable animation again.\n          if (enableAnimation) {\n            el.stateTransition = stateTransition;\n            var textContent = el.getTextContent();\n            var textGuide = el.getTextGuideLine();\n            // TODO Is it necessary to animate label?\n            if (textContent) {\n              textContent.stateTransition = stateTransition;\n            }\n            if (textGuide) {\n              textGuide.stateTransition = stateTransition;\n            }\n          }\n          // Use highlighted and selected flag to toggle states.\n          if (el.__dirty) {\n            applyElementStates(el);\n          }\n        }\n      });\n    }\n    ;\n    createExtensionAPI = function (ecIns) {\n      return new (/** @class */function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.getCoordinateSystems = function () {\n          return ecIns._coordSysMgr.getCoordinateSystems();\n        };\n        class_1.prototype.getComponentByElement = function (el) {\n          while (el) {\n            var modelInfo = el.__ecComponentInfo;\n            if (modelInfo != null) {\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n            }\n            el = el.parent;\n          }\n        };\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n          enterEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n          leaveEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterBlur = function (el) {\n          enterBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveBlur = function (el) {\n          leaveBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterSelect = function (el) {\n          enterSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveSelect = function (el) {\n          leaveSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.getModel = function () {\n          return ecIns.getModel();\n        };\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\n          return ecIns.getViewOfComponentModel(componentModel);\n        };\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n          return ecIns.getViewOfSeriesModel(seriesModel);\n        };\n        class_1.prototype.getMainProcessVersion = function () {\n          return ecIns[MAIN_PROCESS_VERSION_KEY];\n        };\n        return class_1;\n      }(ExtensionAPI))(ecIns);\n    };\n    enableConnect = function (chart) {\n      function updateConnectedChartsStatus(charts, status) {\n        for (var i = 0; i < charts.length; i++) {\n          var otherChart = charts[i];\n          otherChart[CONNECT_STATUS_KEY] = status;\n        }\n      }\n      each(connectionEventRevertMap, function (_, eventType) {\n        chart._messageCenter.on(eventType, function (event) {\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n            if (event && event.escapeConnect) {\n              return;\n            }\n            var action_1 = chart.makeActionFromEvent(event);\n            var otherCharts_1 = [];\n            each(instances, function (otherChart) {\n              if (otherChart !== chart && otherChart.group === chart.group) {\n                otherCharts_1.push(otherChart);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n            each(otherCharts_1, function (otherChart) {\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                otherChart.dispatchAction(action_1);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n          }\n        });\n      });\n    };\n  }();\n  return ECharts;\n}(Eventful);\nvar echartsProto = ECharts.prototype;\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\n/**\n * @deprecated\n */\n// @ts-ignore\nechartsProto.one = function (eventName, cb, ctx) {\n  var self = this;\n  deprecateLog('ECharts#one is deprecated.');\n  function wrapped() {\n    var args2 = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args2[_i] = arguments[_i];\n    }\n    cb && cb.apply && cb.apply(this, args2);\n    // @ts-ignore\n    self.off(eventName, wrapped);\n  }\n  ;\n  // @ts-ignore\n  this.on.call(this, eventName, wrapped, ctx);\n};\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\nfunction disposedWarning(id) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('Instance ' + id + ' has been disposed');\n  }\n}\nvar actions = {};\n/**\n * Map event type to action type for reproducing action from event for `connect`.\n */\nvar connectionEventRevertMap = {};\n/**\n * To remove duplication.\n */\nvar publicEventTypeMap = {};\nvar dataProcessorFuncs = [];\nvar optionPreprocessorFuncs = [];\nvar visualFuncs = [];\nvar themeStorage = {};\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = +new Date() - 0;\nvar groupIdBase = +new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n/**\n * @param opts.devicePixelRatio Use window.devicePixelRatio by default\n * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\n * @param opts.width Use clientWidth of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.height Use clientHeight of the input `dom` by default.\n *        Can be 'auto' (the same as null/undefined)\n * @param opts.locale Specify the locale.\n * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\n */\nexport function init(dom, theme, opts) {\n  var isClient = !(opts && opts.ssr);\n  if (isClient) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!dom) {\n        throw new Error('Initialize failed: invalid dom.');\n      }\n    }\n    var existInstance = getInstanceByDom(dom);\n    if (existInstance) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('There is a chart instance already initialized on the dom.');\n      }\n      return existInstance;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n        warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n      }\n    }\n  }\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  isClient && modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  lifecycle.trigger('afterinit', chart);\n  return chart;\n}\n/**\n * @usage\n * (A)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * chart1.group = 'xxx';\n * chart2.group = 'xxx';\n * echarts.connect('xxx');\n * ```\n * (B)\n * ```js\n * let chart1 = echarts.init(dom1);\n * let chart2 = echarts.init(dom2);\n * echarts.connect('xxx', [chart1, chart2]);\n * ```\n */\nexport function connect(groupId) {\n  // Is array of charts\n  if (isArray(groupId)) {\n    var charts = groupId;\n    groupId = null;\n    // If any chart has group\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n  connectedGroups[groupId] = true;\n  return groupId;\n}\nexport function disconnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\n * Alias and backward compatibility\n * @deprecated\n */\nexport var disConnect = disconnect;\n/**\n * Dispose a chart instance\n */\nexport function dispose(chart) {\n  if (isString(chart)) {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\nexport function getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\nexport function getInstanceById(key) {\n  return instances[key];\n}\n/**\n * Register theme\n */\nexport function registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\n * Register option preprocessor\n */\nexport function registerPreprocessor(preprocessorFunc) {\n  if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\n    optionPreprocessorFuncs.push(preprocessorFunc);\n  }\n}\nexport function registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n}\n/**\n * Register postIniter\n * @param {Function} postInitFunc\n */\nexport function registerPostInit(postInitFunc) {\n  registerUpdateLifecycle('afterinit', postInitFunc);\n}\n/**\n * Register postUpdater\n * @param {Function} postUpdateFunc\n */\nexport function registerPostUpdate(postUpdateFunc) {\n  registerUpdateLifecycle('afterupdate', postUpdateFunc);\n}\nexport function registerUpdateLifecycle(name, cb) {\n  lifecycle.on(name, cb);\n}\nexport function registerAction(arg0, arg1, action) {\n  var actionType;\n  var publicEventType;\n  var refineEvent;\n  var update;\n  var publishNonRefinedEvent;\n  if (isFunction(arg1)) {\n    action = arg1;\n    arg1 = '';\n  }\n  if (isObject(arg0)) {\n    actionType = arg0.type;\n    publicEventType = arg0.event;\n    update = arg0.update;\n    publishNonRefinedEvent = arg0.publishNonRefinedEvent;\n    if (!action) {\n      action = arg0.action;\n    }\n    refineEvent = arg0.refineEvent;\n  } else {\n    actionType = arg0;\n    publicEventType = arg1;\n  }\n  function createEventType(actionOrEventType) {\n    // Event type should be all lowercase\n    return actionOrEventType.toLowerCase();\n  }\n  publicEventType = createEventType(publicEventType || actionType);\n  // See comments on {ActionInfo} for the reason.\n  var nonRefinedEventType = refineEvent ? createEventType(actionType) : publicEventType;\n  // Support calling `registerAction` multiple times with the same action\n  // type; subsequent calls have no effect.\n  if (actions[actionType]) {\n    return;\n  }\n  // Validate action type and event name.\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(publicEventType));\n  if (refineEvent) {\n    // An event replicated from the action will be triggered internally for `connect` in this case.\n    assert(publicEventType !== actionType);\n  }\n  actions[actionType] = {\n    actionType: actionType,\n    refinedEventType: publicEventType,\n    nonRefinedEventType: nonRefinedEventType,\n    update: update,\n    action: action,\n    refineEvent: refineEvent\n  };\n  publicEventTypeMap[publicEventType] = 1;\n  if (refineEvent && publishNonRefinedEvent) {\n    publicEventTypeMap[nonRefinedEventType] = 1;\n  }\n  if (process.env.NODE_ENV !== 'production' && connectionEventRevertMap[nonRefinedEventType]) {\n    error(nonRefinedEventType + \" must not be shared; use \\\"refineEvent\\\" if you intend to share an event name.\");\n  }\n  connectionEventRevertMap[nonRefinedEventType] = actionType;\n}\nexport function registerCoordinateSystem(type, coordSysCreator) {\n  CoordinateSystemManager.register(type, coordSysCreator);\n}\n/**\n * Get dimensions of specified coordinate system.\n * @param {string} type\n * @return {Array.<string|Object>}\n */\nexport function getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\nexport function registerCustomSeries(seriesType, renderItem) {\n  registerCustom(seriesType, renderItem);\n}\nexport { registerLocale } from './locale.js';\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\nexport { registerLayout, registerVisual };\nvar registeredTasks = [];\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNaN(priority) || priority == null) {\n      throw new Error('Illegal priority');\n    }\n    // Check duplicate\n    each(targetList, function (wrap) {\n      assert(wrap.__raw !== fn);\n    });\n  }\n  // Already registered\n  if (indexOf(registeredTasks, fn) >= 0) {\n    return;\n  }\n  registeredTasks.push(fn);\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n}\nexport function registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\n * ZRender need a canvas context to do measureText.\n * But in node environment canvas may be created by node-canvas.\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\n *\n *\n * @deprecated use setPlatformAPI({ createCanvas }) instead.\n *\n * @example\n *     let Canvas = require('canvas');\n *     let echarts = require('echarts');\n *     echarts.setCanvasCreator(function () {\n *         // Small size is enough.\n *         return new Canvas(32, 32);\n *     });\n */\nexport function setCanvasCreator(creator) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\n  }\n  setPlatformAPI({\n    createCanvas: creator\n  });\n}\n/**\n * The parameters and usage: see `geoSourceManager.registerMap`.\n * Compatible with previous `echarts.registerMap`.\n */\nexport function registerMap(mapName, geoJson, specialAreas) {\n  var registerMap = getImpl('registerMap');\n  registerMap && registerMap(mapName, geoJson, specialAreas);\n}\nexport function getMap(mapName) {\n  var getMap = getImpl('getMap');\n  return getMap && getMap(mapName);\n}\nexport var registerTransform = registerExternalTransform;\n/**\n * Globa dispatchAction to a specified chart instance.\n */\n// export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\n//     if (!payload || !payload.chartId) {\n//         // Must have chartId to find chart\n//         return;\n//     }\n//     const chart = instances[payload.chartId];\n//     if (chart) {\n//         chart.dispatchAction(payload, opt);\n//     }\n// }\n// Builtin global visual\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault);\n// Default actions\nregisterAction({\n  type: HIGHLIGHT_ACTION_TYPE,\n  event: HIGHLIGHT_ACTION_TYPE,\n  update: HIGHLIGHT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: DOWNPLAY_ACTION_TYPE,\n  event: DOWNPLAY_ACTION_TYPE,\n  update: DOWNPLAY_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: SELECT_ACTION_TYPE,\n  event: SELECT_CHANGED_EVENT_TYPE,\n  update: SELECT_ACTION_TYPE,\n  action: noop,\n  refineEvent: makeSelectChangedEvent,\n  publishNonRefinedEvent: true\n});\nregisterAction({\n  type: UNSELECT_ACTION_TYPE,\n  event: SELECT_CHANGED_EVENT_TYPE,\n  update: UNSELECT_ACTION_TYPE,\n  action: noop,\n  refineEvent: makeSelectChangedEvent,\n  publishNonRefinedEvent: true\n});\nregisterAction({\n  type: TOGGLE_SELECT_ACTION_TYPE,\n  event: SELECT_CHANGED_EVENT_TYPE,\n  update: TOGGLE_SELECT_ACTION_TYPE,\n  action: noop,\n  refineEvent: makeSelectChangedEvent,\n  publishNonRefinedEvent: true\n});\nfunction makeSelectChangedEvent(actionResultBatch, payload, ecModel, api) {\n  return {\n    eventContent: {\n      selected: getAllSelectedIndices(ecModel),\n      isFromClick: payload.isFromClick || false\n    }\n  };\n}\n// Default theme, so that we can use `chart.setTheme('default')` to revert to\n// the default theme after changing to other themes.\nregisterTheme('default', {});\nregisterTheme('dark', darkTheme);\n// For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\nexport var dataTool = {};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction dataIndexMapValueLength(valNumOrArrLengthMoreThan2) {\n  return valNumOrArrLengthMoreThan2 == null ? 0 : valNumOrArrLengthMoreThan2.length || 1;\n}\nfunction defaultKeyGetter(item) {\n  return item;\n}\nvar DataDiffer = /** @class */function () {\n  /**\n   * @param context Can be visited by this.context in callback.\n   */\n  function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context,\n  // By default: 'oneToOne'.\n  diffMode) {\n    this._old = oldArr;\n    this._new = newArr;\n    this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\n    this._newKeyGetter = newKeyGetter || defaultKeyGetter;\n    // Visible in callback via `this.context`;\n    this.context = context;\n    this._diffModeMultiple = diffMode === 'multiple';\n  }\n  /**\n   * Callback function when add a data\n   */\n  DataDiffer.prototype.add = function (func) {\n    this._add = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data\n   */\n  DataDiffer.prototype.update = function (func) {\n    this._update = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n  DataDiffer.prototype.updateManyToOne = function (func) {\n    this._updateManyToOne = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n  DataDiffer.prototype.updateOneToMany = function (func) {\n    this._updateOneToMany = func;\n    return this;\n  };\n  /**\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\n   */\n  DataDiffer.prototype.updateManyToMany = function (func) {\n    this._updateManyToMany = func;\n    return this;\n  };\n  /**\n   * Callback function when remove a data\n   */\n  DataDiffer.prototype.remove = function (func) {\n    this._remove = func;\n    return this;\n  };\n  DataDiffer.prototype.execute = function () {\n    this[this._diffModeMultiple ? '_executeMultiple' : '_executeOneToOne']();\n  };\n  DataDiffer.prototype._executeOneToOne = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var newDataIndexMap = {};\n    var oldDataKeyArr = new Array(oldArr.length);\n    var newDataKeyArr = new Array(newArr.length);\n    this._initIndexMap(oldArr, null, oldDataKeyArr, '_oldKeyGetter');\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n    for (var i = 0; i < oldArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      // idx can never be empty array here. see 'set null' logic below.\n      if (newIdxMapValLen > 1) {\n        // Consider there is duplicate key (for example, use dataItem.name as key).\n        // We should make sure every item in newArr and oldArr can be visited.\n        var newIdx = newIdxMapVal.shift();\n        if (newIdxMapVal.length === 1) {\n          newDataIndexMap[oldKey] = newIdxMapVal[0];\n        }\n        this._update && this._update(newIdx, i);\n      } else if (newIdxMapValLen === 1) {\n        newDataIndexMap[oldKey] = null;\n        this._update && this._update(newIdxMapVal, i);\n      } else {\n        this._remove && this._remove(i);\n      }\n    }\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n  /**\n   * For example, consider the case:\n   * oldData: [o0, o1, o2, o3, o4, o5, o6, o7],\n   * newData: [n0, n1, n2, n3, n4, n5, n6, n7, n8],\n   * Where:\n   *     o0, o1, n0 has key 'a' (many to one)\n   *     o5, n4, n5, n6 has key 'b' (one to many)\n   *     o2, n1 has key 'c' (one to one)\n   *     n2, n3 has key 'd' (add)\n   *     o3, o4 has key 'e' (remove)\n   *     o6, o7, n7, n8 has key 'f' (many to many, treated as add and remove)\n   * Then:\n   *     (The order of the following directives are not ensured.)\n   *     this._updateManyToOne(n0, [o0, o1]);\n   *     this._updateOneToMany([n4, n5, n6], o5);\n   *     this._update(n1, o2);\n   *     this._remove(o3);\n   *     this._remove(o4);\n   *     this._remove(o6);\n   *     this._remove(o7);\n   *     this._add(n2);\n   *     this._add(n3);\n   *     this._add(n7);\n   *     this._add(n8);\n   */\n  DataDiffer.prototype._executeMultiple = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var oldDataIndexMap = {};\n    var newDataIndexMap = {};\n    var oldDataKeyArr = [];\n    var newDataKeyArr = [];\n    this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n    for (var i = 0; i < oldDataKeyArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var oldIdxMapVal = oldDataIndexMap[oldKey];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var oldIdxMapValLen = dataIndexMapValueLength(oldIdxMapVal);\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      if (oldIdxMapValLen > 1 && newIdxMapValLen === 1) {\n        this._updateManyToOne && this._updateManyToOne(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen > 1) {\n        this._updateOneToMany && this._updateOneToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen === 1) {\n        this._update && this._update(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1 && newIdxMapValLen > 1) {\n        this._updateManyToMany && this._updateManyToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1) {\n        for (var i_1 = 0; i_1 < oldIdxMapValLen; i_1++) {\n          this._remove && this._remove(oldIdxMapVal[i_1]);\n        }\n      } else {\n        this._remove && this._remove(oldIdxMapVal);\n      }\n    }\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n  DataDiffer.prototype._performRestAdd = function (newDataKeyArr, newDataIndexMap) {\n    for (var i = 0; i < newDataKeyArr.length; i++) {\n      var newKey = newDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[newKey];\n      var idxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      if (idxMapValLen > 1) {\n        for (var j = 0; j < idxMapValLen; j++) {\n          this._add && this._add(newIdxMapVal[j]);\n        }\n      } else if (idxMapValLen === 1) {\n        this._add && this._add(newIdxMapVal);\n      }\n      // Support both `newDataKeyArr` are duplication removed or not removed.\n      newDataIndexMap[newKey] = null;\n    }\n  };\n  DataDiffer.prototype._initIndexMap = function (arr,\n  // Can be null.\n  map,\n  // In 'byKey', the output `keyArr` is duplication removed.\n  // In 'byIndex', the output `keyArr` is not duplication removed and\n  //     its indices are accurately corresponding to `arr`.\n  keyArr, keyGetterName) {\n    var cbModeMultiple = this._diffModeMultiple;\n    for (var i = 0; i < arr.length; i++) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var key = '_ec_' + this[keyGetterName](arr[i], i);\n      if (!cbModeMultiple) {\n        keyArr[i] = key;\n      }\n      if (!map) {\n        continue;\n      }\n      var idxMapVal = map[key];\n      var idxMapValLen = dataIndexMapValueLength(idxMapVal);\n      if (idxMapValLen === 0) {\n        // Simple optimize: in most cases, one index has one key,\n        // do not need array.\n        map[key] = i;\n        if (cbModeMultiple) {\n          keyArr.push(key);\n        }\n      } else if (idxMapValLen === 1) {\n        map[key] = [idxMapVal, i];\n      } else {\n        idxMapVal.push(i);\n      }\n    }\n  };\n  return DataDiffer;\n}();\nexport default DataDiffer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, createHashMap, assert, map } from 'zrender/lib/core/util.js';\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\nvar DimensionUserOuput = /** @class */function () {\n  function DimensionUserOuput(encode, dimRequest) {\n    this._encode = encode;\n    this._schema = dimRequest;\n  }\n  DimensionUserOuput.prototype.get = function () {\n    return {\n      // Do not generate full dimension name until fist used.\n      fullDimensions: this._getFullDimensionNames(),\n      encode: this._encode\n    };\n  };\n  /**\n   * Get all data store dimension names.\n   * Theoretically a series data store is defined both by series and used dataset (if any).\n   * If some dimensions are omitted for performance reason in `this.dimensions`,\n   * the dimension name may not be auto-generated if user does not specify a dimension name.\n   * In this case, the dimension name is `null`/`undefined`.\n   */\n  DimensionUserOuput.prototype._getFullDimensionNames = function () {\n    if (!this._cachedDimNames) {\n      this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : [];\n    }\n    return this._cachedDimNames;\n  };\n  return DimensionUserOuput;\n}();\n;\nexport function summarizeDimensions(data, schema) {\n  var summary = {};\n  var encode = summary.encode = {};\n  var notExtraCoordDimMap = createHashMap();\n  var defaultedLabel = [];\n  var defaultedTooltip = [];\n  var userOutputEncode = {};\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n    var coordDim = dimItem.coordDim;\n    if (coordDim) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(VISUAL_DIMENSIONS.get(coordDim) == null);\n      }\n      var coordDimIndex = dimItem.coordDimIndex;\n      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n      if (!dimItem.isExtraCoord) {\n        notExtraCoordDimMap.set(coordDim, 1);\n        // Use the last coord dim (and label friendly) as default label,\n        // because when dataset is used, it is hard to guess which dimension\n        // can be value dimension. If both show x, y on label is not look good,\n        // and conventionally y axis is focused more.\n        if (mayLabelDimType(dimItem.type)) {\n          defaultedLabel[0] = dimName;\n        }\n        // User output encode do not contain generated coords.\n        // And it only has index. User can use index to retrieve value from the raw item array.\n        getOrCreateEncodeArr(userOutputEncode, coordDim)[coordDimIndex] = data.getDimensionIndex(dimItem.name);\n      }\n      if (dimItem.defaultTooltip) {\n        defaultedTooltip.push(dimName);\n      }\n    }\n    VISUAL_DIMENSIONS.each(function (v, otherDim) {\n      var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n      var dimIndex = dimItem.otherDims[otherDim];\n      if (dimIndex != null && dimIndex !== false) {\n        encodeArr[dimIndex] = dimItem.name;\n      }\n    });\n  });\n  var dataDimsOnCoord = [];\n  var encodeFirstDimNotExtra = {};\n  notExtraCoordDimMap.each(function (v, coordDim) {\n    var dimArr = encode[coordDim];\n    encodeFirstDimNotExtra[coordDim] = dimArr[0];\n    // Not necessary to remove duplicate, because a data\n    // dim canot on more than one coordDim.\n    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n  });\n  summary.dataDimsOnCoord = dataDimsOnCoord;\n  summary.dataDimIndicesOnCoord = map(dataDimsOnCoord, function (dimName) {\n    return data.getDimensionInfo(dimName).storeDimIndex;\n  });\n  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n  var encodeLabel = encode.label;\n  // FIXME `encode.label` is not recommended, because formatter cannot be set\n  // in this way. Use label.formatter instead. Maybe remove this approach someday.\n  if (encodeLabel && encodeLabel.length) {\n    defaultedLabel = encodeLabel.slice();\n  }\n  var encodeTooltip = encode.tooltip;\n  if (encodeTooltip && encodeTooltip.length) {\n    defaultedTooltip = encodeTooltip.slice();\n  } else if (!defaultedTooltip.length) {\n    defaultedTooltip = defaultedLabel.slice();\n  }\n  encode.defaultedLabel = defaultedLabel;\n  encode.defaultedTooltip = defaultedTooltip;\n  summary.userOutput = new DimensionUserOuput(userOutputEncode, schema);\n  return summary;\n}\nfunction getOrCreateEncodeArr(encode, dim) {\n  if (!encode.hasOwnProperty(dim)) {\n    encode[dim] = [];\n  }\n  return encode[dim];\n}\n// FIXME:TS should be type `AxisType`\nexport function getDimensionTypeByAxis(axisType) {\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n}\nfunction mayLabelDimType(dimType) {\n  // In most cases, ordinal and time do not suitable for label.\n  // Ordinal info can be displayed on axis. Time is too long.\n  return !(dimType === 'ordinal' || dimType === 'time');\n}\n// function findTheLastDimMayLabel(data) {\n//     // Get last value dim\n//     let dimensions = data.dimensions.slice();\n//     let valueType;\n//     let valueDim;\n//     while (dimensions.length && (\n//         valueDim = dimensions.pop(),\n//         valueType = data.getDimensionInfo(valueDim).type,\n//         valueType === 'ordinal' || valueType === 'time'\n//     )) {} // jshint ignore:line\n//     return valueDim;\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar SeriesDimensionDefine = /** @class */function () {\n  /**\n   * @param opt All of the fields will be shallow copied.\n   */\n  function SeriesDimensionDefine(opt) {\n    /**\n     * The format of `otherDims` is:\n     * ```js\n     * {\n     *     tooltip?: number\n     *     label?: number\n     *     itemName?: number\n     *     seriesName?: number\n     * }\n     * ```\n     *\n     * A `series.encode` can specified these fields:\n     * ```js\n     * encode: {\n     *     // \"3, 1, 5\" is the index of data dimension.\n     *     tooltip: [3, 1, 5],\n     *     label: [0, 3],\n     *     ...\n     * }\n     * ```\n     * `otherDims` is the parse result of the `series.encode` above, like:\n     * ```js\n     * // Suppose the index of this data dimension is `3`.\n     * this.otherDims = {\n     *     // `3` is at the index `0` of the `encode.tooltip`\n     *     tooltip: 0,\n     *     // `3` is at the index `1` of the `encode.label`\n     *     label: 1\n     * };\n     * ```\n     *\n     * This prop should never be `null`/`undefined` after initialized.\n     */\n    this.otherDims = {};\n    if (opt != null) {\n      zrUtil.extend(this, opt);\n    }\n  }\n  return SeriesDimensionDefine;\n}();\n;\nexport default SeriesDimensionDefine;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { shouldRetrieveDataByName } from '../Source.js';\nvar inner = makeInner();\nvar dimTypeShort = {\n  float: 'f',\n  int: 'i',\n  ordinal: 'o',\n  number: 'n',\n  time: 't'\n};\n/**\n * Represents the dimension requirement of a series.\n *\n * NOTICE:\n * When there are too many dimensions in dataset and many series, only the used dimensions\n * (i.e., used by coord sys and declared in `series.encode`) are add to `dimensionDefineList`.\n * But users may query data by other unused dimension names.\n * In this case, users can only query data if and only if they have defined dimension names\n * via ec option, so we provide `getDimensionIndexFromSource`, which only query them from\n * `source` dimensions.\n */\nvar SeriesDataSchema = /** @class */function () {\n  function SeriesDataSchema(opt) {\n    this.dimensions = opt.dimensions;\n    this._dimOmitted = opt.dimensionOmitted;\n    this.source = opt.source;\n    this._fullDimCount = opt.fullDimensionCount;\n    this._updateDimOmitted(opt.dimensionOmitted);\n  }\n  SeriesDataSchema.prototype.isDimensionOmitted = function () {\n    return this._dimOmitted;\n  };\n  SeriesDataSchema.prototype._updateDimOmitted = function (dimensionOmitted) {\n    this._dimOmitted = dimensionOmitted;\n    if (!dimensionOmitted) {\n      return;\n    }\n    if (!this._dimNameMap) {\n      this._dimNameMap = ensureSourceDimNameMap(this.source);\n    }\n  };\n  /**\n   * @caution Can only be used when `dimensionOmitted: true`.\n   *\n   * Get index by user defined dimension name (i.e., not internal generate name).\n   * That is, get index from `dimensionsDefine`.\n   * If no `dimensionsDefine`, or no name get, return -1.\n   */\n  SeriesDataSchema.prototype.getSourceDimensionIndex = function (dimName) {\n    return retrieve2(this._dimNameMap.get(dimName), -1);\n  };\n  /**\n   * @caution Can only be used when `dimensionOmitted: true`.\n   *\n   * Notice: may return `null`/`undefined` if user not specify dimension names.\n   */\n  SeriesDataSchema.prototype.getSourceDimension = function (dimIndex) {\n    var dimensionsDefine = this.source.dimensionsDefine;\n    if (dimensionsDefine) {\n      return dimensionsDefine[dimIndex];\n    }\n  };\n  SeriesDataSchema.prototype.makeStoreSchema = function () {\n    var dimCount = this._fullDimCount;\n    var willRetrieveDataByName = shouldRetrieveDataByName(this.source);\n    var makeHashStrict = !shouldOmitUnusedDimensions(dimCount);\n    // If source don't have dimensions or series don't omit unsed dimensions.\n    // Generate from seriesDimList directly\n    var dimHash = '';\n    var dims = [];\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < dimCount; fullDimIdx++) {\n      var property = void 0;\n      var type = void 0;\n      var ordinalMeta = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx];\n      // The list has been sorted by `storeDimIndex` asc.\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        property = willRetrieveDataByName ? seriesDimDef.name : null;\n        type = seriesDimDef.type;\n        ordinalMeta = seriesDimDef.ordinalMeta;\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n        if (sourceDimDef) {\n          property = willRetrieveDataByName ? sourceDimDef.name : null;\n          type = sourceDimDef.type;\n        }\n      }\n      dims.push({\n        property: property,\n        type: type,\n        ordinalMeta: ordinalMeta\n      });\n      // If retrieving data by index,\n      //   use <index, type, ordinalMeta> to determine whether data can be shared.\n      //   (Because in this case there might be no dimension name defined in dataset, but indices always exists).\n      //   (Indices are always 0, 1, 2, ..., so we can ignore them to shorten the hash).\n      // Otherwise if retrieving data by property name (like `data: [{aa: 123, bb: 765}, ...]`),\n      //   use <property, type, ordinalMeta> in hash.\n      if (willRetrieveDataByName && property != null\n      // For data stack, we have make sure each series has its own dim on this store.\n      // So we do not add property to hash to make sure they can share this store.\n      && (!seriesDimDef || !seriesDimDef.isCalculationCoord)) {\n        dimHash += makeHashStrict\n        // Use escape character '`' in case that property name contains '$'.\n        ? property.replace(/\\`/g, '`1').replace(/\\$/g, '`2')\n        // For better performance, when there are large dimensions, tolerant this defects that hardly meet.\n        : property;\n      }\n      dimHash += '$';\n      dimHash += dimTypeShort[type] || 'f';\n      if (ordinalMeta) {\n        dimHash += ordinalMeta.uid;\n      }\n      dimHash += '$';\n    }\n    // Source from endpoint(usually series) will be read differently\n    // when seriesLayoutBy or startIndex(which is affected by sourceHeader) are different.\n    // So we use this three props as key.\n    var source = this.source;\n    var hash = [source.seriesLayoutBy, source.startIndex, dimHash].join('$$');\n    return {\n      dimensions: dims,\n      hash: hash\n    };\n  };\n  SeriesDataSchema.prototype.makeOutputDimensionNames = function () {\n    var result = [];\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < this._fullDimCount; fullDimIdx++) {\n      var name_1 = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx];\n      // The list has been sorted by `storeDimIndex` asc.\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        if (!seriesDimDef.isCalculationCoord) {\n          name_1 = seriesDimDef.name;\n        }\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n        if (sourceDimDef) {\n          name_1 = sourceDimDef.name;\n        }\n      }\n      result.push(name_1);\n    }\n    return result;\n  };\n  SeriesDataSchema.prototype.appendCalculationDimension = function (dimDef) {\n    this.dimensions.push(dimDef);\n    dimDef.isCalculationCoord = true;\n    this._fullDimCount++;\n    // If append dimension on a data store, consider the store\n    // might be shared by different series, series dimensions not\n    // really map to store dimensions.\n    this._updateDimOmitted(true);\n  };\n  return SeriesDataSchema;\n}();\nexport { SeriesDataSchema };\nexport function isSeriesDataSchema(schema) {\n  return schema instanceof SeriesDataSchema;\n}\nexport function createDimNameMap(dimsDef) {\n  var dataDimNameMap = createHashMap();\n  for (var i = 0; i < (dimsDef || []).length; i++) {\n    var dimDefItemRaw = dimsDef[i];\n    var userDimName = isObject(dimDefItemRaw) ? dimDefItemRaw.name : dimDefItemRaw;\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      dataDimNameMap.set(userDimName, i);\n    }\n  }\n  return dataDimNameMap;\n}\nexport function ensureSourceDimNameMap(source) {\n  var innerSource = inner(source);\n  return innerSource.dimNameMap || (innerSource.dimNameMap = createDimNameMap(source.dimensionsDefine));\n}\nexport function shouldOmitUnusedDimensions(dimCount) {\n  return dimCount > 30;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/* global Int32Array */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../model/Model.js';\nimport DataDiffer from './DataDiffer.js';\nimport { DefaultDataProvider } from './helper/dataProvider.js';\nimport { summarizeDimensions } from './helper/dimensionHelper.js';\nimport SeriesDimensionDefine from './SeriesDimensionDefine.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../util/types.js';\nimport { convertOptionIdName, isDataItemOption } from '../util/model.js';\nimport { setCommonECData } from '../util/innerStore.js';\nimport { isSourceInstance } from './Source.js';\nimport DataStore from './DataStore.js';\nimport { isSeriesDataSchema } from './helper/SeriesDataSchema.js';\nvar isObject = zrUtil.isObject;\nvar map = zrUtil.map;\nvar CtorInt32Array = typeof Int32Array === 'undefined' ? Array : Int32Array;\n// Use prefix to avoid index to be the same as otherIdList[idx],\n// which will cause weird update animation.\nvar ID_PREFIX = 'e\\0\\0';\nvar INDEX_NOT_FOUND = -1;\n// type SeriesDimensionIndex = DimensionIndex;\nvar TRANSFERABLE_PROPERTIES = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_dimSummary', 'userOutput', '_rawData', '_dimValueGetter', '_nameDimIdx', '_idDimIdx', '_nameRepeatCount'];\nvar CLONE_PROPERTIES = ['_approximateExtent'];\n// -----------------------------\n// Internal method declarations:\n// -----------------------------\nvar prepareInvertedIndex;\nvar getId;\nvar getIdNameFromStore;\nvar normalizeDimensions;\nvar transferProperties;\nvar cloneListForMapAndSample;\nvar makeIdFromName;\nvar SeriesData = /** @class */function () {\n  /**\n   * @param dimensionsInput.dimensions\n   *        For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\n   *        Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\n   */\n  function SeriesData(dimensionsInput, hostModel) {\n    this.type = 'list';\n    this._dimOmitted = false;\n    this._nameList = [];\n    this._idList = [];\n    // Models of data option is stored sparse for optimizing memory cost\n    // Never used yet (not used yet).\n    // private _optionModels: Model[] = [];\n    // Global visual properties after visual coding\n    this._visual = {};\n    // Global layout properties.\n    this._layout = {};\n    // Item visual properties after visual coding\n    this._itemVisuals = [];\n    // Item layout properties after layout\n    this._itemLayouts = [];\n    // Graphic elements\n    this._graphicEls = [];\n    // key: dim, value: extent\n    this._approximateExtent = {};\n    this._calculationInfo = {};\n    // Having detected that there is data item is non primitive type\n    // (in type `OptionDataItemObject`).\n    // Like `data: [ { value: xx, itemStyle: {...} }, ...]`\n    // At present it only happen in `SOURCE_FORMAT_ORIGINAL`.\n    this.hasItemOption = false;\n    // Methods that create a new list based on this list should be listed here.\n    // Notice that those method should `RETURN` the new list.\n    this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'minmaxDownSample', 'lttbDownSample', 'map'];\n    // Methods that change indices of this list should be listed here.\n    this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\n    this.DOWNSAMPLE_METHODS = ['downSample', 'minmaxDownSample', 'lttbDownSample'];\n    var dimensions;\n    var assignStoreDimIdx = false;\n    if (isSeriesDataSchema(dimensionsInput)) {\n      dimensions = dimensionsInput.dimensions;\n      this._dimOmitted = dimensionsInput.isDimensionOmitted();\n      this._schema = dimensionsInput;\n    } else {\n      assignStoreDimIdx = true;\n      dimensions = dimensionsInput;\n    }\n    dimensions = dimensions || ['x', 'y'];\n    var dimensionInfos = {};\n    var dimensionNames = [];\n    var invertedIndicesMap = {};\n    var needsHasOwn = false;\n    var emptyObj = {};\n    for (var i = 0; i < dimensions.length; i++) {\n      // Use the original dimensions[i], where other flag props may exists.\n      var dimInfoInput = dimensions[i];\n      var dimensionInfo = zrUtil.isString(dimInfoInput) ? new SeriesDimensionDefine({\n        name: dimInfoInput\n      }) : !(dimInfoInput instanceof SeriesDimensionDefine) ? new SeriesDimensionDefine(dimInfoInput) : dimInfoInput;\n      var dimensionName = dimensionInfo.name;\n      dimensionInfo.type = dimensionInfo.type || 'float';\n      if (!dimensionInfo.coordDim) {\n        dimensionInfo.coordDim = dimensionName;\n        dimensionInfo.coordDimIndex = 0;\n      }\n      var otherDims = dimensionInfo.otherDims = dimensionInfo.otherDims || {};\n      dimensionNames.push(dimensionName);\n      dimensionInfos[dimensionName] = dimensionInfo;\n      if (emptyObj[dimensionName] != null) {\n        needsHasOwn = true;\n      }\n      if (dimensionInfo.createInvertedIndices) {\n        invertedIndicesMap[dimensionName] = [];\n      }\n      var dimIdx = i;\n      if (zrUtil.isNumber(dimensionInfo.storeDimIndex)) {\n        dimIdx = dimensionInfo.storeDimIndex;\n      }\n      if (otherDims.itemName === 0) {\n        this._nameDimIdx = dimIdx;\n      }\n      if (otherDims.itemId === 0) {\n        this._idDimIdx = dimIdx;\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.assert(assignStoreDimIdx || dimensionInfo.storeDimIndex >= 0);\n      }\n      if (assignStoreDimIdx) {\n        dimensionInfo.storeDimIndex = i;\n      }\n    }\n    this.dimensions = dimensionNames;\n    this._dimInfos = dimensionInfos;\n    this._initGetDimensionInfo(needsHasOwn);\n    this.hostModel = hostModel;\n    this._invertedIndicesMap = invertedIndicesMap;\n    if (this._dimOmitted) {\n      var dimIdxToName_1 = this._dimIdxToName = zrUtil.createHashMap();\n      zrUtil.each(dimensionNames, function (dimName) {\n        dimIdxToName_1.set(dimensionInfos[dimName].storeDimIndex, dimName);\n      });\n    }\n  }\n  /**\n   *\n   * Get concrete dimension name by dimension name or dimension index.\n   * If input a dimension name, do not validate whether the dimension name exits.\n   *\n   * @caution\n   * @param dim Must make sure the dimension is `SeriesDimensionLoose`.\n   * Because only those dimensions will have auto-generated dimension names if not\n   * have a user-specified name, and other dimensions will get a return of null/undefined.\n   *\n   * @notice Because of this reason, should better use `getDimensionIndex` instead, for examples:\n   * ```js\n   * const val = data.getStore().get(data.getDimensionIndex(dim), dataIdx);\n   * ```\n   *\n   * @return Concrete dim name.\n   */\n  SeriesData.prototype.getDimension = function (dim) {\n    var dimIdx = this._recognizeDimIndex(dim);\n    if (dimIdx == null) {\n      return dim;\n    }\n    dimIdx = dim;\n    if (!this._dimOmitted) {\n      return this.dimensions[dimIdx];\n    }\n    // Retrieve from series dimension definition because it probably contains\n    // generated dimension name (like 'x', 'y').\n    var dimName = this._dimIdxToName.get(dimIdx);\n    if (dimName != null) {\n      return dimName;\n    }\n    var sourceDimDef = this._schema.getSourceDimension(dimIdx);\n    if (sourceDimDef) {\n      return sourceDimDef.name;\n    }\n  };\n  /**\n   * Get dimension index in data store. Return -1 if not found.\n   * Can be used to index value from getRawValue.\n   */\n  SeriesData.prototype.getDimensionIndex = function (dim) {\n    var dimIdx = this._recognizeDimIndex(dim);\n    if (dimIdx != null) {\n      return dimIdx;\n    }\n    if (dim == null) {\n      return -1;\n    }\n    var dimInfo = this._getDimInfo(dim);\n    return dimInfo ? dimInfo.storeDimIndex : this._dimOmitted ? this._schema.getSourceDimensionIndex(dim) : -1;\n  };\n  /**\n   * The meanings of the input parameter `dim`:\n   *\n   * + If dim is a number (e.g., `1`), it means the index of the dimension.\n   *   For example, `getDimension(0)` will return 'x' or 'lng' or 'radius'.\n   * + If dim is a number-like string (e.g., `\"1\"`):\n   *     + If there is the same concrete dim name defined in `series.dimensions` or `dataset.dimensions`,\n   *        it means that concrete name.\n   *     + If not, it will be converted to a number, which means the index of the dimension.\n   *        (why? because of the backward compatibility. We have been tolerating number-like string in\n   *        dimension setting, although now it seems that it is not a good idea.)\n   *     For example, `visualMap[i].dimension: \"1\"` is the same meaning as `visualMap[i].dimension: 1`,\n   *     if no dimension name is defined as `\"1\"`.\n   * + If dim is a not-number-like string, it means the concrete dim name.\n   *   For example, it can be be default name `\"x\"`, `\"y\"`, `\"z\"`, `\"lng\"`, `\"lat\"`, `\"angle\"`, `\"radius\"`,\n   *   or customized in `dimensions` property of option like `\"age\"`.\n   *\n   * @return recognized `DimensionIndex`. Otherwise return null/undefined (means that dim is `DimensionName`).\n   */\n  SeriesData.prototype._recognizeDimIndex = function (dim) {\n    if (zrUtil.isNumber(dim)\n    // If being a number-like string but not being defined as a dimension name.\n    || dim != null && !isNaN(dim) && !this._getDimInfo(dim) && (!this._dimOmitted || this._schema.getSourceDimensionIndex(dim) < 0)) {\n      return +dim;\n    }\n  };\n  SeriesData.prototype._getStoreDimIndex = function (dim) {\n    var dimIdx = this.getDimensionIndex(dim);\n    if (process.env.NODE_ENV !== 'production') {\n      if (dimIdx == null) {\n        throw new Error('Unknown dimension ' + dim);\n      }\n    }\n    return dimIdx;\n  };\n  /**\n   * Get type and calculation info of particular dimension\n   * @param dim\n   *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\n   *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\n   */\n  SeriesData.prototype.getDimensionInfo = function (dim) {\n    // Do not clone, because there may be categories in dimInfo.\n    return this._getDimInfo(this.getDimension(dim));\n  };\n  SeriesData.prototype._initGetDimensionInfo = function (needsHasOwn) {\n    var dimensionInfos = this._dimInfos;\n    this._getDimInfo = needsHasOwn ? function (dimName) {\n      return dimensionInfos.hasOwnProperty(dimName) ? dimensionInfos[dimName] : undefined;\n    } : function (dimName) {\n      return dimensionInfos[dimName];\n    };\n  };\n  /**\n   * concrete dimension name list on coord.\n   */\n  SeriesData.prototype.getDimensionsOnCoord = function () {\n    return this._dimSummary.dataDimsOnCoord.slice();\n  };\n  SeriesData.prototype.mapDimension = function (coordDim, idx) {\n    var dimensionsSummary = this._dimSummary;\n    if (idx == null) {\n      return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\n    }\n    var dims = dimensionsSummary.encode[coordDim];\n    return dims ? dims[idx] : null;\n  };\n  SeriesData.prototype.mapDimensionsAll = function (coordDim) {\n    var dimensionsSummary = this._dimSummary;\n    var dims = dimensionsSummary.encode[coordDim];\n    return (dims || []).slice();\n  };\n  SeriesData.prototype.getStore = function () {\n    return this._store;\n  };\n  /**\n   * Initialize from data\n   * @param data source or data or data store.\n   * @param nameList The name of a datum is used on data diff and\n   *        default label/tooltip.\n   *        A name can be specified in encode.itemName,\n   *        or dataItem.name (only for series option data),\n   *        or provided in nameList from outside.\n   */\n  SeriesData.prototype.initData = function (data, nameList, dimValueGetter) {\n    var _this = this;\n    var store;\n    if (data instanceof DataStore) {\n      store = data;\n    }\n    if (!store) {\n      var dimensions = this.dimensions;\n      var provider = isSourceInstance(data) || zrUtil.isArrayLike(data) ? new DefaultDataProvider(data, dimensions.length) : data;\n      store = new DataStore();\n      var dimensionInfos = map(dimensions, function (dimName) {\n        return {\n          type: _this._dimInfos[dimName].type,\n          property: dimName\n        };\n      });\n      store.initData(provider, dimensionInfos, dimValueGetter);\n    }\n    this._store = store;\n    // Reset\n    this._nameList = (nameList || []).slice();\n    this._idList = [];\n    this._nameRepeatCount = {};\n    this._doInit(0, store.count());\n    // Cache summary info for fast visit. See \"dimensionHelper\".\n    // Needs to be initialized after store is prepared.\n    this._dimSummary = summarizeDimensions(this, this._schema);\n    this.userOutput = this._dimSummary.userOutput;\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   */\n  SeriesData.prototype.appendData = function (data) {\n    var range = this._store.appendData(data);\n    this._doInit(range[0], range[1]);\n  };\n  /**\n   * Caution: Can be only called on raw data (before `this._indices` created).\n   * This method does not modify `rawData` (`dataProvider`), but only\n   * add values to store.\n   *\n   * The final count will be increased by `Math.max(values.length, names.length)`.\n   *\n   * @param values That is the SourceType: 'arrayRows', like\n   *        [\n   *            [12, 33, 44],\n   *            [NaN, 43, 1],\n   *            ['-', 'asdf', 0]\n   *        ]\n   *        Each item is exactly corresponding to a dimension.\n   */\n  SeriesData.prototype.appendValues = function (values, names) {\n    var _a = this._store.appendValues(values, names && names.length),\n      start = _a.start,\n      end = _a.end;\n    var shouldMakeIdFromName = this._shouldMakeIdFromName();\n    this._updateOrdinalMeta();\n    if (names) {\n      for (var idx = start; idx < end; idx++) {\n        var sourceIdx = idx - start;\n        this._nameList[idx] = names[sourceIdx];\n        if (shouldMakeIdFromName) {\n          makeIdFromName(this, idx);\n        }\n      }\n    }\n  };\n  SeriesData.prototype._updateOrdinalMeta = function () {\n    var store = this._store;\n    var dimensions = this.dimensions;\n    for (var i = 0; i < dimensions.length; i++) {\n      var dimInfo = this._dimInfos[dimensions[i]];\n      if (dimInfo.ordinalMeta) {\n        store.collectOrdinalMeta(dimInfo.storeDimIndex, dimInfo.ordinalMeta);\n      }\n    }\n  };\n  SeriesData.prototype._shouldMakeIdFromName = function () {\n    var provider = this._store.getProvider();\n    return this._idDimIdx == null && provider.getSource().sourceFormat !== SOURCE_FORMAT_TYPED_ARRAY && !provider.fillStorage;\n  };\n  SeriesData.prototype._doInit = function (start, end) {\n    if (start >= end) {\n      return;\n    }\n    var store = this._store;\n    var provider = store.getProvider();\n    this._updateOrdinalMeta();\n    var nameList = this._nameList;\n    var idList = this._idList;\n    var sourceFormat = provider.getSource().sourceFormat;\n    var isFormatOriginal = sourceFormat === SOURCE_FORMAT_ORIGINAL;\n    // Each data item is value\n    // [1, 2]\n    // 2\n    // Bar chart, line chart which uses category axis\n    // only gives the 'y' value. 'x' value is the indices of category\n    // Use a tempValue to normalize the value to be a (x, y) value\n    // If dataItem is {name: ...} or {id: ...}, it has highest priority.\n    // This kind of ids and names are always stored `_nameList` and `_idList`.\n    if (isFormatOriginal && !provider.pure) {\n      var sharedDataItem = [];\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        var dataItem = provider.getItem(idx, sharedDataItem);\n        if (!this.hasItemOption && isDataItemOption(dataItem)) {\n          this.hasItemOption = true;\n        }\n        if (dataItem) {\n          var itemName = dataItem.name;\n          if (nameList[idx] == null && itemName != null) {\n            nameList[idx] = convertOptionIdName(itemName, null);\n          }\n          var itemId = dataItem.id;\n          if (idList[idx] == null && itemId != null) {\n            idList[idx] = convertOptionIdName(itemId, null);\n          }\n        }\n      }\n    }\n    if (this._shouldMakeIdFromName()) {\n      for (var idx = start; idx < end; idx++) {\n        makeIdFromName(this, idx);\n      }\n    }\n    prepareInvertedIndex(this);\n  };\n  /**\n   * PENDING: In fact currently this function is only used to short-circuit\n   * the calling of `scale.unionExtentFromData` when data have been filtered by modules\n   * like \"dataZoom\". `scale.unionExtentFromData` is used to calculate data extent for series on\n   * an axis, but if a \"axis related data filter module\" is used, the extent of the axis have\n   * been fixed and no need to calling `scale.unionExtentFromData` actually.\n   * But if we add \"custom data filter\" in future, which is not \"axis related\", this method may\n   * be still needed.\n   *\n   * Optimize for the scenario that data is filtered by a given extent.\n   * Consider that if data amount is more than hundreds of thousand,\n   * extent calculation will cost more than 10ms and the cache will\n   * be erased because of the filtering.\n   */\n  SeriesData.prototype.getApproximateExtent = function (dim) {\n    return this._approximateExtent[dim] || this._store.getDataExtent(this._getStoreDimIndex(dim));\n  };\n  /**\n   * Calculate extent on a filtered data might be time consuming.\n   * Approximate extent is only used for: calculate extent of filtered data outside.\n   */\n  SeriesData.prototype.setApproximateExtent = function (extent, dim) {\n    dim = this.getDimension(dim);\n    this._approximateExtent[dim] = extent.slice();\n  };\n  SeriesData.prototype.getCalculationInfo = function (key) {\n    return this._calculationInfo[key];\n  };\n  SeriesData.prototype.setCalculationInfo = function (key, value) {\n    isObject(key) ? zrUtil.extend(this._calculationInfo, key) : this._calculationInfo[key] = value;\n  };\n  /**\n   * @return Never be null/undefined. `number` will be converted to string. Because:\n   * In most cases, name is used in display, where returning a string is more convenient.\n   * In other cases, name is used in query (see `indexOfName`), where we can keep the\n   * rule that name `2` equals to name `'2'`.\n   */\n  SeriesData.prototype.getName = function (idx) {\n    var rawIndex = this.getRawIndex(idx);\n    var name = this._nameList[rawIndex];\n    if (name == null && this._nameDimIdx != null) {\n      name = getIdNameFromStore(this, this._nameDimIdx, rawIndex);\n    }\n    if (name == null) {\n      name = '';\n    }\n    return name;\n  };\n  SeriesData.prototype._getCategory = function (dimIdx, idx) {\n    var ordinal = this._store.get(dimIdx, idx);\n    var ordinalMeta = this._store.getOrdinalMeta(dimIdx);\n    if (ordinalMeta) {\n      return ordinalMeta.categories[ordinal];\n    }\n    return ordinal;\n  };\n  /**\n   * @return Never null/undefined. `number` will be converted to string. Because:\n   * In all cases having encountered at present, id is used in making diff comparison, which\n   * are usually based on hash map. We can keep the rule that the internal id are always string\n   * (treat `2` is the same as `'2'`) to make the related logic simple.\n   */\n  SeriesData.prototype.getId = function (idx) {\n    return getId(this, this.getRawIndex(idx));\n  };\n  SeriesData.prototype.count = function () {\n    return this._store.count();\n  };\n  /**\n   * Get value. Return NaN if idx is out of range.\n   *\n   * @notice Should better to use `data.getStore().get(dimIndex, dataIdx)` instead.\n   */\n  SeriesData.prototype.get = function (dim, idx) {\n    var store = this._store;\n    var dimInfo = this._dimInfos[dim];\n    if (dimInfo) {\n      return store.get(dimInfo.storeDimIndex, idx);\n    }\n  };\n  /**\n   * @notice Should better to use `data.getStore().getByRawIndex(dimIndex, dataIdx)` instead.\n   */\n  SeriesData.prototype.getByRawIndex = function (dim, rawIdx) {\n    var store = this._store;\n    var dimInfo = this._dimInfos[dim];\n    if (dimInfo) {\n      return store.getByRawIndex(dimInfo.storeDimIndex, rawIdx);\n    }\n  };\n  SeriesData.prototype.getIndices = function () {\n    return this._store.getIndices();\n  };\n  SeriesData.prototype.getDataExtent = function (dim) {\n    return this._store.getDataExtent(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getSum = function (dim) {\n    return this._store.getSum(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getMedian = function (dim) {\n    return this._store.getMedian(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getValues = function (dimensions, idx) {\n    var _this = this;\n    var store = this._store;\n    return zrUtil.isArray(dimensions) ? store.getValues(map(dimensions, function (dim) {\n      return _this._getStoreDimIndex(dim);\n    }), idx) : store.getValues(dimensions);\n  };\n  /**\n   * If value is NaN. Including '-'\n   * Only check the coord dimensions.\n   */\n  SeriesData.prototype.hasValue = function (idx) {\n    var dataDimIndicesOnCoord = this._dimSummary.dataDimIndicesOnCoord;\n    for (var i = 0, len = dataDimIndicesOnCoord.length; i < len; i++) {\n      // Ordinal type originally can be string or number.\n      // But when an ordinal type is used on coord, it can\n      // not be string but only number. So we can also use isNaN.\n      if (isNaN(this._store.get(dataDimIndicesOnCoord[i], idx))) {\n        return false;\n      }\n    }\n    return true;\n  };\n  /**\n   * Retrieve the index with given name\n   */\n  SeriesData.prototype.indexOfName = function (name) {\n    for (var i = 0, len = this._store.count(); i < len; i++) {\n      if (this.getName(i) === name) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  SeriesData.prototype.getRawIndex = function (idx) {\n    return this._store.getRawIndex(idx);\n  };\n  SeriesData.prototype.indexOfRawIndex = function (rawIndex) {\n    return this._store.indexOfRawIndex(rawIndex);\n  };\n  /**\n   * Only support the dimension which inverted index created.\n   * Do not support other cases until required.\n   * @param dim concrete dim\n   * @param value ordinal index\n   * @return rawIndex\n   */\n  SeriesData.prototype.rawIndexOf = function (dim, value) {\n    var invertedIndices = dim && this._invertedIndicesMap[dim];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!invertedIndices) {\n        throw new Error('Do not supported yet');\n      }\n    }\n    var rawIndex = invertedIndices && invertedIndices[value];\n    if (rawIndex == null || isNaN(rawIndex)) {\n      return INDEX_NOT_FOUND;\n    }\n    return rawIndex;\n  };\n  SeriesData.prototype.each = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    this._store.each(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n  };\n  SeriesData.prototype.filterSelf = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    this._store = this._store.filter(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n    return this;\n  };\n  /**\n   * Select data in range. (For optimization of filter)\n   * (Manually inline code, support 5 million data filtering in data zoom.)\n   */\n  SeriesData.prototype.selectRange = function (range) {\n    'use strict';\n\n    var _this = this;\n    var innerRange = {};\n    var dims = zrUtil.keys(range);\n    var dimIndices = [];\n    zrUtil.each(dims, function (dim) {\n      var dimIdx = _this._getStoreDimIndex(dim);\n      innerRange[dimIdx] = range[dim];\n      dimIndices.push(dimIdx);\n    });\n    this._store = this._store.selectRange(innerRange);\n    return this;\n  };\n  /* eslint-enable max-len */\n  SeriesData.prototype.mapArray = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    ctx = ctx || this;\n    var result = [];\n    this.each(dims, function () {\n      result.push(cb && cb.apply(this, arguments));\n    }, ctx);\n    return result;\n  };\n  SeriesData.prototype.map = function (dims, cb, ctx, ctxCompat) {\n    'use strict';\n\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || ctxCompat || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.map(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n    return list;\n  };\n  SeriesData.prototype.modify = function (dims, cb, ctx, ctxCompat) {\n    var _this = this;\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || ctxCompat || this;\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.each(normalizeDimensions(dims), function (dim) {\n        var dimInfo = _this.getDimensionInfo(dim);\n        if (!dimInfo.isCalculationCoord) {\n          console.error('Danger: only stack dimension can be modified');\n        }\n      });\n    }\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    // If do shallow clone here, if there are too many stacked series,\n    // it still cost lots of memory, because `_store.dimensions` are not shared.\n    // We should consider there probably be shallow clone happen in each series\n    // in consequent filter/map.\n    this._store.modify(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n  };\n  /**\n   * Large data down sampling on given dimension\n   * @param sampleIndex Sample index for name and id\n   */\n  SeriesData.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.downSample(this._getStoreDimIndex(dimension), rate, sampleValue, sampleIndex);\n    return list;\n  };\n  /**\n   * Large data down sampling using min-max\n   * @param {string} valueDimension\n   * @param {number} rate\n   */\n  SeriesData.prototype.minmaxDownSample = function (valueDimension, rate) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.minmaxDownSample(this._getStoreDimIndex(valueDimension), rate);\n    return list;\n  };\n  /**\n   * Large data down sampling using largest-triangle-three-buckets\n   * @param {string} valueDimension\n   * @param {number} targetCount\n   */\n  SeriesData.prototype.lttbDownSample = function (valueDimension, rate) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.lttbDownSample(this._getStoreDimIndex(valueDimension), rate);\n    return list;\n  };\n  SeriesData.prototype.getRawDataItem = function (idx) {\n    return this._store.getRawDataItem(idx);\n  };\n  /**\n   * Get model of one data item.\n   */\n  // TODO: Type of data item\n  SeriesData.prototype.getItemModel = function (idx) {\n    var hostModel = this.hostModel;\n    var dataItem = this.getRawDataItem(idx);\n    return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\n  };\n  /**\n   * Create a data differ\n   */\n  SeriesData.prototype.diff = function (otherList) {\n    var thisList = this;\n    return new DataDiffer(otherList ? otherList.getStore().getIndices() : [], this.getStore().getIndices(), function (idx) {\n      return getId(otherList, idx);\n    }, function (idx) {\n      return getId(thisList, idx);\n    });\n  };\n  /**\n   * Get visual property.\n   */\n  SeriesData.prototype.getVisual = function (key) {\n    var visual = this._visual;\n    return visual && visual[key];\n  };\n  SeriesData.prototype.setVisual = function (kvObj, val) {\n    this._visual = this._visual || {};\n    if (isObject(kvObj)) {\n      zrUtil.extend(this._visual, kvObj);\n    } else {\n      this._visual[kvObj] = val;\n    }\n  };\n  /**\n   * Get visual property of single data item\n   */\n  // eslint-disable-next-line\n  SeriesData.prototype.getItemVisual = function (idx, key) {\n    var itemVisual = this._itemVisuals[idx];\n    var val = itemVisual && itemVisual[key];\n    if (val == null) {\n      // Use global visual property\n      return this.getVisual(key);\n    }\n    return val;\n  };\n  /**\n   * If exists visual property of single data item\n   */\n  SeriesData.prototype.hasItemVisual = function () {\n    return this._itemVisuals.length > 0;\n  };\n  /**\n   * Make sure itemVisual property is unique\n   */\n  // TODO: use key to save visual to reduce memory.\n  SeriesData.prototype.ensureUniqueItemVisual = function (idx, key) {\n    var itemVisuals = this._itemVisuals;\n    var itemVisual = itemVisuals[idx];\n    if (!itemVisual) {\n      itemVisual = itemVisuals[idx] = {};\n    }\n    var val = itemVisual[key];\n    if (val == null) {\n      val = this.getVisual(key);\n      // TODO Performance?\n      if (zrUtil.isArray(val)) {\n        val = val.slice();\n      } else if (isObject(val)) {\n        val = zrUtil.extend({}, val);\n      }\n      itemVisual[key] = val;\n    }\n    return val;\n  };\n  // eslint-disable-next-line\n  SeriesData.prototype.setItemVisual = function (idx, key, value) {\n    var itemVisual = this._itemVisuals[idx] || {};\n    this._itemVisuals[idx] = itemVisual;\n    if (isObject(key)) {\n      zrUtil.extend(itemVisual, key);\n    } else {\n      itemVisual[key] = value;\n    }\n  };\n  /**\n   * Clear itemVisuals and list visual.\n   */\n  SeriesData.prototype.clearAllVisual = function () {\n    this._visual = {};\n    this._itemVisuals = [];\n  };\n  SeriesData.prototype.setLayout = function (key, val) {\n    isObject(key) ? zrUtil.extend(this._layout, key) : this._layout[key] = val;\n  };\n  /**\n   * Get layout property.\n   */\n  SeriesData.prototype.getLayout = function (key) {\n    return this._layout[key];\n  };\n  /**\n   * Get layout of single data item\n   */\n  SeriesData.prototype.getItemLayout = function (idx) {\n    return this._itemLayouts[idx];\n  };\n  /**\n   * Set layout of single data item\n   */\n  SeriesData.prototype.setItemLayout = function (idx, layout, merge) {\n    this._itemLayouts[idx] = merge ? zrUtil.extend(this._itemLayouts[idx] || {}, layout) : layout;\n  };\n  /**\n   * Clear all layout of single data item\n   */\n  SeriesData.prototype.clearItemLayouts = function () {\n    this._itemLayouts.length = 0;\n  };\n  /**\n   * Set graphic element relative to data. It can be set as null\n   */\n  SeriesData.prototype.setItemGraphicEl = function (idx, el) {\n    var seriesIndex = this.hostModel && this.hostModel.seriesIndex;\n    setCommonECData(seriesIndex, this.dataType, idx, el);\n    this._graphicEls[idx] = el;\n  };\n  SeriesData.prototype.getItemGraphicEl = function (idx) {\n    return this._graphicEls[idx];\n  };\n  SeriesData.prototype.eachItemGraphicEl = function (cb, context) {\n    zrUtil.each(this._graphicEls, function (el, idx) {\n      if (el) {\n        cb && cb.call(context, el, idx);\n      }\n    });\n  };\n  /**\n   * Shallow clone a new list except visual and layout properties, and graph elements.\n   * New list only change the indices.\n   */\n  SeriesData.prototype.cloneShallow = function (list) {\n    if (!list) {\n      list = new SeriesData(this._schema ? this._schema : map(this.dimensions, this._getDimInfo, this), this.hostModel);\n    }\n    transferProperties(list, this);\n    list._store = this._store;\n    return list;\n  };\n  /**\n   * Wrap some method to add more feature\n   */\n  SeriesData.prototype.wrapMethod = function (methodName, injectFunction) {\n    var originalMethod = this[methodName];\n    if (!zrUtil.isFunction(originalMethod)) {\n      return;\n    }\n    this.__wrappedMethods = this.__wrappedMethods || [];\n    this.__wrappedMethods.push(methodName);\n    this[methodName] = function () {\n      var res = originalMethod.apply(this, arguments);\n      return injectFunction.apply(this, [res].concat(zrUtil.slice(arguments)));\n    };\n  };\n  // ----------------------------------------------------------\n  // A work around for internal method visiting private member.\n  // ----------------------------------------------------------\n  SeriesData.internalField = function () {\n    prepareInvertedIndex = function (data) {\n      var invertedIndicesMap = data._invertedIndicesMap;\n      zrUtil.each(invertedIndicesMap, function (invertedIndices, dim) {\n        var dimInfo = data._dimInfos[dim];\n        // Currently, only dimensions that has ordinalMeta can create inverted indices.\n        var ordinalMeta = dimInfo.ordinalMeta;\n        var store = data._store;\n        if (ordinalMeta) {\n          invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length);\n          // The default value of TypedArray is 0. To avoid miss\n          // mapping to 0, we should set it as INDEX_NOT_FOUND.\n          for (var i = 0; i < invertedIndices.length; i++) {\n            invertedIndices[i] = INDEX_NOT_FOUND;\n          }\n          for (var i = 0; i < store.count(); i++) {\n            // Only support the case that all values are distinct.\n            invertedIndices[store.get(dimInfo.storeDimIndex, i)] = i;\n          }\n        }\n      });\n    };\n    getIdNameFromStore = function (data, dimIdx, idx) {\n      return convertOptionIdName(data._getCategory(dimIdx, idx), null);\n    };\n    /**\n     * @see the comment of `List['getId']`.\n     */\n    getId = function (data, rawIndex) {\n      var id = data._idList[rawIndex];\n      if (id == null && data._idDimIdx != null) {\n        id = getIdNameFromStore(data, data._idDimIdx, rawIndex);\n      }\n      if (id == null) {\n        id = ID_PREFIX + rawIndex;\n      }\n      return id;\n    };\n    normalizeDimensions = function (dimensions) {\n      if (!zrUtil.isArray(dimensions)) {\n        dimensions = dimensions != null ? [dimensions] : [];\n      }\n      return dimensions;\n    };\n    /**\n     * Data in excludeDimensions is copied, otherwise transferred.\n     */\n    cloneListForMapAndSample = function (original) {\n      var list = new SeriesData(original._schema ? original._schema : map(original.dimensions, original._getDimInfo, original), original.hostModel);\n      // FIXME If needs stackedOn, value may already been stacked\n      transferProperties(list, original);\n      return list;\n    };\n    transferProperties = function (target, source) {\n      zrUtil.each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\n        if (source.hasOwnProperty(propName)) {\n          target[propName] = source[propName];\n        }\n      });\n      target.__wrappedMethods = source.__wrappedMethods;\n      zrUtil.each(CLONE_PROPERTIES, function (propName) {\n        target[propName] = zrUtil.clone(source[propName]);\n      });\n      target._calculationInfo = zrUtil.extend({}, source._calculationInfo);\n    };\n    makeIdFromName = function (data, idx) {\n      var nameList = data._nameList;\n      var idList = data._idList;\n      var nameDimIdx = data._nameDimIdx;\n      var idDimIdx = data._idDimIdx;\n      var name = nameList[idx];\n      var id = idList[idx];\n      if (name == null && nameDimIdx != null) {\n        nameList[idx] = name = getIdNameFromStore(data, nameDimIdx, idx);\n      }\n      if (id == null && idDimIdx != null) {\n        idList[idx] = id = getIdNameFromStore(data, idDimIdx, idx);\n      }\n      if (id == null && name != null) {\n        var nameRepeatCount = data._nameRepeatCount;\n        var nmCnt = nameRepeatCount[name] = (nameRepeatCount[name] || 0) + 1;\n        id = name;\n        if (nmCnt > 1) {\n          id += '__ec__' + nmCnt;\n        }\n        idList[idx] = id;\n      }\n    };\n  }();\n  return SeriesData;\n}();\nexport default SeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\nimport SeriesDimensionDefine from '../SeriesDimensionDefine.js';\nimport { createHashMap, defaults, each, extend, isObject, isString } from 'zrender/lib/core/util.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { CtorInt32Array } from '../DataStore.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './sourceHelper.js';\nimport { createDimNameMap, ensureSourceDimNameMap, SeriesDataSchema, shouldOmitUnusedDimensions } from './SeriesDataSchema.js';\n/**\n * For outside usage compat (like echarts-gl are using it).\n */\nexport function createDimensions(source, opt) {\n  return prepareSeriesDataSchema(source, opt).dimensions;\n}\n/**\n * This method builds the relationship between:\n * + \"what the coord sys or series requires (see `coordDimensions`)\",\n * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimensionsDefine` and `opt.encodeDefine`)\"\n * + \"what the data source provids (see `source`)\".\n *\n * Some guess strategy will be adapted if user does not define something.\n * If no 'value' dimension specified, the first no-named dimension will be\n * named as 'value'.\n *\n * @return The results are always sorted by `storeDimIndex` asc.\n */\nexport default function prepareSeriesDataSchema(\n// TODO: TYPE completeDimensions type\nsource, opt) {\n  if (!isSourceInstance(source)) {\n    source = createSourceFromSeriesDataOption(source);\n  }\n  opt = opt || {};\n  var sysDims = opt.coordDimensions || [];\n  var dimsDef = opt.dimensionsDefine || source.dimensionsDefine || [];\n  var coordDimNameMap = createHashMap();\n  var resultList = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimensionsCount);\n  // Try to ignore unused dimensions if sharing a high dimension datastore\n  // 30 is an experience value.\n  var omitUnusedDimensions = opt.canOmitUnusedDimensions && shouldOmitUnusedDimensions(dimCount);\n  var isUsingSourceDimensionsDef = dimsDef === source.dimensionsDefine;\n  var dataDimNameMap = isUsingSourceDimensionsDef ? ensureSourceDimNameMap(source) : createDimNameMap(dimsDef);\n  var encodeDef = opt.encodeDefine;\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n  var encodeDefMap = createHashMap(encodeDef);\n  var indicesMap = new CtorInt32Array(dimCount);\n  for (var i = 0; i < indicesMap.length; i++) {\n    indicesMap[i] = -1;\n  }\n  function getResultItem(dimIdx) {\n    var idx = indicesMap[dimIdx];\n    if (idx < 0) {\n      var dimDefItemRaw = dimsDef[dimIdx];\n      var dimDefItem = isObject(dimDefItemRaw) ? dimDefItemRaw : {\n        name: dimDefItemRaw\n      };\n      var resultItem = new SeriesDimensionDefine();\n      var userDimName = dimDefItem.name;\n      if (userDimName != null && dataDimNameMap.get(userDimName) != null) {\n        // Only if `series.dimensions` is defined in option\n        // displayName, will be set, and dimension will be displayed vertically in\n        // tooltip by default.\n        resultItem.name = resultItem.displayName = userDimName;\n      }\n      dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n      dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n      var newIdx = resultList.length;\n      indicesMap[dimIdx] = newIdx;\n      resultItem.storeDimIndex = dimIdx;\n      resultList.push(resultItem);\n      return resultItem;\n    }\n    return resultList[idx];\n  }\n  if (!omitUnusedDimensions) {\n    for (var i = 0; i < dimCount; i++) {\n      getResultItem(i);\n    }\n  }\n  // Set `coordDim` and `coordDimIndex` by `encodeDefMap` and normalize `encodeDefMap`.\n  encodeDefMap.each(function (dataDimsRaw, coordDim) {\n    var dataDims = normalizeToArray(dataDimsRaw).slice();\n    // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n    // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n    // this case.\n    if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDefMap.set(coordDim, false);\n      return;\n    }\n    var validDataDims = encodeDefMap.set(coordDim, []);\n    each(dataDims, function (resultDimIdxOrName, idx) {\n      // The input resultDimIdx can be dim name or index.\n      var resultDimIdx = isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(getResultItem(resultDimIdx), coordDim, idx);\n      }\n    });\n  });\n  // Apply templates and default order from `sysDims`.\n  var availDimIdx = 0;\n  each(sysDims, function (sysDimItemRaw) {\n    var coordDim;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n    var sysDimItem;\n    if (isString(sysDimItemRaw)) {\n      coordDim = sysDimItemRaw;\n      sysDimItem = {};\n    } else {\n      sysDimItem = sysDimItemRaw;\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = extend({}, sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta;\n      // `coordDimIndex` should not be set directly.\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n    var dataDims = encodeDefMap.get(coordDim);\n    // negative resultDimIdx means no need to mapping.\n    if (dataDims === false) {\n      return;\n    }\n    dataDims = normalizeToArray(dataDims);\n    // dimensions provides default dim sequences.\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < dimCount && getResultItem(availDimIdx).coordDim != null) {\n          availDimIdx++;\n        }\n        availDimIdx < dimCount && dataDims.push(availDimIdx++);\n      }\n    }\n    // Apply templates.\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = getResultItem(resultDimIdx);\n      // Coordinate system has a higher priority on dim type than source.\n      if (isUsingSourceDimensionsDef && sysDimItem.type != null) {\n        resultItem.type = sysDimItem.type;\n      }\n      applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      }\n      // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n      sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (VISUAL_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  }\n  // Make sure the first extra dim is 'value'.\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value';\n  function ifNoNameFillWithCoordName(resultItem) {\n    if (resultItem.name == null) {\n      // Duplication will be removed in the next step.\n      resultItem.name = resultItem.coordDim;\n    }\n  }\n  // Set dim `name` and other `coordDim` and other props.\n  if (!omitUnusedDimensions) {\n    for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n      var resultItem = getResultItem(resultDimIdx);\n      var coordDim = resultItem.coordDim;\n      if (coordDim == null) {\n        // TODO no need to generate coordDim for isExtraCoord?\n        resultItem.coordDim = genCoordDimName(extra, coordDimNameMap, fromZero);\n        resultItem.coordDimIndex = 0;\n        // Series specified generateCoord is using out.\n        if (!generateCoord || generateCoordCount <= 0) {\n          resultItem.isExtraCoord = true;\n        }\n        generateCoordCount--;\n      }\n      ifNoNameFillWithCoordName(resultItem);\n      if (resultItem.type == null && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must\n      // Consider the case:\n      // {\n      //    dataset: {source: [\n      //        ['2001', 123],\n      //        ['2002', 456],\n      //        ...\n      //        ['The others', 987],\n      //    ]},\n      //    series: {type: 'pie'}\n      // }\n      // The first column should better be treated as a \"ordinal\" although it\n      // might not be detected as an \"ordinal\" by `guessOrdinal`.\n      || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n        resultItem.type = 'ordinal';\n      }\n    }\n  } else {\n    each(resultList, function (resultItem) {\n      // PENDING: guessOrdinal or let user specify type: 'ordinal' manually?\n      ifNoNameFillWithCoordName(resultItem);\n    });\n    // Sort dimensions: there are some rule that use the last dim as label,\n    // and for some latter travel process easier.\n    resultList.sort(function (item0, item1) {\n      return item0.storeDimIndex - item1.storeDimIndex;\n    });\n  }\n  removeDuplication(resultList);\n  return new SeriesDataSchema({\n    source: source,\n    dimensions: resultList,\n    fullDimensionCount: dimCount,\n    dimensionOmitted: omitUnusedDimensions\n  });\n}\nfunction removeDuplication(result) {\n  var duplicationMap = createHashMap();\n  for (var i = 0; i < result.length; i++) {\n    var dim = result[i];\n    var dimOriginalName = dim.name;\n    var count = duplicationMap.get(dimOriginalName) || 0;\n    if (count > 0) {\n      // Starts from 0.\n      dim.name = dimOriginalName + (count - 1);\n    }\n    count++;\n    duplicationMap.set(dimOriginalName, count);\n  }\n}\n// ??? TODO\n// Originally detect dimCount by data[0]. Should we\n// optimize it to only by sysDims and dimensions and encode.\n// So only necessary dims will be initialized.\n// But\n// (1) custom series should be considered. where other dims\n// may be visited.\n// (2) sometimes user need to calculate bubble size or use visualMap\n// on other dimensions besides coordSys needed.\n// So, dims that is not used by system, should be shared in data store?\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  // Note that the result dimCount should not small than columns count\n  // of data, otherwise `dataDimNameMap` checking will be incorrect.\n  var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef;\n    if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n      dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n    }\n  });\n  return dimCount;\n}\nfunction genCoordDimName(name, map, fromZero) {\n  if (fromZero || map.hasKey(name)) {\n    var i = 0;\n    while (map.hasKey(name + i)) {\n      i++;\n    }\n    name += i;\n  }\n  map.set(name, true);\n  return name;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Helper for model references.\n * There are many manners to refer axis/coordSys.\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\nimport { createHashMap, retrieve, each } from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../util/model.js';\n/**\n * @class\n * For example:\n * {\n *     coordSysName: 'cartesian2d',\n *     coordSysDims: ['x', 'y', ...],\n *     axisMap: HashMap({\n *         x: xAxisModel,\n *         y: yAxisModel\n *     }),\n *     categoryAxisMap: HashMap({\n *         x: xAxisModel,\n *         y: undefined\n *     }),\n *     // The index of the first category axis in `coordSysDims`.\n *     // `null/undefined` means no category axis exists.\n *     firstCategoryDimIndex: 1,\n *     // To replace user specified encode.\n * }\n */\nvar CoordSysInfo = /** @class */function () {\n  function CoordSysInfo(coordSysName) {\n    this.coordSysDims = [];\n    this.axisMap = createHashMap();\n    this.categoryAxisMap = createHashMap();\n    this.coordSysName = coordSysName;\n  }\n  return CoordSysInfo;\n}();\nexport function getCoordSysInfoBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = new CoordSysInfo(coordSysName);\n  var fetch = fetchers[coordSysName];\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\n// TODO: refactor them to static member of each coord sys, rather than hard code here.\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!xAxisModel) {\n        throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\n      }\n      if (!yAxisModel) {\n        throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\n      }\n    }\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!singleAxisModel) {\n        throw new Error('singleAxis should be specified.');\n      }\n    }\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n    if (process.env.NODE_ENV !== 'production') {\n      if (!angleAxisModel) {\n        throw new Error('angleAxis option not found');\n      }\n      if (!radiusAxisModel) {\n        throw new Error('radiusAxis option not found');\n      }\n    }\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n      if (isCategory(axisModel)) {\n        categoryAxisMap.set(axisDim, axisModel);\n        if (result.firstCategoryDimIndex == null) {\n          result.firstCategoryDimIndex = index;\n        }\n      }\n    });\n  },\n  matrix: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var matrixModel = seriesModel.getReferringComponents('matrix', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!matrixModel) {\n        throw new Error('matrix coordinate system should be specified.');\n      }\n    }\n    result.coordSysDims = ['x', 'y'];\n    var xModel = matrixModel.getDimensionModel('x');\n    var yModel = matrixModel.getDimensionModel('y');\n    axisMap.set('x', xModel);\n    axisMap.set('y', yModel);\n    categoryAxisMap.set('x', xModel);\n    categoryAxisMap.set('y', yModel);\n  }\n};\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, isString } from 'zrender/lib/core/util.js';\nimport { isSeriesDataSchema } from './SeriesDataSchema.js';\n/**\n * Note that it is too complicated to support 3d stack by value\n * (have to create two-dimension inverted index), so in 3d case\n * we just support that stacked by index.\n *\n * @param seriesModel\n * @param dimensionsInput The same as the input of <module:echarts/data/SeriesData>.\n *        The input will be modified.\n * @param opt\n * @param opt.stackedCoordDimension Specify a coord dimension if needed.\n * @param opt.byIndex=false\n * @return calculationInfo\n * {\n *     stackedDimension: string\n *     stackedByDimension: string\n *     isStackedByIndex: boolean\n *     stackedOverDimension: string\n *     stackResultDimension: string\n * }\n */\nexport function enableDataStack(seriesModel, dimensionsInput, opt) {\n  opt = opt || {};\n  var byIndex = opt.byIndex;\n  var stackedCoordDimension = opt.stackedCoordDimension;\n  var dimensionDefineList;\n  var schema;\n  var store;\n  if (isLegacyDimensionsInput(dimensionsInput)) {\n    dimensionDefineList = dimensionsInput;\n  } else {\n    schema = dimensionsInput.schema;\n    dimensionDefineList = schema.dimensions;\n    store = dimensionsInput.store;\n  }\n  // Compatibal: when `stack` is set as '', do not stack.\n  var mayStack = !!(seriesModel && seriesModel.get('stack'));\n  var stackedByDimInfo;\n  var stackedDimInfo;\n  var stackResultDimension;\n  var stackedOverDimension;\n  each(dimensionDefineList, function (dimensionInfo, index) {\n    if (isString(dimensionInfo)) {\n      dimensionDefineList[index] = dimensionInfo = {\n        name: dimensionInfo\n      };\n    }\n    if (mayStack && !dimensionInfo.isExtraCoord) {\n      // Find the first ordinal dimension as the stackedByDimInfo.\n      if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\n        stackedByDimInfo = dimensionInfo;\n      }\n      // Find the first stackable dimension as the stackedDimInfo.\n      if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\n        stackedDimInfo = dimensionInfo;\n      }\n    }\n  });\n  if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\n    // Compatible with previous design, value axis (time axis) only stack by index.\n    // It may make sense if the user provides elaborately constructed data.\n    byIndex = true;\n  }\n  // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\n  // That put stack logic in List is for using conveniently in echarts extensions, but it\n  // might not be a good way.\n  if (stackedDimInfo) {\n    // Use a weird name that not duplicated with other names.\n    // Also need to use seriesModel.id as postfix because different\n    // series may share same data store. The stack dimension needs to be distinguished.\n    stackResultDimension = '__\\0ecstackresult_' + seriesModel.id;\n    stackedOverDimension = '__\\0ecstackedover_' + seriesModel.id;\n    // Create inverted index to fast query index by value.\n    if (stackedByDimInfo) {\n      stackedByDimInfo.createInvertedIndices = true;\n    }\n    var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\n    var stackedDimType = stackedDimInfo.type;\n    var stackedDimCoordIndex_1 = 0;\n    each(dimensionDefineList, function (dimensionInfo) {\n      if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\n        stackedDimCoordIndex_1++;\n      }\n    });\n    var stackedOverDimensionDefine = {\n      name: stackResultDimension,\n      coordDim: stackedDimCoordDim_1,\n      coordDimIndex: stackedDimCoordIndex_1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length\n    };\n    var stackResultDimensionDefine = {\n      name: stackedOverDimension,\n      // This dimension contains stack base (generally, 0), so do not set it as\n      // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\n      coordDim: stackedOverDimension,\n      coordDimIndex: stackedDimCoordIndex_1 + 1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length + 1\n    };\n    if (schema) {\n      if (store) {\n        stackedOverDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackedOverDimension, stackedDimType);\n        stackResultDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackResultDimension, stackedDimType);\n      }\n      schema.appendCalculationDimension(stackedOverDimensionDefine);\n      schema.appendCalculationDimension(stackResultDimensionDefine);\n    } else {\n      dimensionDefineList.push(stackedOverDimensionDefine);\n      dimensionDefineList.push(stackResultDimensionDefine);\n    }\n  }\n  return {\n    stackedDimension: stackedDimInfo && stackedDimInfo.name,\n    stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\n    isStackedByIndex: byIndex,\n    stackedOverDimension: stackedOverDimension,\n    stackResultDimension: stackResultDimension\n  };\n}\nfunction isLegacyDimensionsInput(dimensionsInput) {\n  return !isSeriesDataSchema(dimensionsInput.schema);\n}\nexport function isDimensionStacked(data, stackedDim) {\n  // Each single series only maps to one pair of axis. So we do not need to\n  // check stackByDim, whatever stacked by a dimension or stacked by index.\n  return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\n}\nexport function getStackedDimension(data, targetDim) {\n  return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { getCoordSysInfoBySeries } from '../../model/referHelper.js';\nimport { createSourceFromSeriesDataOption } from '../../data/Source.js';\nimport { enableDataStack } from '../../data/helper/dataStackHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nimport { SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nfunction getCoordSysDimDefs(seriesModel, coordSysInfo) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var coordSysDimDefs;\n  if (coordSysInfo && coordSysInfo.coordSysDims) {\n    coordSysDimDefs = zrUtil.map(coordSysInfo.coordSysDims, function (dim) {\n      var dimInfo = {\n        name: dim\n      };\n      var axisModel = coordSysInfo.axisMap.get(dim);\n      if (axisModel) {\n        var axisType = axisModel.get('type');\n        dimInfo.type = getDimensionTypeByAxis(axisType);\n      }\n      return dimInfo;\n    });\n  }\n  if (!coordSysDimDefs) {\n    // Get dimensions from registered coordinate system\n    coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n  }\n  return coordSysDimDefs;\n}\nfunction injectOrdinalMeta(dimInfoList, createInvertedIndices, coordSysInfo) {\n  var firstCategoryDimIndex;\n  var hasNameEncode;\n  coordSysInfo && zrUtil.each(dimInfoList, function (dimInfo, dimIndex) {\n    var coordDim = dimInfo.coordDim;\n    var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n    if (categoryAxisModel) {\n      if (firstCategoryDimIndex == null) {\n        firstCategoryDimIndex = dimIndex;\n      }\n      dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n      if (createInvertedIndices) {\n        dimInfo.createInvertedIndices = true;\n      }\n    }\n    if (dimInfo.otherDims.itemName != null) {\n      hasNameEncode = true;\n    }\n  });\n  if (!hasNameEncode && firstCategoryDimIndex != null) {\n    dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n  }\n  return firstCategoryDimIndex;\n}\n/**\n * Caution: there are side effects to `sourceManager` in this method.\n * Should better only be called in `Series['getInitialData']`.\n */\nfunction createSeriesData(sourceRaw, seriesModel, opt) {\n  opt = opt || {};\n  var sourceManager = seriesModel.getSourceManager();\n  var source;\n  var isOriginalSource = false;\n  if (sourceRaw) {\n    isOriginalSource = true;\n    source = createSourceFromSeriesDataOption(sourceRaw);\n  } else {\n    source = sourceManager.getSource();\n    // Is series.data. not dataset.\n    isOriginalSource = source.sourceFormat === SOURCE_FORMAT_ORIGINAL;\n  }\n  var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n  var coordSysDimDefs = getCoordSysDimDefs(seriesModel, coordSysInfo);\n  var useEncodeDefaulter = opt.useEncodeDefaulter;\n  var encodeDefaulter = zrUtil.isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null;\n  var createDimensionOptions = {\n    coordDimensions: coordSysDimDefs,\n    generateCoord: opt.generateCoord,\n    encodeDefine: seriesModel.getEncode(),\n    encodeDefaulter: encodeDefaulter,\n    canOmitUnusedDimensions: !isOriginalSource\n  };\n  var schema = prepareSeriesDataSchema(source, createDimensionOptions);\n  var firstCategoryDimIndex = injectOrdinalMeta(schema.dimensions, opt.createInvertedIndices, coordSysInfo);\n  var store = !isOriginalSource ? sourceManager.getSharedDataStore(schema) : null;\n  var stackCalculationInfo = enableDataStack(seriesModel, {\n    schema: schema,\n    store: store\n  });\n  var data = new SeriesData(schema, seriesModel);\n  data.setCalculationInfo(stackCalculationInfo);\n  var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source)\n  /**\n   * This serves this case:\n   *  var echarts_option = {\n   *      xAxis: { data: ['a', 'b', 'c'] },\n   *      yAxis: {}\n   *      series: { data: [555, 666, 777] }\n   *  };\n   * The `series.data` is completed to:\n   *  [[0, 555], [1, 666], [2, 777]]\n   */ ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // Use dataIndex as ordinal value in categoryAxis\n    return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n  } : null;\n  data.hasItemOption = false;\n  data.initData(\n  // Try to reuse the data store in sourceManager if using dataset.\n  isOriginalSource ? source : store, null, dimValueGetter);\n  return data;\n}\nfunction isNeedCompleteOrdinalData(source) {\n  if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var sampleItem = firstDataNotNull(source.data || []);\n    return !zrUtil.isArray(getDataItemValue(sampleItem));\n  }\n}\nfunction firstDataNotNull(arr) {\n  var i = 0;\n  while (i < arr.length && arr[i] == null) {\n    i++;\n  }\n  return arr[i];\n}\nexport default createSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getPrecision, round, nice, quantityExponent } from '../util/number.js';\nimport { bind } from 'zrender/lib/core/util.js';\nexport function isValueNice(val) {\n  var exp10 = Math.pow(10, quantityExponent(Math.abs(val)));\n  var f = Math.abs(val / exp10);\n  return f === 0 || f === 1 || f === 2 || f === 3 || f === 5;\n}\nexport function isIntervalOrLogScale(scale) {\n  return scale.type === 'interval' || scale.type === 'log';\n}\n/**\n * @param extent Both extent[0] and extent[1] should be valid number.\n *               Should be extent[0] < extent[1].\n * @param splitNumber splitNumber should be >= 1.\n */\nexport function intervalScaleNiceTicks(extent, spanWithBreaks, splitNumber, minInterval, maxInterval) {\n  var result = {};\n  var interval = result.interval = nice(spanWithBreaks / splitNumber, true);\n  if (minInterval != null && interval < minInterval) {\n    interval = result.interval = minInterval;\n  }\n  if (maxInterval != null && interval > maxInterval) {\n    interval = result.interval = maxInterval;\n  }\n  // Tow more digital for tick.\n  var precision = result.intervalPrecision = getIntervalPrecision(interval);\n  // Niced extent inside original extent\n  var niceTickExtent = result.niceTickExtent = [round(Math.ceil(extent[0] / interval) * interval, precision), round(Math.floor(extent[1] / interval) * interval, precision)];\n  fixExtent(niceTickExtent, extent);\n  return result;\n}\nexport function increaseInterval(interval) {\n  var exp10 = Math.pow(10, quantityExponent(interval));\n  // Increase interval\n  var f = interval / exp10;\n  if (!f) {\n    f = 1;\n  } else if (f === 2) {\n    f = 3;\n  } else if (f === 3) {\n    f = 5;\n  } else {\n    // f is 1 or 5\n    f *= 2;\n  }\n  return round(f * exp10);\n}\n/**\n * @return interval precision\n */\nexport function getIntervalPrecision(interval) {\n  // Tow more digital for tick.\n  return getPrecision(interval) + 2;\n}\nfunction clamp(niceTickExtent, idx, extent) {\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n}\n// In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\nexport function fixExtent(niceTickExtent, extent) {\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n  clamp(niceTickExtent, 0, extent);\n  clamp(niceTickExtent, 1, extent);\n  if (niceTickExtent[0] > niceTickExtent[1]) {\n    niceTickExtent[0] = niceTickExtent[1];\n  }\n}\nexport function contain(val, extent) {\n  return val >= extent[0] && val <= extent[1];\n}\nvar ScaleCalculator = /** @class */function () {\n  function ScaleCalculator() {\n    this.normalize = normalize;\n    this.scale = scale;\n  }\n  ScaleCalculator.prototype.updateMethods = function (brkCtx) {\n    if (brkCtx.hasBreaks()) {\n      this.normalize = bind(brkCtx.normalize, brkCtx);\n      this.scale = bind(brkCtx.scale, brkCtx);\n    } else {\n      this.normalize = normalize;\n      this.scale = scale;\n    }\n  };\n  return ScaleCalculator;\n}();\nexport { ScaleCalculator };\nfunction normalize(val, extent) {\n  if (extent[1] === extent[0]) {\n    return 0.5;\n  }\n  return (val - extent[0]) / (extent[1] - extent[0]);\n}\nfunction scale(val, extent) {\n  return val * (extent[1] - extent[0]) + extent[0];\n}\nexport function logTransform(base, extent, noClampNegative) {\n  var loggedBase = Math.log(base);\n  return [\n  // log(negative) is NaN, so safe guard here.\n  // PENDING: But even getting a -Infinity still does not make sense in extent.\n  //  Just keep it as is, getting a NaN to make some previous cases works by coincidence.\n  Math.log(noClampNegative ? extent[0] : Math.max(0, extent[0])) / loggedBase, Math.log(noClampNegative ? extent[1] : Math.max(0, extent[1])) / loggedBase];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as clazzUtil from '../util/clazz.js';\nimport { ScaleCalculator } from './helper.js';\nimport { bind } from 'zrender/lib/core/util.js';\nimport { getScaleBreakHelper } from './break.js';\nvar Scale = /** @class */function () {\n  function Scale(setting) {\n    this._calculator = new ScaleCalculator();\n    this._setting = setting || {};\n    this._extent = [Infinity, -Infinity];\n    var scaleBreakHelper = getScaleBreakHelper();\n    if (scaleBreakHelper) {\n      this._brkCtx = scaleBreakHelper.createScaleBreakContext();\n      this._brkCtx.update(this._extent);\n    }\n  }\n  Scale.prototype.getSetting = function (name) {\n    return this._setting[name];\n  };\n  /**\n   * [CAVEAT]: It should not be overridden!\n   */\n  Scale.prototype._innerUnionExtent = function (other) {\n    var extent = this._extent;\n    // Considered that number could be NaN and should not write into the extent.\n    this._innerSetExtent(other[0] < extent[0] ? other[0] : extent[0], other[1] > extent[1] ? other[1] : extent[1]);\n  };\n  /**\n   * Set extent from data\n   */\n  Scale.prototype.unionExtentFromData = function (data, dim) {\n    this._innerUnionExtent(data.getApproximateExtent(dim));\n  };\n  /**\n   * Get a new slice of extent.\n   * Extent is always in increase order.\n   */\n  Scale.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  Scale.prototype.setExtent = function (start, end) {\n    this._innerSetExtent(start, end);\n  };\n  /**\n   * [CAVEAT]: It should not be overridden!\n   */\n  Scale.prototype._innerSetExtent = function (start, end) {\n    var thisExtent = this._extent;\n    if (!isNaN(start)) {\n      thisExtent[0] = start;\n    }\n    if (!isNaN(end)) {\n      thisExtent[1] = end;\n    }\n    this._brkCtx && this._brkCtx.update(thisExtent);\n  };\n  /**\n   * Prerequisite: Scale#parse is ready.\n   */\n  Scale.prototype.setBreaksFromOption = function (breakOptionList) {\n    var scaleBreakHelper = getScaleBreakHelper();\n    if (scaleBreakHelper) {\n      this._innerSetBreak(scaleBreakHelper.parseAxisBreakOption(breakOptionList, bind(this.parse, this)));\n    }\n  };\n  /**\n   * [CAVEAT]: It should not be overridden!\n   */\n  Scale.prototype._innerSetBreak = function (parsed) {\n    if (this._brkCtx) {\n      this._brkCtx.setBreaks(parsed);\n      this._calculator.updateMethods(this._brkCtx);\n      this._brkCtx.update(this._extent);\n    }\n  };\n  /**\n   * [CAVEAT]: It should not be overridden!\n   */\n  Scale.prototype._innerGetBreaks = function () {\n    return this._brkCtx ? this._brkCtx.breaks : [];\n  };\n  /**\n   * Do not expose the internal `_breaks` unless necessary.\n   */\n  Scale.prototype.hasBreaks = function () {\n    return this._brkCtx ? this._brkCtx.hasBreaks() : false;\n  };\n  Scale.prototype._getExtentSpanWithBreaks = function () {\n    return this._brkCtx && this._brkCtx.hasBreaks() ? this._brkCtx.getExtentSpan() : this._extent[1] - this._extent[0];\n  };\n  /**\n   * If value is in extent range\n   */\n  Scale.prototype.isInExtentRange = function (value) {\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n  /**\n   * When axis extent depends on data and no data exists,\n   * axis ticks should not be drawn, which is named 'blank'.\n   */\n  Scale.prototype.isBlank = function () {\n    return this._isBlank;\n  };\n  /**\n   * When axis extent depends on data and no data exists,\n   * axis ticks should not be drawn, which is named 'blank'.\n   */\n  Scale.prototype.setBlank = function (isBlank) {\n    this._isBlank = isBlank;\n  };\n  return Scale;\n}();\nclazzUtil.enableClassManagement(Scale);\nexport default Scale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, isObject, map, isString } from 'zrender/lib/core/util.js';\nvar uidBase = 0;\nvar OrdinalMeta = /** @class */function () {\n  /**\n   * PENDING - Regarding forcibly converting to string:\n   *  In the early days, the underlying hash map impl used JS plain object and converted the key to\n   *  string; later in https://github.com/ecomfe/zrender/pull/966 it was changed to a JS Map (in supported\n   *  platforms), which does not require string keys. But consider any input that `scale/Ordinal['parse']`\n   *  is involved, a number input represents an `OrdinalNumber` (i.e., an index), and affect the query\n   *  behavior:\n   *    - If forcbily converting to string:\n   *      pros: users can use numeric string (such as, '123') to query the raw data (123), tho it's probably\n   *      still confusing.\n   *      cons: NaN/null/undefined in data will be equals to 'NaN'/'null'/'undefined', if simply using\n   *      `val + ''` to convert them, like currently `getName` does.\n   *    - Otherwise:\n   *      pros: see NaN/null/undefined case above.\n   *      cons: users cannot query the raw data (123) any more.\n   *  There are two inconsistent behaviors in the current impl:\n   *    - Force conversion is applied on the case `xAxis{data: ['aaa', 'bbb', ...]}`,\n   *      but no conversion applied to the case `xAxis{data: [{value: 'aaa'}, ...]}` and\n   *      the case `dataset: {source: [['aaa', 123], ['bbb', 234], ...]}`.\n   *    - behaves differently according to whether JS Map is supported (the polyfill is simply using JS\n   *      plain object) (tho it seems rare platform that do not support it).\n   *  Since there's no sufficient good solution to offset cost of the breaking change, we preserve the\n   *  current behavior, until real issues is reported.\n   */\n  function OrdinalMeta(opt) {\n    this.categories = opt.categories || [];\n    this._needCollect = opt.needCollect;\n    this._deduplication = opt.deduplication;\n    this.uid = ++uidBase;\n    this._onCollect = opt.onCollect;\n  }\n  OrdinalMeta.createByAxisModel = function (axisModel) {\n    var option = axisModel.option;\n    var data = option.data;\n    var categories = data && map(data, getName);\n    return new OrdinalMeta({\n      categories: categories,\n      needCollect: !categories,\n      // deduplication is default in axis.\n      deduplication: option.dedplication !== false\n    });\n  };\n  ;\n  OrdinalMeta.prototype.getOrdinal = function (category) {\n    return this._getOrCreateMap().get(category);\n  };\n  /**\n   * @return The ordinal. If not found, return NaN.\n   */\n  OrdinalMeta.prototype.parseAndCollect = function (category) {\n    var index;\n    var needCollect = this._needCollect;\n    // The value of category dim can be the index of the given category set.\n    // This feature is only supported when !needCollect, because we should\n    // consider a common case: a value is 2017, which is a number but is\n    // expected to be tread as a category. This case usually happen in dataset,\n    // where it happent to be no need of the index feature.\n    if (!isString(category) && !needCollect) {\n      return category;\n    }\n    // Optimize for the scenario:\n    // category is ['2012-01-01', '2012-01-02', ...], where the input\n    // data has been ensured not duplicate and is large data.\n    // Notice, if a dataset dimension provide categroies, usually echarts\n    // should remove duplication except user tell echarts dont do that\n    // (set axis.deduplication = false), because echarts do not know whether\n    // the values in the category dimension has duplication (consider the\n    // parallel-aqi example)\n    if (needCollect && !this._deduplication) {\n      index = this.categories.length;\n      this.categories[index] = category;\n      this._onCollect && this._onCollect(category, index);\n      return index;\n    }\n    var map = this._getOrCreateMap();\n    index = map.get(category);\n    if (index == null) {\n      if (needCollect) {\n        index = this.categories.length;\n        this.categories[index] = category;\n        map.set(category, index);\n        this._onCollect && this._onCollect(category, index);\n      } else {\n        index = NaN;\n      }\n    }\n    return index;\n  };\n  // Consider big data, do not create map until needed.\n  OrdinalMeta.prototype._getOrCreateMap = function () {\n    return this._map || (this._map = createHashMap(this.categories));\n  };\n  return OrdinalMeta;\n}();\nfunction getName(obj) {\n  if (isObject(obj) && obj.value != null) {\n    return obj.value;\n  } else {\n    return obj + '';\n  }\n}\nexport default OrdinalMeta;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Linear continuous scale\n * http://en.wikipedia.org/wiki/Level_of_measurement\n */\n// FIXME only one data\nimport Scale from './Scale.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport * as scaleHelper from './helper.js';\nimport { isArray, map, isObject, isString } from 'zrender/lib/core/util.js';\nvar OrdinalScale = /** @class */function (_super) {\n  __extends(OrdinalScale, _super);\n  function OrdinalScale(setting) {\n    var _this = _super.call(this, setting) || this;\n    _this.type = 'ordinal';\n    var ordinalMeta = _this.getSetting('ordinalMeta');\n    // Caution: Should not use instanceof, consider ec-extensions using\n    // import approach to get OrdinalMeta class.\n    if (!ordinalMeta) {\n      ordinalMeta = new OrdinalMeta({});\n    }\n    if (isArray(ordinalMeta)) {\n      ordinalMeta = new OrdinalMeta({\n        categories: map(ordinalMeta, function (item) {\n          return isObject(item) ? item.value : item;\n        })\n      });\n    }\n    _this._ordinalMeta = ordinalMeta;\n    _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\n    return _this;\n  }\n  OrdinalScale.prototype.parse = function (val) {\n    // Caution: Math.round(null) will return `0` rather than `NaN`\n    if (val == null) {\n      return NaN;\n    }\n    return isString(val) ? this._ordinalMeta.getOrdinal(val)\n    // val might be float.\n    : Math.round(val);\n  };\n  OrdinalScale.prototype.contain = function (val) {\n    return scaleHelper.contain(val, this._extent) && val >= 0 && val < this._ordinalMeta.categories.length;\n  };\n  /**\n   * Normalize given rank or name to linear [0, 1]\n   * @param val raw ordinal number.\n   * @return normalized value in [0, 1].\n   */\n  OrdinalScale.prototype.normalize = function (val) {\n    val = this._getTickNumber(val);\n    return this._calculator.normalize(val, this._extent);\n  };\n  /**\n   * @param val normalized value in [0, 1].\n   * @return raw ordinal number.\n   */\n  OrdinalScale.prototype.scale = function (val) {\n    val = Math.round(this._calculator.scale(val, this._extent));\n    return this.getRawOrdinalNumber(val);\n  };\n  OrdinalScale.prototype.getTicks = function () {\n    var ticks = [];\n    var extent = this._extent;\n    var rank = extent[0];\n    while (rank <= extent[1]) {\n      ticks.push({\n        value: rank\n      });\n      rank++;\n    }\n    return ticks;\n  };\n  OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\n    // Not support.\n    return;\n  };\n  /**\n   * @see `Ordinal['_ordinalNumbersByTick']`\n   */\n  OrdinalScale.prototype.setSortInfo = function (info) {\n    if (info == null) {\n      this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;\n      return;\n    }\n    var infoOrdinalNumbers = info.ordinalNumbers;\n    var ordinalsByTick = this._ordinalNumbersByTick = [];\n    var ticksByOrdinal = this._ticksByOrdinalNumber = [];\n    // Unnecessary support negative tick in `realtimeSort`.\n    var tickNum = 0;\n    var allCategoryLen = this._ordinalMeta.categories.length;\n    for (var len = Math.min(allCategoryLen, infoOrdinalNumbers.length); tickNum < len; ++tickNum) {\n      var ordinalNumber = infoOrdinalNumbers[tickNum];\n      ordinalsByTick[tickNum] = ordinalNumber;\n      ticksByOrdinal[ordinalNumber] = tickNum;\n    }\n    // Handle that `series.data` only covers part of the `axis.category.data`.\n    var unusedOrdinal = 0;\n    for (; tickNum < allCategoryLen; ++tickNum) {\n      while (ticksByOrdinal[unusedOrdinal] != null) {\n        unusedOrdinal++;\n      }\n      ;\n      ordinalsByTick.push(unusedOrdinal);\n      ticksByOrdinal[unusedOrdinal] = tickNum;\n    }\n  };\n  OrdinalScale.prototype._getTickNumber = function (ordinal) {\n    var ticksByOrdinalNumber = this._ticksByOrdinalNumber;\n    // also support ordinal out of range of `ordinalMeta.categories.length`,\n    // where ordinal numbers are used as tick value directly.\n    return ticksByOrdinalNumber && ordinal >= 0 && ordinal < ticksByOrdinalNumber.length ? ticksByOrdinalNumber[ordinal] : ordinal;\n  };\n  /**\n   * @usage\n   * ```js\n   * const ordinalNumber = ordinalScale.getRawOrdinalNumber(tickVal);\n   *\n   * // case0\n   * const rawOrdinalValue = axisModel.getCategories()[ordinalNumber];\n   * // case1\n   * const rawOrdinalValue = this._ordinalMeta.categories[ordinalNumber];\n   * // case2\n   * const coord = axis.dataToCoord(ordinalNumber);\n   * ```\n   *\n   * @param {OrdinalNumber} tickNumber index of display\n   */\n  OrdinalScale.prototype.getRawOrdinalNumber = function (tickNumber) {\n    var ordinalNumbersByTick = this._ordinalNumbersByTick;\n    // tickNumber may be out of range, e.g., when axis max is larger than `ordinalMeta.categories.length`.,\n    // where ordinal numbers are used as tick value directly.\n    return ordinalNumbersByTick && tickNumber >= 0 && tickNumber < ordinalNumbersByTick.length ? ordinalNumbersByTick[tickNumber] : tickNumber;\n  };\n  /**\n   * Get item on tick\n   */\n  OrdinalScale.prototype.getLabel = function (tick) {\n    if (!this.isBlank()) {\n      var ordinalNumber = this.getRawOrdinalNumber(tick.value);\n      var cateogry = this._ordinalMeta.categories[ordinalNumber];\n      // Note that if no data, ordinalMeta.categories is an empty array.\n      // Return empty if it's not exist.\n      return cateogry == null ? '' : cateogry + '';\n    }\n  };\n  OrdinalScale.prototype.count = function () {\n    return this._extent[1] - this._extent[0] + 1;\n  };\n  /**\n   * @override\n   * If value is in extent range\n   */\n  OrdinalScale.prototype.isInExtentRange = function (value) {\n    value = this._getTickNumber(value);\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n  OrdinalScale.prototype.getOrdinalMeta = function () {\n    return this._ordinalMeta;\n  };\n  OrdinalScale.prototype.calcNiceTicks = function () {};\n  OrdinalScale.prototype.calcNiceExtent = function () {};\n  OrdinalScale.type = 'ordinal';\n  return OrdinalScale;\n}(Scale);\nScale.registerClass(OrdinalScale);\nexport default OrdinalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as numberUtil from '../util/number.js';\nimport * as formatUtil from '../util/format.js';\nimport Scale from './Scale.js';\nimport * as helper from './helper.js';\nimport { getScaleBreakHelper } from './break.js';\nvar roundNumber = numberUtil.round;\nvar IntervalScale = /** @class */function (_super) {\n  __extends(IntervalScale, _super);\n  function IntervalScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'interval';\n    // Step is calculated in adjustExtent.\n    _this._interval = 0;\n    _this._intervalPrecision = 2;\n    return _this;\n  }\n  IntervalScale.prototype.parse = function (val) {\n    // `Scale#parse` (and its overrids) are typically applied at the axis values input\n    // in echarts option. e.g., `axis.min/max`, `dataZoom.min/max`, etc.\n    // but `series.data` is not included, which uses `dataValueHelper.ts`#`parseDataValue`.\n    // `Scale#parse` originally introduced in fb8c813215098b9d2458966229bb95c510883d5e\n    // at 2016 for dataZoom start/end settings (See `parseAxisModelMinMax`).\n    //\n    // Historically `scale/Interval.ts` returns the input value directly. But numeric\n    // values (such as a number-like string '123') effectively passed through here and\n    // were involved in calculations, which was error-prone and inconsistent with the\n    // declared TS return type. Previously such issues are fixed separately in different\n    // places case by case (such as #2475).\n    //\n    // Now, we perform actual parse to ensure its `number` type here. The parsing rule\n    // follows the series data parsing rule (`dataValueHelper.ts`#`parseDataValue`)\n    // and maintains compatibility as much as possible (thus a more strict parsing\n    // `number.ts`#`numericToNumber` is not used here.)\n    //\n    // FIXME: `ScaleDataValue` also need to be modified to include numeric string type,\n    //  since it effectively does.\n    return val == null || val === '' ? NaN\n    // If string (like '-'), using '+' parse to NaN\n    // If object, also parse to NaN\n    : Number(val);\n  };\n  IntervalScale.prototype.contain = function (val) {\n    return helper.contain(val, this._extent);\n  };\n  IntervalScale.prototype.normalize = function (val) {\n    return this._calculator.normalize(val, this._extent);\n  };\n  IntervalScale.prototype.scale = function (val) {\n    return this._calculator.scale(val, this._extent);\n  };\n  IntervalScale.prototype.getInterval = function () {\n    return this._interval;\n  };\n  IntervalScale.prototype.setInterval = function (interval) {\n    this._interval = interval;\n    // Dropped auto calculated niceExtent and use user-set extent.\n    // We assume user wants to set both interval, min, max to get a better result.\n    this._niceExtent = this._extent.slice();\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\n  };\n  /**\n   * @override\n   */\n  IntervalScale.prototype.getTicks = function (opt) {\n    opt = opt || {};\n    var interval = this._interval;\n    var extent = this._extent;\n    var niceTickExtent = this._niceExtent;\n    var intervalPrecision = this._intervalPrecision;\n    var scaleBreakHelper = getScaleBreakHelper();\n    var ticks = [];\n    // If interval is 0, return [];\n    if (!interval) {\n      return ticks;\n    }\n    if (opt.breakTicks === 'only_break' && scaleBreakHelper) {\n      scaleBreakHelper.addBreaksToTicks(ticks, this._brkCtx.breaks, this._extent);\n      return ticks;\n    }\n    // Consider this case: using dataZoom toolbox, zoom and zoom.\n    var safeLimit = 10000;\n    if (extent[0] < niceTickExtent[0]) {\n      if (opt.expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(niceTickExtent[0] - interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[0]\n        });\n      }\n    }\n    var estimateNiceMultiple = function (tickVal, targetTick) {\n      return Math.round((targetTick - tickVal) / interval);\n    };\n    var tick = niceTickExtent[0];\n    while (tick <= niceTickExtent[1]) {\n      ticks.push({\n        value: tick\n      });\n      // Avoid rounding error\n      tick = roundNumber(tick + interval, intervalPrecision);\n      if (this._brkCtx) {\n        var moreMultiple = this._brkCtx.calcNiceTickMultiple(tick, estimateNiceMultiple);\n        if (moreMultiple >= 0) {\n          tick = roundNumber(tick + moreMultiple * interval, intervalPrecision);\n        }\n      }\n      if (ticks.length > 0 && tick === ticks[ticks.length - 1].value) {\n        // Consider out of safe float point, e.g.,\n        // -3711126.9907707 + 2e-10 === -3711126.9907707\n        break;\n      }\n      if (ticks.length > safeLimit) {\n        return [];\n      }\n    }\n    // Consider this case: the last item of ticks is smaller\n    // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n    var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\n    if (extent[1] > lastNiceTick) {\n      if (opt.expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(lastNiceTick + interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[1]\n        });\n      }\n    }\n    if (scaleBreakHelper) {\n      scaleBreakHelper.pruneTicksByBreak(opt.pruneByBreak, ticks, this._brkCtx.breaks, function (item) {\n        return item.value;\n      }, this._interval, this._extent);\n    }\n    if (opt.breakTicks !== 'none' && scaleBreakHelper) {\n      scaleBreakHelper.addBreaksToTicks(ticks, this._brkCtx.breaks, this._extent);\n    }\n    return ticks;\n  };\n  IntervalScale.prototype.getMinorTicks = function (splitNumber) {\n    var ticks = this.getTicks({\n      expandToNicedExtent: true\n    });\n    // NOTE: In log-scale, do not support minor ticks when breaks exist.\n    //  because currently log-scale minor ticks is calculated based on raw values\n    //  rather than log-transformed value, due to an odd effect when breaks exist.\n    var minorTicks = [];\n    var extent = this.getExtent();\n    for (var i = 1; i < ticks.length; i++) {\n      var nextTick = ticks[i];\n      var prevTick = ticks[i - 1];\n      if (prevTick[\"break\"] || nextTick[\"break\"]) {\n        // Do not build minor ticks to the adjacent ticks to breaks ticks,\n        // since the interval might be irregular.\n        continue;\n      }\n      var count = 0;\n      var minorTicksGroup = [];\n      var interval = nextTick.value - prevTick.value;\n      var minorInterval = interval / splitNumber;\n      var minorIntervalPrecision = helper.getIntervalPrecision(minorInterval);\n      while (count < splitNumber - 1) {\n        var minorTick = roundNumber(prevTick.value + (count + 1) * minorInterval, minorIntervalPrecision);\n        // For the first and last interval. The count may be less than splitNumber.\n        if (minorTick > extent[0] && minorTick < extent[1]) {\n          minorTicksGroup.push(minorTick);\n        }\n        count++;\n      }\n      var scaleBreakHelper = getScaleBreakHelper();\n      scaleBreakHelper && scaleBreakHelper.pruneTicksByBreak('auto', minorTicksGroup, this._getNonTransBreaks(), function (value) {\n        return value;\n      }, this._interval, extent);\n      minorTicks.push(minorTicksGroup);\n    }\n    return minorTicks;\n  };\n  IntervalScale.prototype._getNonTransBreaks = function () {\n    return this._brkCtx ? this._brkCtx.breaks : [];\n  };\n  /**\n   * @param opt.precision If 'auto', use nice presision.\n   * @param opt.pad returns 1.50 but not 1.5 if precision is 2.\n   */\n  IntervalScale.prototype.getLabel = function (data, opt) {\n    if (data == null) {\n      return '';\n    }\n    var precision = opt && opt.precision;\n    if (precision == null) {\n      precision = numberUtil.getPrecision(data.value) || 0;\n    } else if (precision === 'auto') {\n      // Should be more precise then tick.\n      precision = this._intervalPrecision;\n    }\n    // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n    var dataNum = roundNumber(data.value, precision, true);\n    return formatUtil.addCommas(dataNum);\n  };\n  /**\n   * FIXME: refactor - disallow override, use composition instead.\n   *\n   * The override of `calcNiceTicks` should ensure these members are provided:\n   *  this._intervalPrecision\n   *  this._interval\n   *\n   * @param splitNumber By default `5`.\n   */\n  IntervalScale.prototype.calcNiceTicks = function (splitNumber, minInterval, maxInterval) {\n    splitNumber = splitNumber || 5;\n    var extent = this._extent.slice();\n    var span = this._getExtentSpanWithBreaks();\n    if (!isFinite(span)) {\n      return;\n    }\n    // User may set axis min 0 and data are all negative\n    // FIXME If it needs to reverse ?\n    if (span < 0) {\n      span = -span;\n      extent.reverse();\n      this._innerSetExtent(extent[0], extent[1]);\n      extent = this._extent.slice();\n    }\n    var result = helper.intervalScaleNiceTicks(extent, span, splitNumber, minInterval, maxInterval);\n    this._intervalPrecision = result.intervalPrecision;\n    this._interval = result.interval;\n    this._niceExtent = result.niceTickExtent;\n  };\n  IntervalScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this._extent.slice();\n    // If extent start and end are same, expand them\n    if (extent[0] === extent[1]) {\n      if (extent[0] !== 0) {\n        // Expand extent\n        // Note that extents can be both negative. See #13154\n        var expandSize = Math.abs(extent[0]);\n        // In the fowllowing case\n        //      Axis has been fixed max 100\n        //      Plus data are all 100 and axis extent are [100, 100].\n        // Extend to the both side will cause expanded max is larger than fixed max.\n        // So only expand to the smaller side.\n        if (!opt.fixMax) {\n          extent[1] += expandSize / 2;\n          extent[0] -= expandSize / 2;\n        } else {\n          extent[0] -= expandSize / 2;\n        }\n      } else {\n        extent[1] = 1;\n      }\n    }\n    var span = extent[1] - extent[0];\n    // If there are no data and extent are [Infinity, -Infinity]\n    if (!isFinite(span)) {\n      extent[0] = 0;\n      extent[1] = 1;\n    }\n    this._innerSetExtent(extent[0], extent[1]);\n    extent = this._extent.slice();\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n    var interval = this._interval;\n    var intervalPrecition = this._intervalPrecision;\n    if (!opt.fixMin) {\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval, intervalPrecition);\n    }\n    if (!opt.fixMax) {\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval, intervalPrecition);\n    }\n    this._innerSetExtent(extent[0], extent[1]);\n  };\n  IntervalScale.prototype.setNiceExtent = function (min, max) {\n    this._niceExtent = [min, max];\n  };\n  IntervalScale.type = 'interval';\n  return IntervalScale;\n}(Scale);\nScale.registerClass(IntervalScale);\nexport default IntervalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, defaults, keys } from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../util/number.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { createFloat32Array } from '../util/vendor.js';\nvar STACK_PREFIX = '__ec_stack_';\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n}\nfunction getAxisKey(axis) {\n  return axis.dim + axis.index;\n}\n/**\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\n */\nexport function getLayoutOnAxis(opt) {\n  var params = [];\n  var baseAxis = opt.axis;\n  var axisKey = 'axis0';\n  if (baseAxis.type !== 'category') {\n    return;\n  }\n  var bandWidth = baseAxis.getBandWidth();\n  for (var i = 0; i < opt.count || 0; i++) {\n    params.push(defaults({\n      bandWidth: bandWidth,\n      axisKey: axisKey,\n      stackId: STACK_PREFIX + i\n    }, opt));\n  }\n  var widthAndOffsets = doCalBarWidthAndOffset(params);\n  var result = [];\n  for (var i = 0; i < opt.count; i++) {\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\n    item.offsetCenter = item.offset + item.width / 2;\n    result.push(item);\n  }\n  return result;\n}\nexport function prepareLayoutBarSeries(seriesType, ecModel) {\n  var seriesModels = [];\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for cartesian2d only\n    if (isOnCartesian(seriesModel)) {\n      seriesModels.push(seriesModel);\n    }\n  });\n  return seriesModels;\n}\n/**\n * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\n * values.\n * This works for time axes, value axes, and log axes.\n * For a single time axis, return value is in the form like\n * {'x_0': [1000000]}.\n * The value of 1000000 is in milliseconds.\n */\nfunction getValueAxesMinGaps(barSeries) {\n  /**\n   * Map from axis.index to values.\n   * For a single time axis, axisValues is in the form like\n   * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\n   * Items in axisValues[x], e.g. 1495555200000, are time values of all\n   * series.\n   */\n  var axisValues = {};\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\n      return;\n    }\n    var data = seriesModel.getData();\n    var key = baseAxis.dim + '_' + baseAxis.index;\n    var dimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n    var store = data.getStore();\n    for (var i = 0, cnt = store.count(); i < cnt; ++i) {\n      var value = store.get(dimIdx, i);\n      if (!axisValues[key]) {\n        // No previous data for the axis\n        axisValues[key] = [value];\n      } else {\n        // No value in previous series\n        axisValues[key].push(value);\n      }\n      // Ignore duplicated time values in the same axis\n    }\n  });\n  var axisMinGaps = {};\n  for (var key in axisValues) {\n    if (axisValues.hasOwnProperty(key)) {\n      var valuesInAxis = axisValues[key];\n      if (valuesInAxis) {\n        // Sort axis values into ascending order to calculate gaps\n        valuesInAxis.sort(function (a, b) {\n          return a - b;\n        });\n        var min = null;\n        for (var j = 1; j < valuesInAxis.length; ++j) {\n          var delta = valuesInAxis[j] - valuesInAxis[j - 1];\n          if (delta > 0) {\n            // Ignore 0 delta because they are of the same axis value\n            min = min === null ? delta : Math.min(min, delta);\n          }\n        }\n        // Set to null if only have one data\n        axisMinGaps[key] = min;\n      }\n    }\n  }\n  return axisMinGaps;\n}\nexport function makeColumnLayout(barSeries) {\n  var axisMinGaps = getValueAxesMinGaps(barSeries);\n  var seriesInfoList = [];\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth;\n    if (baseAxis.type === 'category') {\n      bandWidth = baseAxis.getBandWidth();\n    } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\n      var key = baseAxis.dim + '_' + baseAxis.index;\n      var minGap = axisMinGaps[key];\n      var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\n      var scale = baseAxis.scale.getExtent();\n      var scaleSpan = Math.abs(scale[1] - scale[0]);\n      bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\n    } else {\n      var data = seriesModel.getData();\n      bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    }\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barMinWidth = parsePercent(\n    // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,\n    // the auto-calculated bar width might be less than 0.5 / 1.\n    seriesModel.get('barMinWidth') || (isInLargeMode(seriesModel) ? 0.5 : 1), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    var defaultBarGap = seriesModel.get('defaultBarGap');\n    seriesInfoList.push({\n      bandWidth: bandWidth,\n      barWidth: barWidth,\n      barMaxWidth: barMaxWidth,\n      barMinWidth: barMinWidth,\n      barGap: barGap,\n      barCategoryGap: barCategoryGap,\n      defaultBarGap: defaultBarGap,\n      axisKey: getAxisKey(baseAxis),\n      stackId: getSeriesStackId(seriesModel)\n    });\n  });\n  return doCalBarWidthAndOffset(seriesInfoList);\n}\nfunction doCalBarWidthAndOffset(seriesInfoList) {\n  // Columns info on each category axis. Key is cartesian name\n  var columnsMap = {};\n  each(seriesInfoList, function (seriesInfo, idx) {\n    var axisKey = seriesInfo.axisKey;\n    var bandWidth = seriesInfo.bandWidth;\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: null,\n      gap: seriesInfo.defaultBarGap || 0,\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = seriesInfo.stackId;\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    // Caution: In a single coordinate system, these barGrid attributes\n    // will be shared by series. Consider that they have default values,\n    // only the attributes set on the last series will work.\n    // Do not change this fact unless there will be a break change.\n    var barWidth = seriesInfo.barWidth;\n    if (barWidth && !stacks[stackId].width) {\n      // See #6312, do not restrict width.\n      stacks[stackId].width = barWidth;\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n    var barMaxWidth = seriesInfo.barMaxWidth;\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    var barMinWidth = seriesInfo.barMinWidth;\n    barMinWidth && (stacks[stackId].minWidth = barMinWidth);\n    var barGap = seriesInfo.barGap;\n    barGap != null && (columnsOnAxis.gap = barGap);\n    var barCategoryGap = seriesInfo.barCategoryGap;\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGapPercent = columnsOnAxis.categoryGap;\n    if (categoryGapPercent == null) {\n      var columnCount = keys(stacks).length;\n      // More columns in one group\n      // the spaces between group is smaller. Or the column will be too thin.\n      categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\n    }\n    var categoryGap = parsePercent(categoryGapPercent, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    // Find if any auto calculated bar exceeded maxBarWidth\n    each(stacks, function (column) {\n      var maxWidth = column.maxWidth;\n      var minWidth = column.minWidth;\n      if (!column.width) {\n        var finalWidth = autoWidth;\n        if (maxWidth && maxWidth < finalWidth) {\n          finalWidth = Math.min(maxWidth, remainedWidth);\n        }\n        // `minWidth` has higher priority. `minWidth` decide that whether the\n        // bar is able to be visible. So `minWidth` should not be restricted\n        // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\n        // the extreme cases for `value` axis, bars are allowed to overlap\n        // with each other if `minWidth` specified.\n        if (minWidth && minWidth > finalWidth) {\n          finalWidth = minWidth;\n        }\n        if (finalWidth !== autoWidth) {\n          column.width = finalWidth;\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\n          autoWidthCount--;\n        }\n      } else {\n        // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\n        // CSS does. Because barWidth can be a percent value, where\n        // `barMaxWidth` can be used to restrict the final width.\n        var finalWidth = column.width;\n        if (maxWidth) {\n          finalWidth = Math.min(finalWidth, maxWidth);\n        }\n        // `minWidth` has higher priority, as described above\n        if (minWidth) {\n          finalWidth = Math.max(finalWidth, minWidth);\n        }\n        column.width = finalWidth;\n        remainedWidth -= finalWidth + barGapPercent * finalWidth;\n        autoWidthCount--;\n      }\n    });\n    // Recalculate width again\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n    var offset = -widthSum / 2;\n    each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        bandWidth: bandWidth,\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\nfunction retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\n  if (barWidthAndOffset && axis) {\n    var result = barWidthAndOffset[getAxisKey(axis)];\n    if (result != null && seriesModel != null) {\n      return result[getSeriesStackId(seriesModel)];\n    }\n    return result;\n  }\n}\nexport { retrieveColumnLayout };\nexport function layout(seriesType, ecModel) {\n  var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\n  var barWidthAndOffset = makeColumnLayout(seriesModels);\n  each(seriesModels, function (seriesModel) {\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    data.setLayout({\n      bandWidth: columnLayoutInfo.bandWidth,\n      offset: columnOffset,\n      size: columnWidth\n    });\n  });\n}\n// TODO: Do not support stack in large mode yet.\nexport function createProgressiveLayout(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      if (!isOnCartesian(seriesModel)) {\n        return;\n      }\n      var data = seriesModel.getData();\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n      var valueAxis = cartesian.getOtherAxis(baseAxis);\n      var valueDimIdx = data.getDimensionIndex(data.mapDimension(valueAxis.dim));\n      var baseDimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n      var drawBackground = seriesModel.get('showBackground', true);\n      var valueDim = data.mapDimension(valueAxis.dim);\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n      var stacked = isDimensionStacked(data, valueDim) && !!data.getCalculationInfo('stackedOnSeries');\n      var isValueAxisH = valueAxis.isHorizontal();\n      var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\n      var isLarge = isInLargeMode(seriesModel);\n      var barMinHeight = seriesModel.get('barMinHeight') || 0;\n      var stackedDimIdx = stackResultDim && data.getDimensionIndex(stackResultDim);\n      // Layout info.\n      var columnWidth = data.getLayout('size');\n      var columnOffset = data.getLayout('offset');\n      return {\n        progress: function (params, data) {\n          var count = params.count;\n          var largePoints = isLarge && createFloat32Array(count * 3);\n          var largeBackgroundPoints = isLarge && drawBackground && createFloat32Array(count * 3);\n          var largeDataIndices = isLarge && createFloat32Array(count);\n          var coordLayout = cartesian.master.getRect();\n          var bgSize = isValueAxisH ? coordLayout.width : coordLayout.height;\n          var dataIndex;\n          var store = data.getStore();\n          var idxOffset = 0;\n          while ((dataIndex = params.next()) != null) {\n            var value = store.get(stacked ? stackedDimIdx : valueDimIdx, dataIndex);\n            var baseValue = store.get(baseDimIdx, dataIndex);\n            var baseCoord = valueAxisStart;\n            var stackStartValue = void 0;\n            // Because of the barMinHeight, we can not use the value in\n            // stackResultDimension directly.\n            if (stacked) {\n              stackStartValue = +value - store.get(valueDimIdx, dataIndex);\n            }\n            var x = void 0;\n            var y = void 0;\n            var width = void 0;\n            var height = void 0;\n            if (isValueAxisH) {\n              var coord = cartesian.dataToPoint([value, baseValue]);\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([stackStartValue, baseValue]);\n                baseCoord = startCoord[0];\n              }\n              x = baseCoord;\n              y = coord[1] + columnOffset;\n              width = coord[0] - baseCoord;\n              height = columnWidth;\n              if (Math.abs(width) < barMinHeight) {\n                width = (width < 0 ? -1 : 1) * barMinHeight;\n              }\n            } else {\n              var coord = cartesian.dataToPoint([baseValue, value]);\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([baseValue, stackStartValue]);\n                baseCoord = startCoord[1];\n              }\n              x = coord[0] + columnOffset;\n              y = baseCoord;\n              width = columnWidth;\n              height = coord[1] - baseCoord;\n              if (Math.abs(height) < barMinHeight) {\n                // Include zero to has a positive bar\n                height = (height <= 0 ? -1 : 1) * barMinHeight;\n              }\n            }\n            if (!isLarge) {\n              data.setItemLayout(dataIndex, {\n                x: x,\n                y: y,\n                width: width,\n                height: height\n              });\n            } else {\n              largePoints[idxOffset] = x;\n              largePoints[idxOffset + 1] = y;\n              largePoints[idxOffset + 2] = isValueAxisH ? width : height;\n              if (largeBackgroundPoints) {\n                largeBackgroundPoints[idxOffset] = isValueAxisH ? coordLayout.x : x;\n                largeBackgroundPoints[idxOffset + 1] = isValueAxisH ? y : coordLayout.y;\n                largeBackgroundPoints[idxOffset + 2] = bgSize;\n              }\n              largeDataIndices[dataIndex] = dataIndex;\n            }\n            idxOffset += 3;\n          }\n          if (isLarge) {\n            data.setLayout({\n              largePoints: largePoints,\n              largeDataIndices: largeDataIndices,\n              largeBackgroundPoints: largeBackgroundPoints,\n              valueAxisHorizontal: isValueAxisH\n            });\n          }\n        }\n      };\n    }\n  };\n}\nfunction isOnCartesian(seriesModel) {\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n}\nfunction isInLargeMode(seriesModel) {\n  return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\n}\n// See cases in `test/bar-start.html` and `#7412`, `#8747`.\nfunction getValueAxisStart(baseAxis, valueAxis) {\n  var startValue = valueAxis.model.get('startValue');\n  if (!startValue) {\n    startValue = 0;\n  }\n  return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? startValue > 0 ? startValue : 1 : startValue));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/*\n* A third-party license is embedded for some of the code in this file:\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design has\n// considered these common cases:\n// (1) Time that is persistent in server is in UTC, but it is needed to be displayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\nimport * as numberUtil from '../util/number.js';\nimport { ONE_SECOND, ONE_MINUTE, ONE_HOUR, ONE_DAY, ONE_YEAR, format, leveledFormat, timeUnits, fullLeveledFormatter, getPrimaryTimeUnit, isPrimaryTimeUnit, getDefaultFormatPrecisionOfInterval, fullYearGetterName, monthSetterName, fullYearSetterName, dateSetterName, hoursGetterName, hoursSetterName, minutesSetterName, secondsSetterName, millisecondsSetterName, monthGetterName, dateGetterName, minutesGetterName, secondsGetterName, millisecondsGetterName, getUnitFromValue, primaryTimeUnits, roundTime } from '../util/time.js';\nimport * as scaleHelper from './helper.js';\nimport IntervalScale from './Interval.js';\nimport Scale from './Scale.js';\nimport { warn } from '../util/log.js';\nimport { each, filter, indexOf, isNumber, map } from 'zrender/lib/core/util.js';\nimport { getScaleBreakHelper } from './break.js';\n// FIXME 公用？\nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n  return lo;\n};\nvar TimeScale = /** @class */function (_super) {\n  __extends(TimeScale, _super);\n  function TimeScale(settings) {\n    var _this = _super.call(this, settings) || this;\n    _this.type = 'time';\n    return _this;\n  }\n  /**\n   * Get label is mainly for other components like dataZoom, tooltip.\n   */\n  TimeScale.prototype.getLabel = function (tick) {\n    var useUTC = this.getSetting('useUTC');\n    return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n  };\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n    var isUTC = this.getSetting('useUTC');\n    var lang = this.getSetting('locale');\n    return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n  };\n  /**\n   * @override\n   */\n  TimeScale.prototype.getTicks = function (opt) {\n    opt = opt || {};\n    var interval = this._interval;\n    var extent = this._extent;\n    var scaleBreakHelper = getScaleBreakHelper();\n    var ticks = [];\n    // If interval is 0, return [];\n    if (!interval) {\n      return ticks;\n    }\n    var useUTC = this.getSetting('useUTC');\n    if (scaleBreakHelper && opt.breakTicks === 'only_break') {\n      getScaleBreakHelper().addBreaksToTicks(ticks, this._brkCtx.breaks, this._extent);\n      return ticks;\n    }\n    var extent0Unit = getUnitFromValue(extent[1], useUTC);\n    ticks.push({\n      value: extent[0],\n      time: {\n        level: 0,\n        upperTimeUnit: extent0Unit,\n        lowerTimeUnit: extent0Unit\n      }\n    });\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent, this._getExtentSpanWithBreaks(), this._brkCtx);\n    ticks = ticks.concat(innerTicks);\n    var extent1Unit = getUnitFromValue(extent[1], useUTC);\n    ticks.push({\n      value: extent[1],\n      time: {\n        level: 0,\n        upperTimeUnit: extent1Unit,\n        lowerTimeUnit: extent1Unit\n      }\n    });\n    var isUTC = this.getSetting('useUTC');\n    var upperUnitIndex = primaryTimeUnits.length - 1;\n    var maxLevel = 0;\n    each(ticks, function (tick) {\n      upperUnitIndex = Math.min(upperUnitIndex, indexOf(primaryTimeUnits, tick.time.upperTimeUnit));\n      maxLevel = Math.max(maxLevel, tick.time.level);\n    });\n    if (scaleBreakHelper) {\n      getScaleBreakHelper().pruneTicksByBreak(opt.pruneByBreak, ticks, this._brkCtx.breaks, function (item) {\n        return item.value;\n      }, this._approxInterval, this._extent);\n    }\n    if (scaleBreakHelper && opt.breakTicks !== 'none') {\n      getScaleBreakHelper().addBreaksToTicks(ticks, this._brkCtx.breaks, this._extent, function (trimmedBrk) {\n        // @see `parseTimeAxisLabelFormatterDictionary`.\n        var lowerBrkUnitIndex = Math.max(indexOf(primaryTimeUnits, getUnitFromValue(trimmedBrk.vmin, isUTC)), indexOf(primaryTimeUnits, getUnitFromValue(trimmedBrk.vmax, isUTC)));\n        var upperBrkUnitIndex = 0;\n        for (var unitIdx = 0; unitIdx < primaryTimeUnits.length; unitIdx++) {\n          if (!isPrimaryUnitValueAndGreaterSame(primaryTimeUnits[unitIdx], trimmedBrk.vmin, trimmedBrk.vmax, isUTC)) {\n            upperBrkUnitIndex = unitIdx;\n            break;\n          }\n        }\n        var upperIdx = Math.min(upperBrkUnitIndex, upperUnitIndex);\n        var lowerIdx = Math.max(upperIdx, lowerBrkUnitIndex);\n        return {\n          level: maxLevel,\n          lowerTimeUnit: primaryTimeUnits[lowerIdx],\n          upperTimeUnit: primaryTimeUnits[upperIdx]\n        };\n      });\n    }\n    return ticks;\n  };\n  TimeScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this.getExtent();\n    // If extent start and end are same, expand them\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= ONE_DAY;\n      extent[1] += ONE_DAY;\n    }\n    // If there are no data and extent are [Infinity, -Infinity]\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - ONE_DAY;\n    }\n    this._innerSetExtent(extent[0], extent[1]);\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n  };\n  TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var span = this._getExtentSpanWithBreaks();\n    this._approxInterval = span / approxTickNum;\n    if (minInterval != null && this._approxInterval < minInterval) {\n      this._approxInterval = minInterval;\n    }\n    if (maxInterval != null && this._approxInterval > maxInterval) {\n      this._approxInterval = maxInterval;\n    }\n    var scaleIntervalsLen = scaleIntervals.length;\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1);\n    // Interval that can be used to calculate ticks\n    this._interval = scaleIntervals[idx][1];\n    this._intervalPrecision = scaleHelper.getIntervalPrecision(this._interval);\n    // Min level used when picking ticks from top down.\n    // We check one more level to avoid the ticks are to sparse in some case.\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n  };\n  TimeScale.prototype.parse = function (val) {\n    // val might be float.\n    return isNumber(val) ? val : +numberUtil.parseDate(val);\n  };\n  TimeScale.prototype.contain = function (val) {\n    return scaleHelper.contain(val, this._extent);\n  };\n  TimeScale.prototype.normalize = function (val) {\n    return this._calculator.normalize(val, this._extent);\n  };\n  TimeScale.prototype.scale = function (val) {\n    return this._calculator.scale(val, this._extent);\n  };\n  TimeScale.type = 'time';\n  return TimeScale;\n}(IntervalScale);\n/**\n * This implementation was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\nvar scaleIntervals = [\n// Format                           interval\n['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\n];\nfunction isPrimaryUnitValueAndGreaterSame(unit, valueA, valueB, isUTC) {\n  return roundTime(new Date(valueA), unit, isUTC).getTime() === roundTime(new Date(valueB), unit, isUTC).getTime();\n}\n// function isUnitValueSame(\n//     unit: PrimaryTimeUnit,\n//     valueA: number,\n//     valueB: number,\n//     isUTC: boolean\n// ): boolean {\n//     const dateA = numberUtil.parseDate(valueA) as any;\n//     const dateB = numberUtil.parseDate(valueB) as any;\n//     const isSame = (unit: PrimaryTimeUnit) => {\n//         return getUnitValue(dateA, unit, isUTC)\n//             === getUnitValue(dateB, unit, isUTC);\n//     };\n//     const isSameYear = () => isSame('year');\n//     // const isSameHalfYear = () => isSameYear() && isSame('half-year');\n//     // const isSameQuater = () => isSameYear() && isSame('quarter');\n//     const isSameMonth = () => isSameYear() && isSame('month');\n//     const isSameDay = () => isSameMonth() && isSame('day');\n//     // const isSameHalfDay = () => isSameDay() && isSame('half-day');\n//     const isSameHour = () => isSameDay() && isSame('hour');\n//     const isSameMinute = () => isSameHour() && isSame('minute');\n//     const isSameSecond = () => isSameMinute() && isSame('second');\n//     const isSameMilliSecond = () => isSameSecond() && isSame('millisecond');\n//     switch (unit) {\n//         case 'year':\n//             return isSameYear();\n//         case 'month':\n//             return isSameMonth();\n//         case 'day':\n//             return isSameDay();\n//         case 'hour':\n//             return isSameHour();\n//         case 'minute':\n//             return isSameMinute();\n//         case 'second':\n//             return isSameSecond();\n//         case 'millisecond':\n//             return isSameMilliSecond();\n//     }\n// }\n// const primaryUnitGetters = {\n//     year: fullYearGetterName(),\n//     month: monthGetterName(),\n//     day: dateGetterName(),\n//     hour: hoursGetterName(),\n//     minute: minutesGetterName(),\n//     second: secondsGetterName(),\n//     millisecond: millisecondsGetterName()\n// };\n// const primaryUnitUTCGetters = {\n//     year: fullYearGetterName(true),\n//     month: monthGetterName(true),\n//     day: dateGetterName(true),\n//     hour: hoursGetterName(true),\n//     minute: minutesGetterName(true),\n//     second: secondsGetterName(true),\n//     millisecond: millisecondsGetterName(true)\n// };\n// function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\n//     step = step || 1;\n//     switch (getPrimaryTimeUnit(unitName)) {\n//         case 'year':\n//             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\n//             break;\n//         case 'month':\n//             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\n//             break;\n//         case 'day':\n//             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\n//             break;\n//         case 'hour':\n//             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\n//             break;\n//         case 'minute':\n//             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\n//             break;\n//         case 'second':\n//             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\n//             break;\n//         case 'millisecond':\n//             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\n//             break;\n//     }\n//     return date.getTime();\n// }\n// const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\n// const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\n// const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\nfunction getDateInterval(approxInterval, daysInMonth) {\n  approxInterval /= ONE_DAY;\n  return approxInterval > 16 ? 16\n  // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick between two months.\n  : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\n  : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n}\nfunction getMonthInterval(approxInterval) {\n  var APPROX_ONE_MONTH = 30 * ONE_DAY;\n  approxInterval /= APPROX_ONE_MONTH;\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n}\nfunction getHourInterval(approxInterval) {\n  approxInterval /= ONE_HOUR;\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n}\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n  approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n}\nfunction getMillisecondsInterval(approxInterval) {\n  return numberUtil.nice(approxInterval, true);\n}\n// e.g., if the input unit is 'day', start calculate ticks from the first day of\n// that month to make ticks \"nice\".\nfunction getFirstTimestampOfUnit(timestamp, unitName, isUTC) {\n  var upperUnitIdx = Math.max(0, indexOf(primaryTimeUnits, unitName) - 1);\n  return roundTime(new Date(timestamp), primaryTimeUnits[upperUnitIdx], isUTC).getTime();\n}\nfunction createEstimateNiceMultiple(setMethodName, dateMethodInterval) {\n  var tmpDate = new Date(0);\n  tmpDate[setMethodName](1);\n  var tmpTime = tmpDate.getTime();\n  tmpDate[setMethodName](1 + dateMethodInterval);\n  var approxTimeInterval = tmpDate.getTime() - tmpTime;\n  return function (tickVal, targetValue) {\n    // Only in month that accurate result can not get by division of\n    // timestamp interval, but no need accurate here.\n    return Math.max(0, Math.round((targetValue - tickVal) / approxTimeInterval));\n  };\n}\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent, extentSpanWithBreaks, brkCtx) {\n  var safeLimit = 10000;\n  var unitNames = timeUnits;\n  var iter = 0;\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n    var estimateNiceMultiple = createEstimateNiceMultiple(setMethodName, interval);\n    var dateTime = minTimestamp;\n    var date = new Date(dateTime);\n    // if (isDate) {\n    //     d -= 1; // Starts with 0;   PENDING\n    // }\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n      out.push({\n        value: dateTime\n      });\n      if (iter++ > safeLimit) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn('Exceed safe limit in time scale.');\n        }\n        break;\n      }\n      date[setMethodName](date[getMethodName]() + interval);\n      dateTime = date.getTime();\n      if (brkCtx) {\n        var moreMultiple = brkCtx.calcNiceTickMultiple(dateTime, estimateNiceMultiple);\n        if (moreMultiple > 0) {\n          date[setMethodName](date[getMethodName]() + moreMultiple * interval);\n          dateTime = date.getTime();\n        }\n      }\n    }\n    // This extra tick is for calcuating ticks of next level. Will not been added to the final result\n    out.push({\n      value: dateTime,\n      notAdd: true\n    });\n  }\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n    var newAddedTicks = [];\n    var isFirstLevel = !lastLevelTicks.length;\n    if (isPrimaryUnitValueAndGreaterSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n      return;\n    }\n    if (isFirstLevel) {\n      lastLevelTicks = [{\n        value: getFirstTimestampOfUnit(extent[0], unitName, isUTC)\n      }, {\n        value: extent[1]\n      }];\n    }\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n      var startTick = lastLevelTicks[i].value;\n      var endTick = lastLevelTicks[i + 1].value;\n      if (startTick === endTick) {\n        continue;\n      }\n      var interval = void 0;\n      var getterName = void 0;\n      var setterName = void 0;\n      var isDate = false;\n      switch (unitName) {\n        case 'year':\n          interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\n          getterName = fullYearGetterName(isUTC);\n          setterName = fullYearSetterName(isUTC);\n          break;\n        case 'half-year':\n        case 'quarter':\n        case 'month':\n          interval = getMonthInterval(approxInterval);\n          getterName = monthGetterName(isUTC);\n          setterName = monthSetterName(isUTC);\n          break;\n        case 'week': // PENDING If week is added. Ignore day.\n        case 'half-week':\n        case 'day':\n          interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\n          getterName = dateGetterName(isUTC);\n          setterName = dateSetterName(isUTC);\n          isDate = true;\n          break;\n        case 'half-day':\n        case 'quarter-day':\n        case 'hour':\n          interval = getHourInterval(approxInterval);\n          getterName = hoursGetterName(isUTC);\n          setterName = hoursSetterName(isUTC);\n          break;\n        case 'minute':\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\n          getterName = minutesGetterName(isUTC);\n          setterName = minutesSetterName(isUTC);\n          break;\n        case 'second':\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\n          getterName = secondsGetterName(isUTC);\n          setterName = secondsSetterName(isUTC);\n          break;\n        case 'millisecond':\n          interval = getMillisecondsInterval(approxInterval);\n          getterName = millisecondsGetterName(isUTC);\n          setterName = millisecondsSetterName(isUTC);\n          break;\n      }\n      // Notice: This expansion by `getFirstTimestampOfUnit` may cause too many ticks and\n      // iteration. e.g., when three levels of ticks is displayed, which can be caused by\n      // data zoom and axis breaks. Thus trim them here.\n      if (endTick >= extent[0] && startTick <= extent[1]) {\n        addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n      }\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n        // Add nearest years to the left extent.\n        levelTicks.unshift({\n          value: levelTicks[0].value - interval\n        });\n      }\n    }\n    for (var i = 0; i < newAddedTicks.length; i++) {\n      levelTicks.push(newAddedTicks[i]);\n    }\n  }\n  var levelsTicks = [];\n  var currentLevelTicks = [];\n  var tickCount = 0;\n  var lastLevelTickCount = 0;\n  for (var i = 0; i < unitNames.length; ++i) {\n    var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\n    if (!isPrimaryTimeUnit(unitNames[i])) {\n      // TODO\n      continue;\n    }\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n      if (currentLevelTicks.length) {\n        lastLevelTickCount = tickCount;\n        // Remove the duplicate so the tick count can be precisely.\n        currentLevelTicks.sort(function (a, b) {\n          return a.value - b.value;\n        });\n        var levelTicksRemoveDuplicated = [];\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n          var tickValue = currentLevelTicks[i_1].value;\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\n              tickCount++;\n            }\n          }\n        }\n        var targetTickNum = extentSpanWithBreaks / approxInterval;\n        // Added too much in this level and not too less in last level\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n          break;\n        }\n        // Only treat primary time unit as one level.\n        levelsTicks.push(levelTicksRemoveDuplicated);\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n          break;\n        }\n      }\n      // Reset if next unitName is primary\n      currentLevelTicks = [];\n    }\n  }\n  var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\n    return filter(levelTicks, function (tick) {\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n    });\n  }), function (levelTicks) {\n    return levelTicks.length > 0;\n  });\n  var ticks = [];\n  var maxLevel = levelsTicksInExtent.length - 1;\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n    var levelTicks = levelsTicksInExtent[i];\n    for (var k = 0; k < levelTicks.length; ++k) {\n      var unit = getUnitFromValue(levelTicks[k].value, isUTC);\n      ticks.push({\n        value: levelTicks[k].value,\n        time: {\n          level: maxLevel - i,\n          upperTimeUnit: unit,\n          lowerTimeUnit: unit\n        }\n      });\n    }\n  }\n  ticks.sort(function (a, b) {\n    return a.value - b.value;\n  });\n  // Remove duplicates\n  var result = [];\n  for (var i = 0; i < ticks.length; ++i) {\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n      result.push(ticks[i]);\n    }\n  }\n  return result;\n}\nScale.registerClass(TimeScale);\nexport default TimeScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Scale from './Scale.js';\nimport * as numberUtil from '../util/number.js';\n// Use some method of IntervalScale\nimport IntervalScale from './Interval.js';\nimport { getIntervalPrecision, logTransform } from './helper.js';\nimport { getScaleBreakHelper } from './break.js';\nvar fixRound = numberUtil.round;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar mathPow = Math.pow;\nvar mathLog = Math.log;\nvar LogScale = /** @class */function (_super) {\n  __extends(LogScale, _super);\n  function LogScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'log';\n    _this.base = 10;\n    _this._originalScale = new IntervalScale();\n    return _this;\n  }\n  /**\n   * @param Whether expand the ticks to niced extent.\n   */\n  LogScale.prototype.getTicks = function (opt) {\n    opt = opt || {};\n    var extent = this._extent.slice();\n    var originalExtent = this._originalScale.getExtent();\n    var ticks = _super.prototype.getTicks.call(this, opt);\n    var base = this.base;\n    var originalBreaks = this._originalScale._innerGetBreaks();\n    var scaleBreakHelper = getScaleBreakHelper();\n    return zrUtil.map(ticks, function (tick) {\n      var val = tick.value;\n      var roundingCriterion = null;\n      var powVal = mathPow(base, val);\n      // Fix #4158\n      if (val === extent[0] && this._fixMin) {\n        roundingCriterion = originalExtent[0];\n      } else if (val === extent[1] && this._fixMax) {\n        roundingCriterion = originalExtent[1];\n      }\n      var vBreak;\n      if (scaleBreakHelper) {\n        var transformed = scaleBreakHelper.getTicksLogTransformBreak(tick, base, originalBreaks, fixRoundingError);\n        vBreak = transformed.vBreak;\n        if (roundingCriterion == null) {\n          roundingCriterion = transformed.brkRoundingCriterion;\n        }\n      }\n      if (roundingCriterion != null) {\n        powVal = fixRoundingError(powVal, roundingCriterion);\n      }\n      return {\n        value: powVal,\n        \"break\": vBreak\n      };\n    }, this);\n  };\n  LogScale.prototype._getNonTransBreaks = function () {\n    return this._originalScale._innerGetBreaks();\n  };\n  LogScale.prototype.setExtent = function (start, end) {\n    this._originalScale.setExtent(start, end);\n    var loggedExtent = logTransform(this.base, [start, end]);\n    _super.prototype.setExtent.call(this, loggedExtent[0], loggedExtent[1]);\n  };\n  /**\n   * @return {number} end\n   */\n  LogScale.prototype.getExtent = function () {\n    var base = this.base;\n    var extent = _super.prototype.getExtent.call(this);\n    extent[0] = mathPow(base, extent[0]);\n    extent[1] = mathPow(base, extent[1]);\n    // Fix #4158\n    var originalExtent = this._originalScale.getExtent();\n    this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n    this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n    return extent;\n  };\n  LogScale.prototype.unionExtentFromData = function (data, dim) {\n    this._originalScale.unionExtentFromData(data, dim);\n    var loggedOther = logTransform(this.base, data.getApproximateExtent(dim), true);\n    this._innerUnionExtent(loggedOther);\n  };\n  /**\n   * Update interval and extent of intervals for nice ticks\n   * @param approxTickNum default 10 Given approx tick number\n   */\n  LogScale.prototype.calcNiceTicks = function (approxTickNum) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent.slice();\n    var span = this._getExtentSpanWithBreaks();\n    if (!isFinite(span) || span <= 0) {\n      return;\n    }\n    var interval = numberUtil.quantity(span);\n    var err = approxTickNum / span * interval;\n    // Filter ticks to get closer to the desired count.\n    if (err <= 0.5) {\n      interval *= 10;\n    }\n    // Interval should be integer\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n      interval *= 10;\n    }\n    var niceExtent = [fixRound(mathCeil(extent[0] / interval) * interval), fixRound(mathFloor(extent[1] / interval) * interval)];\n    this._interval = interval;\n    this._intervalPrecision = getIntervalPrecision(interval);\n    this._niceExtent = niceExtent;\n  };\n  LogScale.prototype.calcNiceExtent = function (opt) {\n    _super.prototype.calcNiceExtent.call(this, opt);\n    this._fixMin = opt.fixMin;\n    this._fixMax = opt.fixMax;\n  };\n  LogScale.prototype.contain = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return _super.prototype.contain.call(this, val);\n  };\n  LogScale.prototype.normalize = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return _super.prototype.normalize.call(this, val);\n  };\n  LogScale.prototype.scale = function (val) {\n    val = _super.prototype.scale.call(this, val);\n    return mathPow(this.base, val);\n  };\n  LogScale.prototype.setBreaksFromOption = function (breakOptionList) {\n    var scaleBreakHelper = getScaleBreakHelper();\n    if (!scaleBreakHelper) {\n      return;\n    }\n    var _a = scaleBreakHelper.logarithmicParseBreaksFromOption(breakOptionList, this.base, zrUtil.bind(this.parse, this)),\n      parsedOriginal = _a.parsedOriginal,\n      parsedLogged = _a.parsedLogged;\n    this._originalScale._innerSetBreak(parsedOriginal);\n    this._innerSetBreak(parsedLogged);\n  };\n  LogScale.type = 'log';\n  return LogScale;\n}(IntervalScale);\nfunction fixRoundingError(val, originalVal) {\n  return fixRound(val, numberUtil.getPrecision(originalVal));\n}\nScale.registerClass(LogScale);\nexport default LogScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { assert, isArray, eqNaN, isFunction } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nvar ScaleRawExtentInfo = /** @class */function () {\n  function ScaleRawExtentInfo(scale, model,\n  // Usually: data extent from all series on this axis.\n  originalExtent) {\n    this._prepareParams(scale, model, originalExtent);\n  }\n  /**\n   * Parameters depending on outside (like model, user callback)\n   * are prepared and fixed here.\n   */\n  ScaleRawExtentInfo.prototype._prepareParams = function (scale, model,\n  // Usually: data extent from all series on this axis.\n  dataExtent) {\n    if (dataExtent[1] < dataExtent[0]) {\n      dataExtent = [NaN, NaN];\n    }\n    this._dataMin = dataExtent[0];\n    this._dataMax = dataExtent[1];\n    var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\n    this._needCrossZero = scale.type === 'interval' && model.getNeedCrossZero && model.getNeedCrossZero();\n    var axisMinValue = model.get('min', true);\n    if (axisMinValue == null) {\n      axisMinValue = model.get('startValue', true);\n    }\n    var modelMinRaw = this._modelMinRaw = axisMinValue;\n    if (isFunction(modelMinRaw)) {\n      // This callback always provides users the full data extent (before data is filtered).\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMinRaw !== 'dataMin') {\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\n    }\n    var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\n    if (isFunction(modelMaxRaw)) {\n      // This callback always provides users the full data extent (before data is filtered).\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMaxRaw !== 'dataMax') {\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\n    }\n    if (isOrdinal) {\n      // FIXME: there is a flaw here: if there is no \"block\" data processor like `dataZoom`,\n      // and progressive rendering is using, here the category result might just only contain\n      // the processed chunk rather than the entire result.\n      this._axisDataLen = model.getCategories().length;\n    } else {\n      var boundaryGap = model.get('boundaryGap');\n      var boundaryGapArr = isArray(boundaryGap) ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\n      if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn('Boolean type for boundaryGap is only ' + 'allowed for ordinal axis. Please use string in ' + 'percentage instead, e.g., \"20%\". Currently, ' + 'boundaryGap is set to be 0.');\n        }\n        this._boundaryGapInner = [0, 0];\n      } else {\n        this._boundaryGapInner = [parsePercent(boundaryGapArr[0], 1), parsePercent(boundaryGapArr[1], 1)];\n      }\n    }\n  };\n  /**\n   * Calculate extent by prepared parameters.\n   * This method has no external dependency and can be called duplicatedly,\n   * getting the same result.\n   * If parameters changed, should call this method to recalcuate.\n   */\n  ScaleRawExtentInfo.prototype.calculate = function () {\n    // Notice: When min/max is not set (that is, when there are null/undefined,\n    // which is the most common case), these cases should be ensured:\n    // (1) For 'ordinal', show all axis.data.\n    // (2) For others:\n    //      + `boundaryGap` is applied (if min/max set, boundaryGap is\n    //      disabled).\n    //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\n    //      be the result that originalExtent enlarged by boundaryGap.\n    // (3) If no data, it should be ensured that `scale.setBlank` is set.\n    var isOrdinal = this._isOrdinal;\n    var dataMin = this._dataMin;\n    var dataMax = this._dataMax;\n    var axisDataLen = this._axisDataLen;\n    var boundaryGapInner = this._boundaryGapInner;\n    var span = !isOrdinal ? dataMax - dataMin || Math.abs(dataMin) : null;\n    // Currently if a `'value'` axis model min is specified as 'dataMin'/'dataMax',\n    // `boundaryGap` will not be used. It's the different from specifying as `null`/`undefined`.\n    var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\n    var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum;\n    // If `_modelMinNum`/`_modelMaxNum` is `null`/`undefined`, should not be fixed.\n    var minFixed = min != null;\n    var maxFixed = max != null;\n    if (min == null) {\n      min = isOrdinal ? axisDataLen ? 0 : NaN : dataMin - boundaryGapInner[0] * span;\n    }\n    if (max == null) {\n      max = isOrdinal ? axisDataLen ? axisDataLen - 1 : NaN : dataMax + boundaryGapInner[1] * span;\n    }\n    (min == null || !isFinite(min)) && (min = NaN);\n    (max == null || !isFinite(max)) && (max = NaN);\n    var isBlank = eqNaN(min) || eqNaN(max) || isOrdinal && !axisDataLen;\n    // If data extent modified, need to recalculated to ensure cross zero.\n    if (this._needCrossZero) {\n      // Axis is over zero and min is not set\n      if (min > 0 && max > 0 && !minFixed) {\n        min = 0;\n        // minFixed = true;\n      }\n      // Axis is under zero and max is not set\n      if (min < 0 && max < 0 && !maxFixed) {\n        max = 0;\n        // maxFixed = true;\n      }\n      // PENDING:\n      // When `needCrossZero` and all data is positive/negative, should it be ensured\n      // that the results processed by boundaryGap are positive/negative?\n      // If so, here `minFixed`/`maxFixed` need to be set.\n    }\n    var determinedMin = this._determinedMin;\n    var determinedMax = this._determinedMax;\n    if (determinedMin != null) {\n      min = determinedMin;\n      minFixed = true;\n    }\n    if (determinedMax != null) {\n      max = determinedMax;\n      maxFixed = true;\n    }\n    // Ensure min/max be finite number or NaN here. (not to be null/undefined)\n    // `NaN` means min/max axis is blank.\n    return {\n      min: min,\n      max: max,\n      minFixed: minFixed,\n      maxFixed: maxFixed,\n      isBlank: isBlank\n    };\n  };\n  ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen);\n    }\n    this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\n  };\n  ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\n    var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen\n      // Earse them usually means logic flaw.\n      && this[attr] == null);\n    }\n    this[attr] = val;\n  };\n  ScaleRawExtentInfo.prototype.freeze = function () {\n    // @ts-ignore\n    this.frozen = true;\n  };\n  return ScaleRawExtentInfo;\n}();\nexport { ScaleRawExtentInfo };\nvar DETERMINED_MIN_MAX_ATTR = {\n  min: '_determinedMin',\n  max: '_determinedMax'\n};\nvar DATA_MIN_MAX_ATTR = {\n  min: '_dataMin',\n  max: '_dataMax'\n};\n/**\n * Get scale min max and related info only depends on model settings.\n * This method can be called after coordinate system created.\n * For example, in data processing stage.\n *\n * Scale extent info probably be required multiple times during a workflow.\n * For example:\n * (1) `dataZoom` depends it to get the axis extent in \"100%\" state.\n * (2) `processor/extentCalculator` depends it to make sure whether axis extent is specified.\n * (3) `coordSys.update` use it to finally decide the scale extent.\n * But the callback of `min`/`max` should not be called multiple times.\n * The code below should not be implemented repeatedly either.\n * So we cache the result in the scale instance, which will be recreated at the beginning\n * of the workflow (because `scale` instance will be recreated each round of the workflow).\n */\nexport function ensureScaleRawExtentInfo(scale, model,\n// Usually: data extent from all series on this axis.\noriginalExtent) {\n  // Do not permit to recreate.\n  var rawExtentInfo = scale.rawExtentInfo;\n  if (rawExtentInfo) {\n    return rawExtentInfo;\n  }\n  rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent);\n  // @ts-ignore\n  scale.rawExtentInfo = rawExtentInfo;\n  return rawExtentInfo;\n}\nexport function parseAxisModelMinMax(scale, minMax) {\n  return minMax == null ? null : eqNaN(minMax) ? NaN : scale.parse(minMax);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport OrdinalScale from '../scale/Ordinal.js';\nimport IntervalScale from '../scale/Interval.js';\nimport Scale from '../scale/Scale.js';\nimport { prepareLayoutBarSeries, makeColumnLayout, retrieveColumnLayout } from '../layout/barGrid.js';\nimport TimeScale from '../scale/Time.js';\nimport LogScale from '../scale/Log.js';\nimport { getStackedDimension } from '../data/helper/dataStackHelper.js';\nimport { ensureScaleRawExtentInfo } from './scaleRawExtentInfo.js';\nimport { parseTimeAxisLabelFormatter } from '../util/time.js';\nimport { getScaleBreakHelper } from '../scale/break.js';\nimport { error } from '../util/log.js';\n/**\n * Get axis scale extent before niced.\n * Item of returned array can only be number (including Infinity and NaN).\n *\n * Caution:\n * Precondition of calling this method:\n * The scale extent has been initialized using series data extent via\n * `scale.setExtent` or `scale.unionExtentFromData`;\n */\nexport function getScaleExtent(scale, model) {\n  var scaleType = scale.type;\n  var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\n  scale.setBlank(rawExtentResult.isBlank);\n  var min = rawExtentResult.min;\n  var max = rawExtentResult.max;\n  // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\n  // is base axis\n  // FIXME\n  // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\n  // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\n  //     Should not depend on series type `bar`?\n  // (3) Fix that might overlap when using dataZoom.\n  // (4) Consider other chart types using `barGrid`?\n  // See #6728, #4862, `test/bar-overflow-time-plot.html`\n  var ecModel = model.ecModel;\n  if (ecModel && scaleType === 'time' /* || scaleType === 'interval' */) {\n    var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\n    var isBaseAxisAndHasBarSeries_1 = false;\n    zrUtil.each(barSeriesModels, function (seriesModel) {\n      isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\n    });\n    if (isBaseAxisAndHasBarSeries_1) {\n      // Calculate placement of bars on axis. TODO should be decoupled\n      // with barLayout\n      var barWidthAndOffset = makeColumnLayout(barSeriesModels);\n      // Adjust axis min and max to account for overflow\n      var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\n      min = adjustedScale.min;\n      max = adjustedScale.max;\n    }\n  }\n  return {\n    extent: [min, max],\n    // \"fix\" means \"fixed\", the value should not be\n    // changed in the subsequent steps.\n    fixMin: rawExtentResult.minFixed,\n    fixMax: rawExtentResult.maxFixed\n  };\n}\nfunction adjustScaleForOverflow(min, max, model,\n// Only support cartesian coord yet.\nbarWidthAndOffset) {\n  // Get Axis Length\n  var axisExtent = model.axis.getExtent();\n  var axisLength = Math.abs(axisExtent[1] - axisExtent[0]);\n  // Get bars on current base axis and calculate min and max overflow\n  var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\n  if (barsOnCurrentAxis === undefined) {\n    return {\n      min: min,\n      max: max\n    };\n  }\n  var minOverflow = Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    minOverflow = Math.min(item.offset, minOverflow);\n  });\n  var maxOverflow = -Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    maxOverflow = Math.max(item.offset + item.width, maxOverflow);\n  });\n  minOverflow = Math.abs(minOverflow);\n  maxOverflow = Math.abs(maxOverflow);\n  var totalOverFlow = minOverflow + maxOverflow;\n  // Calculate required buffer based on old range and overflow\n  var oldRange = max - min;\n  var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\n  var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\n  max += overflowBuffer * (maxOverflow / totalOverFlow);\n  min -= overflowBuffer * (minOverflow / totalOverFlow);\n  return {\n    min: min,\n    max: max\n  };\n}\n// Precondition of calling this method:\n// The scale extent has been initialized using series data extent via\n// `scale.setExtent` or `scale.unionExtentFromData`;\nexport function niceScaleExtent(scale, inModel) {\n  var model = inModel;\n  var extentInfo = getScaleExtent(scale, model);\n  var extent = extentInfo.extent;\n  var splitNumber = model.get('splitNumber');\n  if (scale instanceof LogScale) {\n    scale.base = model.get('logBase');\n  }\n  var scaleType = scale.type;\n  var interval = model.get('interval');\n  var isIntervalOrTime = scaleType === 'interval' || scaleType === 'time';\n  scale.setBreaksFromOption(retrieveAxisBreaksOption(model));\n  scale.setExtent(extent[0], extent[1]);\n  scale.calcNiceExtent({\n    splitNumber: splitNumber,\n    fixMin: extentInfo.fixMin,\n    fixMax: extentInfo.fixMax,\n    minInterval: isIntervalOrTime ? model.get('minInterval') : null,\n    maxInterval: isIntervalOrTime ? model.get('maxInterval') : null\n  });\n  // If some one specified the min, max. And the default calculated interval\n  // is not good enough. He can specify the interval. It is often appeared\n  // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\n  // to be 60.\n  // FIXME\n  if (interval != null) {\n    scale.setInterval && scale.setInterval(interval);\n  }\n}\n/**\n * @param axisType Default retrieve from model.type\n */\nexport function createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n      default:\n        // case 'value'/'interval', 'log', or others.\n        return new (Scale.getClass(axisType) || IntervalScale)();\n    }\n  }\n}\n/**\n * Check if the axis cross 0\n */\nexport function ifAxisCrossZero(axis) {\n  var dataExtent = axis.scale.getExtent();\n  var min = dataExtent[0];\n  var max = dataExtent[1];\n  return !(min > 0 && max > 0 || min < 0 && max < 0);\n}\n/**\n * @param axis\n * @return Label formatter function.\n *         param: {number} tickValue,\n *         param: {number} idx, the index in all ticks.\n *                         If category axis, this param is not required.\n *         return: {string} label string.\n */\nexport function makeLabelFormatter(axis) {\n  var labelFormatter = axis.getLabelModel().get('formatter');\n  if (axis.type === 'time') {\n    var parsed_1 = parseTimeAxisLabelFormatter(labelFormatter);\n    return function (tick, idx) {\n      return axis.scale.getFormattedLabel(tick, idx, parsed_1);\n    };\n  } else if (zrUtil.isString(labelFormatter)) {\n    return function (tick) {\n      // For category axis, get raw value; for numeric axis,\n      // get formatted label like '1,333,444'.\n      var label = axis.scale.getLabel(tick);\n      var text = labelFormatter.replace('{value}', label != null ? label : '');\n      return text;\n    };\n  } else if (zrUtil.isFunction(labelFormatter)) {\n    if (axis.type === 'category') {\n      return function (tick, idx) {\n        // The original intention of `idx` is \"the index of the tick in all ticks\".\n        // But the previous implementation of category axis do not consider the\n        // `axisLabel.interval`, which cause that, for example, the `interval` is\n        // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\n        // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\n        // the definition here for back compatibility.\n        return labelFormatter(getAxisRawValue(axis, tick), tick.value - axis.scale.getExtent()[0], null // Using `null` just for backward compat.\n        );\n      };\n    }\n    var scaleBreakHelper_1 = getScaleBreakHelper();\n    return function (tick, idx) {\n      // Using `null` just for backward compat. It's been found that in the `test/axis-customTicks.html`,\n      // there is a formatter `function (value, index, revers = true) { ... }`. Although the third param\n      // `revers` is incorrect and always `null`, changing it might introduce a breaking change.\n      var extra = null;\n      if (scaleBreakHelper_1) {\n        extra = scaleBreakHelper_1.makeAxisLabelFormatterParamBreak(extra, tick[\"break\"]);\n      }\n      return labelFormatter(getAxisRawValue(axis, tick), idx, extra);\n    };\n  } else {\n    return function (tick) {\n      return axis.scale.getLabel(tick);\n    };\n  }\n}\nexport function getAxisRawValue(axis, tick) {\n  // In category axis with data zoom, tick is not the original\n  // index of axis.data. So tick should not be exposed to user\n  // in category axis.\n  return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\n}\n/**\n * @param model axisLabelModel or axisTickModel\n * @return {number|String} Can be null|'auto'|number|function\n */\nexport function getOptionCategoryInterval(model) {\n  var interval = model.get('interval');\n  return interval == null ? 'auto' : interval;\n}\n/**\n * Set `categoryInterval` as 0 implicitly indicates that\n * show all labels regardless of overlap.\n * @param {Object} axis axisModel.axis\n */\nexport function shouldShowAllLabels(axis) {\n  return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\n}\nexport function getDataDimensionsOnAxis(data, axisDim) {\n  // Remove duplicated dat dimensions caused by `getStackedDimension`.\n  var dataDimMap = {};\n  // Currently `mapDimensionsAll` will contain stack result dimension ('__\\0ecstackresult').\n  // PENDING: is it reasonable? Do we need to remove the original dim from \"coord dim\" since\n  // there has been stacked result dim?\n  zrUtil.each(data.mapDimensionsAll(axisDim), function (dataDim) {\n    // For example, the extent of the original dimension\n    // is [0.1, 0.5], the extent of the `stackResultDimension`\n    // is [7, 9], the final extent should NOT include [0.1, 0.5],\n    // because there is no graphic corresponding to [0.1, 0.5].\n    // See the case in `test/area-stack.html` `main1`, where area line\n    // stack needs `yAxis` not start from 0.\n    dataDimMap[getStackedDimension(data, dataDim)] = true;\n  });\n  return zrUtil.keys(dataDimMap);\n}\nexport function unionAxisExtentFromData(dataExtent, data, axisDim) {\n  if (data) {\n    zrUtil.each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\n      var seriesExtent = data.getApproximateExtent(dim);\n      seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\n      seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\n    });\n  }\n}\nexport function isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\nexport function shouldAxisShow(axisModel) {\n  return axisModel.getShallow('show');\n}\nexport function retrieveAxisBreaksOption(model) {\n  var option = model.get('breaks', true);\n  if (option != null) {\n    if (!getScaleBreakHelper()) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('Must `import {AxisBreak} from \"echarts/features.js\"; use(AxisBreak);` first if using breaks option.');\n      }\n      return undefined;\n    }\n    if (!isSupportAxisBreak(model.axis)) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Axis '\" + model.axis.dim + \"'-'\" + model.axis.type + \"' does not support break.\");\n      }\n      return undefined;\n    }\n    return option;\n  }\n}\nfunction isSupportAxisBreak(axis) {\n  // The polar radius axis can also support break feasibly. Do not do it until the requirements are met.\n  return (axis.dim === 'x' || axis.dim === 'y' || axis.dim === 'z' || axis.dim === 'single') && axis.type !== 'category';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar AxisModelCommonMixin = /** @class */function () {\n  function AxisModelCommonMixin() {}\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n    var option = this.option;\n    return !option.scale;\n  };\n  /**\n   * Should be implemented by each axis model if necessary.\n   * @return coordinate system model\n   */\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n    return;\n  };\n  return AxisModelCommonMixin;\n}();\nexport { AxisModelCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { registerPreprocessor, registerProcessor, registerPostInit, registerPostUpdate, registerAction, registerCoordinateSystem, registerLayout, registerVisual, registerTransform, registerLoading, registerMap, registerUpdateLifecycle, PRIORITY } from './core/echarts.js';\nimport ComponentView from './view/Component.js';\nimport ChartView from './view/Chart.js';\nimport ComponentModel from './model/Component.js';\nimport SeriesModel from './model/Series.js';\nimport { isFunction, indexOf, isArray, each } from 'zrender/lib/core/util.js';\nimport { registerImpl } from './core/impl.js';\nimport { registerPainter } from 'zrender/lib/zrender.js';\nimport { registerCustomSeries } from './chart/custom/customSeriesRegister.js';\nvar extensions = [];\nvar extensionRegisters = {\n  registerPreprocessor: registerPreprocessor,\n  registerProcessor: registerProcessor,\n  registerPostInit: registerPostInit,\n  registerPostUpdate: registerPostUpdate,\n  registerUpdateLifecycle: registerUpdateLifecycle,\n  registerAction: registerAction,\n  registerCoordinateSystem: registerCoordinateSystem,\n  registerLayout: registerLayout,\n  registerVisual: registerVisual,\n  registerTransform: registerTransform,\n  registerLoading: registerLoading,\n  registerMap: registerMap,\n  registerImpl: registerImpl,\n  PRIORITY: PRIORITY,\n  ComponentModel: ComponentModel,\n  ComponentView: ComponentView,\n  SeriesModel: SeriesModel,\n  ChartView: ChartView,\n  // TODO Use ComponentModel and SeriesModel instead of Constructor\n  registerComponentModel: function (ComponentModelClass) {\n    ComponentModel.registerClass(ComponentModelClass);\n  },\n  registerComponentView: function (ComponentViewClass) {\n    ComponentView.registerClass(ComponentViewClass);\n  },\n  registerSeriesModel: function (SeriesModelClass) {\n    SeriesModel.registerClass(SeriesModelClass);\n  },\n  registerChartView: function (ChartViewClass) {\n    ChartView.registerClass(ChartViewClass);\n  },\n  registerCustomSeries: function (seriesType, renderItem) {\n    registerCustomSeries(seriesType, renderItem);\n  },\n  registerSubTypeDefaulter: function (componentType, defaulter) {\n    ComponentModel.registerSubTypeDefaulter(componentType, defaulter);\n  },\n  registerPainter: function (painterType, PainterCtor) {\n    registerPainter(painterType, PainterCtor);\n  }\n};\nexport function use(ext) {\n  if (isArray(ext)) {\n    // use([ChartLine, ChartBar]);\n    each(ext, function (singleExt) {\n      use(singleExt);\n    });\n    return;\n  }\n  if (indexOf(extensions, ext) >= 0) {\n    return;\n  }\n  extensions.push(ext);\n  if (isFunction(ext)) {\n    ext = {\n      install: ext\n    };\n  }\n  ext.install(extensionRegisters);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport { makeInner } from '../util/model.js';\nimport { makeLabelFormatter, getOptionCategoryInterval, shouldShowAllLabels } from './axisHelper.js';\nvar modelInner = makeInner();\nvar axisInner = makeInner();\nexport var AxisTickLabelComputingKind = {\n  estimate: 1,\n  determine: 2\n};\nexport function createAxisLabelsComputingContext(kind) {\n  return {\n    out: {\n      noPxChangeTryDetermine: []\n    },\n    kind: kind\n  };\n}\nfunction tickValuesToNumbers(axis, values) {\n  var nums = zrUtil.map(values, function (val) {\n    return axis.scale.parse(val);\n  });\n  if (axis.type === 'time' && nums.length > 0) {\n    // Time axis needs duplicate first/last tick (see TimeScale.getTicks())\n    // The first and last tick/label don't get drawn\n    nums.sort();\n    nums.unshift(nums[0]);\n    nums.push(nums[nums.length - 1]);\n  }\n  return nums;\n}\nexport function createAxisLabels(axis, ctx) {\n  var custom = axis.getLabelModel().get('customValues');\n  if (custom) {\n    var labelFormatter_1 = makeLabelFormatter(axis);\n    var extent_1 = axis.scale.getExtent();\n    var tickNumbers = tickValuesToNumbers(axis, custom);\n    var ticks = zrUtil.filter(tickNumbers, function (val) {\n      return val >= extent_1[0] && val <= extent_1[1];\n    });\n    return {\n      labels: zrUtil.map(ticks, function (numval) {\n        var tick = {\n          value: numval\n        };\n        return {\n          formattedLabel: labelFormatter_1(tick),\n          rawLabel: axis.scale.getLabel(tick),\n          tickValue: numval,\n          time: undefined,\n          \"break\": undefined\n        };\n      })\n    };\n  }\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryLabels(axis, ctx) : makeRealNumberLabels(axis);\n}\n/**\n * @param tickModel For example, can be axisTick, splitLine, splitArea.\n */\nexport function createAxisTicks(axis, tickModel, opt) {\n  var custom = axis.getTickModel().get('customValues');\n  if (custom) {\n    var extent_2 = axis.scale.getExtent();\n    var tickNumbers = tickValuesToNumbers(axis, custom);\n    return {\n      ticks: zrUtil.filter(tickNumbers, function (val) {\n        return val >= extent_2[0] && val <= extent_2[1];\n      })\n    };\n  }\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n    ticks: zrUtil.map(axis.scale.getTicks(opt), function (tick) {\n      return tick.value;\n    })\n  };\n}\nfunction makeCategoryLabels(axis, ctx) {\n  var labelModel = axis.getLabelModel();\n  var result = makeCategoryLabelsActually(axis, labelModel, ctx);\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\n    labels: []\n  } : result;\n}\nfunction makeCategoryLabelsActually(axis, labelModel, ctx) {\n  var labelsCache = ensureCategoryLabelCache(axis);\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\n  var isEstimate = ctx.kind === AxisTickLabelComputingKind.estimate;\n  // In AxisTickLabelComputingKind.estimate, the result likely varies during a single\n  // pass of ec main process,due to the change of axisExtent, and will not be shared with\n  // splitLine. Therefore no cache is used.\n  if (!isEstimate) {\n    // PENDING: check necessary?\n    var result_1 = axisCacheGet(labelsCache, optionLabelInterval);\n    if (result_1) {\n      return result_1;\n    }\n  }\n  var labels;\n  var numericLabelInterval;\n  if (zrUtil.isFunction(optionLabelInterval)) {\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n  } else {\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis, ctx) : optionLabelInterval;\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n  }\n  var result = {\n    labels: labels,\n    labelCategoryInterval: numericLabelInterval\n  };\n  if (!isEstimate) {\n    axisCacheSet(labelsCache, optionLabelInterval, result);\n  } else {\n    ctx.out.noPxChangeTryDetermine.push(function () {\n      axisCacheSet(labelsCache, optionLabelInterval, result);\n      return true;\n    });\n  }\n  return result;\n}\nfunction makeCategoryTicks(axis, tickModel) {\n  var ticksCache = ensureCategoryTickCache(axis);\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\n  var result = axisCacheGet(ticksCache, optionTickInterval);\n  if (result) {\n    return result;\n  }\n  var ticks;\n  var tickCategoryInterval;\n  // Optimize for the case that large category data and no label displayed,\n  // we should not return all ticks.\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    ticks = [];\n  }\n  if (zrUtil.isFunction(optionTickInterval)) {\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n  }\n  // Always use label interval by default despite label show. Consider this\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\n  else if (optionTickInterval === 'auto') {\n    var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel(), createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine));\n    tickCategoryInterval = labelsResult.labelCategoryInterval;\n    ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\n      return labelItem.tickValue;\n    });\n  } else {\n    tickCategoryInterval = optionTickInterval;\n    ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n  }\n  // Cache to avoid calling interval function repeatedly.\n  return axisCacheSet(ticksCache, optionTickInterval, {\n    ticks: ticks,\n    tickCategoryInterval: tickCategoryInterval\n  });\n}\nfunction makeRealNumberLabels(axis) {\n  var ticks = axis.scale.getTicks();\n  var labelFormatter = makeLabelFormatter(axis);\n  return {\n    labels: zrUtil.map(ticks, function (tick, idx) {\n      return {\n        formattedLabel: labelFormatter(tick, idx),\n        rawLabel: axis.scale.getLabel(tick),\n        tickValue: tick.value,\n        time: tick.time,\n        \"break\": tick[\"break\"]\n      };\n    })\n  };\n}\n// Large category data calculation is performance sensitive, and ticks and label probably will\n// be fetched multiple times (e.g. shared by splitLine and axisTick). So we cache the result.\n// axis is created each time during a ec process, so we do not need to clear cache.\nvar ensureCategoryTickCache = initAxisCacheMethod('axisTick');\nvar ensureCategoryLabelCache = initAxisCacheMethod('axisLabel');\n/**\n * PENDING: refactor to JS Map? Because key can be a function or more complicated object, and\n * cache size always is small, and currently no JS Map object key polyfill, we use a simple\n * array cache instead of plain object hash.\n */\nfunction initAxisCacheMethod(prop) {\n  return function ensureCache(axis) {\n    return axisInner(axis)[prop] || (axisInner(axis)[prop] = {\n      list: []\n    });\n  };\n}\nfunction axisCacheGet(cache, key) {\n  for (var i = 0; i < cache.list.length; i++) {\n    if (cache.list[i].key === key) {\n      return cache.list[i].value;\n    }\n  }\n}\nfunction axisCacheSet(cache, key, value) {\n  cache.list.push({\n    key: key,\n    value: value\n  });\n  return value;\n}\nfunction makeAutoCategoryInterval(axis, ctx) {\n  if (ctx.kind === AxisTickLabelComputingKind.estimate) {\n    // Currently axisTick is not involved in estimate kind, and the result likely varies during a\n    // single pass of ec main process, due to the change of axisExtent. Therefore no cache is used.\n    var result_2 = axis.calculateCategoryInterval(ctx);\n    ctx.out.noPxChangeTryDetermine.push(function () {\n      axisInner(axis).autoInterval = result_2;\n      return true;\n    });\n    return result_2;\n  }\n  // Both tick and label uses this result, cacah it to avoid recompute.\n  var result = axisInner(axis).autoInterval;\n  return result != null ? result : axisInner(axis).autoInterval = axis.calculateCategoryInterval(ctx);\n}\n/**\n * Calculate interval for category axis ticks and labels.\n * Use a stretegy to try to avoid overlapping.\n * To get precise result, at least one of `getRotate` and `isHorizontal`\n * should be implemented in axis.\n */\nexport function calculateCategoryInterval(axis, ctx) {\n  var kind = ctx.kind;\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\n  var labelFormatter = makeLabelFormatter(axis);\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  // Providing this method is for optimization:\n  // avoid generating a long array by `getTicks`\n  // in large category data case.\n  var tickCount = ordinalScale.count();\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n    return 0;\n  }\n  var step = 1;\n  // Simple optimization. Arbitrary value.\n  var maxCount = 40;\n  if (tickCount > maxCount) {\n    step = Math.max(1, Math.floor(tickCount / maxCount));\n  }\n  var tickValue = ordinalExtent[0];\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\n  var maxW = 0;\n  var maxH = 0;\n  // Caution: Performance sensitive for large category data.\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    var width = 0;\n    var height = 0;\n    // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n    var rect = textContain.getBoundingRect(labelFormatter({\n      value: tickValue\n    }), params.font, 'center', 'top');\n    // Magic number\n    width = rect.width * 1.3;\n    height = rect.height * 1.3;\n    // Min size, void long loop.\n    maxW = Math.max(maxW, width, 7);\n    maxH = Math.max(maxH, height, 7);\n  }\n  var dw = maxW / unitW;\n  var dh = maxH / unitH;\n  // 0/0 is NaN, 1/0 is Infinity.\n  isNaN(dw) && (dw = Infinity);\n  isNaN(dh) && (dh = Infinity);\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n  if (kind === AxisTickLabelComputingKind.estimate) {\n    // In estimate kind, the inteval likely varies, thus do not erase the cache.\n    ctx.out.noPxChangeTryDetermine.push(zrUtil.bind(calculateCategoryIntervalTryDetermine, null, axis, interval, tickCount));\n    return interval;\n  }\n  var lastInterval = calculateCategoryIntervalDealCache(axis, interval, tickCount);\n  return lastInterval != null ? lastInterval : interval;\n}\nfunction calculateCategoryIntervalTryDetermine(axis, interval, tickCount) {\n  return calculateCategoryIntervalDealCache(axis, interval, tickCount) == null;\n}\n// Return the lastInterval if need to use it, otherwise return NullUndefined and save cache.\nfunction calculateCategoryIntervalDealCache(axis, interval, tickCount) {\n  var cache = modelInner(axis.model);\n  var axisExtent = axis.getExtent();\n  var lastAutoInterval = cache.lastAutoInterval;\n  var lastTickCount = cache.lastTickCount;\n  // Use cache to keep interval stable while moving zoom window,\n  // otherwise the calculated interval might jitter when the zoom\n  // window size is close to the interval-changing size.\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n  // The jitter will cause that sometimes the displayed labels are\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1\n  // Always choose the bigger one, otherwise the critical\n  // point is not the same when zooming in or zooming out.\n  && lastAutoInterval > interval\n  // If the axis change is caused by chart resize, the cache should not\n  // be used. Otherwise some hidden labels might not be shown again.\n  && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n    return lastAutoInterval;\n  }\n  // Only update cache if cache not used, otherwise the\n  // changing of interval is too insensitive.\n  else {\n    cache.lastTickCount = tickCount;\n    cache.lastAutoInterval = interval;\n    cache.axisExtent0 = axisExtent[0];\n    cache.axisExtent1 = axisExtent[1];\n  }\n}\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\n  var labelModel = axis.getLabelModel();\n  return {\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n    labelRotate: labelModel.get('rotate') || 0,\n    font: labelModel.getFont()\n  };\n}\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n  var labelFormatter = makeLabelFormatter(axis);\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  var labelModel = axis.getLabelModel();\n  var result = [];\n  // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n  var step = Math.max((categoryInterval || 0) + 1, 1);\n  var startTick = ordinalExtent[0];\n  var tickCount = ordinalScale.count();\n  // Calculate start tick based on zero if possible to keep label consistent\n  // while zooming and moving while interval > 0. Otherwise the selection\n  // of displayable ticks and symbols probably keep changing.\n  // 3 is empirical value.\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n    startTick = Math.round(Math.ceil(startTick / step) * step);\n  }\n  // (1) Only add min max label here but leave overlap checking\n  // to render stage, which also ensure the returned list\n  // suitable for splitLine and splitArea rendering.\n  // (2) Scales except category always contain min max label so\n  // do not need to perform this process.\n  var showAllLabel = shouldShowAllLabels(axis);\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\n    addItem(ordinalExtent[0]);\n  }\n  // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n  var tickValue = startTick;\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    addItem(tickValue);\n  }\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n    addItem(ordinalExtent[1]);\n  }\n  function addItem(tickValue) {\n    var tickObj = {\n      value: tickValue\n    };\n    result.push(onlyTick ? tickValue : {\n      formattedLabel: labelFormatter(tickObj),\n      rawLabel: ordinalScale.getLabel(tickObj),\n      tickValue: tickValue,\n      time: undefined,\n      \"break\": undefined\n    });\n  }\n  return result;\n}\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n  var ordinalScale = axis.scale;\n  var labelFormatter = makeLabelFormatter(axis);\n  var result = [];\n  zrUtil.each(ordinalScale.getTicks(), function (tick) {\n    var rawLabel = ordinalScale.getLabel(tick);\n    var tickValue = tick.value;\n    if (categoryInterval(tick.value, rawLabel)) {\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tick),\n        rawLabel: rawLabel,\n        tickValue: tickValue,\n        time: undefined,\n        \"break\": undefined\n      });\n    }\n  });\n  return result;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map } from 'zrender/lib/core/util.js';\nimport { linearMap, getPixelPrecision, round } from '../util/number.js';\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval, AxisTickLabelComputingKind, createAxisLabelsComputingContext } from './axisTickLabelBuilder.js';\nvar NORMALIZED_EXTENT = [0, 1];\n/**\n * Base class of Axis.\n *\n * Lifetime: recreate for each main process.\n * [NOTICE]: Some caches is stored on the axis instance (see `axisTickLabelBuilder.ts`)\n *  which is based on this lifetime.\n */\nvar Axis = /** @class */function () {\n  function Axis(dim, scale, extent) {\n    this.onBand = false;\n    // Make sure that `extent[0] > extent[1]` only if `inverse: true`.\n    // `inverse` can be inferred by `extent` unless `extent[0] === extent[1]`.\n    this.inverse = false;\n    this.dim = dim;\n    this.scale = scale;\n    this._extent = extent || [0, 0];\n  }\n  /**\n   * If axis extent contain given coord\n   */\n  Axis.prototype.contain = function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  };\n  /**\n   * If axis extent contain given data\n   */\n  Axis.prototype.containData = function (data) {\n    return this.scale.contain(this.scale.parse(data));\n  };\n  /**\n   * Get coord extent.\n   */\n  Axis.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\n   * Get precision used for formatting\n   */\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  };\n  /**\n   * Set coord extent\n   */\n  Axis.prototype.setExtent = function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  };\n  /**\n   * Convert data to coord. Data is the rank if it has an ordinal scale\n   */\n  Axis.prototype.dataToCoord = function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(scale.parse(data));\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  };\n  /**\n   * Convert coord to data. Data is the rank if it has an ordinal scale\n   */\n  Axis.prototype.coordToData = function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  };\n  /**\n   * Convert pixel point to data in axis\n   */\n  Axis.prototype.pointToData = function (point, clamp) {\n    // Should be implemented in derived class if necessary.\n    return;\n  };\n  /**\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n   * `axis.getTicksCoords` considers `onBand`, which is used by\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\n   * @param opt.clamp If `true`, the first and the last\n   *        tick must be at the axis end points. Otherwise, clip ticks\n   *        that outside the axis extent.\n   */\n  Axis.prototype.getTicksCoords = function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel, {\n      breakTicks: opt.breakTicks,\n      pruneByBreak: opt.pruneByBreak\n    });\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickVal) {\n      return {\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n        tickValue: tickVal\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  };\n  Axis.prototype.getMinorTicksCoords = function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber');\n    // Protection.\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  };\n  Axis.prototype.getViewLabels = function (ctx) {\n    ctx = ctx || createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine);\n    return createAxisLabels(this, ctx).labels;\n  };\n  Axis.prototype.getLabelModel = function () {\n    return this.model.getModel('axisLabel');\n  };\n  /**\n   * Notice here we only get the default tick model. For splitLine\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\n   * manually when calling `getTicksCoords`.\n   * In GL, this method may be overridden to:\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n   */\n  Axis.prototype.getTickModel = function () {\n    return this.model.getModel('axisTick');\n  };\n  /**\n   * Get width of band\n   */\n  Axis.prototype.getBandWidth = function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0);\n    // Fix #2728, avoid NaN when only one data.\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  };\n  /**\n   * Only be called in category axis.\n   * Can be overridden, consider other axes like in 3D.\n   * @return Auto interval for cateogry axis tick and label\n   */\n  Axis.prototype.calculateCategoryInterval = function (ctx) {\n    ctx = ctx || createAxisLabelsComputingContext(AxisTickLabelComputingKind.determine);\n    return calculateCategoryInterval(this, ctx);\n  };\n  return Axis;\n}();\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n}\n// If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    ticksCoords[0].onBand = true;\n    last = ticksCoords[1] = {\n      coord: axisExtent[1],\n      tickValue: ticksCoords[0].tickValue,\n      onBand: true\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift_1 / 2;\n      ticksItem.onBand = true;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize,\n      tickValue: dataExtent[1] + 1,\n      onBand: true\n    };\n    ticksCoords.push(last);\n  }\n  var inverse = axisExtent[0] > axisExtent[1];\n  // Handling clamp.\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0],\n      onBand: true\n    });\n  }\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1],\n      onBand: true\n    });\n  }\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unnecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\nexport default Axis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { OrientedBoundingRect, WH, XY, ensureCopyRect, ensureCopyTransform, expandOrShrinkRect, isBoundingRectAxisAligned } from '../util/graphic.js';\nimport { LabelMarginType } from './labelStyle.js';\nvar LABEL_LAYOUT_BASE_PROPS = ['label', 'labelLine', 'layoutOption', 'priority', 'defaultAttr', 'marginForce', 'minMarginForce', 'marginDefault', 'suggestIgnore'];\nvar LABEL_LAYOUT_DIRTY_BIT_OTHERS = 1;\nvar LABEL_LAYOUT_DIRTY_BIT_OBB = 2;\nvar LABEL_LAYOUT_DIRTY_ALL = LABEL_LAYOUT_DIRTY_BIT_OTHERS | LABEL_LAYOUT_DIRTY_BIT_OBB;\nexport function setLabelLayoutDirty(labelGeometry, dirtyOrClear, dirtyBits) {\n  dirtyBits = dirtyBits || LABEL_LAYOUT_DIRTY_ALL;\n  dirtyOrClear ? labelGeometry.dirty |= dirtyBits : labelGeometry.dirty &= ~dirtyBits;\n}\nfunction isLabelLayoutDirty(labelGeometry, dirtyBits) {\n  dirtyBits = dirtyBits || LABEL_LAYOUT_DIRTY_ALL;\n  return labelGeometry.dirty == null || !!(labelGeometry.dirty & dirtyBits);\n}\n/**\n * [CAUTION]\n *  - No auto dirty propagation mechanism yet. If the transform of the raw label or any of its ancestors is\n *    changed, must sync the changes to the props of `LabelGeometry` by:\n *    either explicitly call:\n *      `setLabelLayoutDirty(labelLayout, true); ensureLabelLayoutWithGeometry(labelLayout);`\n *    or call (if only translation is performed):\n *      `labelLayoutApplyTranslation(labelLayout);`\n *  - `label.ignore` is not necessarily falsy, and not considered in computing `LabelGeometry`,\n *    since it might be modified by some overlap resolving handling.\n *  - To duplicate or make a variation:\n *    use `newLabelLayoutWithGeometry`.\n *\n * The result can also be the input of this method.\n * @return `NullUndefined` if and only if `labelLayout` is `NullUndefined`.\n */\nexport function ensureLabelLayoutWithGeometry(labelLayout) {\n  if (!labelLayout) {\n    return;\n  }\n  if (isLabelLayoutDirty(labelLayout)) {\n    computeLabelGeometry(labelLayout, labelLayout.label, labelLayout);\n  }\n  return labelLayout;\n}\n/**\n * The props in `out` will be filled if existing, or created.\n */\nexport function computeLabelGeometry(out, label, opt) {\n  // [CAUTION] These props may be modified directly for performance consideration,\n  //  therefore, do not output the internal data structure of zrender Element.\n  var rawTransform = label.getComputedTransform();\n  out.transform = ensureCopyTransform(out.transform, rawTransform);\n  // NOTE: should call `getBoundingRect` after `getComputedTransform`, or may get an inaccurate bounding rect.\n  //  The reason is that `getComputedTransform` calls `__host.updateInnerText()` internally, which updates the label\n  //  by `textConfig` mounted on the host.\n  // PENDING: add a dirty bit for that in zrender?\n  var outLocalRect = out.localRect = ensureCopyRect(out.localRect, label.getBoundingRect());\n  var labelStyleExt = label.style;\n  var margin = labelStyleExt.margin;\n  var marginForce = opt && opt.marginForce;\n  var minMarginForce = opt && opt.minMarginForce;\n  var marginDefault = opt && opt.marginDefault;\n  var marginType = labelStyleExt.__marginType;\n  if (marginType == null && marginDefault) {\n    margin = marginDefault;\n    marginType = LabelMarginType.textMargin;\n  }\n  // `textMargin` and `minMargin` can not exist both.\n  for (var i = 0; i < 4; i++) {\n    _tmpLabelMargin[i] = marginType === LabelMarginType.minMargin && minMarginForce && minMarginForce[i] != null ? minMarginForce[i] : marginForce && marginForce[i] != null ? marginForce[i] : margin ? margin[i] : 0;\n  }\n  if (marginType === LabelMarginType.textMargin) {\n    expandOrShrinkRect(outLocalRect, _tmpLabelMargin, false, false);\n  }\n  var outGlobalRect = out.rect = ensureCopyRect(out.rect, outLocalRect);\n  if (rawTransform) {\n    outGlobalRect.applyTransform(rawTransform);\n  }\n  // Notice: label.style.margin is actually `minMargin / 2`, handled by `setTextStyleCommon`.\n  if (marginType === LabelMarginType.minMargin) {\n    expandOrShrinkRect(outGlobalRect, _tmpLabelMargin, false, false);\n  }\n  out.axisAligned = isBoundingRectAxisAligned(rawTransform);\n  (out.label = out.label || {}).ignore = label.ignore;\n  setLabelLayoutDirty(out, false);\n  setLabelLayoutDirty(out, true, LABEL_LAYOUT_DIRTY_BIT_OBB);\n  // Do not remove `obb` (if existing) for reuse, just reset the dirty bit.\n  return out;\n}\nvar _tmpLabelMargin = [0, 0, 0, 0];\n/**\n * The props in `out` will be filled if existing, or created.\n */\nexport function computeLabelGeometry2(out, rawLocalRect, rawTransform) {\n  out.transform = ensureCopyTransform(out.transform, rawTransform);\n  out.localRect = ensureCopyRect(out.localRect, rawLocalRect);\n  out.rect = ensureCopyRect(out.rect, rawLocalRect);\n  if (rawTransform) {\n    out.rect.applyTransform(rawTransform);\n  }\n  out.axisAligned = isBoundingRectAxisAligned(rawTransform);\n  out.obb = undefined; // Reset to undefined, will be created by `ensureOBB` when using.\n  (out.label = out.label || {}).ignore = false;\n  return out;\n}\n/**\n * This is a shortcut of\n *   ```js\n *   labelLayout.label.x = newX;\n *   labelLayout.label.y = newY;\n *   setLabelLayoutDirty(labelLayout, true);\n *   ensureLabelLayoutWithGeometry(labelLayout);\n *   ```\n * and provide better performance in this common case.\n */\nexport function labelLayoutApplyTranslation(labelLayout, offset) {\n  if (!labelLayout) {\n    return;\n  }\n  labelLayout.label.x += offset.x;\n  labelLayout.label.y += offset.y;\n  labelLayout.label.markRedraw();\n  var transform = labelLayout.transform;\n  if (transform) {\n    transform[4] += offset.x;\n    transform[5] += offset.y;\n  }\n  var globalRect = labelLayout.rect;\n  if (globalRect) {\n    globalRect.x += offset.x;\n    globalRect.y += offset.y;\n  }\n  var obb = labelLayout.obb;\n  if (obb) {\n    obb.fromBoundingRect(labelLayout.localRect, transform);\n  }\n}\n/**\n * To duplicate or make a variation of a label layout.\n * Copy the only relevant properties to avoid the conflict or wrongly reuse of the props of `LabelLayoutWithGeometry`.\n */\nexport function newLabelLayoutWithGeometry(newBaseWithDefaults, source) {\n  for (var i = 0; i < LABEL_LAYOUT_BASE_PROPS.length; i++) {\n    var prop = LABEL_LAYOUT_BASE_PROPS[i];\n    if (newBaseWithDefaults[prop] == null) {\n      newBaseWithDefaults[prop] = source[prop];\n    }\n  }\n  return ensureLabelLayoutWithGeometry(newBaseWithDefaults);\n}\n/**\n * Create obb if no one, can cache it.\n */\nfunction ensureOBB(labelGeometry) {\n  var obb = labelGeometry.obb;\n  if (!obb || isLabelLayoutDirty(labelGeometry, LABEL_LAYOUT_DIRTY_BIT_OBB)) {\n    labelGeometry.obb = obb = obb || new OrientedBoundingRect();\n    obb.fromBoundingRect(labelGeometry.localRect, labelGeometry.transform);\n    setLabelLayoutDirty(labelGeometry, false, LABEL_LAYOUT_DIRTY_BIT_OBB);\n  }\n  return obb;\n}\n/**\n * Adjust labels on x/y direction to avoid overlap.\n *\n * PENDING: the current implementation is based on the global bounding rect rather than the local rect,\n *  which may be not preferable in some edge cases when the label has rotation, but works for most cases,\n *  since rotation is unnecessary when there is sufficient space, while squeezing is applied regardless\n *  of overlapping when there is no enough space.\n *\n * NOTICE:\n *  - The input `list` and its content will be modified (sort, label.x/y, rect).\n *  - The caller should sync the modifications to the other parts by\n *    `setLabelLayoutDirty` and `ensureLabelLayoutWithGeometry` if needed.\n *\n * @return adjusted\n */\nexport function shiftLayoutOnXY(list, xyDimIdx,\n// 0 for x, 1 for y\nminBound,\n// for x, leftBound; for y, topBound\nmaxBound,\n// for x, rightBound; for y, bottomBound\n// If average the shifts on all labels and add them to 0\n// TODO: Not sure if should enable it.\n// Pros: The angle of lines will distribute more equally\n// Cons: In some layout. It may not what user wanted. like in pie. the label of last sector is usually changed unexpectedly.\nbalanceShift) {\n  var len = list.length;\n  var xyDim = XY[xyDimIdx];\n  var sizeDim = WH[xyDimIdx];\n  if (len < 2) {\n    return false;\n  }\n  list.sort(function (a, b) {\n    return a.rect[xyDim] - b.rect[xyDim];\n  });\n  var lastPos = 0;\n  var delta;\n  var adjusted = false;\n  // const shifts = [];\n  var totalShifts = 0;\n  for (var i = 0; i < len; i++) {\n    var item = list[i];\n    var rect = item.rect;\n    delta = rect[xyDim] - lastPos;\n    if (delta < 0) {\n      // shiftForward(i, len, -delta);\n      rect[xyDim] -= delta;\n      item.label[xyDim] -= delta;\n      adjusted = true;\n    }\n    var shift = Math.max(-delta, 0);\n    // shifts.push(shift);\n    totalShifts += shift;\n    lastPos = rect[xyDim] + rect[sizeDim];\n  }\n  if (totalShifts > 0 && balanceShift) {\n    // Shift back to make the distribution more equally.\n    shiftList(-totalShifts / len, 0, len);\n  }\n  // TODO bleedMargin?\n  var first = list[0];\n  var last = list[len - 1];\n  var minGap;\n  var maxGap;\n  updateMinMaxGap();\n  // If ends exceed two bounds, squeeze at most 80%, then take the gap of two bounds.\n  minGap < 0 && squeezeGaps(-minGap, 0.8);\n  maxGap < 0 && squeezeGaps(maxGap, 0.8);\n  updateMinMaxGap();\n  takeBoundsGap(minGap, maxGap, 1);\n  takeBoundsGap(maxGap, minGap, -1);\n  // Handle bailout when there is not enough space.\n  updateMinMaxGap();\n  if (minGap < 0) {\n    squeezeWhenBailout(-minGap);\n  }\n  if (maxGap < 0) {\n    squeezeWhenBailout(maxGap);\n  }\n  function updateMinMaxGap() {\n    minGap = first.rect[xyDim] - minBound;\n    maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\n  }\n  function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\n    if (gapThisBound < 0) {\n      // Move from other gap if can.\n      var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\n      if (moveFromMaxGap > 0) {\n        shiftList(moveFromMaxGap * moveDir, 0, len);\n        var remained = moveFromMaxGap + gapThisBound;\n        if (remained < 0) {\n          squeezeGaps(-remained * moveDir, 1);\n        }\n      } else {\n        squeezeGaps(-gapThisBound * moveDir, 1);\n      }\n    }\n  }\n  function shiftList(delta, start, end) {\n    if (delta !== 0) {\n      adjusted = true;\n    }\n    for (var i = start; i < end; i++) {\n      var item = list[i];\n      var rect = item.rect;\n      rect[xyDim] += delta;\n      item.label[xyDim] += delta;\n    }\n  }\n  // Squeeze gaps if the labels exceed margin.\n  function squeezeGaps(delta, maxSqeezePercent) {\n    var gaps = [];\n    var totalGaps = 0;\n    for (var i = 1; i < len; i++) {\n      var prevItemRect = list[i - 1].rect;\n      var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\n      gaps.push(gap);\n      totalGaps += gap;\n    }\n    if (!totalGaps) {\n      return;\n    }\n    var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\n    if (delta > 0) {\n      for (var i = 0; i < len - 1; i++) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i] * squeezePercent;\n        // Forward\n        shiftList(movement, 0, i + 1);\n      }\n    } else {\n      // Backward\n      for (var i = len - 1; i > 0; i--) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i - 1] * squeezePercent;\n        shiftList(-movement, i, len);\n      }\n    }\n  }\n  /**\n   * Squeeze to allow overlap if there is no more space available.\n   * Let other overlapping strategy like hideOverlap do the job instead of keep exceeding the bounds.\n   */\n  function squeezeWhenBailout(delta) {\n    var dir = delta < 0 ? -1 : 1;\n    delta = Math.abs(delta);\n    var moveForEachLabel = Math.ceil(delta / (len - 1));\n    for (var i = 0; i < len - 1; i++) {\n      if (dir > 0) {\n        // Forward\n        shiftList(moveForEachLabel, 0, i + 1);\n      } else {\n        // Backward\n        shiftList(-moveForEachLabel, len - i - 1, len);\n      }\n      delta -= moveForEachLabel;\n      if (delta <= 0) {\n        return;\n      }\n    }\n  }\n  return adjusted;\n}\n/**\n * @see `SavedLabelAttr` in `LabelManager.ts`\n * @see `hideOverlap`\n */\nexport function restoreIgnore(labelList) {\n  for (var i = 0; i < labelList.length; i++) {\n    var labelItem = labelList[i];\n    var defaultAttr = labelItem.defaultAttr;\n    var labelLine = labelItem.labelLine;\n    labelItem.label.attr('ignore', defaultAttr.ignore);\n    labelLine && labelLine.attr('ignore', defaultAttr.labelGuideIgnore);\n  }\n}\n/**\n * [NOTICE - restore]:\n *  'series:layoutlabels' may be triggered during some shortcut passes, such as zooming in series.graph/geo\n *  (`updateLabelLayout`), where the modified `Element` props should be restorable from `defaultAttr`.\n *  @see `SavedLabelAttr` in `LabelManager.ts`\n *  `restoreIgnore` can be called to perform the restore, if needed.\n *\n * [NOTICE - state]:\n *  Regarding Element's states, this method is only designed for the normal state.\n *  PENDING: although currently this method is effectively called in other states in `updateLabelLayout` case,\n *      the bad case is not noticeable in the zooming scenario.\n */\nexport function hideOverlap(labelList) {\n  var displayedLabels = [];\n  // TODO, render overflow visible first, put in the displayedLabels.\n  labelList.sort(function (a, b) {\n    return (b.suggestIgnore ? 1 : 0) - (a.suggestIgnore ? 1 : 0) || b.priority - a.priority;\n  });\n  function hideEl(el) {\n    if (!el.ignore) {\n      // Show on emphasis.\n      var emphasisState = el.ensureState('emphasis');\n      if (emphasisState.ignore == null) {\n        emphasisState.ignore = false;\n      }\n    }\n    el.ignore = true;\n  }\n  for (var i = 0; i < labelList.length; i++) {\n    var labelItem = ensureLabelLayoutWithGeometry(labelList[i]);\n    // The current `el.ignore` is involved, since some previous overlap\n    // resolving strategies may have set `el.ignore` to true.\n    if (labelItem.label.ignore) {\n      continue;\n    }\n    var label = labelItem.label;\n    var labelLine = labelItem.labelLine;\n    // NOTICE: even when the with/height of globalRect of a label is 0, the label line should\n    // still be displayed, since we should follow the concept of \"truncation\", meaning that\n    // something exists even if it cannot be fully displayed. A visible label line is necessary\n    // to allow users to get a tooltip with label info on hover.\n    var overlapped = false;\n    for (var j = 0; j < displayedLabels.length; j++) {\n      if (labelIntersect(labelItem, displayedLabels[j], null, {\n        touchThreshold: 0.05\n      })) {\n        overlapped = true;\n        break;\n      }\n    }\n    // TODO Callback to determine if this overlap should be handled?\n    if (overlapped) {\n      hideEl(label);\n      labelLine && hideEl(labelLine);\n    } else {\n      displayedLabels.push(labelItem);\n    }\n  }\n}\n/**\n * Enable fast check for performance; use obb if inevitable.\n * If `mtv` is used, `targetLayoutInfo` can be moved based on the values filled into `mtv`.\n *\n * This method is based only on the current `Element` states (regardless of other states).\n * Typically this method (and the entire layout process) is performed in normal state.\n */\nexport function labelIntersect(baseLayoutInfo, targetLayoutInfo, mtv, intersectOpt) {\n  if (!baseLayoutInfo || !targetLayoutInfo) {\n    return false;\n  }\n  if (baseLayoutInfo.label && baseLayoutInfo.label.ignore || targetLayoutInfo.label && targetLayoutInfo.label.ignore) {\n    return false;\n  }\n  // Fast rejection.\n  if (!baseLayoutInfo.rect.intersect(targetLayoutInfo.rect, mtv, intersectOpt)) {\n    return false;\n  }\n  if (baseLayoutInfo.axisAligned && targetLayoutInfo.axisAligned) {\n    return true; // obb is the same as the normal bounding rect.\n  }\n  return ensureOBB(baseLayoutInfo).intersect(ensureOBB(targetLayoutInfo), mtv, intersectOpt);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isArray } from 'zrender/lib/core/util.js';\n/**\n * @return label string. Not null/undefined\n */\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length;\n  // Simple optimization (in lots of cases, label dims length is 1)\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n  var vals = [];\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport { getDefaultLabel } from './labelHelper.js';\nimport { extend, retrieve2 } from 'zrender/lib/core/util.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar Symbol = /** @class */function (_super) {\n  __extends(Symbol, _super);\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n    _this.updateData(data, idx, seriesScope, opts);\n    return _this;\n  }\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, z2, keepAspect) {\n    // Remove paths created before\n    this.removeAll();\n    // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: retrieve2(z2, 100),\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    });\n    // Rewrite drift method\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\n   * Stop animation\n   * @param {boolean} toLastFrame\n   */\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n  Symbol.prototype.getSymbolType = function () {\n    return this._symbolType;\n  };\n  /**\n   * FIXME:\n   * Caution: This method breaks the encapsulation of this module,\n   * but it indeed brings convenience. So do not use the method\n   * unless you detailedly know all the implements of `Symbol`,\n   * especially animation.\n   *\n   * Get symbol path element.\n   */\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\n   * Highlight symbol\n   */\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\n   * Downplay symbol\n   */\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\n   * @param {number} zlevel\n   * @param {number} z\n   */\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n  Symbol.prototype.setDraggable = function (draggable, hasCursorOption) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = !hasCursorOption && draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\n   * Update symbol properties\n   */\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var z2 = Symbol.getSymbolZ2(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n      this._createSymbol(symbolType, data, idx, symbolSize, z2, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n      saveOldStyle(symbolPath);\n    }\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n    if (disableAnimation) {\n      // Must stop leave transition manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('leave');\n    }\n  };\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var emphasisDisabled;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n      emphasisDisabled = seriesScope.emphasisDisabled;\n    }\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      emphasisDisabled = emphasisModel.get('disabled');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n    if (symbolOffset) {\n      symbolPath.x = symbolOffset[0];\n      symbolPath.y = symbolOffset[1];\n    }\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      }\n      // Disable decal because symbol scale will been applied on the decal.\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    });\n    // Do not execute util needed.\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n    // null / undefined / true means to use default strategy.\n    // 0 / false / negative number / NaN / Infinity means no scale.\n    var scaleRatio = hoverScale == null || hoverScale === true ? Math.max(1.1, 3 / this._sizeY)\n    // PENDING: restrict hoverScale > 1? It seems unreasonable to scale down\n    : isFinite(hoverScale) && hoverScale > 0 ? +hoverScale : 1;\n    // always set scale to allow resetting\n    emphasisState.scaleX = this._sizeX * scaleRatio;\n    emphasisState.scaleY = this._sizeY * scaleRatio;\n    this.setSymbolScale(1);\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n  Symbol.prototype.fadeOut = function (cb, seriesModel, opt) {\n    var symbolPath = this.childAt(0);\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation;\n    // Avoid mistaken hover when fading out\n    this.silent = symbolPath.silent = true;\n    // Not show text when animating\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n  Symbol.getSymbolSize = function (data, idx) {\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  };\n  Symbol.getSymbolZ2 = function (data, idx) {\n    return data.getItemVisual(idx, 'z2');\n  };\n  return Symbol;\n}(graphic.Group);\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport SymbolClz from './Symbol.js';\nimport { isObject } from 'zrender/lib/core/util.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx))\n  // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n  return opt || {};\n}\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\nvar SymbolDraw = /** @class */function () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    // Remove progressive els.\n    this._progressiveEls = null;\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    };\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldData) {\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n      var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n      var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n      if (!symbolEl\n      // Create a new if symbol type changed.\n      || oldSymbolType && oldSymbolType !== newSymbolType) {\n        group.remove(symbolEl);\n        symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      }\n      // Add back\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      }, seriesModel);\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n  ;\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n    var data = this._data;\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n  ;\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    // Clear\n    this._progressiveEls = [];\n    opt = normalizeUpdateOpt(opt);\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  SymbolDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data;\n    // Incremental model do not have this._data.\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        }, data.hostModel);\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n  ;\n  return SymbolDraw;\n}();\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider = /** @class */function () {\n  function LegendVisualProvider(\n  // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual,\n  // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData();\n    // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n    return rawData.mapArray(rawData.getName);\n  };\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n    return rawData.indexOfName(name) >= 0;\n  };\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n  return LegendVisualProvider;\n}();\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport { getLayoutParams, mergeLayoutParam } from '../../util/layout.js';\nimport tokens from '../../visual/tokens.js';\n// For backward compatibility, do not use a margin. Although the labels might touch the edge of\n// the canvas, the chart canvas probably does not have an border or a different background color within a page.\nexport var OUTER_BOUNDS_DEFAULT = {\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0\n};\nexport var OUTER_BOUNDS_CLAMP_DEFAULT = ['25%', '25%'];\nvar GridModel = /** @class */function (_super) {\n  __extends(GridModel, _super);\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GridModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var outerBoundsCp = getLayoutParams(option.outerBounds);\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n    if (outerBoundsCp && option.outerBounds) {\n      mergeLayoutParam(option.outerBounds, outerBoundsCp);\n    }\n  };\n  GridModel.prototype.mergeOption = function (newOption, ecModel) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    if (this.option.outerBounds && newOption.outerBounds) {\n      mergeLayoutParam(this.option.outerBounds, newOption.outerBounds);\n    }\n  };\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    // zlevel: 0,\n    z: 0,\n    left: '15%',\n    top: 65,\n    right: '10%',\n    bottom: 80,\n    // If grid size contain label\n    containLabel: false,\n    outerBoundsMode: 'auto',\n    outerBounds: OUTER_BOUNDS_DEFAULT,\n    outerBoundsContain: 'all',\n    outerBoundsClampWidth: OUTER_BOUNDS_CLAMP_DEFAULT[0],\n    outerBoundsClampHeight: OUTER_BOUNDS_CLAMP_DEFAULT[1],\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: tokens.color.transparent,\n    borderWidth: 1,\n    borderColor: tokens.color.neutral30\n  };\n  return GridModel;\n}(ComponentModel);\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar CartesianAxisModel = /** @class */function (_super) {\n  __extends(CartesianAxisModel, _super);\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport tokens from '../visual/tokens.js';\nvar defaultOption = {\n  show: true,\n  // zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {\n    // textMargin: never, // The default value will be specified based on `nameLocation`.\n  },\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: tokens.color.axisLine,\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15],\n    breakLine: true\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12,\n    color: tokens.color.axisLabel,\n    // In scenarios like axis labels, when labels text's progression direction matches the label\n    // layout direction (e.g., when all letters are in a single line), extra start/end margin is\n    // needed to prevent the text from appearing visually joined. In the other case, when lables\n    // are stacked (e.g., having rotation or horizontal labels on yAxis), the layout needs to be\n    // compact, so NO extra top/bottom margin should be applied.\n    textMargin: [0, 3]\n  },\n  splitLine: {\n    show: true,\n    showMinLine: true,\n    showMaxLine: true,\n    lineStyle: {\n      color: tokens.color.axisSplitLine,\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: [tokens.color.backgroundTint, tokens.color.backgroundTransparent]\n    }\n  },\n  breakArea: {\n    show: true,\n    itemStyle: {\n      color: tokens.color.neutral00,\n      // Break border color should be darker than the splitLine\n      // because it has opacity and should be more prominent\n      borderColor: tokens.color.border,\n      borderWidth: 1,\n      borderType: [3, 3],\n      opacity: 0.6\n    },\n    zigzagAmplitude: 4,\n    zigzagMinSpan: 4,\n    zigzagMaxSpan: 20,\n    zigzagZ: 100,\n    expandOnClick: true\n  },\n  breakLabelLayout: {\n    moveOverlap: 'auto'\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  jitter: 0,\n  jitterOverlap: true,\n  jitterMargin: 2,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto',\n    show: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Length of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {\n      // Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: tokens.color.axisMinorSplitLine,\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _impl = null;\nexport function registerAxisBreakHelperImpl(impl) {\n  if (!_impl) {\n    _impl = impl;\n  }\n}\nexport function getAxisBreakHelper() {\n  return _impl;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport { AXIS_TYPES } from './axisCommonTypes.js';\nimport { each, merge } from 'zrender/lib/core/util.js';\nimport { getAxisBreakHelper } from '../component/axis/axisBreakHelper.js';\n/**\n * Generate sub axis model class\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n */\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n    var AxisModel = /** @class */function (_super) {\n      __extends(AxisModel, _super);\n      function AxisModel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option;\n        // FIXME\n        // warning if called before all of 'getInitailData' finished.\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n          return this.__ordinalMeta.categories;\n        }\n      };\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n      AxisModel.prototype.updateAxisBreaks = function (payload) {\n        var axisBreakHelper = getAxisBreakHelper();\n        return axisBreakHelper ? axisBreakHelper.updateModelAxisBreak(this, payload) : {\n          breaks: []\n        };\n      };\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar Cartesian = /** @class */function () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n    this._dimList.push(dim);\n  };\n  return Cartesian;\n}();\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Cartesian from './Cartesian.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport { applyTransform } from 'zrender/lib/core/vector.js';\nexport var cartesian2DDimensions = ['x', 'y'];\nfunction canCalculateAffineTransform(scale) {\n  return (scale.type === 'interval' || scale.type === 'time') && !scale.hasBreaks();\n}\nvar Cartesian2D = /** @class */function (_super) {\n  __extends(Cartesian2D, _super);\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\n   * Calculate an affine transform matrix if two axes are time or value.\n   * It's mainly for accelartion on the large time series data.\n   */\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    }\n    // Accelerate data to point calculation on the special large time series data.\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\n   * Base axis will be used on stacking.\n   */\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n  Cartesian2D.prototype.containZone = function (data1, data2) {\n    var zoneDiag1 = this.dataToPoint(data1);\n    var zoneDiag2 = this.dataToPoint(data2);\n    var area = this.getArea();\n    var zone = new BoundingRect(zoneDiag1[0], zoneDiag1[1], zoneDiag2[0] - zoneDiag1[0], zoneDiag2[1] - zoneDiag1[1]);\n    return area.intersect(zone);\n  };\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1];\n    // [CAVEAT]: Do not add time consuming operation within and before fast path.\n    // Fast path.\n    if (this._transform\n    // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n  Cartesian2D.prototype.pointToData = function (point, clamp, out) {\n    out = out || [];\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n  Cartesian2D.prototype.getArea = function (tolerance) {\n    tolerance = tolerance || 0;\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]) - tolerance;\n    var y = Math.min(yExtent[0], yExtent[1]) - tolerance;\n    var width = Math.max(xExtent[0], xExtent[1]) - x + tolerance;\n    var height = Math.max(yExtent[0], yExtent[1]) - y + tolerance;\n    return new BoundingRect(x, y, width, height);\n  };\n  return Cartesian2D;\n}(Cartesian);\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar Axis2D = /** @class */function (_super) {\n  __extends(Axis2D, _super);\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\n     * Index of axis, can be used as key\n     * Injected outside.\n     */\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\n   * Set ordinalSortInfo\n   * @param info new OrdinalSortInfo\n   */\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n  return Axis2D;\n}(Axis);\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseFinder } from '../../util/model.js';\nimport { defaults, each } from 'zrender/lib/core/util.js';\nexport var AXIS_BREAK_EXPAND_ACTION_TYPE = 'expandAxisBreak';\nexport var AXIS_BREAK_COLLAPSE_ACTION_TYPE = 'collapseAxisBreak';\nexport var AXIS_BREAK_TOGGLE_ACTION_TYPE = 'toggleAxisBreak';\nvar AXIS_BREAK_CHANGED_EVENT_TYPE = 'axisbreakchanged';\nvar expandAxisBreakActionInfo = {\n  type: AXIS_BREAK_EXPAND_ACTION_TYPE,\n  event: AXIS_BREAK_CHANGED_EVENT_TYPE,\n  update: 'update',\n  refineEvent: refineAxisBreakChangeEvent\n};\nvar collapseAxisBreakActionInfo = {\n  type: AXIS_BREAK_COLLAPSE_ACTION_TYPE,\n  event: AXIS_BREAK_CHANGED_EVENT_TYPE,\n  update: 'update',\n  refineEvent: refineAxisBreakChangeEvent\n};\nvar toggleAxisBreakActionInfo = {\n  type: AXIS_BREAK_TOGGLE_ACTION_TYPE,\n  event: AXIS_BREAK_CHANGED_EVENT_TYPE,\n  update: 'update',\n  refineEvent: refineAxisBreakChangeEvent\n};\nfunction refineAxisBreakChangeEvent(actionResultBatch, payload, ecModel, api) {\n  var breaks = [];\n  each(actionResultBatch, function (actionResult) {\n    breaks = breaks.concat(actionResult.eventBreaks);\n  });\n  return {\n    eventContent: {\n      breaks: breaks\n    }\n  };\n}\nexport function registerAction(registers) {\n  registers.registerAction(expandAxisBreakActionInfo, actionHandler);\n  registers.registerAction(collapseAxisBreakActionInfo, actionHandler);\n  registers.registerAction(toggleAxisBreakActionInfo, actionHandler);\n  function actionHandler(payload, ecModel) {\n    var eventBreaks = [];\n    var finderResult = parseFinder(ecModel, payload);\n    function dealUpdate(modelProp, indexProp) {\n      each(finderResult[modelProp], function (axisModel) {\n        var result = axisModel.updateAxisBreaks(payload);\n        each(result.breaks, function (item) {\n          var _a;\n          eventBreaks.push(defaults((_a = {}, _a[indexProp] = axisModel.componentIndex, _a), item));\n        });\n      });\n    }\n    dealUpdate('xAxisModels', 'xAxisIndex');\n    dealUpdate('yAxisModels', 'yAxisIndex');\n    dealUpdate('singleAxisModels', 'singleAxisIndex');\n    return {\n      eventBreaks: eventBreaks\n    };\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieve, defaults, extend, each, isObject, isString, isNumber, isFunction, retrieve2, assert, map, retrieve3, filter } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport Model from '../../model/Model.js';\nimport { isRadianAroundZero, remRadian } from '../../util/number.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport * as matrixUtil from 'zrender/lib/core/matrix.js';\nimport { applyTransform as v2ApplyTransform } from 'zrender/lib/core/vector.js';\nimport { isNameLocationCenter, shouldShowAllLabels } from '../../coord/axisHelper.js';\nimport { hideOverlap, labelIntersect, computeLabelGeometry2, ensureLabelLayoutWithGeometry, labelLayoutApplyTranslation, setLabelLayoutDirty, newLabelLayoutWithGeometry } from '../../label/labelLayoutHelper.js';\nimport { makeInner } from '../../util/model.js';\nimport { getAxisBreakHelper } from './axisBreakHelper.js';\nimport { AXIS_BREAK_EXPAND_ACTION_TYPE } from './axisAction.js';\nimport { getScaleBreakHelper } from '../../scale/break.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Point from 'zrender/lib/core/Point.js';\nimport { copyTransform } from 'zrender/lib/core/Transformable.js';\nimport { AxisTickLabelComputingKind, createAxisLabelsComputingContext } from '../../coord/axisTickLabelBuilder.js';\nvar PI = Math.PI;\nvar DEFAULT_CENTER_NAME_MARGIN_LEVELS = [[1, 2, 1, 2], [5, 3, 5, 3], [8, 3, 8, 3]];\nvar DEFAULT_ENDS_NAME_MARGIN_LEVELS = [[0, 1, 0, 1], [0, 3, 0, 3], [0, 3, 0, 3]];\nexport var getLabelInner = makeInner();\nvar getTickInner = makeInner();\n/**\n * A context shared by difference axisBuilder instances.\n * For cross-axes overlap resolving.\n *\n * Lifecycle constraint: should not over a pass of ec main process.\n *  If model is changed, the context must be disposed.\n *\n * @see AxisBuilderLocalContext\n */\nvar AxisBuilderSharedContext = /** @class */function () {\n  function AxisBuilderSharedContext(resolveAxisNameOverlap) {\n    /**\n     * [CAUTION] Do not modify this data structure outside this class.\n     */\n    this.recordMap = {};\n    this.resolveAxisNameOverlap = resolveAxisNameOverlap;\n  }\n  AxisBuilderSharedContext.prototype.ensureRecord = function (axisModel) {\n    var dim = axisModel.axis.dim;\n    var idx = axisModel.componentIndex;\n    var recordMap = this.recordMap;\n    var records = recordMap[dim] || (recordMap[dim] = []);\n    return records[idx] || (records[idx] = {\n      ready: {}\n    });\n  };\n  return AxisBuilderSharedContext;\n}();\nexport { AxisBuilderSharedContext };\n;\n/**\n * [CAUTION]\n *  1. The call of this function must be after axisLabel overlap handlings\n *     (such as `hideOverlap`, `fixMinMaxLabelShow`) and after transform calculating.\n *  2. Can be called multiple times and should be idempotent.\n */\nfunction resetOverlapRecordToShared(cfg, shared, axisModel, labelLayoutList) {\n  var axis = axisModel.axis;\n  var record = shared.ensureRecord(axisModel);\n  var labelInfoList = [];\n  var stOccupiedRect;\n  var useStOccupiedRect = hasAxisName(cfg.axisName) && isNameLocationCenter(cfg.nameLocation);\n  each(labelLayoutList, function (layout) {\n    var layoutInfo = ensureLabelLayoutWithGeometry(layout);\n    if (!layoutInfo || layoutInfo.label.ignore) {\n      return;\n    }\n    labelInfoList.push(layoutInfo);\n    var transGroup = record.transGroup;\n    if (useStOccupiedRect) {\n      // Transform to \"standard axis\" for creating stOccupiedRect (the label rects union).\n      transGroup.transform ? matrixUtil.invert(_stTransTmp, transGroup.transform) : matrixUtil.identity(_stTransTmp);\n      if (layoutInfo.transform) {\n        matrixUtil.mul(_stTransTmp, _stTransTmp, layoutInfo.transform);\n      }\n      BoundingRect.copy(_stLabelRectTmp, layoutInfo.localRect);\n      _stLabelRectTmp.applyTransform(_stTransTmp);\n      stOccupiedRect ? stOccupiedRect.union(_stLabelRectTmp) : BoundingRect.copy(stOccupiedRect = new BoundingRect(0, 0, 0, 0), _stLabelRectTmp);\n    }\n  });\n  var sortByDim = Math.abs(record.dirVec.x) > 0.1 ? 'x' : 'y';\n  var sortByValue = record.transGroup[sortByDim];\n  labelInfoList.sort(function (info1, info2) {\n    return Math.abs(info1.label[sortByDim] - sortByValue) - Math.abs(info2.label[sortByDim] - sortByValue);\n  });\n  if (useStOccupiedRect && stOccupiedRect) {\n    var extent = axis.getExtent();\n    var axisLineX = Math.min(extent[0], extent[1]);\n    var axisLineWidth = Math.max(extent[0], extent[1]) - axisLineX;\n    // If `nameLocation` is 'middle', enlarge axis labels boundingRect to axisLine to avoid bad\n    //  case like that axis name is placed in the gap between axis labels and axis line.\n    // If only one label exists, the entire band should be occupied for\n    // visual consistency, so extent it to [0, canvas width].\n    stOccupiedRect.union(new BoundingRect(axisLineX, 0, axisLineWidth, 1));\n  }\n  record.stOccupiedRect = stOccupiedRect;\n  record.labelInfoList = labelInfoList;\n}\nvar _stTransTmp = matrixUtil.create();\nvar _stLabelRectTmp = new BoundingRect(0, 0, 0, 0);\n/**\n * The default resolver does not involve other axes within the same coordinate system.\n */\nexport var resolveAxisNameOverlapDefault = function (cfg, ctx, axisModel, nameLayoutInfo, nameMoveDirVec, thisRecord) {\n  if (isNameLocationCenter(cfg.nameLocation)) {\n    var stOccupiedRect = thisRecord.stOccupiedRect;\n    if (stOccupiedRect) {\n      moveIfOverlap(computeLabelGeometry2({}, stOccupiedRect, thisRecord.transGroup.transform), nameLayoutInfo, nameMoveDirVec);\n    }\n  } else {\n    moveIfOverlapByLinearLabels(thisRecord.labelInfoList, thisRecord.dirVec, nameLayoutInfo, nameMoveDirVec);\n  }\n};\n// [NOTICE] not consider ignore.\nfunction moveIfOverlap(basedLayoutInfo, movableLayoutInfo, moveDirVec) {\n  var mtv = new Point();\n  if (labelIntersect(basedLayoutInfo, movableLayoutInfo, mtv, {\n    direction: Math.atan2(moveDirVec.y, moveDirVec.x),\n    bidirectional: false,\n    touchThreshold: 0.05\n  })) {\n    labelLayoutApplyTranslation(movableLayoutInfo, mtv);\n  }\n}\nexport function moveIfOverlapByLinearLabels(baseLayoutInfoList, baseDirVec, movableLayoutInfo, moveDirVec) {\n  // Detect and move from far to close.\n  var sameDir = Point.dot(moveDirVec, baseDirVec) >= 0;\n  for (var idx = 0, len = baseLayoutInfoList.length; idx < len; idx++) {\n    var labelInfo = baseLayoutInfoList[sameDir ? idx : len - 1 - idx];\n    if (!labelInfo.label.ignore) {\n      moveIfOverlap(labelInfo, movableLayoutInfo, moveDirVec);\n    }\n  }\n}\n/**\n * @caution\n * - Ensure it is called after the data processing stage finished.\n * - It might be called before `CahrtView#render`, sush as called at `CoordinateSystem#update`,\n *  thus ensure the result the same whenever it is called.\n *\n * A builder for a straight-line axis.\n *\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A \"standard axis\" is the axis [0,0]-->[abs(axisExtent[1]-axisExtent[0]),0]\n * for example: [0,0]-->[50,0]\n */\nvar AxisBuilder = /** @class */function () {\n  /**\n   * [CAUTION]: axisModel.axis.extent/scale must be ready to use.\n   */\n  function AxisBuilder(axisModel, api, opt, shared) {\n    this.group = new graphic.Group();\n    this._axisModel = axisModel;\n    this._api = api;\n    this._local = {};\n    this._shared = shared || new AxisBuilderSharedContext(resolveAxisNameOverlapDefault);\n    this._resetCfgDetermined(opt);\n  }\n  /**\n   * Regarding axis label related configurations, only the change of label.x/y is supported; other\n   * changes are not necessary and not performant. To be specific, only `axis.position`\n   * (and consequently `labelOffset`) and `axis.extent` can be changed, and assume everything in\n   * `axisModel` are not changed.\n   * Axis line related configurations can be changed since this method can only be called\n   * before they are created.\n   */\n  AxisBuilder.prototype.updateCfg = function (opt) {\n    if (process.env.NODE_ENV !== 'production') {\n      var ready = this._shared.ensureRecord(this._axisModel).ready;\n      // After that, changing cfg is not supported; avoid unnecessary complexity.\n      assert(!ready.axisLine && !ready.axisTickLabelDetermine);\n      // Have to be called again if cfg changed.\n      ready.axisName = ready.axisTickLabelEstimate = false;\n    }\n    var raw = this._cfg.raw;\n    raw.position = opt.position;\n    raw.labelOffset = opt.labelOffset;\n    this._resetCfgDetermined(raw);\n  };\n  /**\n   * [CAUTION] For debug usage. Never change it outside!\n   */\n  AxisBuilder.prototype.__getRawCfg = function () {\n    return this._cfg.raw;\n  };\n  AxisBuilder.prototype._resetCfgDetermined = function (raw) {\n    var axisModel = this._axisModel;\n    // FIXME:\n    //  Currently there is no uniformed way to set default values if an option\n    //  is specified null/undefined by user (intentionally or unintentionally),\n    //  e.g. null/undefined is not a illegal value for `nameLocation`.\n    //  Try to use `getDefaultOption` to address it. But radar has no `getDefaultOption`.\n    var axisModelDefaultOption = axisModel.getDefaultOption ? axisModel.getDefaultOption() : {};\n    // Default value\n    var axisName = retrieve2(raw.axisName, axisModel.get('name'));\n    var nameMoveOverlapOption = axisModel.get('nameMoveOverlap');\n    if (nameMoveOverlapOption == null || nameMoveOverlapOption === 'auto') {\n      nameMoveOverlapOption = retrieve2(raw.defaultNameMoveOverlap, true);\n    }\n    var cfg = {\n      raw: raw,\n      position: raw.position,\n      rotation: raw.rotation,\n      nameDirection: retrieve2(raw.nameDirection, 1),\n      tickDirection: retrieve2(raw.tickDirection, 1),\n      labelDirection: retrieve2(raw.labelDirection, 1),\n      labelOffset: retrieve2(raw.labelOffset, 0),\n      silent: retrieve2(raw.silent, true),\n      axisName: axisName,\n      nameLocation: retrieve3(axisModel.get('nameLocation'), axisModelDefaultOption.nameLocation, 'end'),\n      shouldNameMoveOverlap: hasAxisName(axisName) && nameMoveOverlapOption,\n      optionHideOverlap: axisModel.get(['axisLabel', 'hideOverlap']),\n      showMinorTicks: axisModel.get(['minorTick', 'show'])\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      assert(cfg.position != null);\n      assert(cfg.rotation != null);\n    }\n    this._cfg = cfg;\n    // FIXME Not use a separate text group?\n    var transformGroup = new graphic.Group({\n      x: cfg.position[0],\n      y: cfg.position[1],\n      rotation: cfg.rotation\n    });\n    transformGroup.updateTransform();\n    this._transformGroup = transformGroup;\n    var record = this._shared.ensureRecord(axisModel);\n    record.transGroup = this._transformGroup;\n    record.dirVec = new Point(Math.cos(-cfg.rotation), Math.sin(-cfg.rotation));\n  };\n  AxisBuilder.prototype.build = function (axisPartNameMap, extraParams) {\n    var _this = this;\n    if (!axisPartNameMap) {\n      axisPartNameMap = {\n        axisLine: true,\n        axisTickLabelEstimate: false,\n        axisTickLabelDetermine: true,\n        axisName: true\n      };\n    }\n    each(AXIS_BUILDER_AXIS_PART_NAMES, function (partName) {\n      if (axisPartNameMap[partName]) {\n        builders[partName](_this._cfg, _this._local, _this._shared, _this._axisModel, _this.group, _this._transformGroup, _this._api, extraParams || {});\n      }\n    });\n    return this;\n  };\n  /**\n   * Currently only get text align/verticalAlign by rotation.\n   * NO `position` is involved, otherwise it have to be performed for each `updateAxisLabelChangableProps`.\n   */\n  AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n    var rotationDiff = remRadian(textRotation - axisRotation);\n    var textAlign;\n    var textVerticalAlign;\n    if (isRadianAroundZero(rotationDiff)) {\n      // Label is parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI)) {\n      // Label is inverse parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n      if (rotationDiff > 0 && rotationDiff < PI) {\n        textAlign = direction > 0 ? 'right' : 'left';\n      } else {\n        textAlign = direction > 0 ? 'left' : 'right';\n      }\n    }\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  };\n  AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n    var eventData = {\n      componentType: axisModel.mainType,\n      componentIndex: axisModel.componentIndex\n    };\n    eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n    return eventData;\n  };\n  AxisBuilder.isLabelSilent = function (axisModel) {\n    var tooltipOpt = axisModel.get('tooltip');\n    return axisModel.get('silent')\n    // Consider mouse cursor, add these restrictions.\n    || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n  };\n  return AxisBuilder;\n}();\n;\n// Sorted by dependency order.\nvar AXIS_BUILDER_AXIS_PART_NAMES = ['axisLine', 'axisTickLabelEstimate', 'axisTickLabelDetermine', 'axisName'];\nvar builders = {\n  axisLine: function (cfg, local, shared, axisModel, group, transformGroup, api) {\n    if (process.env.NODE_ENV !== 'production') {\n      var ready = shared.ensureRecord(axisModel).ready;\n      assert(!ready.axisLine);\n      ready.axisLine = true;\n    }\n    var shown = axisModel.get(['axisLine', 'show']);\n    if (shown === 'auto') {\n      shown = true;\n      if (cfg.raw.axisLineAutoShow != null) {\n        shown = !!cfg.raw.axisLineAutoShow;\n      }\n    }\n    if (!shown) {\n      return;\n    }\n    var extent = axisModel.axis.getExtent();\n    var matrix = transformGroup.transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n    var inverse = pt1[0] > pt2[0];\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n    var pathBaseProp = {\n      strokeContainThreshold: cfg.raw.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1,\n      style: lineStyle\n    };\n    if (axisModel.get(['axisLine', 'breakLine']) && axisModel.axis.scale.hasBreaks()) {\n      getAxisBreakHelper().buildAxisBreakLine(axisModel, group, transformGroup, pathBaseProp);\n    } else {\n      var line = new graphic.Line(extend({\n        shape: {\n          x1: pt1[0],\n          y1: pt1[1],\n          x2: pt2[0],\n          y2: pt2[1]\n        }\n      }, pathBaseProp));\n      graphic.subPixelOptimizeLine(line.shape, line.style.lineWidth);\n      line.anid = 'line';\n      group.add(line);\n    }\n    var arrows = axisModel.get(['axisLine', 'symbol']);\n    if (arrows != null) {\n      var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n      if (isString(arrows)) {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n      if (isString(arrowSize) || isNumber(arrowSize)) {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n      var arrowOffset = normalizeSymbolOffset(axisModel.get(['axisLine', 'symbolOffset']) || 0, arrowSize);\n      var symbolWidth_1 = arrowSize[0];\n      var symbolHeight_1 = arrowSize[1];\n      each([{\n        rotate: cfg.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: cfg.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true);\n          // Calculate arrow position with offset\n          var r = point.r + point.offset;\n          var pt = inverse ? pt2 : pt1;\n          symbol.attr({\n            rotation: point.rotate,\n            x: pt[0] + r * Math.cos(cfg.rotation),\n            y: pt[1] - r * Math.sin(cfg.rotation),\n            silent: true,\n            z2: 11\n          });\n          group.add(symbol);\n        }\n      });\n    }\n  },\n  /**\n   * [CAUTION] This method can be called multiple times, following the change due to `resetCfg` called\n   *  in size measurement. Thus this method should be idempotent, and should be performant.\n   */\n  axisTickLabelEstimate: function (cfg, local, shared, axisModel, group, transformGroup, api, extraParams) {\n    if (process.env.NODE_ENV !== 'production') {\n      var ready = shared.ensureRecord(axisModel).ready;\n      assert(!ready.axisTickLabelDetermine);\n      ready.axisTickLabelEstimate = true;\n    }\n    var needCallLayout = dealLastTickLabelResultReusable(local, group, extraParams);\n    if (needCallLayout) {\n      layOutAxisTickLabel(cfg, local, shared, axisModel, group, transformGroup, api, AxisTickLabelComputingKind.estimate);\n    }\n  },\n  /**\n   * Finish axis tick label build.\n   * Can be only called once.\n   */\n  axisTickLabelDetermine: function (cfg, local, shared, axisModel, group, transformGroup, api, extraParams) {\n    if (process.env.NODE_ENV !== 'production') {\n      var ready = shared.ensureRecord(axisModel).ready;\n      ready.axisTickLabelDetermine = true;\n    }\n    var needCallLayout = dealLastTickLabelResultReusable(local, group, extraParams);\n    if (needCallLayout) {\n      layOutAxisTickLabel(cfg, local, shared, axisModel, group, transformGroup, api, AxisTickLabelComputingKind.determine);\n    }\n    var ticksEls = buildAxisMajorTicks(cfg, group, transformGroup, axisModel);\n    syncLabelIgnoreToMajorTicks(cfg, local.labelLayoutList, ticksEls);\n    buildAxisMinorTicks(cfg, group, transformGroup, axisModel, cfg.tickDirection);\n  },\n  /**\n   * [CAUTION] This method can be called multiple times, following the change due to `resetCfg` called\n   *  in size measurement. Thus this method should be idempotent, and should be performant.\n   */\n  axisName: function (cfg, local, shared, axisModel, group, transformGroup, api, extraParams) {\n    var sharedRecord = shared.ensureRecord(axisModel);\n    if (process.env.NODE_ENV !== 'production') {\n      var ready = sharedRecord.ready;\n      assert(ready.axisTickLabelEstimate || ready.axisTickLabelDetermine);\n      ready.axisName = true;\n    }\n    // Remove the existing name result created in estimation phase.\n    if (local.nameEl) {\n      group.remove(local.nameEl);\n      local.nameEl = sharedRecord.nameLayout = sharedRecord.nameLocation = null;\n    }\n    var name = cfg.axisName;\n    if (!hasAxisName(name)) {\n      return;\n    }\n    var nameLocation = cfg.nameLocation;\n    var nameDirection = cfg.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = axisModel.axis.getExtent();\n    var gapStartEndSignal = axisModel.axis.inverse ? -1 : 1;\n    var pos = new Point(0, 0);\n    var nameMoveDirVec = new Point(0, 0);\n    if (nameLocation === 'start') {\n      pos.x = extent[0] - gapStartEndSignal * gap;\n      nameMoveDirVec.x = -gapStartEndSignal;\n    } else if (nameLocation === 'end') {\n      pos.x = extent[1] + gapStartEndSignal * gap;\n      nameMoveDirVec.x = gapStartEndSignal;\n    } else {\n      // 'middle' or 'center'\n      pos.x = (extent[0] + extent[1]) / 2;\n      pos.y = cfg.labelOffset + nameDirection * gap;\n      nameMoveDirVec.y = nameDirection;\n    }\n    var mt = matrixUtil.create();\n    nameMoveDirVec.transform(matrixUtil.rotate(mt, mt, cfg.rotation));\n    var nameRotation = axisModel.get('nameRotate');\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n    var labelLayout;\n    var axisNameAvailableWidth;\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = AxisBuilder.innerTextLayout(cfg.rotation, nameRotation != null ? nameRotation : cfg.rotation,\n      // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(cfg.rotation, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = cfg.raw.axisNameAvailableWidth;\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(cfg.raw.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n    var nameMarginLevel = extraParams.nameMarginLevel || 0;\n    var textEl = new graphic.Text({\n      x: pos.x,\n      y: pos.y,\n      rotation: labelLayout.rotation,\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      style: createTextStyle(textStyleModel, {\n        text: name,\n        font: textFont,\n        overflow: 'truncate',\n        width: maxWidth,\n        ellipsis: ellipsis,\n        fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n        align: textStyleModel.get('align') || labelLayout.textAlign,\n        verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n      }),\n      z2: 1\n    });\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: name\n    });\n    textEl.__fullText = name;\n    // Id for animation\n    textEl.anid = 'name';\n    if (axisModel.get('triggerEvent')) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisName';\n      eventData.name = name;\n      getECData(textEl).eventData = eventData;\n    }\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    local.nameEl = textEl;\n    var nameLayout = sharedRecord.nameLayout = ensureLabelLayoutWithGeometry({\n      label: textEl,\n      priority: textEl.z2,\n      defaultAttr: {\n        ignore: textEl.ignore\n      },\n      marginDefault: isNameLocationCenter(nameLocation)\n      // Make axis name visually far from axis labels.\n      // (but not too aggressive, consider multiple small charts)\n      ? DEFAULT_CENTER_NAME_MARGIN_LEVELS[nameMarginLevel]\n      // top/button margin is set to `0` to inserted the xAxis name into the indention\n      // above the axis labels to save space. (see example below.)\n      : DEFAULT_ENDS_NAME_MARGIN_LEVELS[nameMarginLevel]\n    });\n    sharedRecord.nameLocation = nameLocation;\n    group.add(textEl);\n    textEl.decomposeTransform();\n    if (cfg.shouldNameMoveOverlap && nameLayout) {\n      var record = shared.ensureRecord(axisModel);\n      if (process.env.NODE_ENV !== 'production') {\n        assert(record.labelInfoList);\n      }\n      shared.resolveAxisNameOverlap(cfg, shared, axisModel, nameLayout, nameMoveDirVec, record);\n    }\n  }\n};\nfunction layOutAxisTickLabel(cfg, local, shared, axisModel, group, transformGroup, api, kind) {\n  if (!axisLabelBuildResultExists(local)) {\n    buildAxisLabel(cfg, local, group, kind, axisModel, api);\n  }\n  var labelLayoutList = local.labelLayoutList;\n  updateAxisLabelChangableProps(cfg, axisModel, labelLayoutList, transformGroup);\n  adjustBreakLabels(axisModel, cfg.rotation, labelLayoutList);\n  var optionHideOverlap = cfg.optionHideOverlap;\n  fixMinMaxLabelShow(axisModel, labelLayoutList, optionHideOverlap);\n  if (optionHideOverlap) {\n    // This bit fixes the label overlap issue for the time chart.\n    // See https://github.com/apache/echarts/issues/14266 for more.\n    hideOverlap(\n    // Filter the already ignored labels by the previous overlap resolving methods.\n    filter(labelLayoutList, function (layout) {\n      return layout && !layout.label.ignore;\n    }));\n  }\n  // Always call it even this axis has no name, since it serves in overlapping detection\n  // and grid outerBounds on other axis.\n  resetOverlapRecordToShared(cfg, shared, axisModel, labelLayoutList);\n}\n;\nfunction endTextLayout(rotation, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n/**\n * Assume `labelLayoutList` has no `label.ignore: true`.\n * Assume `labelLayoutList` have been sorted by value ascending order.\n */\nfunction fixMinMaxLabelShow(axisModel, labelLayoutList, optionHideOverlap) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  }\n  // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n  // Assert no ignore in labels.\n  function deal(showMinMaxLabel, outmostLabelIdx, innerLabelIdx) {\n    var outmostLabelLayout = ensureLabelLayoutWithGeometry(labelLayoutList[outmostLabelIdx]);\n    var innerLabelLayout = ensureLabelLayoutWithGeometry(labelLayoutList[innerLabelIdx]);\n    if (!outmostLabelLayout || !innerLabelLayout) {\n      return;\n    }\n    if (showMinMaxLabel === false || outmostLabelLayout.suggestIgnore) {\n      ignoreEl(outmostLabelLayout.label);\n      return;\n    }\n    if (innerLabelLayout.suggestIgnore) {\n      ignoreEl(innerLabelLayout.label);\n      return;\n    }\n    // PENDING: Originally we thought `optionHideOverlap === false` means do not hide anything,\n    //  since currently the bounding rect of text might not accurate enough and might slightly bigger,\n    //  which causes false positive. But `optionHideOverlap: null/undfined` is falsy and likely\n    //  be treated as false.\n    // In most fonts the glyph does not reach the boundary of the bounding rect.\n    // This is needed to avoid too aggressive to hide two elements that meet at the edge\n    // due to compact layout by the same bounding rect or OBB.\n    var touchThreshold = 0.1;\n    // This treatment is for backward compatibility. And `!optionHideOverlap` implies that\n    // the user accepts the visual touch between adjacent labels, thus \"hide min/max label\"\n    // should be conservative, since the space might be sufficient in this case.\n    if (!optionHideOverlap) {\n      var marginForce = [0, 0, 0, 0];\n      // Make a copy to apply `ignoreMargin`.\n      outmostLabelLayout = newLabelLayoutWithGeometry({\n        marginForce: marginForce\n      }, outmostLabelLayout);\n      innerLabelLayout = newLabelLayoutWithGeometry({\n        marginForce: marginForce\n      }, innerLabelLayout);\n    }\n    if (labelIntersect(outmostLabelLayout, innerLabelLayout, null, {\n      touchThreshold: touchThreshold\n    })) {\n      if (showMinMaxLabel) {\n        ignoreEl(innerLabelLayout.label);\n      } else {\n        ignoreEl(outmostLabelLayout.label);\n      }\n    }\n  }\n  // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n  var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n  var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']);\n  var labelsLen = labelLayoutList.length;\n  deal(showMinLabel, 0, 1);\n  deal(showMaxLabel, labelsLen - 1, labelsLen - 2);\n}\n// PENDING: Is it necessary to display a tick while the corresponding label is ignored?\nfunction syncLabelIgnoreToMajorTicks(cfg, labelLayoutList, tickEls) {\n  if (cfg.showMinorTicks) {\n    // It probably unreaasonable to hide major ticks when show minor ticks.\n    return;\n  }\n  each(labelLayoutList, function (labelLayout) {\n    if (labelLayout && labelLayout.label.ignore) {\n      for (var idx = 0; idx < tickEls.length; idx++) {\n        var tickEl = tickEls[idx];\n        // Assume small array, linear search is fine for performance.\n        // PENDING: measure?\n        var tickInner = getTickInner(tickEl);\n        var labelInner = getLabelInner(labelLayout.label);\n        if (tickInner.tickValue != null && !tickInner.onBand && tickInner.tickValue === labelInner.tickValue) {\n          ignoreEl(tickEl);\n          return;\n        }\n      }\n    }\n  });\n}\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    }\n    // Tick line, Not use group transform to have better line draw\n    var tickEl = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      autoBatch: true,\n      silent: true\n    });\n    graphic.subPixelOptimizeLine(tickEl.shape, tickEl.style.lineWidth);\n    tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n    tickEls.push(tickEl);\n    var inner = getTickInner(tickEl);\n    inner.onBand = !!ticksCoords[i].onBand;\n    inner.tickValue = ticksCoords[i].tickValue;\n  }\n  return tickEls;\n}\nfunction buildAxisMajorTicks(cfg, group, transformGroup, axisModel) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n  var shown = tickModel.get('show');\n  if (shown === 'auto') {\n    shown = true;\n    if (cfg.raw.axisTickAutoShow != null) {\n      shown = !!cfg.raw.axisTickAutoShow;\n    }\n  }\n  if (!shown || axis.scale.isBlank()) {\n    return [];\n  }\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = cfg.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }), 'ticks');\n  for (var i = 0; i < ticksEls.length; i++) {\n    group.add(ticksEls[i]);\n  }\n  return ticksEls;\n}\nfunction buildAxisMinorTicks(cfg, group, transformGroup, axisModel, tickDirection) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n  if (!cfg.showMinorTicks || axis.scale.isBlank()) {\n    return;\n  }\n  var minorTicksCoords = axis.getMinorTicksCoords();\n  if (!minorTicksCoords.length) {\n    return;\n  }\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }));\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      group.add(minorTicksEls[k]);\n    }\n  }\n}\n// Return whether need to call `layOutAxisTickLabel` again.\nfunction dealLastTickLabelResultReusable(local, group, extraParams) {\n  if (axisLabelBuildResultExists(local)) {\n    var axisLabelsCreationContext = local.axisLabelsCreationContext;\n    if (process.env.NODE_ENV !== 'production') {\n      assert(local.labelGroup && axisLabelsCreationContext);\n    }\n    var noPxChangeTryDetermine = axisLabelsCreationContext.out.noPxChangeTryDetermine;\n    if (extraParams.noPxChange) {\n      var canDetermine = true;\n      for (var idx = 0; idx < noPxChangeTryDetermine.length; idx++) {\n        canDetermine = canDetermine && noPxChangeTryDetermine[idx]();\n      }\n      if (canDetermine) {\n        return false;\n      }\n    }\n    if (noPxChangeTryDetermine.length) {\n      // Remove the result of `buildAxisLabel`\n      group.remove(local.labelGroup);\n      axisLabelBuildResultSet(local, null, null, null);\n    }\n  }\n  return true;\n}\nfunction buildAxisLabel(cfg, local, group, kind, axisModel, api) {\n  var axis = axisModel.axis;\n  var show = retrieve(cfg.raw.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n  var labelGroup = new graphic.Group();\n  group.add(labelGroup);\n  var axisLabelCreationCtx = createAxisLabelsComputingContext(kind);\n  if (!show || axis.scale.isBlank()) {\n    axisLabelBuildResultSet(local, [], labelGroup, axisLabelCreationCtx);\n    return;\n  }\n  var labelModel = axisModel.getModel('axisLabel');\n  var labels = axis.getViewLabels(axisLabelCreationCtx);\n  // Special label rotate.\n  var labelRotation = (retrieve(cfg.raw.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = AxisBuilder.innerTextLayout(cfg.rotation, labelRotation, cfg.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var triggerEvent = axisModel.get('triggerEvent');\n  var z2Min = Infinity;\n  var z2Max = -Infinity;\n  each(labels, function (labelItem, index) {\n    var _a;\n    var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n    if (rawCategoryData && rawCategoryData[tickValue]) {\n      var rawCategoryItem = rawCategoryData[tickValue];\n      if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n        itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n      }\n    }\n    var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n    var align = itemLabelModel.getShallow('align', true) || labelLayout.textAlign;\n    var alignMin = retrieve2(itemLabelModel.getShallow('alignMinLabel', true), align);\n    var alignMax = retrieve2(itemLabelModel.getShallow('alignMaxLabel', true), align);\n    var verticalAlign = itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign;\n    var verticalAlignMin = retrieve2(itemLabelModel.getShallow('verticalAlignMinLabel', true), verticalAlign);\n    var verticalAlignMax = retrieve2(itemLabelModel.getShallow('verticalAlignMaxLabel', true), verticalAlign);\n    var z2 = 10 + (((_a = labelItem.time) === null || _a === void 0 ? void 0 : _a.level) || 0);\n    z2Min = Math.min(z2Min, z2);\n    z2Max = Math.max(z2Max, z2);\n    var textEl = new graphic.Text({\n      // --- transform props start ---\n      // All of the transform props MUST not be set here, but should be set in\n      // `updateAxisLabelChangableProps`, because they may change in estimation,\n      // and need to calculate based on global coord sys by `decomposeTransform`.\n      x: 0,\n      y: 0,\n      rotation: 0,\n      // --- transform props end ---\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      z2: z2,\n      style: createTextStyle(itemLabelModel, {\n        text: formattedLabel,\n        align: index === 0 ? alignMin : index === labels.length - 1 ? alignMax : align,\n        verticalAlign: index === 0 ? verticalAlignMin : index === labels.length - 1 ? verticalAlignMax : verticalAlign,\n        fill: isFunction(textColor) ? textColor(\n        // (1) In category axis with data zoom, tick is not the original\n        // index of axis.data. So tick should not be exposed to user\n        // in category axis.\n        // (2) Compatible with previous version, which always use formatted label as\n        // input. But in interval scale the formatted label is like '223,445', which\n        // maked user replace ','. So we modify it to return original val but remain\n        // it as 'string' to avoid error in replacing.\n        axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n      })\n    });\n    textEl.anid = 'label_' + tickValue;\n    var inner = getLabelInner(textEl);\n    inner[\"break\"] = labelItem[\"break\"];\n    inner.tickValue = tickValue;\n    inner.layoutRotation = labelLayout.rotation;\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: formattedLabel,\n      formatterParamsExtra: {\n        isTruncated: function () {\n          return textEl.isTruncated;\n        },\n        value: rawLabel,\n        tickIndex: index\n      }\n    });\n    // Pack data for mouse event\n    if (triggerEvent) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisLabel';\n      eventData.value = rawLabel;\n      eventData.tickIndex = index;\n      if (labelItem[\"break\"]) {\n        eventData[\"break\"] = {\n          // type: labelItem.break.type,\n          start: labelItem[\"break\"].parsedBreak.vmin,\n          end: labelItem[\"break\"].parsedBreak.vmax\n        };\n      }\n      if (axis.type === 'category') {\n        eventData.dataIndex = tickValue;\n      }\n      getECData(textEl).eventData = eventData;\n      if (labelItem[\"break\"]) {\n        addBreakEventHandler(axisModel, api, textEl, labelItem[\"break\"]);\n      }\n    }\n    labelEls.push(textEl);\n    labelGroup.add(textEl);\n  });\n  var labelLayoutList = map(labelEls, function (label) {\n    return {\n      label: label,\n      priority: getLabelInner(label)[\"break\"] ? label.z2 + (z2Max - z2Min + 1) // Make break labels be highest priority.\n      : label.z2,\n      defaultAttr: {\n        ignore: label.ignore\n      }\n    };\n  });\n  axisLabelBuildResultSet(local, labelLayoutList, labelGroup, axisLabelCreationCtx);\n}\n// Indicate that `layOutAxisTickLabel` has been called.\nfunction axisLabelBuildResultExists(local) {\n  return !!local.labelLayoutList;\n}\nfunction axisLabelBuildResultSet(local, labelLayoutList, labelGroup, axisLabelsCreationContext) {\n  // Ensure the same lifetime.\n  local.labelLayoutList = labelLayoutList;\n  local.labelGroup = labelGroup;\n  local.axisLabelsCreationContext = axisLabelsCreationContext;\n}\nfunction updateAxisLabelChangableProps(cfg, axisModel, labelLayoutList, transformGroup) {\n  var labelMargin = axisModel.get(['axisLabel', 'margin']);\n  each(labelLayoutList, function (layout, idx) {\n    var geometry = ensureLabelLayoutWithGeometry(layout);\n    if (!geometry) {\n      return;\n    }\n    var labelEl = geometry.label;\n    var inner = getLabelInner(labelEl);\n    // See the comment in `suggestIgnore`.\n    geometry.suggestIgnore = labelEl.ignore;\n    // Currently no `ignore:true` is set in `buildAxisLabel`\n    // But `ignore:true` may be set subsequently for overlap handling, thus reset it here.\n    labelEl.ignore = false;\n    copyTransform(_tmpLayoutEl, _tmpLayoutElReset);\n    _tmpLayoutEl.x = axisModel.axis.dataToCoord(inner.tickValue);\n    _tmpLayoutEl.y = cfg.labelOffset + cfg.labelDirection * labelMargin;\n    _tmpLayoutEl.rotation = inner.layoutRotation;\n    transformGroup.add(_tmpLayoutEl);\n    _tmpLayoutEl.updateTransform();\n    transformGroup.remove(_tmpLayoutEl);\n    _tmpLayoutEl.decomposeTransform();\n    copyTransform(labelEl, _tmpLayoutEl);\n    labelEl.markRedraw();\n    setLabelLayoutDirty(geometry, true);\n    ensureLabelLayoutWithGeometry(geometry);\n  });\n}\nvar _tmpLayoutEl = new graphic.Rect();\nvar _tmpLayoutElReset = new graphic.Rect();\nfunction hasAxisName(axisName) {\n  return !!axisName;\n}\nfunction addBreakEventHandler(axisModel, api, textEl, visualBreak) {\n  textEl.on('click', function (params) {\n    var payload = {\n      type: AXIS_BREAK_EXPAND_ACTION_TYPE,\n      breaks: [{\n        start: visualBreak.parsedBreak.breakOption.start,\n        end: visualBreak.parsedBreak.breakOption.end\n      }]\n    };\n    payload[axisModel.axis.dim + \"AxisIndex\"] = axisModel.componentIndex;\n    api.dispatchAction(payload);\n  });\n}\nfunction adjustBreakLabels(axisModel, axisRotation, labelLayoutList) {\n  var scaleBreakHelper = getScaleBreakHelper();\n  if (!scaleBreakHelper) {\n    return;\n  }\n  var breakLabelIndexPairs = scaleBreakHelper.retrieveAxisBreakPairs(labelLayoutList, function (layoutInfo) {\n    return layoutInfo && getLabelInner(layoutInfo.label)[\"break\"];\n  }, true);\n  var moveOverlap = axisModel.get(['breakLabelLayout', 'moveOverlap'], true);\n  if (moveOverlap === true || moveOverlap === 'auto') {\n    each(breakLabelIndexPairs, function (idxPair) {\n      getAxisBreakHelper().adjustBreakLabelPair(axisModel.axis.inverse, axisRotation, [ensureLabelLayoutWithGeometry(labelLayoutList[idxPair[0]]), ensureLabelLayoutWithGeometry(labelLayoutList[idxPair[1]])]);\n    });\n  }\n}\nexport default AxisBuilder;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nimport AxisBuilder from '../../component/axis/AxisBuilder.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\n/**\n * [__CAUTION__]\n *  MUST guarantee: if only the input `rect` and `axis.extent` changed,\n *  only `layout.position` changes.\n *  This character is replied on `grid.contain` calculation in `AxisBuilder`.\n *  @see updateCartesianAxisViewCommonPartBuilder\n *\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n */\nexport function layout(rect, axisModel, opt) {\n  opt = opt || {};\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  }\n  // Axis position\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]];\n  // Axis rotation\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1);\n  // Tick and label direction, x y is axisDim\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n  // Special label rotation\n  var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate;\n  // Over splitLine and splitArea\n  layout.z2 = 1;\n  return layout;\n}\nexport function isCartesian2DDeclaredSeries(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\n/**\n * Note: If pie (or other similar series) use cartesian2d, here\n *  option `seriesModel.get('coordinateSystem') === 'cartesian2d'`\n *  and `seriesModel.coordinateSystem !== cartesian2dCoordSysInstance`\n *  and `seriesModel.boxCoordinateSystem === cartesian2dCoordSysInstance`,\n *  the logic below is probably wrong, therefore skip it temporarily.\n */\nexport function isCartesian2DInjectedAsDataCoordSys(seriesModel) {\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n}\nexport function findAxisModels(seriesModel) {\n  var axisModelMap = {\n    xAxisModel: null,\n    yAxisModel: null\n  };\n  zrUtil.each(axisModelMap, function (v, key) {\n    var axisType = key.replace(/Model$/, '');\n    var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!axisModel) {\n        throw new Error(axisType + ' \"' + zrUtil.retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n      }\n    }\n    axisModelMap[key] = axisModel;\n  });\n  return axisModelMap;\n}\nexport function createCartesianAxisViewCommonPartBuilder(gridRect, cartesians, axisModel, api, ctx, defaultNameMoveOverlap) {\n  var layoutResult = layout(gridRect, axisModel);\n  var axisLineAutoShow = false;\n  var axisTickAutoShow = false;\n  // Not show axisTick or axisLine if other axis is category / time\n  for (var i = 0; i < cartesians.length; i++) {\n    if (isIntervalOrLogScale(cartesians[i].getOtherAxis(axisModel.axis).scale)) {\n      // Still show axis tick or axisLine if other axis is value / log\n      axisLineAutoShow = axisTickAutoShow = true;\n      if (axisModel.axis.type === 'category' && axisModel.axis.onBand) {\n        axisTickAutoShow = false;\n      }\n    }\n  }\n  layoutResult.axisLineAutoShow = axisLineAutoShow;\n  layoutResult.axisTickAutoShow = axisTickAutoShow;\n  layoutResult.defaultNameMoveOverlap = defaultNameMoveOverlap;\n  return new AxisBuilder(axisModel, api, layoutResult, ctx);\n}\nexport function updateCartesianAxisViewCommonPartBuilder(axisBuilder, gridRect, axisModel) {\n  var newRaw = layout(gridRect, axisModel);\n  if (process.env.NODE_ENV !== 'production') {\n    var oldRaw_1 = axisBuilder.__getRawCfg();\n    zrUtil.each(zrUtil.keys(newRaw), function (prop) {\n      if (prop !== 'position' && prop !== 'labelOffset') {\n        zrUtil.assert(newRaw[prop] === oldRaw_1[prop]);\n      }\n    });\n  }\n  axisBuilder.updateCfg(newRaw);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getPrecisionSafe, round } from '../util/number.js';\nimport IntervalScale from '../scale/Interval.js';\nimport { getScaleExtent, retrieveAxisBreaksOption } from './axisHelper.js';\nimport { warn } from '../util/log.js';\nimport { logTransform, increaseInterval, isValueNice } from '../scale/helper.js';\nexport function alignScaleTicks(scale, axisModel, alignToScale) {\n  var _a;\n  var intervalScaleProto = IntervalScale.prototype;\n  // NOTE: There is a precondition for log scale  here:\n  // In log scale we store _interval and _extent of exponent value.\n  // So if we use the method of InternalScale to set/get these data.\n  // It process the exponent value, which is linear and what we want here.\n  var alignToTicks = intervalScaleProto.getTicks.call(alignToScale);\n  var alignToNicedTicks = intervalScaleProto.getTicks.call(alignToScale, {\n    expandToNicedExtent: true\n  });\n  var alignToSplitNumber = alignToTicks.length - 1;\n  var alignToInterval = intervalScaleProto.getInterval.call(alignToScale);\n  var scaleExtent = getScaleExtent(scale, axisModel);\n  var rawExtent = scaleExtent.extent;\n  var isMinFixed = scaleExtent.fixMin;\n  var isMaxFixed = scaleExtent.fixMax;\n  if (scale.type === 'log') {\n    rawExtent = logTransform(scale.base, rawExtent, true);\n  }\n  scale.setBreaksFromOption(retrieveAxisBreaksOption(axisModel));\n  scale.setExtent(rawExtent[0], rawExtent[1]);\n  scale.calcNiceExtent({\n    splitNumber: alignToSplitNumber,\n    fixMin: isMinFixed,\n    fixMax: isMaxFixed\n  });\n  var extent = intervalScaleProto.getExtent.call(scale);\n  // Need to update the rawExtent.\n  // Because value in rawExtent may be not parsed. e.g. 'dataMin', 'dataMax'\n  if (isMinFixed) {\n    rawExtent[0] = extent[0];\n  }\n  if (isMaxFixed) {\n    rawExtent[1] = extent[1];\n  }\n  var interval = intervalScaleProto.getInterval.call(scale);\n  var min = rawExtent[0];\n  var max = rawExtent[1];\n  if (isMinFixed && isMaxFixed) {\n    // User set min, max, divide to get new interval\n    interval = (max - min) / alignToSplitNumber;\n  } else if (isMinFixed) {\n    max = rawExtent[0] + interval * alignToSplitNumber;\n    // User set min, expand extent on the other side\n    while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1])) {\n      interval = increaseInterval(interval);\n      max = rawExtent[0] + interval * alignToSplitNumber;\n    }\n  } else if (isMaxFixed) {\n    // User set max, expand extent on the other side\n    min = rawExtent[1] - interval * alignToSplitNumber;\n    while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0])) {\n      interval = increaseInterval(interval);\n      min = rawExtent[1] - interval * alignToSplitNumber;\n    }\n  } else {\n    var nicedSplitNumber = scale.getTicks().length - 1;\n    if (nicedSplitNumber > alignToSplitNumber) {\n      interval = increaseInterval(interval);\n    }\n    var range = interval * alignToSplitNumber;\n    max = Math.ceil(rawExtent[1] / interval) * interval;\n    min = round(max - range);\n    // Not change the result that crossing zero.\n    if (min < 0 && rawExtent[0] >= 0) {\n      min = 0;\n      max = round(range);\n    } else if (max > 0 && rawExtent[1] <= 0) {\n      max = 0;\n      min = -round(range);\n    }\n  }\n  // Adjust min, max based on the extent of alignTo. When min or max is set in alignTo scale\n  var t0 = (alignToTicks[0].value - alignToNicedTicks[0].value) / alignToInterval;\n  var t1 = (alignToTicks[alignToSplitNumber].value - alignToNicedTicks[alignToSplitNumber].value) / alignToInterval;\n  // NOTE: Must in setExtent -> setInterval -> setNiceExtent order.\n  intervalScaleProto.setExtent.call(scale, min + interval * t0, max + interval * t1);\n  intervalScaleProto.setInterval.call(scale, interval);\n  if (t0 || t1) {\n    intervalScaleProto.setNiceExtent.call(scale, min + interval, max - interval);\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    var ticks = intervalScaleProto.getTicks.call(scale);\n    if (ticks[1] && (!isValueNice(interval) || getPrecisionSafe(ticks[1].value) > getPrecisionSafe(interval))) {\n      warn(\"The ticks may be not readable when set min: \" + axisModel.get('min') + \", max: \" + axisModel.get('max') + (\" and alignTicks: true. (\" + ((_a = axisModel.axis) === null || _a === void 0 ? void 0 : _a.dim) + \"AxisIndex: \" + axisModel.componentIndex + \")\"), true);\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\nimport { isObject, each, indexOf, retrieve3, keys, assert, eqNaN, find, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createBoxLayoutReference, getLayoutRect } from '../../util/layout.js';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, getDataDimensionsOnAxis, isNameLocationCenter, shouldAxisShow } from '../../coord/axisHelper.js';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D.js';\nimport Axis2D from './Axis2D.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n// Depends on GridModel, AxisModel, which performs preprocess.\nimport { OUTER_BOUNDS_CLAMP_DEFAULT, OUTER_BOUNDS_DEFAULT } from './GridModel.js';\nimport { findAxisModels, createCartesianAxisViewCommonPartBuilder, updateCartesianAxisViewCommonPartBuilder, isCartesian2DInjectedAsDataCoordSys } from './cartesianAxisHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nimport { alignScaleTicks } from '../axisAlignTicks.js';\nimport { expandOrShrinkRect, WH, XY } from '../../util/graphic.js';\nimport { AxisBuilderSharedContext, resolveAxisNameOverlapDefault, moveIfOverlapByLinearLabels, getLabelInner } from '../../component/axis/AxisBuilder.js';\nimport { error, log } from '../../util/log.js';\nimport { AxisTickLabelComputingKind } from '../axisTickLabelBuilder.js';\nimport { injectCoordSysByOption } from '../../core/CoordinateSystem.js';\nimport { mathMax, parsePositionSizeOption } from '../../util/number.js';\n// margin is [top, right, bottom, left]\nvar XY_TO_MARGIN_IDX = [[3, 1], [0, 2] // xyIdx 1 => 'y'\n];\nvar Grid = /** @class */function () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n    this._initCartesian(gridModel, ecModel, api);\n    this.model = gridModel;\n  }\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n    this._updateScale(ecModel, this.model);\n    function updateAxisTicks(axes) {\n      var alignTo;\n      // Axis is added in order of axisIndex.\n      var axesIndices = keys(axes);\n      var len = axesIndices.length;\n      if (!len) {\n        return;\n      }\n      var axisNeedsAlign = [];\n      // Process once and calculate the ticks for those don't use alignTicks.\n      for (var i = len - 1; i >= 0; i--) {\n        var idx = +axesIndices[i]; // Convert to number.\n        var axis = axes[idx];\n        var model = axis.model;\n        var scale = axis.scale;\n        if (\n        // Only value and log axis without interval support alignTicks.\n        isIntervalOrLogScale(scale) && model.get('alignTicks') && model.get('interval') == null) {\n          axisNeedsAlign.push(axis);\n        } else {\n          niceScaleExtent(scale, model);\n          if (isIntervalOrLogScale(scale)) {\n            // Can only align to interval or log axis.\n            alignTo = axis;\n          }\n        }\n      }\n      ;\n      // All axes has set alignTicks. Pick the first one.\n      // PENDING. Should we find the axis that both set interval, min, max and align to this one?\n      if (axisNeedsAlign.length) {\n        if (!alignTo) {\n          alignTo = axisNeedsAlign.pop();\n          niceScaleExtent(alignTo.scale, alignTo.model);\n        }\n        each(axisNeedsAlign, function (axis) {\n          alignScaleTicks(axis.scale, axis.model, alignTo.scale);\n        });\n      }\n    }\n    updateAxisTicks(axesMap.x);\n    updateAxisTicks(axesMap.y);\n    // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    });\n    // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n    this.resize(this.model, api);\n  };\n  /**\n   * Resize the grid.\n   *\n   * [NOTE]\n   * If both \"grid.containLabel/grid.contain\" and pixel-required-data-processing (such as, \"dataSampling\")\n   * exist, circular dependency occurs in logic.\n   * The final compromised sequence is:\n   *  1. Calculate \"axis.extent\" (pixel extent) and AffineTransform based on only \"grid layout options\".\n   *      Not accurate if \"grid.containLabel/grid.contain\" is required, but it is a compromise to avoid\n   *      circular dependency.\n   *  2. Perform \"series data processing\" (where \"dataSampling\" requires \"axis.extent\").\n   *  3. Calculate \"scale.extent\" (data extent) based on \"processed series data\".\n   *  4. Modify \"axis.extent\" for \"grid.containLabel/grid.contain\":\n   *      4.1. Calculate \"axis labels\" based on \"scale.extent\".\n   *      4.2. Modify \"axis.extent\" by the bounding rects of \"axis labels and names\".\n   */\n  Grid.prototype.resize = function (gridModel, api, beforeDataProcessing) {\n    var layoutRef = createBoxLayoutReference(gridModel, api);\n    var gridRect = this._rect = getLayoutRect(gridModel.getBoxLayoutParams(), layoutRef.refContainer);\n    // PENDING: whether to support that if the input `coord` is out of the base coord sys,\n    //  do not render anything. At present, the behavior is undefined.\n    var axesMap = this._axesMap;\n    var coordsList = this._coordsList;\n    var optionContainLabel = gridModel.get('containLabel'); // No `.get(, true)` for backward compat.\n    updateAllAxisExtentTransByGridRect(axesMap, gridRect);\n    if (!beforeDataProcessing) {\n      var axisBuilderSharedCtx = createAxisBiulders(gridRect, coordsList, axesMap, optionContainLabel, api);\n      var noPxChange = void 0;\n      if (optionContainLabel) {\n        if (legacyLayOutGridByContainLabel) {\n          // console.time('legacyLayOutGridByContainLabel');\n          legacyLayOutGridByContainLabel(this._axesList, gridRect);\n          updateAllAxisExtentTransByGridRect(axesMap, gridRect);\n          // console.timeEnd('legacyLayOutGridByContainLabel');\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            log('Specified `grid.containLabel` but no `use(LegacyGridContainLabel)`;' + 'use `grid.outerBounds` instead.', true);\n          }\n          noPxChange = layOutGridByOuterBounds(gridRect.clone(), 'axisLabel', null, gridRect, axesMap, axisBuilderSharedCtx, layoutRef);\n        }\n      } else {\n        var _a = prepareOuterBounds(gridModel, gridRect, layoutRef),\n          outerBoundsRect = _a.outerBoundsRect,\n          parsedOuterBoundsContain = _a.parsedOuterBoundsContain,\n          outerBoundsClamp = _a.outerBoundsClamp;\n        if (outerBoundsRect) {\n          // console.time('layOutGridByOuterBounds');\n          noPxChange = layOutGridByOuterBounds(outerBoundsRect, parsedOuterBoundsContain, outerBoundsClamp, gridRect, axesMap, axisBuilderSharedCtx, layoutRef);\n          // console.timeEnd('layOutGridByOuterBounds');\n        }\n      }\n      // console.time('buildAxesView_determine');\n      createOrUpdateAxesView(gridRect, axesMap, AxisTickLabelComputingKind.determine, null, noPxChange, layoutRef);\n      // console.timeEnd('buildAxesView_determine');\n    } // End of beforeDataProcessing\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n  };\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0];\n    }\n  };\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\n   * @implements\n   */\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\n   * @implements\n   */\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    }\n    // Lowest priority.\n    else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\n   * @implements\n   */\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\n   * Initialize cartesian coordinate systems\n   */\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    };\n    // Create axis\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n    this._axesMap = axesMap;\n    // Create cartesian2d\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n        _this._coordsList.push(cartesian);\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n        var axisPosition = axisModel.get('position');\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse');\n        // Inject axis into axisModel\n        axisModel.axis = axis;\n        // Inject axisModel into axis\n        axis.model = axisModel;\n        // Inject grid info axis\n        axis.grid = grid;\n        // Index of axis, can be used as key\n        axis.index = idx;\n        grid._axesList.push(axis);\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\n   * Update cartesian properties from series.\n   */\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      // If pie (or other similar series) use cartesian2d, the unionExtent logic below is\n      // wrong, therefore skip it temporarily. See also in `defaultAxisExtentFromData.ts`.\n      // TODO: support union extent in this case.\n      if (isCartesian2DInjectedAsDataCoordSys(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n        unionExtent(data, xAxis);\n        unionExtent(data, yAxis);\n      }\n    }, this);\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\n   */\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx;\n      // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    });\n    // Inject the coordinateSystems into seriesModel\n    ecModel.eachSeries(function (seriesModel) {\n      injectCoordSysByOption({\n        targetModel: seriesModel,\n        coordSysType: 'cartesian2d',\n        coordSysProvider: coordSysProvider\n      });\n      function coordSysProvider() {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        var gridModel = xAxisModel.getCoordSysModel();\n        if (process.env.NODE_ENV !== 'production') {\n          if (!gridModel) {\n            throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n          }\n          if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n            throw new Error('xAxis and yAxis must use the same grid');\n          }\n        }\n        var grid = gridModel.coordinateSystem;\n        return grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      }\n    });\n    return grids;\n  };\n  // For deciding which dimensions to use when creating list data\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\n * Check if the axis is used in the specified grid.\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis,\n// Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  };\n  // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n  if (!onZero) {\n    return;\n  }\n  // If target axis is specified.\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx])\n      // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1];\n  // Fast transform\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\nfunction updateAllAxisExtentTransByGridRect(axesMap, gridRect) {\n  each(axesMap.x, function (axis) {\n    return updateAxisExtentTransByGridRect(axis, gridRect.x, gridRect.width);\n  });\n  each(axesMap.y, function (axis) {\n    return updateAxisExtentTransByGridRect(axis, gridRect.y, gridRect.height);\n  });\n}\nfunction updateAxisExtentTransByGridRect(axis, gridXY, gridWH) {\n  var extent = [0, gridWH];\n  var idx = axis.inverse ? 1 : 0;\n  axis.setExtent(extent[idx], extent[1 - idx]);\n  updateAxisTransform(axis, gridXY);\n}\nvar legacyLayOutGridByContainLabel;\nexport function registerLegacyGridContainLabelImpl(impl) {\n  legacyLayOutGridByContainLabel = impl;\n}\n// Return noPxChange.\nfunction layOutGridByOuterBounds(outerBoundsRect, outerBoundsContain, outerBoundsClamp, gridRect, axesMap, axisBuilderSharedCtx, layoutRef) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(outerBoundsContain === 'all' || outerBoundsContain === 'axisLabel');\n  }\n  // Assume `updateAllAxisExtentTransByGridRect` has been performed once before this call.\n  // [NOTE]:\n  // - The bounding rect of the axis elements might be sensitve to variations in `axis.extent` due to strategies\n  //  like hideOverlap/moveOverlap. @see the comment in `LabelLayoutBase['suggestIgnore']`.\n  // - The final `gridRect` might be slightly smaller than the ideally expected result if labels are giant and\n  //  get hidden due to overlapping. More iterations could improve precision, but not performant. We consider\n  //  the current result acceptable, since no alignment among charts can be guaranteed when using this feature.\n  createOrUpdateAxesView(gridRect, axesMap, AxisTickLabelComputingKind.estimate, outerBoundsContain, false, layoutRef);\n  var margin = [0, 0, 0, 0];\n  fillLabelNameOverflowOnOneDimension(0);\n  fillLabelNameOverflowOnOneDimension(1);\n  // If axis is blank, no label can be used to detect overflow.\n  // gridRect itself should not overflow.\n  fillMarginOnOneDimension(gridRect, 0, NaN);\n  fillMarginOnOneDimension(gridRect, 1, NaN);\n  var noPxChange = find(margin, function (item) {\n    return item > 0;\n  }) == null;\n  expandOrShrinkRect(gridRect, margin, true, true, outerBoundsClamp);\n  updateAllAxisExtentTransByGridRect(axesMap, gridRect);\n  return noPxChange;\n  function fillLabelNameOverflowOnOneDimension(xyIdx) {\n    each(axesMap[XY[xyIdx]], function (axis) {\n      if (!shouldAxisShow(axis.model)) {\n        return;\n      }\n      // FIXME: zr Group.union may wrongly union (0, 0, 0, 0) and not performant.\n      // unionRect.union(axis.axisBuilder.group.getBoundingRect());\n      // If ussing Group.getBoundingRect to calculate shrink space, it is not strictly accurate when\n      // the outermost label is ignored and the secondary label is very long and contribute to the\n      // union extension:\n      //      -|---|---|---|\n      //         1,000,000,000\n      // Therefore we calculate them one by one.\n      // Also considered axis may be blank or no labels.\n      var sharedRecord = axisBuilderSharedCtx.ensureRecord(axis.model);\n      var labelInfoList = sharedRecord.labelInfoList;\n      if (labelInfoList) {\n        for (var idx = 0; idx < labelInfoList.length; idx++) {\n          var labelInfo = labelInfoList[idx];\n          var proportion = axis.scale.normalize(getLabelInner(labelInfo.label).tickValue);\n          proportion = xyIdx === 1 ? 1 - proportion : proportion;\n          // xAxis use proportion on x, yAxis use proprotion on y, otherwise not.\n          fillMarginOnOneDimension(labelInfo.rect, xyIdx, proportion);\n          fillMarginOnOneDimension(labelInfo.rect, 1 - xyIdx, NaN);\n        }\n      }\n      var nameLayout = sharedRecord.nameLayout;\n      if (nameLayout) {\n        var proportion = isNameLocationCenter(sharedRecord.nameLocation) ? 0.5 : NaN;\n        fillMarginOnOneDimension(nameLayout.rect, xyIdx, proportion);\n        fillMarginOnOneDimension(nameLayout.rect, 1 - xyIdx, NaN);\n      }\n    });\n  }\n  function fillMarginOnOneDimension(itemRect, xyIdx, proportion // NaN mean no use proportion\n  ) {\n    var overflow1 = outerBoundsRect[XY[xyIdx]] - itemRect[XY[xyIdx]];\n    var overflow2 = itemRect[WH[xyIdx]] + itemRect[XY[xyIdx]] - (outerBoundsRect[WH[xyIdx]] + outerBoundsRect[XY[xyIdx]]);\n    overflow1 = applyProportion(overflow1, 1 - proportion);\n    overflow2 = applyProportion(overflow2, proportion);\n    var minIdx = XY_TO_MARGIN_IDX[xyIdx][0];\n    var maxIdx = XY_TO_MARGIN_IDX[xyIdx][1];\n    margin[minIdx] = mathMax(margin[minIdx], overflow1);\n    margin[maxIdx] = mathMax(margin[maxIdx], overflow2);\n  }\n  function applyProportion(overflow, proportion) {\n    // proportion is not likely to near zero. If so, give up shrink\n    if (overflow > 0 && !eqNaN(proportion) && proportion > 1e-4) {\n      overflow /= proportion;\n    }\n    return overflow;\n  }\n}\nfunction createAxisBiulders(gridRect, cartesians, axesMap, optionContainLabel, api) {\n  var axisBuilderSharedCtx = new AxisBuilderSharedContext(resolveAxisNameOverlapForGrid);\n  each(axesMap, function (axisList) {\n    return each(axisList, function (axis) {\n      if (shouldAxisShow(axis.model)) {\n        // See `AxisBaseOptionCommon['nameMoveOverlap']`.\n        var defaultNameMoveOverlap = !optionContainLabel;\n        axis.axisBuilder = createCartesianAxisViewCommonPartBuilder(gridRect, cartesians, axis.model, api, axisBuilderSharedCtx, defaultNameMoveOverlap);\n      }\n    });\n  });\n  return axisBuilderSharedCtx;\n}\n/**\n * Promote the axis-elements-building from \"view render\" stage to \"coordinate system resize\" stage.\n * This is aimed to resovle overlap across multiple axes, since currently it's hard to reconcile\n * multiple axes in \"view render\" stage.\n *\n * [CAUTION] But this promotion assumes that the subsequent \"visual mapping\" stage does not affect\n * this axis-elements-building; otherwise we have to refactor it again.\n */\nfunction createOrUpdateAxesView(gridRect, axesMap, kind, outerBoundsContain, noPxChange, layoutRef) {\n  var isDetermine = kind === AxisTickLabelComputingKind.determine;\n  each(axesMap, function (axisList) {\n    return each(axisList, function (axis) {\n      if (shouldAxisShow(axis.model)) {\n        updateCartesianAxisViewCommonPartBuilder(axis.axisBuilder, gridRect, axis.model);\n        axis.axisBuilder.build(isDetermine ? {\n          axisTickLabelDetermine: true\n        } : {\n          axisTickLabelEstimate: true\n        }, {\n          noPxChange: noPxChange\n        });\n      }\n    });\n  });\n  var nameMarginLevelMap = {\n    x: 0,\n    y: 0\n  };\n  calcNameMarginLevel(0);\n  calcNameMarginLevel(1);\n  function calcNameMarginLevel(xyIdx) {\n    nameMarginLevelMap[XY[1 - xyIdx]] = gridRect[WH[xyIdx]] <= layoutRef.refContainer[WH[xyIdx]] * 0.5 ? 0 : 1 - xyIdx === 1 ? 2 : 1;\n  }\n  each(axesMap, function (axisList, xy) {\n    return each(axisList, function (axis) {\n      if (shouldAxisShow(axis.model)) {\n        if (outerBoundsContain === 'all' || isDetermine) {\n          // To resolve overlap, `axisName` layout depends on `axisTickLabel` layout result\n          // (all of the axes of the same `grid`; consider multiple x or y axes).\n          axis.axisBuilder.build({\n            axisName: true\n          }, {\n            nameMarginLevel: nameMarginLevelMap[xy]\n          });\n        }\n        if (isDetermine) {\n          axis.axisBuilder.build({\n            axisLine: true\n          });\n        }\n      }\n    });\n  });\n}\nfunction prepareOuterBounds(gridModel, rawRridRect, layoutRef) {\n  var outerBoundsRect;\n  var optionOuterBoundsMode = gridModel.get('outerBoundsMode', true);\n  if (optionOuterBoundsMode === 'same') {\n    outerBoundsRect = rawRridRect.clone();\n  } else if (optionOuterBoundsMode == null || optionOuterBoundsMode === 'auto') {\n    outerBoundsRect = getLayoutRect(gridModel.get('outerBounds', true) || OUTER_BOUNDS_DEFAULT, layoutRef.refContainer);\n  } else if (optionOuterBoundsMode !== 'none') {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Invalid grid[\" + gridModel.componentIndex + \"].outerBoundsMode.\");\n    }\n  }\n  var optionOuterBoundsContain = gridModel.get('outerBoundsContain', true);\n  var parsedOuterBoundsContain;\n  if (optionOuterBoundsContain == null || optionOuterBoundsContain === 'auto') {\n    parsedOuterBoundsContain = 'all';\n  } else if (indexOf(['all', 'axisLabel'], optionOuterBoundsContain) < 0) {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Invalid grid[\" + gridModel.componentIndex + \"].outerBoundsContain.\");\n    }\n    parsedOuterBoundsContain = 'all';\n  } else {\n    parsedOuterBoundsContain = optionOuterBoundsContain;\n  }\n  var outerBoundsClamp = [parsePositionSizeOption(retrieve2(gridModel.get('outerBoundsClampWidth', true), OUTER_BOUNDS_CLAMP_DEFAULT[0]), rawRridRect.width), parsePositionSizeOption(retrieve2(gridModel.get('outerBoundsClampHeight', true), OUTER_BOUNDS_CLAMP_DEFAULT[1]), rawRridRect.height)];\n  return {\n    outerBoundsRect: outerBoundsRect,\n    parsedOuterBoundsContain: parsedOuterBoundsContain,\n    outerBoundsClamp: outerBoundsClamp\n  };\n}\nvar resolveAxisNameOverlapForGrid = function (cfg, ctx, axisModel, nameLayoutInfo, nameMoveDirVec, thisRecord) {\n  var perpendicularDim = axisModel.axis.dim === 'x' ? 'y' : 'x';\n  resolveAxisNameOverlapDefault(cfg, ctx, axisModel, nameLayoutInfo, nameMoveDirVec, thisRecord);\n  // If nameLocation 'center', and there are multiple axes parallel to this axis, do not adjust by\n  //  other axes, because the axis name should be close to its axis line as much as possible even\n  //  if overlapping; otherwise it might cause misleading.\n  // If nameLocation 'center', do not adjust by perpendicular axes, since they are not likely to overlap.\n  // If nameLocation 'start'/'end', move name within the same direction to escape overlap with the\n  //  perpendicular axes.\n  if (!isNameLocationCenter(cfg.nameLocation)) {\n    each(ctx.recordMap[perpendicularDim], function (perpenRecord) {\n      // perpendicular axis may be no name.\n      if (perpenRecord && perpenRecord.labelInfoList && perpenRecord.dirVec) {\n        moveIfOverlapByLinearLabels(perpenRecord.labelInfoList, perpenRecord.dirVec, nameLayoutInfo, nameMoveDirVec);\n      }\n    });\n  }\n};\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Model from '../../model/Model.js';\nimport { each, curry, clone, defaults, isArray, indexOf } from 'zrender/lib/core/util.js';\n// Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\nexport function collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      triggerEmphasis,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api);\n  // Check seriesInvolved for performance, in case too many series in some chart.\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer');\n  // links can only be set on global.\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = [];\n  // Collect axes info.\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys;\n    // Set tooltip (like 'cross') is a convenient way to show axisPointer\n    // for user. So we enable setting tooltip on coordSys model.\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null));\n    // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n    if (coordSys.getTooltipAxes && globalTooltipModel\n    // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    }\n    // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var triggerEmphasis = axisPointerModel.get('triggerEmphasis');\n      var axisKey = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category';\n      // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n      var axisInfo = result.axesInfo[axisKey] = {\n        key: axisKey,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        triggerEmphasis: triggerEmphasis,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: [],\n        linkGroup: null\n      };\n      axesInfoInCoordSys[axisKey] = axisInfo;\n      result.seriesInvolved = result.seriesInvolved || involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[axisKey] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n  var volatileOption = {};\n  each(fields, function (field) {\n    volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n  });\n  // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip;\n  // Compatible with previous behavior, tooltip axis does not show label by default.\n  // Only these properties can be overridden from tooltip to axisPointer.\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n  var labelOption = volatileOption.label || (volatileOption.label = {});\n  // Follow the convention, do not show label when triggered by tooltip by default.\n  labelOption.show == null && (labelOption.show = false);\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true;\n    // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n    var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n    if (!coordSys || !coordSys.model // PENDING: radar do not have a model.\n    || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n      return;\n    }\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  });\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\nexport function fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  if (!axisInfo) {\n    return;\n  }\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value');\n  // Parse init value for category and time axis.\n  if (value != null) {\n    value = scale.parse(value);\n  }\n  var useHandle = isHandleTrigger(axisPointerModel);\n  // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n  if (\n  // Pick a value on axis when initializing.\n  value == null\n  // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n  option.value = value;\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\nexport function getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\nexport function getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get(['handle', 'show']);\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\nexport function makeKey(model) {\n  return model.type + '||' + model.id;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as axisPointerModelHelper from '../axisPointer/modelHelper.js';\nimport ComponentView from '../../view/Component.js';\nvar axisPointerClazz = {};\n/**\n * Base class of AxisView.\n */\nvar AxisView = /** @class */function (_super) {\n  __extends(AxisView, _super);\n  function AxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisView.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n  AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    _super.prototype.render.apply(this, arguments);\n    this._doUpdateAxisPointerClass(axisModel, api, true);\n  };\n  /**\n   * Action handler.\n   */\n  AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n    this._doUpdateAxisPointerClass(axisModel, api, false);\n  };\n  /**\n   * @override\n   */\n  AxisView.prototype.remove = function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n  };\n  /**\n   * @override\n   */\n  AxisView.prototype.dispose = function (ecModel, api) {\n    this._disposeAxisPointer(api);\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n    var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n    if (!Clazz) {\n      return;\n    }\n    var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n    axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n  };\n  AxisView.prototype._disposeAxisPointer = function (api) {\n    this._axisPointer && this._axisPointer.dispose(api);\n    this._axisPointer = null;\n  };\n  AxisView.registerAxisPointerClass = function (type, clazz) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (axisPointerClazz[type]) {\n        throw new Error('axisPointer ' + type + ' exists');\n      }\n    }\n    axisPointerClazz[type] = clazz;\n  };\n  ;\n  AxisView.getAxisPointerClass = function (type) {\n    return type && axisPointerClazz[type];\n  };\n  ;\n  AxisView.type = 'axis';\n  return AxisView;\n}(ComponentView);\nexport default AxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n  if (axis.scale.isBlank()) {\n    return;\n  }\n  // TODO: TYPE\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true,\n    breakTicks: 'none',\n    pruneByBreak: 'preserve_extent_bound'\n  });\n  if (!ticksCoords.length) {\n    return;\n  }\n  // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport AxisView from './AxisView.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nimport { getAxisBreakHelper } from './axisBreakHelper.js';\nimport { shouldAxisShow } from '../../coord/axisHelper.js';\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine', 'breakArea'];\nvar CartesianAxisView = /** @class */function (_super) {\n  __extends(CartesianAxisView, _super);\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\n   * @override\n   */\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n    if (!shouldAxisShow(axisModel)) {\n      return;\n    }\n    this._axisGroup.add(axisModel.axis.axisBuilder.group);\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, axisModel.getCoordSysModel(), api);\n      }\n    }, this);\n    // THIS is a special case for bar racing chart.\n    // Update the axis label from the natural initial layout to\n    // sorted layout should has no animation.\n    var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n    if (!isInitialSortFromBarRacing) {\n      graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    }\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel, api) {\n    var axis = axisModel.axis;\n    if (axis.scale.isBlank()) {\n      return;\n    }\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var showMinLine = splitLineModel.get('showMinLine') !== false;\n    var showMaxLine = splitLineModel.get('showMaxLine') !== false;\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel,\n      breakTicks: 'none',\n      pruneByBreak: 'preserve_extent_bound'\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      if (i === 0 && !showMinLine || i === ticksCoords.length - 1 && !showMaxLine) {\n        continue;\n      }\n      var tickValue = ticksCoords[i].tickValue;\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n      var colorIndex = lineCount++ % lineColors.length;\n      var line = new graphic.Line({\n        anid: tickValue != null ? 'line_' + tickValue : null,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      });\n      graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n      axisGroup.add(line);\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel, api) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n    if (!minorTicksCoords.length) {\n      return;\n    }\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n        var line = new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        });\n        graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n        axisGroup.add(line);\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel, api) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  },\n  breakArea: function (axisView, axisGroup, axisModel, gridModel, api) {\n    var axisBreakHelper = getAxisBreakHelper();\n    var scale = axisModel.axis.scale;\n    if (axisBreakHelper && scale.type !== 'ordinal') {\n      axisBreakHelper.rectCoordBuildBreakAxis(axisGroup, axisView, axisModel, gridModel.coordinateSystem.getRect(), api);\n    }\n  }\n};\nvar CartesianXAxisView = /** @class */function (_super) {\n  __extends(CartesianXAxisView, _super);\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\nexport { CartesianXAxisView };\nvar CartesianYAxisView = /** @class */function (_super) {\n  __extends(CartesianYAxisView, _super);\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport GridModel from '../../coord/cartesian/GridModel.js';\nimport { Rect } from '../../util/graphic.js';\nimport { defaults } from 'zrender/lib/core/util.js';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport Grid from '../../coord/cartesian/Grid.js';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView.js';\n// Grid view\nvar GridView = /** @class */function (_super) {\n  __extends(GridView, _super);\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'grid';\n    return _this;\n  }\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as echarts from '../../core/echarts.js';\nimport { noop } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function take(zr, resourceKey, userKey) {\n  inner(zr)[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = inner(zr);\n  var uKey = store[resourceKey];\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!inner(zr)[resourceKey];\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, noop);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveZInfo } from '../../util/graphic.js';\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Used on roam/brush triggering determination.\n * This is to avoid that: mouse clicking on an elements that is over geo or graph,\n * but roam is triggered unexpectedly.\n */\nexport function onIrrelevantElement(e, api, targetComponent) {\n  var eventElComponent = api.getComponentByElement(e.topTarget);\n  if (!eventElComponent || eventElComponent === targetComponent || IRRELEVANT_EXCLUDES.hasOwnProperty(eventElComponent.mainType)) {\n    return false;\n  }\n  // At present the `true` return is conservative. That is, the caller, such as a RoamController,\n  // is more likely to get a `false` return and start a roam behavior, becuase even if the\n  // `model.coordinateSystem` does not exist, the `e.topTarget` may be also a relevant element,\n  // such as axis split line/area or series elements, where roam should be available. Otherwise,\n  // if a dataZoom-served cartesian is full of series elements, the dataZoom-roaming can hardly\n  // be triggered.\n  var eventElCoordSys = eventElComponent.coordinateSystem;\n  // If eventElComponent is axisModel, it works only if it is injected with coordinateSystem.\n  if (!eventElCoordSys || eventElCoordSys.model === targetComponent) {\n    return false;\n  }\n  // e.g., if a cartesian is covered by a graph, the graph has a higher presedence in roam.\n  // A potential bad case is that RoamController does not prevent the cartesian from handling zr\n  // event, such as click and hovering, but it's fine so far.\n  // Aslo be conservative, if equals, return false.\n  var eventElCmptZInfo = retrieveZInfo(eventElComponent);\n  var targetCmptZInfo = retrieveZInfo(targetComponent);\n  if ((eventElCmptZInfo.zlevel - targetCmptZInfo.zlevel || eventElCmptZInfo.z - targetCmptZInfo.z) <= 0) {\n    return false;\n  }\n  return true;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport { isString, bind, defaults, extend, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { retrieveZInfo } from '../../util/graphic.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\n;\n/**\n * An manager of zoom and pan(darg) hehavior.\n * But it is not responsible for updating the view, since view updates vary and can\n * not be handled in a uniform way.\n *\n * Note: regarding view updates:\n *  - Transformabe views typically use `coord/View` (e.g., geo and series.graph roaming).\n *    Some commonly used view update logic has been organized into `roamHelper.ts`.\n *  - Non-transformable views handle updates themselves, possibly involving re-layout,\n *    (e.g., treemap).\n *  - Some scenarios do not require transformation (e.g., dataZoom roaming for cartesian,\n *    brush component).\n */\nvar RoamController = /** @class */function (_super) {\n  __extends(RoamController, _super);\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n    _this._zr = zr;\n    // Avoid two roamController bind the same handler\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\n     * Notice:\n     *  - only enable needed types. For example, if 'zoom'\n     *    is not needed, 'zoom' should not be enabled, otherwise\n     *    default mousewheel behaviour (scroll page) will be disabled.\n     *  - This method is idempotent.\n     */\n    _this.enable = function (controlType, rawOpt) {\n      var zInfo = rawOpt.zInfo;\n      var _a = retrieveZInfo(zInfo.component),\n        z = _a.z,\n        zlevel = _a.zlevel;\n      var zInfoParsed = {\n        component: zInfo.component,\n        z: z,\n        zlevel: zlevel,\n        // By default roam controller is the lowest z2 comparing to other elememts in a component.\n        z2: retrieve2(zInfo.z2, -Infinity)\n      };\n      var triggerInfo = extend({}, rawOpt.triggerInfo);\n      this._opt = defaults(extend({}, rawOpt), {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true,\n        zInfoParsed: zInfoParsed,\n        triggerInfo: triggerInfo\n      });\n      if (controlType == null) {\n        controlType = true;\n      }\n      // A handy optimization for repeatedly calling `enable` during roaming.\n      // Assert `disable` is only affected by `controlType`.\n      if (!this._enabled || this._controlType !== controlType) {\n        this._enabled = true;\n        // Disable previous first\n        this.disable();\n        if (controlType === true || controlType === 'move' || controlType === 'pan') {\n          addRoamZrListener(zr, 'mousedown', mousedownHandler, zInfoParsed);\n          addRoamZrListener(zr, 'mousemove', mousemoveHandler, zInfoParsed);\n          addRoamZrListener(zr, 'mouseup', mouseupHandler, zInfoParsed);\n        }\n        if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n          addRoamZrListener(zr, 'mousewheel', mousewheelHandler, zInfoParsed);\n          addRoamZrListener(zr, 'pinch', pinchHandler, zInfoParsed);\n        }\n      }\n    };\n    _this.disable = function () {\n      this._enabled = false;\n      removeRoamZrListener(zr, 'mousedown', mousedownHandler);\n      removeRoamZrListener(zr, 'mousemove', mousemoveHandler);\n      removeRoamZrListener(zr, 'mouseup', mouseupHandler);\n      removeRoamZrListener(zr, 'mousewheel', mousewheelHandler);\n      removeRoamZrListener(zr, 'pinch', pinchHandler);\n    };\n    return _this;\n  }\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n  RoamController.prototype._checkPointer = function (e, x, y) {\n    var opt = this._opt;\n    var zInfoParsed = opt.zInfoParsed;\n    if (onIrrelevantElement(e, opt.api, zInfoParsed.component)) {\n      return false;\n    }\n    ;\n    var triggerInfo = opt.triggerInfo;\n    var roamTrigger = triggerInfo.roamTrigger;\n    var inArea = false;\n    if (roamTrigger === 'global') {\n      inArea = true;\n    }\n    if (!inArea) {\n      inArea = triggerInfo.isInSelf(e, x, y);\n    }\n    if (inArea && triggerInfo.isInClip && !triggerInfo.isInClip(e, x, y)) {\n      inArea = false;\n    }\n    return inArea;\n  };\n  RoamController.prototype._decideCursorStyle = function (e, x, y, forReverse) {\n    // If this cursor style decision is not strictly consistent with zrender,\n    // it's fine - zr will set the cursor on the next mousemove.\n    // This `grab` cursor style should take the lowest precedence. If the hovring element already\n    // have a cursor, zrender will set it to be non-'default' before entering this handler.\n    // (note, e.target is never silent, e.topTarget can be silent be irrelevant.)\n    var target = e.target;\n    if (!target && this._checkPointer(e, x, y)) {\n      // To indicate users that this area is draggable, otherwise users probably cannot kwown\n      // that when hovering out of the shape but still inside the bounding rect.\n      return 'grab';\n    }\n    if (forReverse) {\n      return target && target.cursor || 'default';\n    }\n  };\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || eventConsumed(e)) {\n      return;\n    }\n    var el = e.target;\n    while (el) {\n      if (el.draggable) {\n        return;\n      }\n      // check if host is draggable\n      el = el.__hostTarget || el.parent;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    // To determine dragging start, only by checking on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n    if (this._checkPointer(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n  RoamController.prototype._mousemoveHandler = function (e) {\n    var zr = this._zr;\n    if (e.gestureEvent === 'pinch' || interactionMutex.isTaken(zr, 'globalPan') || eventConsumed(e)) {\n      return;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt)) {\n      var cursorStyle = this._decideCursorStyle(e, x, y, false);\n      if (cursorStyle) {\n        zr.setCursorStyle(cursorStyle);\n      }\n      return;\n    }\n    zr.setCursorStyle('grabbing');\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    if (this._opt.preventDefaultMouseMove) {\n      eventTool.stop(e.event);\n    }\n    e.__ecRoamConsumed = true;\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (eventConsumed(e)) {\n      return;\n    }\n    var zr = this._zr;\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n      var cursorStyle = this._decideCursorStyle(e, e.offsetX, e.offsetY, true);\n      if (cursorStyle) {\n        zr.setCursorStyle(cursorStyle);\n      }\n    }\n  };\n  RoamController.prototype._mousewheelHandler = function (e) {\n    if (eventConsumed(e)) {\n      return;\n    }\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY;\n    // wheelDelta maybe -0 in chrome mac.\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    }\n    // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      this._checkTriggerMoveZoom(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta);\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      this._checkTriggerMoveZoom(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan') || eventConsumed(e)) {\n      return;\n    }\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    this._checkTriggerMoveZoom(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._checkTriggerMoveZoom = function (controller, eventName, behaviorToCheck, e, contollerEvent) {\n    if (controller._checkPointer(e, contollerEvent.originX, contollerEvent.originY)) {\n      // When mouse is out of roamController rect,\n      // default befavoius should not be be disabled, otherwise\n      // page sliding is disabled, contrary to expectation.\n      eventTool.stop(e.event);\n      e.__ecRoamConsumed = true;\n      trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n    }\n  };\n  return RoamController;\n}(Eventful);\nfunction eventConsumed(e) {\n  return e.__ecRoamConsumed;\n}\nvar innerZrStore = makeInner();\nfunction ensureZrStore(zr) {\n  var store = innerZrStore(zr);\n  store.roam = store.roam || {};\n  store.uniform = store.uniform || {};\n  return store;\n}\n/**\n * Listeners are sorted by z2/z/zlevel in descending order.\n * This decides the precedence between different roam controllers if they are overlapped.\n *\n * [MEMO]: It's not easy to perfectly reconcile the conflicts caused by overlap.\n *  - Consider cases:\n *    - Multiple roam controllers overlapped.\n *      - Usually only the topmost can trigger roam.\n *    - Roam controllers overlap with other zr elements:\n *      - zr elements are relevant or irrelevent to the host of the roam controller. e.g., axis split line\n *        or series elements is relevant to a cartesian and should trigger roam.\n *      - zr elements is above or below the roam controller host, which affects the precedence of interaction.\n *      - zr elements may not silent only for triggering tooltip by hovering, which is available to roam;\n *        or may not silent for click, where roam is not preferable.\n *  - Approach - `addRoamZrListener+pointerChecker+onIrrelevantElement` (currently used):\n *    - Resolve the precedence between different roam controllers\n *    - But cannot prevent the handling on other zr elements that under the roam controller in z-order.\n *  - Approach - \"use an invisible zr elements to receive the zr events to trigger roam\":\n *    - More complicated in impl.\n *    - May cause bad cases where zr event cannot be receive due to other non-silient zr elements covering it.\n */\nfunction addRoamZrListener(zr, eventType, listener, zInfoParsed) {\n  var store = ensureZrStore(zr);\n  var roam = store.roam;\n  var listenerList = roam[eventType] = roam[eventType] || [];\n  var idx = 0;\n  for (; idx < listenerList.length; idx++) {\n    var currZInfo = listenerList[idx].zInfoParsed;\n    if ((currZInfo.zlevel - zInfoParsed.zlevel || currZInfo.z - zInfoParsed.z || currZInfo.z2 - zInfoParsed.z2\n    // If all equals, the latter added one has a higher precedence.\n    ) <= 0) {\n      break;\n    }\n  }\n  listenerList.splice(idx, 0, {\n    listener: listener,\n    zInfoParsed: zInfoParsed\n  });\n  ensureUniformListener(zr, eventType);\n}\nfunction removeRoamZrListener(zr, eventType, listener) {\n  var store = ensureZrStore(zr);\n  var listenerList = store.roam[eventType] || [];\n  for (var idx = 0; idx < listenerList.length; idx++) {\n    if (listenerList[idx].listener === listener) {\n      listenerList.splice(idx, 1);\n      if (!listenerList.length) {\n        removeUniformListener(zr, eventType);\n      }\n      return;\n    }\n  }\n}\nfunction ensureUniformListener(zr, eventType) {\n  var store = ensureZrStore(zr);\n  if (!store.uniform[eventType]) {\n    zr.on(eventType, store.uniform[eventType] = function (event) {\n      var listenerList = store.roam[eventType];\n      if (listenerList) {\n        for (var i = 0; i < listenerList.length; i++) {\n          listenerList[i].listener(event);\n        }\n      }\n    });\n  }\n}\nfunction removeUniformListener(zr, eventType) {\n  var store = ensureZrStore(zr);\n  var uniform = store.uniform;\n  if (uniform[eventType]) {\n    zr.off(eventType, uniform[eventType]);\n    uniform[eventType] = null;\n  }\n}\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\n  // TODO should not have type issue.\n  controller.trigger(eventName, contollerEvent);\n}\n// settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\nexport default RoamController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { BoundingRect } from '../../util/graphic.js';\n/**\n * [CAVEAT] `updateViewOnPan` and `updateViewOnZoom` modifies the group transform directly,\n *  but the 'center' and 'zoom' in echarts option and 'View' coordinate system are not updated yet,\n *  which must be performed later in 'xxxRoam' action by calling `updateCenterAndZoom`.\n * @see {updateCenterAndZoomInAction}\n */\nexport function updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  target.x += dx;\n  target.y += dy;\n  target.dirty();\n}\nexport function updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n  newZoom = clampByZoomLimit(newZoom, zoomLimit);\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom;\n  zoomTransformableByOrigin(target, zoomX, zoomY, zoomScale);\n  target.dirty();\n}\n/**\n * A abstraction for some similar impl in roaming.\n */\nexport function updateController(seriesModel, api, pointerCheckerEl, controller, controllerHost, clipRect) {\n  var tmpRect = new BoundingRect(0, 0, 0, 0);\n  controller.enable(seriesModel.get('roam'), {\n    api: api,\n    zInfo: {\n      component: seriesModel\n    },\n    triggerInfo: {\n      roamTrigger: seriesModel.get('roamTrigger'),\n      isInSelf: function (e, x, y) {\n        tmpRect.copy(pointerCheckerEl.getBoundingRect());\n        tmpRect.applyTransform(pointerCheckerEl.getComputedTransform());\n        return tmpRect.contain(x, y);\n      },\n      isInClip: function (e, x, y) {\n        return !clipRect || clipRect.contain(x, y);\n      }\n    }\n  });\n  controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n  var coordinate = seriesModel.coordinateSystem;\n  controllerHost.zoom = coordinate ? coordinate.getZoom() : 1;\n  var type = seriesModel.subType + 'Roam';\n  controller.off('pan').off('zoom').on('pan', function (e) {\n    updateViewOnPan(controllerHost, e.dx, e.dy);\n    api.dispatchAction({\n      seriesId: seriesModel.id,\n      type: type,\n      dx: e.dx,\n      dy: e.dy\n    });\n  }).on('zoom', function (e) {\n    /**\n     * FIXME: should do nothing except `api.dispatchAction` here, the other logic\n     *  should be performed in the action handler and `updateTransform`; otherwise,\n     *  they are inconsistent if user triggers this action explicitly.\n     */\n    updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n    api.dispatchAction({\n      seriesId: seriesModel.id,\n      type: type,\n      zoom: e.scale,\n      originX: e.originX,\n      originY: e.originY\n    });\n    // Only update label layout on zoom\n    api.updateLabelLayout();\n  });\n}\nfunction getCenterCoord(view, point) {\n  // Use projected coord as center because it's linear.\n  return view.pointToProjected ? view.pointToProjected(point) : view.pointToData(point);\n}\n/**\n * Should be called only in action handler.\n * @see {updateViewOnPan|updateViewOnZoom}\n */\nexport function updateCenterAndZoomInAction(view, payload, zoomLimit) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var deltaZoom = payload.zoom;\n  var point = view.projectedToPoint ? view.projectedToPoint(center) : view.dataToPoint(center);\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    view.setCenter(getCenterCoord(view, point));\n  }\n  if (deltaZoom != null) {\n    deltaZoom = clampByZoomLimit(previousZoom * deltaZoom, zoomLimit) / previousZoom;\n    zoomTransformableByOrigin(view, payload.originX, payload.originY, deltaZoom);\n    view.updateTransform();\n    // [NOTICE] Tricky: `getCetnerCoord` uses `this.invTransform` modified by the `updateTransform` above.\n    view.setCenter(getCenterCoord(view, point));\n    view.setZoom(deltaZoom * previousZoom);\n  }\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}\nfunction zoomTransformableByOrigin(target, originX, originY, deltaZoom) {\n  // Keep the mouse center when scaling.\n  target.x -= (originX - target.x) * (deltaZoom - 1);\n  target.y -= (originY - target.y) * (deltaZoom - 1);\n  target.scaleX *= deltaZoom;\n  target.scaleY *= deltaZoom;\n}\nexport function clampByZoomLimit(zoom, zoomLimit) {\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    zoom = Math.max(Math.min(zoomMax, zoom), zoomMin);\n  }\n  return zoom;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport { parsePercent } from '../util/number.js';\nimport { clone } from 'zrender/lib/core/util.js';\nimport { clampByZoomLimit } from '../component/helper/roamHelper.js';\nvar v2ApplyTransform = vector.applyTransform;\nvar View = /** @class */function (_super) {\n  __extends(View, _super);\n  function View(name, opt) {\n    var _this = _super.call(this) || this;\n    _this.type = 'view';\n    _this.dimensions = ['x', 'y'];\n    /**\n     * Represents the transform brought by roam/zoom.\n     * If `View['_viewRect']` applies roam transform,\n     * we can get the final displayed rect.\n     */\n    _this._roamTransformable = new Transformable();\n    /**\n     * Represents the transform from `View['_rect']` to `View['_viewRect']`.\n     */\n    _this._rawTransformable = new Transformable();\n    _this.name = name;\n    _this._opt = opt;\n    return _this;\n  }\n  View.prototype.setBoundingRect = function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    this._updateCenterAndZoom();\n    return this._rect;\n  };\n  View.prototype.getBoundingRect = function () {\n    return this._rect;\n  };\n  /**\n   * If no need to transform `View['_rect']` to `View['_viewRect']`, the calling of\n   * `setViewRect` can be omitted.\n   */\n  View.prototype.setViewRect = function (x, y, width, height) {\n    this._transformTo(x, y, width, height);\n    this._viewRect = new BoundingRect(x, y, width, height);\n  };\n  /**\n   * Transformed to particular position and size\n   */\n  View.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransform.parent;\n    rawTransform.parent = null;\n    rawTransform.decomposeTransform();\n    rawTransform.parent = rawParent;\n    this._updateTransform();\n  };\n  /**\n   * [NOTICE]\n   *  The definition of this center has always been irrelevant to some other series center like\n   *  'series-pie.center' - this center is a point on the same coord sys as `View['_rect'].x/y`,\n   *  rather than canvas viewport, and the unit is not necessarily pixel (e.g., in geo case).\n   *  @see {View['_center']} for details.\n   */\n  View.prototype.setCenter = function (centerCoord) {\n    // #16904 introcuded percentage string here, such as '33%'. But it was based on canvas\n    // width/height, which is not reasonable - the unit may incorrect, and it is unpredictable if\n    // the `View['_rect']` is not calculated based on the current canvas rect. Therefore the percentage\n    // value is changed to based on `View['_rect'].width/height` since v6. Under this definition, users\n    // can use '0%' to map the top-left of `View['_rect']` to the center of `View['_viewRect']`.\n    var opt = this._opt;\n    if (opt && opt.api && opt.ecModel && opt.ecModel.getShallow('legacyViewCoordSysCenterBase') && centerCoord) {\n      centerCoord = [parsePercent(centerCoord[0], opt.api.getWidth()), parsePercent(centerCoord[1], opt.api.getWidth())];\n    }\n    this._centerOption = clone(centerCoord);\n    this._updateCenterAndZoom();\n  };\n  View.prototype.setZoom = function (zoom) {\n    this._zoom = clampByZoomLimit(zoom || 1, this.zoomLimit);\n    this._updateCenterAndZoom();\n  };\n  /**\n   * Get default center without roam\n   */\n  View.prototype.getDefaultCenter = function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  };\n  View.prototype.getCenter = function () {\n    return this._center || this.getDefaultCenter();\n  };\n  View.prototype.getZoom = function () {\n    return this._zoom || 1;\n  };\n  View.prototype.getRoamTransform = function () {\n    return this._roamTransformable.getLocalTransform();\n  };\n  /**\n   * Ensure this method is idempotent, since it should be called when\n   * every relevant prop (e.g. _centerOption/_zoom/_rect/_viewRect) changed.\n   */\n  View.prototype._updateCenterAndZoom = function () {\n    var centerOption = this._centerOption;\n    var rect = this._rect;\n    if (centerOption && rect) {\n      this._center = [parsePercent(centerOption[0], rect.width, rect.x), parsePercent(centerOption[1], rect.height, rect.y)];\n    }\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.originX = center[0];\n    roamTransform.originY = center[1];\n    roamTransform.x = defaultCenter[0] - center[0];\n    roamTransform.y = defaultCenter[1] - center[1];\n    roamTransform.scaleX = roamTransform.scaleY = zoom;\n    this._updateTransform();\n  };\n  /**\n   * Update transform props on `this` based on the current\n   * `this._roamTransformable` and `this._rawTransformable`.\n   */\n  View.prototype._updateTransform = function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  };\n  View.prototype.getTransformInfo = function () {\n    var rawTransformable = this._rawTransformable;\n    var roamTransformable = this._roamTransformable;\n    // Because roamTransformabel has `originX/originY` modified,\n    // but the caller of `getTransformInfo` can not handle `originX/originY`,\n    // so need to recalculate them.\n    var dummyTransformable = new Transformable();\n    dummyTransformable.transform = roamTransformable.transform;\n    dummyTransformable.decomposeTransform();\n    return {\n      roam: {\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY\n      },\n      raw: {\n        x: rawTransformable.x,\n        y: rawTransformable.y,\n        scaleX: rawTransformable.scaleX,\n        scaleY: rawTransformable.scaleY\n      }\n    };\n  };\n  View.prototype.getViewRect = function () {\n    return this._viewRect;\n  };\n  /**\n   * Get view rect after roam transform\n   */\n  View.prototype.getViewRectAfterRoam = function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  };\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   */\n  View.prototype.dataToPoint = function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  };\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   */\n  View.prototype.pointToData = function (point, reserved, out) {\n    out = out || [];\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform(out, point, invTransform) : (out[0] = point[0], out[1] = point[1], out);\n  };\n  View.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n  View.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  /**\n   * @implements\n   */\n  View.prototype.containPoint = function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  };\n  View.dimensions = ['x', 'y'];\n  return View;\n}(Transformable);\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  return seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n}\nexport default View;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/**\n * Link lists and struct (graph or tree)\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nfunction linkSeriesData(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt);\n  // Porxy data original methods.\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  });\n  // Beyond transfer, additional features should be added to `cloneShallow`.\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt));\n  // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  });\n  // Make sure datas contains mainData.\n  assert(datas[mainData.dataType] === mainData);\n}\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n  return res;\n}\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param [dataType] If not specified, return mainData.\n */\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\n * Get list of all linked data\n */\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  }\n  // Supplement method.\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\nexport default linkSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n      if (category != null) {\n        if (isNumber(category)) {\n          category = categoryNames[category];\n        }\n        // If in any legend component the status is not selected.\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend, isString } from 'zrender/lib/core/util.js';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx);\n      // Add prefix to avoid conflict with Object.prototype.\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    });\n    // Assign category color to visual\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n        if (categoryIdx != null) {\n          if (isString(categoryIdx)) {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util.js';\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n  return a;\n}\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize'));\n    // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      // Edge visual must after node visual\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar KEY_DELIMITER = '-->';\n/**\n * params handler\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {*}\n */\nvar getAutoCurvenessParams = function (seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\n * Generate a list of edge curvatures, 20 is the default\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} appendLength\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\n */\nvar createCurveness = function (seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = [];\n  // handler the function set\n  if (zrUtil.isNumber(autoCurvenessParmas)) {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  }\n  // append length\n  if (appendLength > length) {\n    length = appendLength;\n  }\n  // make sure the length is even\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {string} key\n */\nvar getKeyOfEdges = function (n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\n * get opposite key\n * @param {string} key\n * @returns {string}\n */\nvar getOppositeKey = function (key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\n * get edgeMap with key\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\nvar getEdgeFromMap = function (edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\n * calculate all cases total length\n * @param edge\n * @param seriesModel\n * @returns {number}\n */\nvar getTotalLengthBetweenNodes = function (edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\n *\n * @param key\n */\nvar getEdgeMapLengthWithKey = function (key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\n * @see /graph/GraphSeries.js@getInitialData\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {};\n  // calc the array of curveness List\n  createCurveness(seriesModel);\n}\n/**\n * set edgeMap with key\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} index\n */\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)];\n  // set direction\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\n * get curvature for edge\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param index\n */\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n  if (!autoCurvenessParams) {\n    return null;\n  }\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n  if (!edgeArray) {\n    return null;\n  }\n  var edgeIndex = -1;\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  }\n  // if totalLen is Longer createCurveness\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {};\n  // if is opposite edge, must set curvenss to opposite number\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList;\n  // if pass array no need parity\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection];\n    // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n    edge.setLayout(points);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper.js';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n          value.push(val);\n        }\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX;\n  // Scale node when zoom changes\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n  return +symbolSize;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\n * `basedOn` can be:\n * 'value':\n *     This layout is not accurate and have same bad case. For example,\n *     if the min value is very smaller than the max value, the nodes\n *     with the min value probably overlap even though there is enough\n *     space to layout them. So we only use this approach in the as the\n *     init layout of the force layout.\n *     FIXME\n *     Probably we do not need this method any more but use\n *     `basedOn: 'symbolSize'` in force layout if\n *     delay its init operations to GraphView.\n * 'symbolSize':\n *     This approach work only if all of the symbol size calculated.\n *     That is, the progressive rendering is not applied to graph.\n *     FIXME\n *     If progressive rendering is applied to graph some day,\n *     probably we have to use `basedOn: 'value'`.\n */\nexport function circularLayout(seriesModel, basedOn, draggingNode, pointer) {\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n  if (!count) {\n    return;\n  }\n  if (draggingNode) {\n    var _a = coordSys.pointToData(pointer),\n      tempX = _a[0],\n      tempY = _a[1];\n    var v = [tempX - cx, tempY - cy];\n    vec2.normalize(v, v);\n    vec2.scale(v, v, r);\n    draggingNode.setLayout([cx + v[0], cy + v[1]], true);\n    var circularRotateLabel = seriesModel.get(['circular', 'rotateLabel']);\n    rotateNodeLabel(draggingNode, circularRotateLabel, cx, cy);\n  }\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function (seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node);\n      // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r);\n      // when `symbolSize / 2` is bigger than `r`.\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf;\n      // init circular layout for\n      // 1. layout undefined node\n      // 2. not fixed node\n      (!node.getLayout() || !node.getLayout().fixed) && node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};\nexport function rotateNodeLabel(node, circularRotateLabel, cx, cy) {\n  var el = node.getGraphicEl();\n  // need to check if el exists. '-' value may not create node element.\n  if (!el) {\n    return;\n  }\n  var nodeModel = node.getModel();\n  var labelRotate = nodeModel.get(['label', 'rotate']) || 0;\n  var symbolPath = el.getSymbolPath();\n  if (circularRotateLabel) {\n    var pos = node.getLayout();\n    var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n    if (rad < 0) {\n      rad = Math.PI * 2 + rad;\n    }\n    var isLeft = pos[0] < cx;\n    if (isLeft) {\n      rad = rad - Math.PI;\n    }\n    var textPosition = isLeft ? 'left' : 'right';\n    symbolPath.setTextConfig({\n      rotation: -rad,\n      position: textPosition,\n      origin: 'center'\n    });\n    var emphasisState = symbolPath.ensureState('emphasis');\n    zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n      position: textPosition\n    });\n  } else {\n    symbolPath.setTextConfig({\n      rotation: labelRotate *= Math.PI / 180\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { circularLayout } from './circularLayoutHelper.js';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n/*\n* A third-party license is embedded for some of the code in this file:\n* Some formulas were originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment of the method \"step\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as vec2 from 'zrender/lib/core/vector.js';\nvar scaleAndAdd = vec2.scaleAndAdd;\n// function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2];\n  // let scale = opts.scale || 1;\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity;\n  // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  }\n  // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function () {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function (idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function (idx) {\n      nodes[idx].fixed = false;\n    },\n    /**\n     * Before step hook\n     */\n    beforeStep: function (cb) {\n      beforeStepCallback = cb;\n    },\n    /**\n     * After step hook\n     */\n    afterStep: function (cb) {\n      afterStepCallback = cb;\n    },\n    /**\n     * Some formulas were originally copied from \"d3.js\"\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\n     * with some modifications made for this project.\n     * See the license statement at the head of this file.\n     */\n    step: function (cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n        if (isNaN(w)) {\n          w = 0;\n        }\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      }\n      // Gravity\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p);\n          // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      }\n      // Repulsive\n      // PENDING\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n      var v = [];\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { forceLayout } from './forceHelper.js';\nimport { simpleLayout } from './simpleLayoutHelper.js';\nimport { circularLayout } from './circularLayoutHelper.js';\nimport { linearMap } from '../../util/number.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper.js';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value');\n      // let edgeDataExtent = edgeData.getDataExtent('value');\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength];\n      // Larger value has smaller length\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      });\n      // let coordSys = graphSeries.coordinateSystem;\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1;\n      // Step to get the layout\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View.js';\nimport { createBoxLayoutReference, getLayoutRect, applyPreserveAspect } from '../../util/layout.js';\nimport * as bbox from 'zrender/lib/core/bbox.js';\nimport { extend } from 'zrender/lib/core/util.js';\nimport { injectCoordSysByOption } from '../../core/CoordinateSystem.js';\nfunction getViewRect(seriesModel, api, aspect) {\n  var layoutRef = createBoxLayoutReference(seriesModel, api);\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  var viewRect = getLayoutRect(option, layoutRef.refContainer);\n  return applyPreserveAspect(seriesModel, viewRect, aspect);\n}\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    injectCoordSysByOption({\n      targetModel: seriesModel,\n      coordSysType: 'view',\n      coordSysProvider: createViewCoordSys,\n      isDefaultDataCoordSys: true\n    });\n    function createViewCoordSys() {\n      var data = seriesModel.getData();\n      var positions = data.mapArray(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max);\n      // If width or height is 0\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]);\n      // FIXME If get view rect after data processed?\n      var viewRect = getViewRect(seriesModel, api, aspect);\n      // Position may be NaN, use view rect instead\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewCoordSys = new View(null, {\n        api: api,\n        ecModel: ecModel\n      });\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n      // Update roam info\n      viewCoordSys.setCenter(seriesModel.get('center'));\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n      return viewCoordSys;\n    }\n  });\n  return viewList;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Line path for bezier and straight line draw\n */\nimport * as graphic from '../../util/graphic.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport tokens from '../../visual/tokens.js';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\nvar StraightLineShape = /** @class */function () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0;\n    // End point\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n  return StraightLineShape;\n}();\nvar CurveShape = /** @class */function (_super) {\n  __extends(CurveShape, _super);\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return CurveShape;\n}(StraightLineShape);\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\nvar ECLinePath = /** @class */function (_super) {\n  __extends(ECLinePath, _super);\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-line';\n    return _this;\n  }\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: tokens.color.neutral99,\n      fill: null\n    };\n  };\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n  return ECLinePath;\n}(graphic.Path);\nexport default ECLinePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport * as symbolUtil from '../../util/symbol.js';\nimport ECLinePath from './LinePath.js';\nimport * as graphic from '../../util/graphic.js';\nimport { toggleHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle.js';\nimport { round } from '../../util/number.js';\nimport tokens from '../../visual/tokens.js';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\nfunction makeSymbolTypeValue(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return symbolType;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  return symbolType + symbolSizeArr + symbolOffsetArr + (symbolRotate || '') + (symbolKeepAspect || '');\n}\n/**\n * @inner\n */\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\nvar Line = /** @class */function (_super) {\n  __extends(Line, _super);\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n    _this._createLine(lineData, idx, seriesScope);\n    return _this;\n  }\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var z2 = lineData.getItemVisual(idx, 'z2');\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      z2: retrieve2(z2, 0),\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx);\n      // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = makeSymbolTypeValue(symbolCategory, lineData, idx);\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  // TODO More strict on the List type in parameters?\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = makeSymbolTypeValue(symbolCategory, lineData, idx);\n      var key = makeSymbolTypeKey(symbolCategory);\n      // Symbol changed\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n      this[key] = symbolType;\n    }, this);\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n  ;\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels;\n    var emphasisDisabled = seriesScope && seriesScope.emphasisDisabled;\n    var focus = seriesScope && seriesScope.focus;\n    var blurScope = seriesScope && seriesScope.blurScope;\n    // Optimization for large dataset\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisLineStyle = emphasisModel.getModel('lineStyle').getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      emphasisDisabled = emphasisModel.get('disabled');\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle;\n    // Update symbol\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function (dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || tokens.color.neutral99,\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent();\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign;\n      // 'start', 'middle', 'end'\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n      label.__labelDistance = distance;\n    }\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n    });\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent();\n    // Quick reject\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n    var invScale = 1;\n    var parentNode = this.parent;\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n      parentNode = parentNode.parent;\n    }\n    var line = lineGroup.childOfName('line');\n    // If line not changed\n    // FIXME Parent scale changed\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n      var dir = tangent[0] < 0 ? -1 : 1;\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n        label.rotation = rotation;\n      }\n      var dy = void 0;\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n  return Line;\n}(graphic.Group);\nexport default Line;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic.js';\nimport LineGroup from './Line.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nvar LineDraw = /** @class */function () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this;\n    // Remove progressive els.\n    this._progressiveEls = null;\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData;\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldLineData) {\n      group.removeAll();\n    }\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n  ;\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData;\n    // Do not support update layout in incremental mode.\n    if (!lineData) {\n      return;\n    }\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n  ;\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    this._progressiveEls = [];\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n  ;\n  LineDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n  return LineDraw;\n}();\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  var emphasisModel = hostModel.getModel('emphasis');\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: emphasisModel.getModel(['lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    blurScope: emphasisModel.get('blurScope'),\n    focus: emphasisModel.get('focus'),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\nfunction lineNeedsDraw(pts) {\n  return pts && !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\nexport default LineDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as curveTool from 'zrender/lib/core/curve.js';\nimport * as vec2 from 'zrender/lib/core/vector.js';\nimport { getSymbolSize } from './graphHelper.js';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  }\n  // Assume the segment is monotone，Find root through Bisection method\n  // At most 32 iteration\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval;\n    // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    }\n    // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n  return t;\n}\n// Adjust edge to avoid\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n    var originalPoints = linePoints.__original;\n    // Quadratic curve\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale);\n        // Subdivide and get the second\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale);\n        // Subdivide and get the first\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      }\n      // Copy back to layout\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    }\n    // Line\n    else {\n      vec2.copy(pts2[0], originalPoints[0]);\n      vec2.copy(pts2[1], originalPoints[1]);\n      vec2.sub(v, pts2[1], pts2[0]);\n      vec2.normalize(v, v);\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n      }\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n      }\n      vec2.copy(linePoints[0], pts2[0]);\n      vec2.copy(linePoints[1], pts2[1]);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model.js';\n/**\n * @caveat Do not import other `src/component/thumbnail/*` files.\n *  This file should be decoupled from them for sake of the size consideration.\n */\n/**\n * FIXME: This is a temporary implmentation. May need refactor to decouple\n *  the direct call from series.graph to thumbnail.\n */\nvar inner = makeInner();\nexport function getThumbnailBridge(model) {\n  if (model) {\n    return inner(model).bridge;\n  }\n}\nexport function injectThumbnailBridge(model, thumbnailBridge) {\n  if (model) {\n    inner(model).bridge = thumbnailBridge;\n  }\n}\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport LineDraw from '../helper/LineDraw.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport { updateViewOnZoom, updateViewOnPan } from '../../component/helper/roamHelper.js';\nimport * as graphic from '../../util/graphic.js';\nimport adjustEdge from './adjustEdge.js';\nimport { getNodeGlobalScale } from './graphHelper.js';\nimport ChartView from '../../view/Chart.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { simpleLayoutEdge } from './simpleLayoutHelper.js';\nimport { circularLayout, rotateNodeLabel } from './circularLayoutHelper.js';\nimport { clone, extend } from 'zrender/lib/core/util.js';\nimport ECLinePath from '../helper/LinePath.js';\nimport { getThumbnailBridge } from '../../component/helper/thumbnailBridge.js';\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\nvar GraphView = /** @class */function (_super) {\n  __extends(GraphView, _super);\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphView.type;\n    return _this;\n  }\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    var mainGroup = new graphic.Group();\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: mainGroup\n    };\n    mainGroup.add(symbolDraw.group);\n    mainGroup.add(lineDraw.group);\n    group.add(mainGroup);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._mainGroup = mainGroup;\n    this._firstRender = true;\n  };\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n    var coordSys = seriesModel.coordinateSystem;\n    var isForceLayout = false;\n    this._model = seriesModel;\n    this._api = api;\n    this._active = true;\n    var thumbnailInfo = this._getThumbnailInfo();\n    if (thumbnailInfo) {\n      thumbnailInfo.bridge.reset(api);\n    }\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n      if (this._firstRender) {\n        this._mainGroup.attr(groupNewProp);\n      } else {\n        graphic.updateProps(this._mainGroup, groupNewProp, seriesModel);\n      }\n    }\n    // Fix edge contact point with node\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData();\n    // TODO: TYPE\n    lineDraw.updateData(edgeData);\n    this._updateNodeAndLinkScale();\n    this._updateController(null, seriesModel, api);\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n    if (forceLayout) {\n      isForceLayout = true;\n      this._startForceLayoutIteration(forceLayout, api, layoutAnimation);\n    }\n    var layout = seriesModel.get('layout');\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel();\n      if (!el) {\n        return;\n      }\n      // Update draggable\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n      if (draggable) {\n        el.on('drag', function (e) {\n          switch (layout) {\n            case 'force':\n              forceLayout.warmUp();\n              !_this._layouting && _this._startForceLayoutIteration(forceLayout, api, layoutAnimation);\n              forceLayout.setFixed(idx);\n              // Write position back to layout\n              data.setItemLayout(idx, [el.x, el.y]);\n              break;\n            case 'circular':\n              data.setItemLayout(idx, [el.x, el.y]);\n              // mark node fixed\n              node.setLayout({\n                fixed: true\n              }, true);\n              // recalculate circular layout\n              circularLayout(seriesModel, 'symbolSize', node, [e.offsetX, e.offsetY]);\n              _this.updateLayout(seriesModel);\n              break;\n            case 'none':\n            default:\n              data.setItemLayout(idx, [el.x, el.y]);\n              // update edge\n              simpleLayoutEdge(seriesModel.getGraph(), seriesModel);\n              _this.updateLayout(seriesModel);\n              break;\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n      el.setDraggable(draggable, !!itemModel.get('cursor'));\n      var focus = itemModel.get(['emphasis', 'focus']);\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n      if (!el) {\n        return;\n      }\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.graph.eachNode(function (node) {\n      rotateNodeLabel(node, circularRotateLabel, cx, cy);\n    });\n    this._firstRender = false;\n    // Force layout will render thumbnail when layout is finished.\n    if (!isForceLayout) {\n      this._renderThumbnail(seriesModel, api, this._symbolDraw, this._lineDraw);\n    }\n  };\n  GraphView.prototype.dispose = function () {\n    this.remove();\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, api, layoutAnimation) {\n    var self = this;\n    var firstRendered = false;\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        if (stopped || !firstRendered) {\n          firstRendered = true;\n          self._renderThumbnail(self._model, api, self._symbolDraw, self._lineDraw);\n        }\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n  GraphView.prototype._updateController = function (clipRect, seriesModel, api) {\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var coordSys = seriesModel.coordinateSystem;\n    if (!isViewCoordSys(coordSys)) {\n      controller.disable();\n      return;\n    }\n    controller.enable(seriesModel.get('roam'), {\n      api: api,\n      zInfo: {\n        component: seriesModel\n      },\n      triggerInfo: {\n        roamTrigger: seriesModel.get('roamTrigger'),\n        isInSelf: function (e, x, y) {\n          return coordSys.containPoint([x, y]);\n        },\n        isInClip: function (e, x, y) {\n          return !clipRect || clipRect.contain(x, y);\n        }\n      }\n    });\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = coordSys.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n    });\n  };\n  /**\n   * A performance shortcut - called by action handler to update the view directly\n   * without any data/visual processing (which are assumed to be unchanged), while\n   * ensuring consistent behavior between internal and external action triggers.\n   */\n  GraphView.prototype.updateViewOnPan = function (seriesModel, api, params) {\n    if (!this._active) {\n      return;\n    }\n    updateViewOnPan(this._controllerHost, params.dx, params.dy);\n    this._updateThumbnailWindow();\n  };\n  /**\n   * A performance shortcut - called by action handler to update the view directly\n   * without any data/visual processing (which are assumed to be unchanged), while\n   * ensuring consistent behavior between internal and external action triggers.\n   */\n  GraphView.prototype.updateViewOnZoom = function (seriesModel, api, params) {\n    if (!this._active) {\n      return;\n    }\n    updateViewOnZoom(this._controllerHost, params.zoom, params.originX, params.originY);\n    this._updateNodeAndLinkScale();\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    this._lineDraw.updateLayout();\n    // Only update label layout on zoom\n    api.updateLabelLayout();\n    this._updateThumbnailWindow();\n  };\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el && el.setSymbolScale(nodeScale);\n    });\n  };\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    if (!this._active) {\n      return;\n    }\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    this._symbolDraw.updateLayout();\n    this._lineDraw.updateLayout();\n  };\n  GraphView.prototype.remove = function () {\n    this._active = false;\n    clearTimeout(this._layoutTimeout);\n    this._layouting = false;\n    this._layoutTimeout = null;\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n    this._controller && this._controller.disable();\n  };\n  /**\n   * Get thumbnail data structure only if supported.\n   */\n  GraphView.prototype._getThumbnailInfo = function () {\n    var model = this._model;\n    var coordSys = model.coordinateSystem;\n    if (coordSys.type !== 'view') {\n      return;\n    }\n    var bridge = getThumbnailBridge(model);\n    if (!bridge) {\n      return;\n    }\n    return {\n      bridge: bridge,\n      coordSys: coordSys\n    };\n  };\n  GraphView.prototype._updateThumbnailWindow = function () {\n    var info = this._getThumbnailInfo();\n    if (info) {\n      info.bridge.updateWindow(info.coordSys.transform, this._api);\n    }\n  };\n  GraphView.prototype._renderThumbnail = function (seriesModel, api, symbolDraw, lineDraw) {\n    var info = this._getThumbnailInfo();\n    if (!info) {\n      return;\n    }\n    var bridgeGroup = new graphic.Group();\n    var symbolNodes = symbolDraw.group.children();\n    var lineNodes = lineDraw.group.children();\n    var lineGroup = new graphic.Group();\n    var symbolGroup = new graphic.Group();\n    bridgeGroup.add(symbolGroup);\n    bridgeGroup.add(lineGroup);\n    // TODO: reuse elemenents for performance in large graph?\n    for (var i = 0; i < symbolNodes.length; i++) {\n      var node = symbolNodes[i];\n      var sub = node.children()[0];\n      var x = node.x;\n      var y = node.y;\n      var subShape = clone(sub.shape);\n      var shape = extend(subShape, {\n        width: sub.scaleX,\n        height: sub.scaleY,\n        x: x - sub.scaleX / 2,\n        y: y - sub.scaleY / 2\n      });\n      var style = clone(sub.style);\n      var subThumbnail = new sub.constructor({\n        shape: shape,\n        style: style,\n        z2: 151\n      });\n      symbolGroup.add(subThumbnail);\n    }\n    for (var i = 0; i < lineNodes.length; i++) {\n      var node = lineNodes[i];\n      var line = node.children()[0];\n      var style = clone(line.style);\n      var shape = clone(line.shape);\n      var lineThumbnail = new ECLinePath({\n        style: style,\n        shape: shape,\n        z2: 151\n      });\n      lineGroup.add(lineThumbnail);\n    }\n    info.bridge.renderContent({\n      api: api,\n      roamType: seriesModel.get('roam'),\n      viewportRect: null,\n      group: bridgeGroup,\n      targetTrans: info.coordSys.transform\n    });\n  };\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\nexport default GraphView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\n// id may be function name of Object, add a prefix to avoid this problem.\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\nvar Graph = /** @class */function () {\n  function Graph(directed) {\n    this.type = 'graph';\n    this.nodes = [];\n    this.edges = [];\n    this._nodesMap = {};\n    /**\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\n     * @private\n     */\n    this._edgesMap = {};\n    this._directed = directed || false;\n  }\n  /**\n   * If is directed graph\n   */\n  Graph.prototype.isDirected = function () {\n    return this._directed;\n  };\n  ;\n  /**\n   * Add a new node\n   */\n  Graph.prototype.addNode = function (id, dataIndex) {\n    id = id == null ? '' + dataIndex : '' + id;\n    var nodesMap = this._nodesMap;\n    if (nodesMap[generateNodeKey(id)]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Graph nodes have duplicate name or id');\n      }\n      return;\n    }\n    var node = new GraphNode(id, dataIndex);\n    node.hostGraph = this;\n    this.nodes.push(node);\n    nodesMap[generateNodeKey(id)] = node;\n    return node;\n  };\n  ;\n  /**\n   * Get node by data index\n   */\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\n    var rawIdx = this.data.getRawIndex(dataIndex);\n    return this.nodes[rawIdx];\n  };\n  ;\n  /**\n   * Get node by id\n   */\n  Graph.prototype.getNodeById = function (id) {\n    return this._nodesMap[generateNodeKey(id)];\n  };\n  ;\n  /**\n   * Add a new edge\n   */\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\n    var nodesMap = this._nodesMap;\n    var edgesMap = this._edgesMap;\n    // PENDING\n    if (zrUtil.isNumber(n1)) {\n      n1 = this.nodes[n1];\n    }\n    if (zrUtil.isNumber(n2)) {\n      n2 = this.nodes[n2];\n    }\n    if (!(n1 instanceof GraphNode)) {\n      n1 = nodesMap[generateNodeKey(n1)];\n    }\n    if (!(n2 instanceof GraphNode)) {\n      n2 = nodesMap[generateNodeKey(n2)];\n    }\n    if (!n1 || !n2) {\n      return;\n    }\n    var key = n1.id + '-' + n2.id;\n    var edge = new GraphEdge(n1, n2, dataIndex);\n    edge.hostGraph = this;\n    if (this._directed) {\n      n1.outEdges.push(edge);\n      n2.inEdges.push(edge);\n    }\n    n1.edges.push(edge);\n    if (n1 !== n2) {\n      n2.edges.push(edge);\n    }\n    this.edges.push(edge);\n    edgesMap[key] = edge;\n    return edge;\n  };\n  ;\n  /**\n   * Get edge by data index\n   */\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\n    return this.edges[rawIdx];\n  };\n  ;\n  /**\n   * Get edge by two linked nodes\n   */\n  Graph.prototype.getEdge = function (n1, n2) {\n    if (n1 instanceof GraphNode) {\n      n1 = n1.id;\n    }\n    if (n2 instanceof GraphNode) {\n      n2 = n2.id;\n    }\n    var edgesMap = this._edgesMap;\n    if (this._directed) {\n      return edgesMap[n1 + '-' + n2];\n    } else {\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n    }\n  };\n  ;\n  /**\n   * Iterate all nodes\n   */\n  Graph.prototype.eachNode = function (cb, context) {\n    var nodes = this.nodes;\n    var len = nodes.length;\n    for (var i = 0; i < len; i++) {\n      if (nodes[i].dataIndex >= 0) {\n        cb.call(context, nodes[i], i);\n      }\n    }\n  };\n  ;\n  /**\n   * Iterate all edges\n   */\n  Graph.prototype.eachEdge = function (cb, context) {\n    var edges = this.edges;\n    var len = edges.length;\n    for (var i = 0; i < len; i++) {\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n        cb.call(context, edges[i], i);\n      }\n    }\n  };\n  ;\n  /**\n   * Breadth first traverse\n   * Return true to stop traversing\n   */\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\n    if (!(startNode instanceof GraphNode)) {\n      startNode = this._nodesMap[generateNodeKey(startNode)];\n    }\n    if (!startNode) {\n      return;\n    }\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n    for (var i = 0; i < this.nodes.length; i++) {\n      this.nodes[i].__visited = false;\n    }\n    if (cb.call(context, startNode, null)) {\n      return;\n    }\n    var queue = [startNode];\n    while (queue.length) {\n      var currentNode = queue.shift();\n      var edges = currentNode[edgeType];\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n        if (!otherNode.__visited) {\n          if (cb.call(context, otherNode, currentNode)) {\n            // Stop traversing\n            return;\n          }\n          queue.push(otherNode);\n          otherNode.__visited = true;\n        }\n      }\n    }\n  };\n  ;\n  // TODO\n  // depthFirstTraverse(\n  //     cb, startNode, direction, context\n  // ) {\n  // };\n  // Filter update\n  Graph.prototype.update = function () {\n    var data = this.data;\n    var edgeData = this.edgeData;\n    var nodes = this.nodes;\n    var edges = this.edges;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n    edgeData.filterSelf(function (idx) {\n      var edge = edges[edgeData.getRawIndex(idx)];\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n    });\n    // Update edge\n    for (var i = 0, len = edges.length; i < len; i++) {\n      edges[i].dataIndex = -1;\n    }\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  ;\n  /**\n   * @return {module:echarts/data/Graph}\n   */\n  Graph.prototype.clone = function () {\n    var graph = new Graph(this._directed);\n    var nodes = this.nodes;\n    var edges = this.edges;\n    for (var i = 0; i < nodes.length; i++) {\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\n    }\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n    }\n    return graph;\n  };\n  ;\n  return Graph;\n}();\nvar GraphNode = /** @class */function () {\n  function GraphNode(id, dataIndex) {\n    this.inEdges = [];\n    this.outEdges = [];\n    this.edges = [];\n    this.dataIndex = -1;\n    this.id = id == null ? '' : id;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  /**\n   * @return {number}\n   */\n  GraphNode.prototype.degree = function () {\n    return this.edges.length;\n  };\n  /**\n   * @return {number}\n   */\n  GraphNode.prototype.inDegree = function () {\n    return this.inEdges.length;\n  };\n  /**\n  * @return {number}\n  */\n  GraphNode.prototype.outDegree = function () {\n    return this.outEdges.length;\n  };\n  GraphNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  GraphNode.prototype.getAdjacentDataIndices = function () {\n    var dataIndices = {\n      edge: [],\n      node: []\n    };\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n      dataIndices.edge.push(adjacentEdge.dataIndex);\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\n    }\n    return dataIndices;\n  };\n  GraphNode.prototype.getTrajectoryDataIndices = function () {\n    var connectedEdgesMap = zrUtil.createHashMap();\n    var connectedNodesMap = zrUtil.createHashMap();\n    for (var i = 0, len = this.edges.length; i < len; i++) {\n      var adjacentEdge = this.edges[i];\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n      connectedEdgesMap.set(adjacentEdge.dataIndex, true);\n      var sourceNodesQueue = [adjacentEdge.node1];\n      var targetNodesQueue = [adjacentEdge.node2];\n      var nodeIteratorIndex = 0;\n      while (nodeIteratorIndex < sourceNodesQueue.length) {\n        var sourceNode = sourceNodesQueue[nodeIteratorIndex];\n        nodeIteratorIndex++;\n        connectedNodesMap.set(sourceNode.dataIndex, true);\n        var sourceNodeInEdges = sourceNode.inEdges;\n        for (var j = 0, len_1 = sourceNodeInEdges.length, inEdge = void 0, inEdgeDataIndex = void 0; j < len_1; j++) {\n          inEdge = sourceNodeInEdges[j];\n          inEdgeDataIndex = inEdge.dataIndex;\n          if (inEdgeDataIndex >= 0 && !connectedEdgesMap.hasKey(inEdgeDataIndex)) {\n            connectedEdgesMap.set(inEdgeDataIndex, true);\n            sourceNodesQueue.push(inEdge.node1);\n          }\n        }\n      }\n      nodeIteratorIndex = 0;\n      while (nodeIteratorIndex < targetNodesQueue.length) {\n        var targetNode = targetNodesQueue[nodeIteratorIndex];\n        nodeIteratorIndex++;\n        connectedNodesMap.set(targetNode.dataIndex, true);\n        var targetNodeOutEdges = targetNode.outEdges;\n        for (var j = 0, len_2 = targetNodeOutEdges.length, outEdge = void 0, outEdgeDataIndex = void 0; j < len_2; j++) {\n          outEdge = targetNodeOutEdges[j];\n          outEdgeDataIndex = outEdge.dataIndex;\n          if (outEdgeDataIndex >= 0 && !connectedEdgesMap.hasKey(outEdgeDataIndex)) {\n            connectedEdgesMap.set(outEdgeDataIndex, true);\n            targetNodesQueue.push(outEdge.node2);\n          }\n        }\n      }\n    }\n    return {\n      edge: connectedEdgesMap.keys(),\n      node: connectedNodesMap.keys()\n    };\n  };\n  return GraphNode;\n}();\nvar GraphEdge = /** @class */function () {\n  function GraphEdge(n1, n2, dataIndex) {\n    this.dataIndex = -1;\n    this.node1 = n1;\n    this.node2 = n2;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  GraphEdge.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var graph = this.hostGraph;\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\n    return {\n      edge: [this.dataIndex],\n      node: [this.node1.dataIndex, this.node2.dataIndex]\n    };\n  };\n  GraphEdge.prototype.getTrajectoryDataIndices = function () {\n    var connectedEdgesMap = zrUtil.createHashMap();\n    var connectedNodesMap = zrUtil.createHashMap();\n    connectedEdgesMap.set(this.dataIndex, true);\n    var sourceNodes = [this.node1];\n    var targetNodes = [this.node2];\n    var nodeIteratorIndex = 0;\n    while (nodeIteratorIndex < sourceNodes.length) {\n      var sourceNode = sourceNodes[nodeIteratorIndex];\n      nodeIteratorIndex++;\n      connectedNodesMap.set(sourceNode.dataIndex, true);\n      var sourceNodeInEdges = sourceNode.inEdges;\n      for (var j = 0, len = sourceNodeInEdges.length, inEdge = void 0, inEdgeDataIndex = void 0; j < len; j++) {\n        inEdge = sourceNode.inEdges[j];\n        inEdgeDataIndex = inEdge.dataIndex;\n        if (inEdgeDataIndex >= 0 && !connectedEdgesMap.hasKey(inEdgeDataIndex)) {\n          connectedEdgesMap.set(inEdgeDataIndex, true);\n          sourceNodes.push(inEdge.node1);\n        }\n      }\n    }\n    nodeIteratorIndex = 0;\n    while (nodeIteratorIndex < targetNodes.length) {\n      var targetNode = targetNodes[nodeIteratorIndex];\n      nodeIteratorIndex++;\n      connectedNodesMap.set(targetNode.dataIndex, true);\n      var targetNodeOutEdges = targetNode.outEdges;\n      for (var j = 0, len = targetNodeOutEdges.length, outEdge = void 0, outEdgeDataIndex = void 0; j < len; j++) {\n        outEdge = targetNode.outEdges[j];\n        outEdgeDataIndex = outEdge.dataIndex;\n        if (outEdgeDataIndex >= 0 && !connectedEdgesMap.hasKey(outEdgeDataIndex)) {\n          connectedEdgesMap.set(outEdgeDataIndex, true);\n          targetNodes.push(outEdge.node2);\n        }\n      }\n    }\n    return {\n      edge: connectedEdgesMap.keys(),\n      node: connectedNodesMap.keys()\n    };\n  };\n  return GraphEdge;\n}();\nfunction createGraphDataProxyMixin(hostName, dataName) {\n  return {\n    /**\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\n     */\n    getValue: function (dimension) {\n      var data = this[hostName][dataName];\n      return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n    },\n    // TODO: TYPE stricter type.\n    setVisual: function (key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n    getVisual: function (key) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\n    },\n    setLayout: function (layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n    getLayout: function () {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n    getGraphicEl: function () {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n    getRawIndex: function () {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n}\n;\n;\n;\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nexport default Graph;\nexport { GraphNode, GraphEdge };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport Graph from '../../data/Graph.js';\nimport linkSeriesData from '../../data/helper/linkSeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport createSeriesData from './createSeriesData.js';\nimport { convertOptionIdName } from '../../util/model.js';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve(\n    // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target;\n    // addEdge may fail when source or target not exists\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n  if (coordSys === 'cartesian2d' || coordSys === 'polar' || coordSys === 'matrix') {\n    nodeData = createSeriesData(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : [];\n    // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n    var dimensions = prepareSeriesDataSchema(nodes, {\n      coordDimensions: coordDimensions,\n      encodeDefine: seriesModel.getEncode()\n    }).dimensions;\n    nodeData = new SeriesData(dimensions, seriesModel);\n    nodeData.initData(nodes);\n  }\n  var edgeData = new SeriesData(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkSeriesData({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  });\n  // Update dataIndex of nodes and edges because invalid edge may be removed\n  graph.update();\n  return graph;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { defaultEmphasis } from '../../util/model.js';\nimport Model from '../../model/Model.js';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip.js';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper.js';\nimport tokens from '../../visual/tokens.js';\nvar GraphSeriesModel = /** @class */function (_super) {\n  __extends(GraphSeriesModel, _super);\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    var self = this;\n    function getCategoriesData() {\n      return self._categoriesData;\n    }\n    // Provide data for legend select\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n    this._updateCategoriesData();\n  };\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n    this.fillDataTextStyle(option.edges || option.links);\n    this._updateCategoriesData();\n  };\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n        return model;\n      });\n      // TODO Inherit resolveParentPath by default in Model#getModel?\n      var oldGetModel = Model.prototype.getModel;\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n          return newPathArr;\n        }\n        return pathArr;\n      }\n    }\n  };\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    }\n    // dataType === 'node' or empty\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new SeriesData(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this)\n    // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      // Don't use tokens.color.border because of the opacity\n      color: tokens.color.neutral50,\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: tokens.color.primary\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\nexport default GraphSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport categoryFilter from './categoryFilter.js';\nimport categoryVisual from './categoryVisual.js';\nimport edgeVisual from './edgeVisual.js';\nimport simpleLayout from './simpleLayout.js';\nimport circularLayout from './circularLayout.js';\nimport forceLayout from './forceLayout.js';\nimport createView from './createView.js';\nimport View from '../../coord/View.js';\nimport GraphView from './GraphView.js';\nimport GraphSeriesModel from './GraphSeries.js';\nimport { updateCenterAndZoomInAction } from '../../component/helper/roamHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  });\n  // Register legacy focus actions\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, noop);\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, noop);\n  // Register roam action.\n  registers.registerAction({\n    type: 'graphRoam',\n    event: 'graphRoam',\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var graphView = api.getViewOfSeriesModel(seriesModel);\n      if (graphView) {\n        if (payload.dx != null && payload.dy != null) {\n          graphView.updateViewOnPan(seriesModel, api, payload);\n        }\n        if (payload.zoom != null && payload.originX != null && payload.originY != null) {\n          graphView.updateViewOnZoom(seriesModel, api, payload);\n        }\n      }\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoomInAction(coordSys, payload, seriesModel.get('scaleLimit'));\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as axisPointerModelHelper from './modelHelper.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n */\nvar BaseAxisPointer = /** @class */function () {\n  function BaseAxisPointer() {\n    this._dragging = false;\n    /**\n     * In px, arbitrary value. Do not set too small,\n     * no animation is ok for most cases.\n     */\n    this.animationThreshold = 15;\n  }\n  /**\n   * @implement\n   */\n  BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status');\n    // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api;\n    // Optimize: `render` will be called repeatedly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n    group && group.show();\n    handle && handle.show();\n    // Otherwise status is 'show'\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api);\n    // Enable change axis pointer type.\n    var graphicKey = elOption.graphicKey;\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n    updateMandatoryProps(group, axisPointerModel, true);\n    this._renderHandle(value);\n  };\n  /**\n   * @implement\n   */\n  BaseAxisPointer.prototype.remove = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @implement\n   */\n  BaseAxisPointer.prototype.dispose = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap');\n    // Value axis without snap always do not snap.\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      }\n      // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent();\n        // Approximate band width\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n      return false;\n    }\n    return animation === true;\n  };\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    // Should be implemenented by sub-class.\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Text(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        // TODOTODO\n        // shape: elOption.label.shape,\n        x: elOption.label.x,\n        y: elOption.label.y\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @private\n   */\n  BaseAxisPointer.prototype._renderHandle = function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n    var axisPointerModel = this._axisPointerModel;\n    var zr = this._api.getZr();\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n    var isInit;\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // For mobile device, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n    updateMandatoryProps(handle, axisPointerModel, false);\n    // update style\n    handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY']));\n    // update position\n    var handleSize = handleModel.get('size');\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n    handle.scaleX = handleSize[0] / 2;\n    handle.scaleY = handleSize[1] / 2;\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n    this._moveHandleToValue(value, isInit);\n  };\n  BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  };\n  BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    this._dragging = true;\n    // Persistent for throttle.\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n    this._doDispatchAxisPointer();\n  };\n  /**\n   * Throttled method.\n   */\n  BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  };\n  BaseAxisPointer.prototype._onHandleDragEnd = function () {\n    this._dragging = false;\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    var value = this._axisPointerModel.get('value');\n    // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n    this._moveHandleToValue(value);\n    // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  };\n  /**\n   * @private\n   */\n  BaseAxisPointer.prototype.clear = function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n    throttleUtil.clear(this, '_doDispatchAxisPointer');\n  };\n  /**\n   * @protected\n   */\n  BaseAxisPointer.prototype.doClear = function () {\n    // Implemented by sub-class if necessary.\n  };\n  BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  };\n  return BaseAxisPointer;\n}();\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals_1 = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals_1 = equals_1 && propsEqual(lastProps[key], item);\n    });\n    return !!equals_1;\n  } else {\n    return lastProps === newProps;\n  }\n}\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n}\nfunction getHandleTransProps(trans) {\n  return {\n    x: trans.x || 0,\n    y: trans.y || 0,\n    rotation: trans.rotation || 0\n  };\n}\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\nexport default BaseAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nexport function buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\nexport function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get(['label', 'precision']),\n    formatter: axisPointerModel.get(['label', 'formatter'])\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2];\n  // Adjust by align.\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2);\n  // Not overflow ec container\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n  }\n  elOption.label = {\n    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n    x: position[0],\n    y: position[1],\n    style: createTextStyle(labelModel, {\n      text: text,\n      font: font,\n      fill: labelModel.getTextColor(),\n      padding: paddings,\n      backgroundColor: bgColor\n    }),\n    // Label should be over axisPointer.\n    z2: 10\n  };\n}\n// Do not overflow ec container\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\nexport function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel({\n    value: value\n  }, {\n    // If `precision` is set, width can be fixed (like '12.00500'), which\n    // helps to debounce when when moving label.\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n  if (formatter) {\n    var params_1 = {\n      value: axisHelper.getAxisRawValue(axis, {\n        value: value\n      }),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params_1.seriesData.push(dataParams);\n    });\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params_1);\n    }\n  }\n  return text;\n}\nexport function getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\nexport function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\nexport function makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\nexport function makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\nexport function makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\nvar CartesianAxisPointer = /** @class */function (_super) {\n  __extends(CartesianAxisPointer, _super);\n  function CartesianAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n  CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n    var layoutInfo = cartesianAxisHelper.layout(grid.getRect(), axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\n   * @override\n   */\n  CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.getRect(), axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var pos = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: pos[0],\n      y: pos[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\n   * @override\n   */\n  CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    // Make tooltip do not overlap axisPointer and in the middle of the grid.\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  };\n  return CartesianAxisPointer;\n}(BaseAxisPointer);\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\nexport default CartesianAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport tokens from '../../visual/tokens.js';\nvar AxisPointerModel = /** @class */function (_super) {\n  __extends(AxisPointerModel, _super);\n  function AxisPointerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisPointerModel.type;\n    return _this;\n  }\n  AxisPointerModel.type = 'axisPointer';\n  AxisPointerModel.defaultOption = {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // zlevel: 0,\n    z: 50,\n    type: 'line',\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    triggerEmphasis: true,\n    value: null,\n    status: null,\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: tokens.color.border,\n      width: 1,\n      type: 'dashed'\n    },\n    shadowStyle: {\n      color: tokens.color.shadowTint\n    },\n    label: {\n      show: true,\n      formatter: null,\n      precision: 'auto',\n      margin: 3,\n      color: tokens.color.neutral00,\n      padding: [5, 7, 5, 7],\n      backgroundColor: tokens.color.accent60,\n      borderColor: null,\n      borderWidth: 0,\n      borderRadius: 3\n    },\n    handle: {\n      show: false,\n      // eslint-disable-next-line\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: tokens.color.accent40,\n      // For mobile performance\n      throttle: 40\n    }\n  };\n  return AxisPointerModel;\n}(ComponentModel);\nexport default AxisPointerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\nexport function register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove'));\n  // useHandler('mouseout', onLeave);\n  useHandler('globalout', onLeave);\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  };\n  // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\nexport function unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as globalListener from './globalListener.js';\nimport ComponentView from '../../view/Component.js';\nvar AxisPointerView = /** @class */function (_super) {\n  __extends(AxisPointerView, _super);\n  function AxisPointerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisPointerView.type;\n    return _this;\n  }\n  AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click';\n    // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  };\n  AxisPointerView.prototype.remove = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n  AxisPointerView.prototype.dispose = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n  AxisPointerView.type = 'axisPointer';\n  return AxisPointerView;\n}(ComponentView);\nexport default AxisPointerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\n/**\n * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param ecModel\n * @return  {point: [x, y], el: ...} point Will not be null.\n */\nexport default function findPointFromSeries(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    if (finder.isStacked) {\n      var baseAxis = coordSys.getBaseAxis();\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\n      var valueAxisDim = valueAxis.dim;\n      var baseAxisDim = baseAxis.dim;\n      var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n      var baseDim = data.mapDimension(baseAxisDim);\n      var stackedData = [];\n      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n      point = coordSys.dataToPoint(stackedData) || [];\n    } else {\n      point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }), dataIndex)) || [];\n    }\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n  return {\n    point: point,\n    el: el\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model.js';\nimport * as modelHelper from './modelHelper.js';\nimport findPointFromSeries from './findPointFromSeries.js';\nimport { each, curry, bind, extend } from 'zrender/lib/core/util.js';\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @return content of event obj for echarts.connect.\n */\nexport default function axisTrigger(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n  // Pending\n  // See #6121. But we are not able to reproduce it yet.\n  if (!coordSysAxesInfo) {\n    return;\n  }\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n  var isIllegalPoint = illegalPoint(point);\n  // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputPayload = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  };\n  // Process for triggered axes.\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo);\n      // If no inputAxesInfo, no axis is restricted.\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n      }\n    });\n  });\n  // Process for linked axes.\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup;\n    // If axis has been triggered in the previous stage, it should not be triggered by link.\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey];\n        // If srcValItem exist, source axis is triggered, so link to target axis.\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n  });\n  updateModelActually(showValueMap, axesInfo, outputPayload);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputPayload;\n}\nfunction processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n  var axis = axisInfo.axis;\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  }\n  // Heavy calculation. So put it after axis.containData checking.\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue;\n  // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    extend(outputFinder, payloadBatch[0]);\n  }\n  // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n  if (!noSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n  updaters.showPointer(axisInfo, newValue, payloadBatch);\n  // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimensionsAll(dim);\n    var seriesNestestValue;\n    var dataIndices;\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.indicesOfNearest(dim, dataDim[0], value,\n      // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n      if (!dataIndices.length) {\n        return;\n      }\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff);\n    // Consider category case\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel;\n  // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\nfunction updateModelActually(showValueMap, axesInfo, outputPayload) {\n  var outputAxesInfo = outputPayload.axesInfo = [];\n  // Basic logic: If no 'show' required, 'hide' this axisPointer.\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value;\n      // For label formatter param and highlight.\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    }\n    // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n      // If hide, value still need to be set, consider\n      // click legend to toggle axis blank.\n      !axisInfo.useHandle && (option.status = 'hide');\n    }\n    // If status is 'hide', should be no info in payload.\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  }\n  // In most case only one axis (or event one series is used). It is\n  // convenient to fetch payload.seriesIndex and payload.dataIndex\n  // directly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification should be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {};\n  // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && axisInfo.triggerEmphasis && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  });\n  // Diff.\n  var toHighlight = [];\n  var toDownplay = [];\n  each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toHighlight\n  });\n}\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport AxisView from '../axis/AxisView.js';\nimport CartesianAxisPointer from './CartesianAxisPointer.js';\nimport AxisPointerModel from './AxisPointerModel.js';\nimport AxisPointerView from './AxisPointerView.js';\nimport { isArray } from 'zrender/lib/core/util.js';\nimport { collect } from './modelHelper.js';\nimport axisTrigger from './axisTrigger.js';\nexport function install(registers) {\n  // CartesianAxisPointer is not supposed to be required here. But consider\n  // echarts.simple.js and online build tooltip, which only require gridSimple,\n  // CartesianAxisPointer should be able to required somewhere.\n  AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n  registers.registerComponentModel(AxisPointerModel);\n  registers.registerComponentView(AxisPointerView);\n  registers.registerPreprocessor(function (option) {\n    // Always has a global axisPointerModel for default setting.\n    if (option) {\n      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n      var link = option.axisPointer.link;\n      // Normalize to array to avoid object mergin. But if link\n      // is not set, remain null/undefined, otherwise it will\n      // override existent link setting.\n      if (link && !isArray(link)) {\n        option.axisPointer.link = [link];\n      }\n    }\n  });\n  // This process should proformed after coordinate systems created\n  // and series data processed. So put it on statistic processing stage.\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n    // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n    // allAxesInfo should be updated when setOption performed.\n    ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n  });\n  // Broadcast to all views.\n  registers.registerAction({\n    type: 'updateAxisPointer',\n    event: 'updateAxisPointer',\n    update: ':updateAxisPointer'\n  }, axisTrigger);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installSimple } from './installSimple.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as formatUtil from '../../util/format.js';\nimport * as graphic from '../../util/graphic.js';\n;\nexport function makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var bgRect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  });\n  // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n  return bgRect;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nimport tokens from '../../visual/tokens.js';\nvar TooltipModel = /** @class */function (_super) {\n  __extends(TooltipModel, _super);\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    // zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaults to `false` (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    displayTransition: true,\n    enterable: false,\n    backgroundColor: tokens.color.neutral00,\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    defaultBorderColor: tokens.color.border,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: tokens.color.borderShade,\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      }\n      // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n    },\n    textStyle: {\n      color: tokens.color.tertiary,\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\nexport default TooltipModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { toCamelCase } from '../../util/format.js';\nimport env from 'zrender/lib/core/env.js';\n/* global document */\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption\n  // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n  var style = document.documentElement.style;\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isString, indexOf, each, bind, isFunction, isArray, isDom, retrieve2 } from 'zrender/lib/core/util.js';\nimport { normalizeEvent } from 'zrender/lib/core/event.js';\nimport { transformLocalCoord, transformLocalCoordClear } from 'zrender/lib/core/dom.js';\nimport env from 'zrender/lib/core/env.js';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format.js';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\n/* global document, window */\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform');\n// eslint-disable-next-line\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var borderWidth = tooltipModel.get('borderWidth');\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n  var positionStyle = '';\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n  var rotateDeg;\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n  var rotateRadian = rotateDeg * Math.PI / 180;\n  var arrowWH = arrowSize + borderWidth;\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;z-index:-1;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\nfunction assembleTransition(duration, onlyFadeTransition, enableDisplayTransition) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = '';\n  var transitionText = '';\n  if (enableDisplayTransition) {\n    transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n    transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n  }\n  if (!onlyFadeTransition) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += (transitionText.length ? ',' : '') + (env.transformSupported ? \"\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption);\n  }\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px';\n  // not support transform, use `left` and `top` instead.\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  }\n  // support transform\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  // @ts-ignore, leave it to the tooltip refactor.\n  var lineHeight = retrieve2(textStyleModel.get('lineHeight'), Math.round(fontSize * 3 / 2));\n  fontSize && cssText.push('line-height:' + lineHeight + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\nfunction assembleCssText(tooltipModel, enableTransition, onlyFadeTransition, enableDisplayTransition) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow);\n  // Animation transition. Do not animate when transitionDuration <= 0.\n  enableTransition && transitionDuration > 0 && cssText.push(assembleTransition(transitionDuration, onlyFadeTransition, enableDisplayTransition));\n  if (backgroundColor) {\n    cssText.push('background-color:' + backgroundColor);\n  }\n  // Border style\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  });\n  // Text style\n  cssText.push(assembleFont(textStyleModel));\n  // Padding\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n  return cssText.join(';') + ';';\n}\n// If not able to make, do not modify the input `out`.\nfunction makeStyleCoord(out, zr, container, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n  if (container) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, container, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY;\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nvar TooltipHTMLContent = /** @class */function () {\n  function TooltipHTMLContent(api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._alwaysShowContent = false;\n    this._firstShow = true;\n    this._longHide = true;\n    if (env.wxa) {\n      return null;\n    }\n    var el = document.createElement('div');\n    // TODO: TYPE\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendTo = opt.appendTo;\n    var container = appendTo && (isString(appendTo) ? document.querySelector(appendTo) : isDom(appendTo) ? appendTo : isFunction(appendTo) && appendTo(api.getDom()));\n    makeStyleCoord(this._styleCoord, zr, container, api.getWidth() / 2, api.getHeight() / 2);\n    (container || api.getDom()).appendChild(el);\n    this._api = api;\n    this._container = container;\n    // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n    var self = this;\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    };\n    el.onmousemove = function (e) {\n      e = e || window.event;\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    if (!this._container) {\n      var container = this._api.getDom();\n      var position = getComputedStyle(container, 'position');\n      var domStyle = container.style;\n      if (domStyle.position !== 'absolute' && position !== 'absolute') {\n        domStyle.position = 'relative';\n      }\n    }\n    // move tooltip if chart resized\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n    this._enableDisplayTransition = tooltipModel.get('displayTransition') && tooltipModel.get('transitionDuration') > 0;\n    // update className\n    this.el.className = tooltipModel.get('className') || '';\n    // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide, this._enableDisplayTransition)\n      // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '')\n      // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n    }\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    var el = this.el;\n    if (content == null) {\n      el.innerHTML = '';\n      return;\n    }\n    var arrow = '';\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n    }\n    if (isString(content)) {\n      el.innerHTML = content + arrow;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n      if (!isArray(content)) {\n        content = [content];\n      }\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      }\n      // no arrow if empty\n      if (arrow && el.childNodes.length) {\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\n        var arrowEl = document.createElement('div');\n        arrowEl.innerHTML = arrow;\n        el.appendChild(arrowEl);\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return el ? [el.offsetWidth, el.offsetHeight] : [0, 0];\n  };\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    if (!this.el) {\n      return;\n    }\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._container, zrX, zrY);\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n    var style = this.el.style;\n    if (this._enableDisplayTransition) {\n      style.visibility = 'hidden';\n      style.opacity = '0';\n    } else {\n      style.display = 'none';\n    }\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipHTMLContent.prototype.dispose = function () {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var zr = this._zr;\n    transformLocalCoordClear(zr && zr.painter && zr.painter.getViewportRoot(), this._container);\n    var el = this.el;\n    if (el) {\n      el.onmouseenter = el.onmousemove = el.onmouseleave = null;\n      var parentNode = el.parentNode;\n      parentNode && parentNode.removeChild(el);\n    }\n    this.el = this._container = null;\n  };\n  return TooltipHTMLContent;\n}();\nexport default TooltipHTMLContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\nimport { throwError } from '../../util/log.js';\nvar TooltipRichContent = /** @class */function () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._alwaysShowContent = false;\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n  };\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n    this.el.show();\n    this._show = true;\n  };\n  /**\n   * Set tooltip content\n   */\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    var _this = this;\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        borderWidth: 1,\n        borderColor: borderColor,\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n    zrUtil.each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n      _this.el.style[propName] = tooltipModel.get(propName);\n    });\n    zrUtil.each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n      _this.el.style[propName] = textStyleModel.get(propName) || 0;\n    });\n    this._zr.add(this.el);\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n      self._inContent = false;\n    });\n  };\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect();\n    // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style);\n      // rich text x, y do not include border.\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n    this._show = false;\n  };\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n  return TooltipRichContent;\n}();\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nexport default TooltipRichContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { bind, each, clone, trim, isString, isFunction, isArray, isObject, extend } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport TooltipHTMLContent from './TooltipHTMLContent.js';\nimport TooltipRichContent from './TooltipRichContent.js';\nimport { convertToColorString, encodeHTML, formatTpl } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport { Rect } from '../../util/graphic.js';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport Model from '../../model/Model.js';\nimport * as globalListener from '../axisPointer/globalListener.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper.js';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model.js';\nimport ComponentView from '../../view/Component.js';\nimport { format as timeFormat } from '../../util/time.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { shouldTooltipConfine } from './helper.js';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat.js';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup.js';\nimport { findEventDispatcher } from '../../util/event.js';\nimport { clear, createOrUpdate } from '../../util/throttle.js';\nvar proxyRect = new Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\nvar TooltipView = /** @class */function (_super) {\n  __extends(TooltipView, _super);\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipView.type;\n    return _this;\n  }\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n    this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api, {\n      appendTo: tooltipModel.get('appendToBody', true) ? 'body' : tooltipModel.get('appendTo', true)\n    });\n  };\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    // Reset\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    this._initGlobalListener();\n    this._keepShow();\n    // PENDING\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\n    // which causes that the `updatePosition` function was also called frequently.\n    // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n    // To avoid frequent triggering,\n    // consider throttling it in 50ms when transition is enabled\n    if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n      createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n    } else {\n      clear(this, '_updatePosition');\n    }\n  };\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api;\n    var triggerOn = tooltipModel.get('triggerOn');\n    // Try to keep the tooltip show when refreshing\n    if (this._lastX != null && this._lastY != null\n    // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && triggerOn !== 'none' && triggerOn !== 'click') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node || !api.getDom()) {\n      return;\n    }\n    var dispatchAction = makeDispatchAction(payload, api);\n    // Reset ticket\n    this._ticket = '';\n    // When triggered from axisPointer.\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      };\n      // Manually show tooltip while view is not using zrender elements.\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n    if (this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  };\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    // @ts-ignore\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (!seriesModel) {\n      return;\n    }\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n    if (!tooltipModel) {\n      return;\n    }\n    // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      var ecData = getECData(el);\n      if (ecData.ssrType === 'legend') {\n        // Don't trigger tooltip for legend tooltip item\n        return;\n      }\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        if (target.tooltipDisabled) {\n          seriesDispatcher_1 = cmptDispatcher_1 = null;\n          return true;\n        }\n        if (seriesDispatcher_1 || cmptDispatcher_1) {\n          return;\n        }\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n        }\n        // Tooltip provided directly. Like legend.\n        else if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n        }\n      }, true);\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n      this._hide(dispatchAction);\n    }\n  };\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    });\n    // Only for legacy: `Serise['formatTooltip']` returns a string.\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n        // FIXME: when using `tooltip.trigger: 'axis'`, the precision of the axis value displayed in tooltip\n        //  should match the original series values rather than using the default stretegy in Interval.ts\n        //  (getPrecision(interval) + 2); otherwise it may cuase confusion.\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex);\n          // Can't find data.\n          if (cbParams.dataIndex < 0) {\n            return;\n          }\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel;\n          // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n          var frag = seriesTooltipResult.frag;\n          if (frag) {\n            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n            axisSectionMarkup.blocks.push(valueFormatter ? extend({\n              valueFormatter: valueFormatter\n            }, frag) : frag);\n          }\n          if (seriesTooltipResult.text) {\n            markupTextArrLegacy.push(seriesTooltipResult.text);\n          }\n          cbParamsList.push(cbParams);\n        });\n      });\n    });\n    // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    });\n    // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n  };\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher);\n    // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    // For example, graph link.\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n    params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var valueFormatter = tooltipModel.get('valueFormatter');\n    var frag = seriesTooltipResult.frag;\n    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n      valueFormatter: valueFormatter\n    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    });\n    // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var isHTMLRenderMode = this._renderMode === 'html';\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n    var encodeHTMLContent = tooltipOpt.encodeHTMLContent;\n    if (isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n      // when `tooltipConfig.option` is a string rather than an object,\n      // we can't know if the content needs to be encoded\n      // for the sake of security, encode it by default.\n      encodeHTMLContent = true;\n    }\n    if (encodeHTMLContent && isHTMLRenderMode && tooltipOpt.content) {\n      // clone might be unnecessary?\n      tooltipOpt = clone(tooltipOpt);\n      tooltipOpt.content = encodeHTML(tooltipOpt.content);\n    }\n    var tooltipModelCascade = [tooltipOpt];\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    }\n    // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they cannot share the same formatter. Since the global tooltip formatter is used for series\n    // by convention, we do not use it as the default formatter for component.\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + '';\n    // PENDING: this case do not support richText style yet.\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    });\n    // If not dispatch showTip, tip may be hide triggered by axis.\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showTooltipContent = function (\n  // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'), tooltipModel.get('defaultBorderColor', true));\n    var nearPointColor = nearPoint.color;\n    if (formatter) {\n      if (isString(formatter)) {\n        var useUTC = tooltipModel.ecModel.get('useUTC');\n        var params0 = isArray(params) ? params[0] : params;\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n        html = formatter;\n        if (isTimeAxis) {\n          html = timeFormat(params0.axisValue, html, useUTC);\n        }\n        html = formatTpl(html, params, true);\n      } else if (isFunction(formatter)) {\n        var callback = bind(function (cbTicket, html) {\n          if (cbTicket === this._ticket) {\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n          }\n        }, this);\n        this._ticket = asyncTicket;\n        html = formatter(params, asyncTicket, callback);\n      } else {\n        html = formatter;\n      }\n    }\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor, defaultBorderColor) {\n    if (trigger === 'axis' || isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || defaultBorderColor\n      };\n    }\n    if (!isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x,\n  // Mouse x\n  y,\n  // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n    var viewHeight = this._api.getHeight();\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n    if (isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n    if (isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null;\n      // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n      vAlign = null;\n    }\n    // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (isString(positionExpr) && el) {\n      var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n      x = pos[0];\n      y = pos[1];\n    } else {\n      var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n      x = pos[0];\n      y = pos[1];\n    }\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n    content.moveTo(x, y);\n  };\n  // FIXME\n  // Should we remove this but leave this to user?\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var lastCbParamsList = this._cbParamsList;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n        // check is cbParams data value changed\n        lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n          var seriesIdx = idxItem.seriesIndex;\n          var cbParams = cbParamsList[seriesIdx];\n          var lastCbParams = lastCbParamsList[seriesIdx];\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n            contentNotChanged = false;\n          }\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    this._cbParamsList = cbParamsList;\n    return !!contentNotChanged;\n  };\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    clear(this, '_updatePosition');\n    this._tooltipContent.dispose();\n    globalListener.unregister('itemTooltip', api);\n  };\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\n * From top to bottom. (the last one should be globalTooltipModel);\n */\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      }\n      // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n      if (isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n  return resultModel;\n}\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || bind(api.dispatchAction, api);\n}\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in default tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n  return [x, y];\n}\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - offset;\n      break;\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + offset;\n      break;\n    case 'left':\n      x = rect.x - domWidth - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'right':\n      x = rect.x + rectWidth + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n  return [x, y];\n}\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\n * Find target component by payload like:\n * ```js\n * { legendId: 'some_id', name: 'xxx' }\n * { toolboxIndex: 1, name: 'xxx' }\n * { geoName: 'some_name', name: 'xxx' }\n * ```\n * PENDING: at present only\n *\n * If not found, return null/undefined.\n */\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n  if (!model) {\n    return;\n  }\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\nexport default TooltipView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nimport TooltipModel from './TooltipModel.js';\nimport TooltipView from './TooltipView.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\n   * @action\n   * @property {string} type\n   * @property {number} seriesIndex\n   * @property {number} dataIndex\n   * @property {number} [x]\n   * @property {number} [y]\n   */\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, noop);\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, noop);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { createBoxLayoutReference, getLayoutRect } from '../../util/layout.js';\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { windowOpen } from '../../util/format.js';\nimport tokens from '../../visual/tokens.js';\nvar TitleModel = /** @class */function (_super) {\n  __extends(TitleModel, _super);\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    // zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 'center',\n    top: tokens.size.m,\n    backgroundColor: tokens.color.transparent,\n    borderColor: tokens.color.primary,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: tokens.color.primary\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: tokens.color.quaternary\n    }\n  };\n  return TitleModel;\n}(ComponentModel);\n// View\nvar TitleView = /** @class */function (_super) {\n  __extends(TitleView, _super);\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleView.type;\n    return _this;\n  }\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n    if (!titleModel.get('show')) {\n      return;\n    }\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl);\n    // If no subText, but add subTextEl, there will be an empty line.\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRef = createBoxLayoutReference(titleModel, api);\n    var layoutRect = getLayoutRect(layoutOption, layoutRef.refContainer, titleModel.get('padding'));\n    // Adjust text align based on position\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n      // @ts-ignore\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      }\n      // Adjust layout by text align\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n      // @ts-ignore\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle);\n    // Render background\n    // Get groupRect again because textAlign has been changed\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../../model/Model.js';\nimport { isNameSpecified } from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\nimport tokens from '../../visual/tokens.js';\nvar getDefaultSelectorOptions = function (ecModel, type) {\n  if (type === 'all') {\n    return {\n      type: 'all',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'all'])\n    };\n  } else if (type === 'inverse') {\n    return {\n      type: 'inverse',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'inverse'])\n    };\n  }\n};\nvar LegendModel = /** @class */function (_super) {\n  __extends(LegendModel, _super);\n  function LegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LegendModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      // legend.width/height are maxWidth/maxHeight actually,\n      // whereas real width/height is calculated by its content.\n      // (Setting {left: 10, right: 10} does not make sense).\n      // So consider the case:\n      // `setOption({legend: {left: 10});`\n      // then `setOption({legend: {right: 10});`\n      // The previous `left` should be cleared by setting `ignoreSize`.\n      ignoreSize: true\n    };\n    return _this;\n  }\n  LegendModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n    this._updateSelector(option);\n  };\n  LegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    this._updateSelector(option);\n  };\n  LegendModel.prototype._updateSelector = function (option) {\n    var selector = option.selector;\n    var ecModel = this.ecModel;\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, getDefaultSelectorOptions(ecModel, item.type));\n      });\n    }\n  };\n  LegendModel.prototype.optionUpdated = function () {\n    this._updateData(this.ecModel);\n    var legendData = this._data;\n    // If selectedMode is single, try to select one\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false;\n      // If has any selected in option.selected\n      for (var i = 0; i < legendData.length; i++) {\n        var name_1 = legendData[i].get('name');\n        if (this.isSelected(name_1)) {\n          // Force to unselect others\n          this.select(name_1);\n          hasSelected = true;\n          break;\n        }\n      }\n      // Try select the first if selectedMode is single\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  };\n  LegendModel.prototype._updateData = function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n    this._availableNames = availableNames;\n    // If legend.data is not specified in option, use availableNames as data,\n    // which is convenient for user preparing option.\n    var rawData = this.get('data') || potentialData;\n    var legendNameMap = zrUtil.createHashMap();\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (zrUtil.isString(dataItem) || zrUtil.isNumber(dataItem)) {\n        dataItem = {\n          name: dataItem\n        };\n      }\n      if (legendNameMap.get(dataItem.name)) {\n        // remove legend name duplicate\n        return null;\n      }\n      legendNameMap.set(dataItem.name, true);\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n    this._data = zrUtil.filter(legendData, function (item) {\n      return !!item;\n    });\n  };\n  LegendModel.prototype.getData = function () {\n    return this._data;\n  };\n  LegendModel.prototype.select = function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n    selected[name] = true;\n  };\n  LegendModel.prototype.unSelect = function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  };\n  LegendModel.prototype.toggleSelected = function (name) {\n    var selected = this.option.selected;\n    // Default is true\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  };\n  LegendModel.prototype.allSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  };\n  LegendModel.prototype.inverseSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true);\n      // Initially, default value is true\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n      selected[name] = !selected[name];\n    });\n  };\n  LegendModel.prototype.isSelected = function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  };\n  LegendModel.prototype.getOrient = function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  };\n  LegendModel.type = 'legend.plain';\n  LegendModel.dependencies = ['series'];\n  LegendModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    show: true,\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    // top: 0,\n    bottom: tokens.size.m,\n    align: 'auto',\n    backgroundColor: tokens.color.transparent,\n    borderColor: tokens.color.border,\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 8,\n    itemWidth: 25,\n    itemHeight: 14,\n    symbolRotate: 'inherit',\n    symbolKeepAspect: true,\n    inactiveColor: tokens.color.disabled,\n    inactiveBorderColor: tokens.color.disabled,\n    inactiveBorderWidth: 'auto',\n    itemStyle: {\n      color: 'inherit',\n      opacity: 'inherit',\n      borderColor: 'inherit',\n      borderWidth: 'auto',\n      borderCap: 'inherit',\n      borderJoin: 'inherit',\n      borderDashOffset: 'inherit',\n      borderMiterLimit: 'inherit'\n    },\n    lineStyle: {\n      width: 'auto',\n      color: 'inherit',\n      inactiveColor: tokens.color.disabled,\n      inactiveWidth: 2,\n      opacity: 'inherit',\n      type: 'inherit',\n      cap: 'inherit',\n      join: 'inherit',\n      dashOffset: 'inherit',\n      miterLimit: 'inherit'\n    },\n    textStyle: {\n      color: tokens.color.secondary\n    },\n    selectedMode: true,\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: 'sans-serif',\n      color: tokens.color.tertiary,\n      borderWidth: 1,\n      borderColor: tokens.color.border\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: tokens.color.quaternary\n      }\n    },\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    tooltip: {\n      show: false\n    },\n    triggerEvent: false\n  };\n  return LegendModel;\n}(ComponentModel);\nexport default LegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parse, stringify } from 'zrender/lib/tool/color.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, createTextStyle } from '../../label/labelStyle.js';\nimport { makeBackground } from '../helper/listComponent.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport ComponentView from '../../view/Component.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { getECData } from '../../util/innerStore.js';\nimport tokens from '../../visual/tokens.js';\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\nvar LegendView = /** @class */function (_super) {\n  __extends(LegendView, _super);\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\n   * @protected\n   */\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\n   * @protected\n   */\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\n   * @override\n   */\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n    // selector has been normalized to an array in model\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    // Perform layout.\n    var refContainer = layoutUtil.createBoxLayoutReference(legendModel, api).refContainer;\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, refContainer, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition);\n    // Place mainGroup, based on the calculated `mainRect`.\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), refContainer, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw();\n    // Render background after group is layout.\n    this.group.add(this._backgroundEl = makeBackground(mainRect,\n    // FXIME: most itemStyle options does not work in background because inherit is not handled yet.\n    legendModel));\n  };\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var triggerEvent = legendModel.get('triggerEvent');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var _this = this;\n      var name = legendItemModel.get('name');\n      // Use empty string or \\n as a newline string\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group();\n        // @ts-ignore\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      }\n      // Representitive series.\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n      if (legendDrawnMap.get(name)) {\n        // Have been drawn\n        return;\n      }\n      // Legend to control series.\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\n         * `data.getVisual('style')` may be the color from the register\n         * in series. For example, for line series,\n         */\n        var style = data.getVisual('style');\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode, api);\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        if (ecModel.ssr) {\n          itemGroup.eachChild(function (child) {\n            var ecData = getECData(child);\n            ecData.seriesIndex = seriesModel.seriesIndex;\n            ecData.dataIndex = dataIndex;\n            ecData.ssrType = 'legend';\n          });\n        }\n        if (triggerEvent) {\n          itemGroup.eachChild(function (child) {\n            _this.packEventData(child, legendModel, seriesModel, dataIndex, name);\n          });\n        }\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          var _this = this;\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n            if (!provider.containName(name)) {\n              return;\n            }\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = parse(style.fill);\n            // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2;\n              // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n              style = zrUtil.extend(zrUtil.extend({}, style), {\n                fill: stringify(colorArr, 'rgba')\n              });\n            }\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode, api);\n            // FIXME: consider different series has items with the same name.\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId))\n            // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            if (ecModel.ssr) {\n              itemGroup.eachChild(function (child) {\n                var ecData = getECData(child);\n                ecData.seriesIndex = seriesModel.seriesIndex;\n                ecData.dataIndex = dataIndex;\n                ecData.ssrType = 'legend';\n              });\n            }\n            if (triggerEvent) {\n              itemGroup.eachChild(function (child) {\n                _this.packEventData(child, legendModel, seriesModel, dataIndex, name);\n              });\n            }\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n  LegendView.prototype.packEventData = function (el, legendModel, seriesModel, dataIndex, name) {\n    var eventData = {\n      componentType: 'legend',\n      componentIndex: legendModel.componentIndex,\n      dataIndex: dataIndex,\n      value: name,\n      seriesIndex: seriesModel.seriesIndex\n    };\n    getECData(el).eventData = eventData;\n  };\n  ;\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect',\n            legendId: legendModel.id\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      setLabelStyle(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      enableHoverEmphasis(labelText);\n    });\n  };\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n    if (zrUtil.isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    }\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n    if (zrUtil.isString(formatter) && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (zrUtil.isFunction(formatter)) {\n      content = formatter(name);\n    }\n    var textColor = isSelected ? textStyleModel.getTextColor() : legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: textColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      }, {\n        inheritColor: textColor\n      })\n    }));\n    // Add a invisible rect to increase the area of mouse hover\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      style: {\n        // Cannot use 'invisible' because SVG SSR will miss the node\n        fill: 'transparent'\n      }\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    enableHoverEmphasis(itemGroup);\n    // @ts-ignore\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup();\n    // Place items in contentGroup.\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box(\n      // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      }\n      // Always align selector to content as 'middle'\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\n   * @protected\n   */\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(ComponentView);\nfunction getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {\n  /**\n   * Use series style if is inherit;\n   * elsewise, use legend style\n   */\n  function handleCommonProps(style, visualStyle) {\n    // If lineStyle.width is 'auto', it is set to be 2 if series has border\n    if (style.lineWidth === 'auto') {\n      style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n    }\n    each(style, function (propVal, propName) {\n      style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n    });\n  }\n  // itemStyle\n  var itemStyleModel = legendItemModel.getModel('itemStyle');\n  var itemStyle = itemStyleModel.getItemStyle();\n  var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n  var decalStyle = itemStyleModel.getShallow('decal');\n  itemStyle.decal = !decalStyle || decalStyle === 'inherit' ? itemVisualStyle.decal : createOrUpdatePatternFromDecal(decalStyle, api);\n  if (itemStyle.fill === 'inherit') {\n    /**\n     * Series with visualDrawType as 'stroke' should have\n     * series stroke as legend fill\n     */\n    itemStyle.fill = itemVisualStyle[drawType];\n  }\n  if (itemStyle.stroke === 'inherit') {\n    /**\n     * icon type with \"emptyXXX\" should use fill color\n     * in visual style\n     */\n    itemStyle.stroke = itemVisualStyle[iconBrushType];\n  }\n  if (itemStyle.opacity === 'inherit') {\n    /**\n     * Use lineStyle.opacity if drawType is stroke\n     */\n    itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n  }\n  handleCommonProps(itemStyle, itemVisualStyle);\n  // lineStyle\n  var legendLineModel = legendItemModel.getModel('lineStyle');\n  var lineStyle = legendLineModel.getLineStyle();\n  handleCommonProps(lineStyle, lineVisualStyle);\n  // Fix auto color to real color\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n  if (!isSelected) {\n    var borderWidth = legendItemModel.get('inactiveBorderWidth');\n    /**\n     * Since stroke is set to be inactiveBorderColor, it may occur that\n     * there is no border in series but border in legend, so we need to\n     * use border only when series has border if is set to be auto\n     */\n    var visualHasBorder = itemStyle[iconBrushType];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendItemModel.get('inactiveColor');\n    itemStyle.stroke = legendItemModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineModel.get('inactiveColor');\n    lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n  }\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = tokens.color.neutral00;\n    icon.style.lineWidth = 2;\n  }\n  return icon;\n}\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  });\n  // highlight after select\n  // TODO highlight immediately may cause animation loss.\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n  return emphasisState && emphasisState.hoverLayer;\n}\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\nexport default LegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function legendFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n      return true;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { curry, each, hasOwn } from 'zrender/lib/core/util.js';\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var isAllSelect = methodName === 'allSelect' || methodName === 'inverseSelect';\n  var selectedMap = {};\n  var actionLegendIndices = [];\n  ecModel.eachComponent({\n    mainType: 'legend',\n    query: payload\n  }, function (legendModel) {\n    if (isAllSelect) {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n    }\n    makeSelectedMap(legendModel, selectedMap);\n    actionLegendIndices.push(legendModel.componentIndex);\n  });\n  var allSelectedMap = {};\n  // make selectedMap from all legend components\n  ecModel.eachComponent('legend', function (legendModel) {\n    each(selectedMap, function (isSelected, name) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](name);\n    });\n    makeSelectedMap(legendModel, allSelectedMap);\n  });\n  // Return the event explicitly\n  return isAllSelect ? {\n    selected: allSelectedMap,\n    // return legendIndex array to tell the developers which legends are allSelect / inverseSelect\n    legendIndex: actionLegendIndices\n  } : {\n    name: payload.name,\n    selected: allSelectedMap\n  };\n}\nfunction makeSelectedMap(legendModel, out) {\n  var selectedMap = out || {};\n  each(legendModel.getData(), function (model) {\n    var name = model.get('name');\n    // Wrap element\n    if (name === '\\n' || name === '') {\n      return;\n    }\n    var isItemSelected = legendModel.isSelected(name);\n    if (hasOwn(selectedMap, name)) {\n      // Unselected if any legend is unselected\n      selectedMap[name] = selectedMap[name] && isItemSelected;\n    } else {\n      selectedMap[name] = isItemSelected;\n    }\n  });\n  return selectedMap;\n}\nexport function installLegendAction(registers) {\n  /**\n   * @event legendToggleSelect\n   * @type {Object}\n   * @property {string} type 'legendToggleSelect'\n   * @property {string} [from]\n   * @property {string} name Series name or data item name\n   */\n  registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n  registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n  registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n  /**\n   * @event legendSelect\n   * @type {Object}\n   * @property {string} type 'legendSelect'\n   * @property {string} name Series name or data item name\n   */\n  registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n  /**\n   * @event legendUnSelect\n   * @type {Object}\n   * @property {string} type 'legendUnSelect'\n   * @property {string} name Series name or data item name\n   */\n  registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LegendModel from './LegendModel.js';\nimport LegendView from './LegendView.js';\nimport legendFilter from './legendFilter.js';\nimport { installLegendAction } from './legendAction.js';\nexport function install(registers) {\n  registers.registerComponentModel(LegendModel);\n  registers.registerComponentView(LegendView);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n  registers.registerSubTypeDefaulter('legend', function () {\n    return 'plain';\n  });\n  installLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport LegendModel from './LegendModel.js';\nimport { mergeLayoutParam, getLayoutParams } from '../../util/layout.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nimport tokens from '../../visual/tokens.js';\nvar ScrollableLegendModel = /** @class */function (_super) {\n  __extends(ScrollableLegendModel, _super);\n  function ScrollableLegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScrollableLegendModel.type;\n    return _this;\n  }\n  /**\n   * @param {number} scrollDataIndex\n   */\n  ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  };\n  ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n  ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  };\n  ScrollableLegendModel.type = 'legend.scroll';\n  ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    pageFormatter: '{current}/{total}',\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: tokens.color.accent50,\n    pageIconInactiveColor: tokens.color.accent10,\n    pageIconSize: 15,\n    pageTextStyle: {\n      color: tokens.color.tertiary\n    },\n    animationDurationUpdate: 800\n  });\n  return ScrollableLegendModel;\n}(LegendModel);\n;\n// Do not `ignoreSize` to enable setting {left: 10, right: 10}.\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: !!ignoreSize\n  });\n}\nexport default ScrollableLegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Separate legend and scrollable legend to reduce package size.\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport LegendView from './LegendView.js';\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\nvar ScrollableLegendView = /** @class */function (_super) {\n  __extends(ScrollableLegendView, _super);\n  function ScrollableLegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScrollableLegendView.type;\n    _this.newlineDisabled = true;\n    _this._currentIndex = 0;\n    return _this;\n  }\n  ScrollableLegendView.prototype.init = function () {\n    _super.prototype.init.call(this);\n    this.group.add(this._containerGroup = new Group());\n    this._containerGroup.add(this.getContentGroup());\n    this.group.add(this._controllerGroup = new Group());\n  };\n  /**\n   * @override\n   */\n  ScrollableLegendView.prototype.resetInner = function () {\n    _super.prototype.resetInner.call(this);\n    this._controllerGroup.removeAll();\n    this._containerGroup.removeClipPath();\n    this._containerGroup.__rectSize = null;\n  };\n  /**\n   * @override\n   */\n  ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var self = this;\n    // Render content items.\n    _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    var controllerGroup = this._controllerGroup;\n    // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n    var pageIconSize = legendModel.get('pageIconSize', true);\n    var pageIconSizeArr = zrUtil.isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        // Placeholder to calculate a proper layout.\n        text: 'xx/xx',\n        fill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        verticalAlign: 'middle',\n        align: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSizeArr[0] / 2,\n        y: -pageIconSizeArr[1] / 2,\n        width: pageIconSizeArr[0],\n        height: pageIconSizeArr[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  };\n  /**\n   * @override\n   */\n  ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box(\n    // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      selectorGroup.markRedraw();\n    }\n    return mainRect;\n  };\n  ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup;\n    // Place items in contentGroup.\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box(\n    // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh];\n    // In case that the inner elements of contentGroup layout do not based on [0, 0]\n    var contentPos = [-contentRect.x, -contentRect.y];\n    // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup[xy];\n    }\n    // Layout container group based on 0.\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true));\n    // Place containerGroup and controllerGroup and contentGroup.\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true);\n      // controller is on the right / bottom.\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      }\n      // controller is on the left / top.\n      else {\n        containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n      }\n    }\n    // Always align controller to content as 'middle'.\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.setPosition(contentPos);\n    containerGroup.setPosition(containerPos);\n    controllerGroup.setPosition(controllerPos);\n    // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n    var mainRect = {\n      x: 0,\n      y: 0\n    };\n    // Consider content may be overflow (should be clipped).\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]);\n    // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      }));\n      // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    }\n    // Content translate animation.\n    var pageInfo = this._getPageInfo(legendModel);\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      x: pageInfo.contentPosition[0],\n      y: pageInfo.contentPosition[1]\n    },\n    // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : null);\n    this._updatePageInfoView(legendModel, pageInfo);\n    return mainRect;\n  };\n  ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  };\n  ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var key = name + 'DataIndex';\n      var canJump = pageInfo[key] != null;\n      var icon = controllerGroup.childOfName(name);\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n      current: current,\n      total: total\n    }));\n  };\n  /**\n   *  contentPosition: Array.<number>, null when data item not found.\n   *  pageIndex: number, null when data item not found.\n   *  pageCount: number, always be a number, can be 0.\n   *  pagePrevDataIndex: number, null when no previous page.\n   *  pageNextDataIndex: number, null when no next page.\n   * }\n   */\n  ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: [contentGroup.x, contentGroup.y],\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n    if (!targetItem) {\n      return result;\n    }\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s;\n    // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n      if (\n      // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize\n      // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      || currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n          ++result.pageCount;\n        }\n      }\n      winEndItemInfo = currItemInfo;\n    }\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n      if (\n      // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)\n      // e.g., when page size is smaller than item size.\n      ) && winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n      winStartItemInfo = currItemInfo;\n    }\n    return result;\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el[xy];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  };\n  ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex;\n      // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defaultIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  };\n  ScrollableLegendView.type = 'legend.scroll';\n  return ScrollableLegendView;\n}(LegendView);\nexport default ScrollableLegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function installScrollableLegendAction(registers) {\n  /**\n   * @event legendScroll\n   * @type {Object}\n   * @property {string} type 'legendScroll'\n   * @property {string} scrollDataIndex\n   */\n  registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n    var scrollDataIndex = payload.scrollDataIndex;\n    scrollDataIndex != null && ecModel.eachComponent({\n      mainType: 'legend',\n      subType: 'scroll',\n      query: payload\n    }, function (legendModel) {\n      legendModel.setScrollDataIndex(scrollDataIndex);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport ScrollableLegendModel from './ScrollableLegendModel.js';\nimport ScrollableLegendView from './ScrollableLegendView.js';\nimport installScrollableLegendAction from './scrollableLegendAction.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  registers.registerComponentModel(ScrollableLegendModel);\n  registers.registerComponentView(ScrollableLegendView);\n  installScrollableLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport { install as installLegendScroll } from './installLegendScroll.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  use(installLegendScroll);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CanvasPainter from 'zrender/lib/canvas/Painter.js';\nexport function install(registers) {\n  registers.registerPainter('canvas', CanvasPainter);\n}"],"names":["RADIAN_EPSILON","ROUND_SUPPORTED_PRECISION_MAX","_trim","str","mathMin","mathMax","mathAbs","linearMap","val","domain","range","clamp","d0","d1","r0","r1","subDomain","subRange","parsePercent","parsePositionOption","option","percentBase","percentOffset","parsePositionSizeOption","zrUtil.isString","round","x","precision","returnStr","getPrecision","i","getPrecisionSafe","eIndex","exp","significandPartLen","dotIndex","decimalPartLen","getPixelPrecision","dataExtent","pixelExtent","log","LN10","dataQuantity","sizeQuantity","addSafe","val0","val1","maxPrecision","sum","remRadian","radian","pi2","isRadianAroundZero","TIME_REG","parseDate","value","match","hour","quantity","quantityExponent","nice","exponent","exp10","f","nf","numericToNumber","valFloat","isNumeric","getRandomIdBase","getGreatestCommonDividor","a","b","getLeastCommonMultiple","ECHARTS_PREFIX","hasConsole","outputLog","type","onlyOnce","error","throwError","msg","DUMMY_COMPONENT_NAME_PREFIX","INTERNAL_COMPONENT_ID_PREFIX","normalizeToArray","defaultEmphasis","opt","key","subOpts","len","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isObject","isArray","isDataItemOption","mappingToExists","existings","newCmptOptions","mode","isNormalMergeMode","isReplaceMergeMode","isReplaceAllMode","existingIdIdxMap","createHashMap","each","cmptOption","index","result","prepareResult","mappingById","mappingByName","mappingByIndex","mappingInReplaceAllMode","makeIdAndName","existing","isComponentIdInternal","optionId","makeComparableKey","existingIdx","resultItem","assert","keyExistAndEqual","brandNew","nextIdx","mapResult","idMap","item","keyInfo","idNum","attr","obj1","obj2","key1","convertOptionIdName","key2","idOrName","defaultValue","isString","isNumber","isStringSafe","isNameSpecified","componentModel","name","setComponentTypeToKeyInfo","mappingResult","mainType","componentModelCtor","newOption","determineSubType","newCmptOption","existComponent","subType","queryDataIndex","data","payload","map","makeInner","innerUniqueIndex","hostObj","parseFinder","ecModel","finderInput","_a","preParseFinder","mainTypeSpecified","queryOptionMap","others","defaultMainType","queryOption","queryResult","queryReferringComponents","finder","obj","parsedKey","queryType","indexOf","SINGLE_REFERRING","userOption","indexOption","idOption","nameOption","firstCmpt","setAttribute","dom","getAttribute","getTooltipRenderMode","renderModeOption","env","TYPE_DELIMITER","IS_CONTAINER","IS_EXTENDED_CLASS","parseClassType","componentType","ret","typeArr","checkClassType","zrUtil.assert","isExtendedClass","clz","enableClassExtend","rootClz","mandatoryMethods","proto","superClass","ExtendedClass","isESClass","_super","__extends","class_1","zrUtil.inherits","zrUtil.extend","superCall","superApply","fn","zrUtil.isFunction","mountExtend","SubClz","SupperClz","classBase","enableClassCheck","target","classAttr","context","methodName","args","_i","enableClassManagement","storage","componentFullType","componentTypeInfo","container","makeContainer","throwWhenNotFound","zrUtil.each","o","types","makeStyleMapper","properties","ignoreParent","model","excludes","includes","style","propName","zrUtil.indexOf","AREA_STYLE_KEY_MAP","getAreaStyle","AreaStyleMixin","getECData","setCommonECData","seriesIndex","dataType","dataIdx","el","ecData","child","childECData","_highlightNextDigit","_highlightKeyMap","getSavedStates","getComponentStates","HOVER_STATE_NORMAL","HOVER_STATE_BLUR","HOVER_STATE_EMPHASIS","SPECIAL_STATES","DISPLAY_STATES","Z2_EMPHASIS_LIFT","Z2_SELECT_LIFT","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","SELECT_CHANGED_EVENT_TYPE","hasFillOrStroke","fillOrStroke","doChangeHoverState","stateName","hoverStateEnum","singleEnterEmphasis","singleLeaveEmphasis","singleEnterBlur","singleLeaveBlur","singleEnterSelect","singleLeaveSelect","updateElementState","updater","commonParam","traverseUpdateState","getFromStateStyle","props","toStateName","fromState","animator","createEmphasisDefaultState","targetStates","state","hasSelect","cloned","Path","store","fromFill","fromStroke","emphasisStyle","extend","liftColor","z2EmphasisLift","createSelectDefaultState","z2SelectLift","createBlurDefaultState","hasBlur","currentOpacity","blurStyle","elementStateProxy","setDefaultStateProxy","textContent","textGuide","enterEmphasisWhenMouseOver","shouldSilent","leaveEmphasisWhenMouseOut","enterEmphasis","highlightDigit","leaveEmphasis","enterBlur","leaveBlur","enterSelect","leaveSelect","allLeaveBlur","api","leaveBlurredSeries","allComponentViews","componentStates","isSeries","view","blurSeries","targetSeriesIndex","focus","blurScope","leaveBlurOfIndices","dataIndices","itemEl","targetSeriesModel","targetCoordSys","blurredSeries","seriesModel","sameSeries","coordSys","sameCoordSys","isArrayLike","dataTypes","keys","d","blurComponent","componentMainType","componentIndex","blurSeriesFromHighlightPayload","dataIndex","count","current","focus_1","findComponentHighDownDispatchers","dispatchers","focusSelf","handleGlobalMouseOverForHighDown","dispatcher","handleGlobalMouseOutForHighDown","toggleSelectionFromPayload","isSelectChangePayload","updateSeriesElementSelection","allData","idx","getAllSelectedIndices","enableHoverEmphasis","setAsHighDownDispatcher","enableHoverFocus","disableHoverEmphasis","toggleHoverEmphasis","isDisabled","asDispatcher","disable","extendedEl","isHighDownDispatcher","getHighlightDigit","highlightKey","payloadType","isHighDownPayload","savePathStates","selectState","transitionStore","getAnimationConfig","animationType","animatableModel","extraOpts","extraDelayParams","animationPayload","updatePayload","animationEnabled","isUpdate","duration","easing","delay","retrieve2","isFunction","config","animateOrSetProps","cb","during","isFrom","removeOpt","isRemove","animationConfig","animationDelay","animationEasing","animateConfig","updateProps","initProps","isElementRemoved","removeElement","fadeOutDisplayable","done","removeElementWithFadeOut","doRemove","disp","saveOldStyle","_customShapeMap","XY","WH","extendShape","opts","extendPathFromString","pathTool.extendFromString","extendPath","pathData","registerShape","ShapeClass","getShapeClass","makePath","rect","layout","path","pathTool.createFromString","centerGraphic","resizePath","makeImage","imageUrl","zrImg","ZRImage","img","boundingRect","aspect","width","height","cx","cy","mergePath","pathTool.mergePath","pathRect","m","subPixelOptimizeLine","shape","lineWidth","subPixelOptimizeUtil.subPixelOptimizeLine","subPixelOptimizeRect","subPixelOptimizeUtil.subPixelOptimizeRect","subPixelOptimize","subPixelOptimizeUtil.subPixelOptimize","getTransform","ancestor","mat","matrix.identity","matrix.mul","applyTransform","transform","invert","Transformable","matrix.invert","vector.applyTransform","transformDirection","direction","hBase","vBase","vertex","isNotGroup","isPath","groupTransition","g1","g2","getElMap","g","elMap","getAnimatableProps","clone","elMap1","oldEl","newProp","clipPointsByRect","points","point","y","clipRectByRect","targetRect","x2","y2","createIcon","iconStr","innerOpts","defaults","linePolygonIntersect","a1x","a1y","a2x","a2y","p2","p","lineLineIntersect","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","crossProduct2d","nearZero","b1a1x","b1a1y","q","x1","y1","expandOrShrinkRect","delta","shrinkOrExpand","noNegative","minSize","_tmpExpandRectDelta","expandRectOnOneDimension","xy","wh","ltIdx","rbIdx","deltaSum","oldSize","setTooltipConfig","itemTooltipOption","itemName","itemTooltipOptionObj","formatterParams","formatterParamsExtra","hasOwn","traverseElement","stopped","traverseElements","els","isBoundingRectAxisAligned","AXIS_ALIGN_EPSILON","ensureCopyRect","source","BoundingRect","ensureCopyTransform","matrix.copy","matrix.create","retrieveZInfo","calcZ2Range","max","min","visitEl","currentStates","calcZ2","entity","z2","traverseUpdateZ","z","zlevel","doUpdateZ","maxZ2","label","labelLine","isGroup","children","textGuideLineConfig","Circle","Ellipse","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","EMPTY_OBJ","setLabelText","labelTexts","text","oldStates","getLabelText","stateModels","interpolatedValue","labelFetcher","labelDataIndex","labelDimIndex","normalModel","baseText","statesText","stateModel","setLabelStyle","targetEl","labelStatesModels","stateSpecified","isSetOnText","ZRText","needsCreateText","labelStatesTexts","showNormal","normalStyle","createTextStyle","createTextConfig","stateObj","stateShow","targetElEmphasisState","labelInner","getLabelStatesModels","itemModel","labelName","statesModels","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","setTextStyleCommon","textConfig","labelPosition","labelRotate","labelDistance","labelOffset","globalTextStyle","richItemNames","getRichItemNames","richResult","richInheritPlainLabelOptionName","richInheritPlainLabel","name_1","richTextStyle","setTokenTextStyle","overflow","lineOverflow","labelTextStyle","minMargin","LabelMarginType","textMargin","normalizeCssArray","richItemNameMap","rich","richKeys","richKey","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","plainTextModel","isBlock","inRich","inheritColor","fillColor","strokeColor","opacity","textBorderWidth","textBorderType","textBorderDashOffset","retrieve3","baseline","borderType","getFont","gTextStyleModel","trim","PATH_COLOR","textStyleParams","tmpText","TextStyleMixin","isEmphasis","LINE_STYLE_KEY_MAP","getLineStyle","LineStyleMixin","ITEM_STYLE_KEY_MAP","getItemStyle","ItemStyleMixin","Model","parentModel","merge","hasPath","pathFinal","Ctor","pathArr","mixin","base","getUID","enableSubTypeDefaulter","subTypeDefaulters","defaulter","componentTypeMain","enableTopologicalTravel","dependencyGetter","targetNameList","fullNameList","callback","makeDepndencyGraph","graph","noEntryList","targetNameSet","currComponentType","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","errMsg","succComponentType","thisItem","createDependencyGraphItem","originalDeps","availableDeps","getAvailableDependencies","dependentName","thatItem","dep","inheritDefaultOption","superOption","subOption","zrUtil.merge","langEN","langZH","LOCALE_ZH","LOCALE_EN","DEFAULT_LOCALE","localeStorage","localeModels","SYSTEM_LANG","langStr","registerLocale","locale","localeObj","createLocaleObject","getLocaleModel","lang","getDefaultLocaleModel","_impl","getScaleBreakHelper","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","primaryTimeUnitFormatterMatchers","defaultFormatterSeed","defaultFullFormatter","fullDayFormatter","fullLeveledFormatter","primaryTimeUnits","timeUnits","parseTimeAxisLabelFormatter","formatter","parseTimeAxisLabelFormatterDictionary","dictOption","dict","canAddHighlight","lowestUnit","lowestUnitIdx","upperDictOption","lowerTpl","upperUnitIdx","upperUnit","upperDictItemOption","zrUtil.isObject","zrUtil.isArray","tplArr","pad","getPrimaryTimeUnit","timeUnit","isPrimaryTimeUnit","getDefaultFormatPrecisionOfInterval","format","time","template","isUTC","date","numberUtil.parseDate","fullYearGetterName","M","monthGetterName","dateGetterName","e","H","hoursGetterName","h","minutesGetterName","s","secondsGetterName","S","millisecondsGetterName","A","localeModel","timeModel","month","monthAbbr","dayOfWeek","dayOfWeekAbbr","leveledFormat","tick","extra","scaleBreakHelper","tickTime","leveledTplArr","unit","getUnitFromValue","isSecond","isMinute","isHour","isDay","isMonth","isYear","roundTime","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","fullYearSetterName","addCommas","parts","toCamelCase","upperCaseFirst","group1","zrUtil.normalizeCssArray","makeValueReadable","valueType","useUTC","USER_READABLE_DEFUALT_TIME_PATTERN","stringToUserReadable","zrUtil.trim","isNumberUserReadable","num","isTypeTime","isValueDate","timeFormat","zrUtil.isStringSafe","zrUtil.isNumber","numericResult","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","formatTpl","tpl","paramsList","encode","seriesLen","$vars","alias","k","encodeHTML","getTooltipMarker","inOpt","extraCssText","color","renderMode","markerId","convertToColorString","defaultColor","windowOpen","link","blank","nonSeriesBoxCoordSysCreators","normalCoordSysCreators","CoordinateSystemManager","dealCreate","creatorMap","canBeNonSeriesBox","coordinateSystems","creator","list","canBeNonSeriesBoxCoordSys","coordSysType","BoxCoordinateSystemCoordFrom","coordSysUseMap","zrUtil.createHashMap","getCoordForBoxCoordSys","coord","from","CoordinateSystemUsageKind","decideCoordSysUsageKind","printError","coordSysUsageOption","kind","injectCoordSysByOption","targetModel","coordSysProvider","isDefaultDataCoordSys","declaredType","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","group","gap","maxWidth","maxHeight","currentLineMaxSize","nextChild","nextChildRect","nextX","nextY","moveX","moveY","box","zrUtil.curry","getBoxLayoutParams","boxLayoutModel","getLayoutRect","positionInfo","containerRect","margin","formatUtil.normalizeCssArray","containerWidth","containerHeight","left","top","right","bottom","verticalMargin","horizontalMargin","applyPreserveAspect","component","layoutRect","preserveAspect","actualAspect","preserveAspectAlign","preserveAspectVerticalAlign","layoutOptInner","isCover","BoxLayoutReferenceType","createBoxLayoutReference","refContainer","refPoint","layoutRefType","boxCoordSys","boxCoordFrom","fetchLayoutMode","ins","layoutMode","mergeLayoutParam","targetOption","ignoreSize","hResult","vResult","copy","names","hvIdx","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","zrUtil.hasOwn","hasValue","getLayoutParams","copyLayoutParams","inner","ComponentModel","_this","componentUtil.getUID","layout.fetchLayoutMode","inputPositionParams","layout.getLayoutParams","themeModel","layout.mergeLayoutParam","newCptOption","isInit","ctor","fields","optList","defaultOption","indexKey","idKey","layout.getBoxLayoutParams","componentUtil.enableSubTypeDefaulter","componentUtil.enableTopologicalTravel","getDependencies","deps","zrUtil.map","tokens","hex","modifyHSL","l","platform","decalColor","themeColor","lightThemeColor","globalDefault","VISUAL_DIMENSIONS","SOURCE_FORMAT_ORIGINAL","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_TYPED_ARRAY","SOURCE_FORMAT_UNKNOWN","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","BE_ORDINAL","innerGlobalModel","resetSourceDefaulter","makeSeriesEncodeForAxisCoordSys","coordDimensions","datasetModel","querySeriesUpstreamDatasetModel","encodeItemName","encodeSeriesName","datasetMap","baseCategoryDimIndex","categoryWayValueDimStart","coordDimInfoLoose","coordDimIdx","coordDimInfo","getDataDimCountOnCoordDim","datasetRecord","coordDimName","start","pushDim","dimIdxArr","idxFrom","idxCount","dimsDef","thisData","queryDatasetUpstreamDatasetModels","guessOrdinal","dimIndex","doGuessOrdinal","sourceFormat","seriesLayoutBy","dimensionsDefine","startIndex","maxLoop","isTypedArray","dimName","dimType","dimDefItem","dataArrayRows","sample","detectValue","row","dataObjectRows","dataKeyedColumns","dataOriginal","beStr","internalOptionCreatorMap","concatInternalOptions","newCmptOptionList","internalOptionCreator","internalOptions","innerColor","PaletteMixin","scope","requestNum","defaultPalette","layeredPalette","getFromPalette","clearPalette","getNearestPalette","palettes","requestColorNum","paletteNum","that","scopeFields","paletteIdx","paletteNameMap","palette","pickedPaletteItem","reCreateSeriesIndices","assertSeriesInitialized","initBase","OPTION_INNER_KEY","OPTION_INNER_VALUE","GlobalModel","theme","optionManager","optionPreprocessorFuncs","innerOpt","normalizeSetOptionInput","optionChanged","baseOption","timelineOption","mediaOptions","mediaOption","componentsMap","componentsCount","newCmptTypes","newCmptTypeMap","replaceMergeMainTypeMap","componentOption","mainTypeInReplaceMerge","visitComponent","modelUtil.normalizeToArray","oldCmptList","mergeMode","modelUtil.mappingToExists","modelUtil.setComponentTypeToKeyInfo","optionsByMainType","cmptsByMainType","cmptsCountByMainType","tooltipExists","isSeriesType","ComponentModelClass","extraOpt","optInMainType","realLen","metNonInner","modelUtil.isComponentIdInternal","cmpt","condition","id","cmpts","queryByIdOrName","filter","filterBySubType","query","queryCond","getQueryCond","doFilter","indexAttr","idAttr","nameAttr","res","ctxForAll_1","cbForAll_1","nameStr","modelUtil.convertOptionIdName","oneSeries","rawSeriesIndex","series","newSeriesIndices","seriesRawIdx","componentTypes","components","isNotTargetSeries","seriesIndices","airaOption","mergeTheme","notMergeColorLayer","themeItem","keyMap_1","idOrNameItem","idName","idName_1","availableMethods","ExtensionAPI","ecInstance","zrUtil.bind","QUERY_REG","OptionManager","rawOption","setAsPrimitive","dataset","optionBackup","newParsedOption","parseRawOption","isRecreate","timelineOptions","timelineModel","ecWidth","ecHeight","mediaList","mediaDefault","indices","applyMediaQuery","indicesEquals","isNew","declaredBaseOption","timelineOnRoot","timelineOptionsOnRoot","mediaOnRoot","hasMedia","hasTimeline","singleMedia","doPreprocess","media","preProcess","realMap","applicable","matched","operator","realAttr","compare","real","expect","indices1","indices2","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","styleName","normalItemStyleOpt","emphasisItemStyleOpt","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","zrUtil.defaults","removeEC3NormalStatus","compatTextStyle","labelOptSingle","modelUtil.TEXT_STYLE_OPTIONS","textPropName","compatEC3CommonStyles","processSeries","seriesOpt","markPoint","markLine","markArea","edgeData","zrUtil.isTypedArray","mpData","mlData","toArr","toObj","globalCompatStyle","isTheme","axes","axisName","axisOpt","parallelOpt","parallelAxisDefault","calendarOpt","radarOpt","geoOpt","regionObj","timelineOpt","toolboxOpt","featureOpt","get","set","overwrite","compatLayoutProperties","LAYOUT_PROPERTIES","prop","COMPATITABLE_COMPONENTS","BAR_ITEM_STYLE_MAP","compatBarItemStyle","itemStyle","oldName","newName","compatPieLabel","compatSunburstState","compatGraphFocus","traverseTree","globalBackwardCompat","compatStyle","seriesType","pointerColor","highlightPolicy","componentName","options","dataStack","stackInfoMap","stack","stackInfoList","stackInfo","firstSeries","stackOrder","calculateStack","targetStackInfo","idxInStack","resultVal","resultNaN","dims","targetData","isStackedByIndex","stackStrategy","v0","v1","byValue","stackedDataRawIndex","stackedOver","j","SourceImpl","dim","isSourceInstance","createSource","sourceData","thisMetaRawOption","detectSourceFormat","determined","determineSourceDimensions","createSourceFromSeriesDataOption","cloneSourceShallow","sourceHeader","dimensionsDetectedCount","normalizeDimensionsOption","arrayRowsTravelFirst","objectRowsCollectDimensions","colArr","value0","firstIndex","nameMap","rawItem","exist","shouldRetrieveDataByName","_b","_c","_d","providerMethods","mountMethods","DefaultDataProvider","sourceParam","dimSize","out","newData","provider","methods","getMethodMapKey","getItemForTypedArray","countForTypedArray","fillStorageForTypedArray","rawItemGetter","getRawSourceItemGetter","bind","rawCounter","getRawSourceDataCounter","offset","end","extent","dimExtent","arr","appendDataSimply","newCol","oldCol","validateSimply","rawData","getItemSimply","rawSourceItemGetterMap","col","method","countSimply","rawSourceDataCounterMap","getRawValueSimply","property","rawSourceValueGetterMap","getRawSourceValueGetter","retrieveRawValue","DIMENSION_LABEL_REG","DataFormatMixin","rawValue","rawDataIndex","itemOpt","borderColor","userOutput","status","extendParams","params","origin","dimStr","dimLoose","multipleSeries","normalizeTooltipFormatResult","markupText","markupFragment","createTask","define","Task","performArgs","upTask","skip","planResult","lastModBy","normalizeModBy","lastModDataCount","modBy","modDataCount","forceFirstProgress","step","progress","outputDueEnd","iterator","downstream","downTask","winCount","it","sStep","sCount","modNext","sequentialNext","parseDataValue","SortOrderComparator","order","incomparable","isDesc","lval","rval","lvalFloat","rvalFloat","lvalNotNumeric","rvalNotNumeric","lvalIsStr","rvalIsStr","ExternalSource","rawVal","dimInfo","createExternalSource","internalSource","externalTransform","extSource","sourceHeaderCount","dimensions","dimsByName","dimDef","dimDefExt","errMsg_1","getRawData","cloneRawData","rawValueGetter","retrieveValueFromItem","getDimensionInfo","cloneAllDimensionInfo","upstream","isSupportedSourceFormat","externalTransformMap","registerExternalTransform","typeParsed","isBuiltIn","applyDataTransform","rawTransOption","sourceList","infoForPrint","pipedTransOption","pipeLen","transOption","applySingleDataTransform","upSourceList","pipeIndex","transType","extUpSourceList","upSource","resultList","resultIndex","resultMetaRawOption","firstUpSource","UNDEFINED","CtorUint32Array","CtorUint16Array","CtorInt32Array","CtorFloat64Array","dataCtors","defaultDimValueGetters","getIndicesCtor","rawCount","getInitialExtent","cloneChunk","originalChunk","prepareStore","dimIdx","append","DataCtor","oldStore","oldLen","newStore","DataStore","inputDimensions","dimValueGetter","defaultGetter","calcDimNameToIdx","calcDimIdx","ordinalMeta","chunk","rawExtents","dimRawExtent","values","minFillLen","chunks","dimLen","rawExtent","emptyDataItem","sourceIdx","dimNames","dimStorage","dimStore","dimArr","rawIdx","dimData","dimDataArray","sortedDimDataArray","rawIndex","mid","newIndices","thisCount","dim0","keep","originalCount","storeArr","quickFinished","dimStorage2","min2","max2","val2","dimk","targetChunks","tmpRetValue","dataCount","retValue","rawExtentOnDim","valueDimension","rate","targetStorage","sampledIndex","frameSize","currentRawIndex","maxArea","area","nextRawIndex","nextFrameStart","nextFrameEnd","avgX","avgY","frameStart","frameEnd","pointAX","pointAY","firstNaNIndex","countNaN","minIndex","minValue","maxIndex","maxValue","thisFrameSize","rawMinIndex","rawMaxIndex","dimension","sampleValue","sampleIndex","frameValues","sampleFrameIdx","initialExtent","currEnd","useRaw","clonedDims","ignoreIndices","clonedDimsMap","reduce","getDimValueSimply","SourceManager","sourceHost","upstreamSignList","upSourceMgrList","hasUpstream","resultSourceList","upSourceMgr","newMetaRawOption","upMetaRawOption","needsCreateSource","upMgrList","transformOption","fromTransformResult","doThrow","upMgr","upSrcMgr","sourceIndex","seriesDimRequest","schema","storeDims","seriesSource","sourceReadKey","storeList","cachedStoreMap","cachedStore","TOOLTIP_LINE_HEIGHT_CSS","getTooltipLineHeight","lineHeight","getTooltipTextStyle","nameFontColor","nameFontSize","nameFontWeight","valueFontColor","valueFontSize","valueFontWeight","HTML_GAPS","RICH_TEXT_GAPS","createTooltipMarkup","isSectionFragment","frag","getBuilder","buildSection","buildNameValue","getBlockGapLevel","gapLevel_1","subBlockLen","hasInnerGap_1","subBlock","subGapLevel","ctx","fragment","topMarginForOuterGap","toolTipTextStyle","noHeader","gaps","getGap","subMarkupTextList","subBlocks","orderMode","orderMap","comparator_1","valueFormatter","subMarkupText","wrapBlockHTML","displayableHeader","nameStyle","tooltipLineHeight","wrapInlineNameRichText","noName","noValue","noMarker","valueTypeOption","markerStr","readableName","readableValueList","valueAlignRight","valueCloseToMarker","valueStyle","wrapInlineValueRichText","wrapInlineNameHTML","wrapInlineValueHTML","buildTooltipMarkup","markupStyleCreator","builder","gapLevel","encodedContent","topGap","clearfix","marginCSS","leftHasMarker","marginCss","valueList","alignRight","paddingStr","alignCSS","styles","paddingLeft","retrieveVisualColorForTooltipMarker","getPaddingFromTooltipModel","padding","TooltipMarkupStyleCreator","markerType","colorStr","marker","finalStl","stl","defaultSeriesFormatTooltip","tooltipDims","tooltipDimLen","isValueArr","markerColor","inlineValue","inlineValueType","sortParam","formatArrResult","formatTooltipArrayValue","seriesNameSpecified","seriesName","inlineName","isValueMultipleLine","dimItem","inlineValues","inlineValueTypes","blocks","setEachItem","modelUtil.makeInner","getSelectionKey","SERIES_UNIVERSAL_TRANSITION_PROP","SeriesModel","dataTaskCount","dataTaskReset","sourceManager","wrapData","autoSeriesName","themeSubType","modelUtil.defaultEmphasis","newSeriesOption","task","getCurrentTask","mainData","colorBy","axisDim","maxDistance","axis","targetCoord","nearestIndices","minDist","minDiff","nearestIndicesLen","dimValue","dataCoord","diff","dist","coordDim","innerDataIndices","selectedMap","selectedMode","nameOrId","tmpArr","selectedDataIndicesMap","nameOrIds","zrUtil.keys","universalTransitionOpt","lastDataIndex","zrUtil.mixin","modelUtil.isNameSpecified","getSeriesAutoName","dataDims","nameArr","dataDim","dataTaskProgress","param","zrUtil.concatArray","onDataChange","newList","scheduler","pipeline","agentStubMap","ComponentView","Group","seriesModels","isBlur","clazzUtil.enableClassExtend","clazzUtil.enableClassManagement","createRenderPlanner","pipelineContext","originalLarge","originalProgressive","large","progressive","renderPlanner","ChartView","renderTaskPlan","renderTaskReset","toggleHighlight","elSetState","modelUtil.queryDataIndex","progressiveRender","updateMethod","progressMethodMap","ORIGIN_METHOD","RATE","THROTTLE_TYPE","throttle","debounce","currCall","lastCall","lastExec","timer","debounceNextCall","exec","cbArgs","thisDelay","thisDebounce","debounceDelay","createOrUpdate","fnAttr","throttleType","originFn","lastThrottleType","lastRate","clear","defaultStyleMappers","defaultColorKey","getStyleMapper","stylePath","styleMapper","getDefaultColorKey","colorKey","seriesStyleTask","styleModel","getStyle","globalStyle","decalOption","colorCallback","hasAutoColor","colorPalette","dataParams","sharedModel","dataStyleTask","existsStyle","dataColorPaletteTask","paletteScopeGroupByType","colorScope","dataAll","idxMap","fromPalette","PI","defaultLoading","graphic.Group","mask","graphic.Rect","graphic.Text","labelRect","arc","graphic.Arc","textWidth","r","Scheduler","dataProcessorHandlers","visualHandlers","taskRecord","overallTask","pCtx","incremental","pipelineId","dataLen","pipelineMap","stageTaskMap","handler","record","renderTask","stageHandlers","unfinished","stageHandler","stageHandlerRecord","seriesTaskMap","overallNeedDirty_1","stub","needSetDirty","performArgs_1","oldSeriesTaskMap","newSeriesTaskMap","getTargetSeries","create","seriesTaskPlan","seriesTaskReset","seriesTaskCount","overallTaskReset","oldAgentStubMap","newAgentStubMap","overallProgress","shouldOverallTaskDirty","createStub","stubReset","stubOnDirty","visualType","detectSeriseType","stubProgress","resetDefines","v","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","legacyFunc","ecModelMock","apiMock","mockMethods","cond","Clz","noop","backgroundColor","axisCommon","matrixAxis","radar","ECEventProcessor","cptQuery","dataQuery","otherQuery","condCptType","suffixes_1","dataKeys_1","reserved","propSuffix","suffixPos","eventType","eventInfo","packedEvent","check","host","propOnHost","SYMBOL_PROPS_WITH_CB","SYMBOL_PROPS","seriesSymbolTask","symbolOptions","symbolOptionsCb","hasCallback","symbolPropName","symbolPropsCb","dataEach","dataSymbolTask","getItemVisualFromData","getVisualFromData","handleSeriesLegacySelectEvents","eventPostfix","ecIns","legacyEventName","selected","handleLegacySelectEvents","messageCenter","findEventDispatcher","det","returnFirstMatch","found","Triangle","graphic.Path","Diamond","Pin","w","dy","angle","dx","tanX","tanY","cpLen","cpLen2","Arrow","symbolCtors","graphic.Line","graphic.Circle","symbolShapeMakers","size","symbolBuildProxies","SymbolClz","calculateTextPosition","inBundle","symbolType","proxySymbol","symbolPathSetColor","symbolStyle","createSymbol","keepAspect","isEmpty","symbolPath","graphic.makeImage","graphic.makePath","normalizeSymbolSize","symbolSize","normalizeSymbolOffset","symbolOffset","decalMap","WeakMap","decalCache","LRU","decalKeys","createOrUpdatePatternFromDecal","decalObject","dpr","zr","isSVG","oldPattern","decalOpt","pattern","setPatternnSource","isValidKey","cacheKey","cache","dashArrayX","normalizeDashArrayX","dashArrayY","normalizeDashArrayY","symbolArray","normalizeSymbolArray","lineBlockLengthsX","getLineBlockLengthX","lineBlockLengthY","getLineBlockLengthY","canvas","platformApi","svgRoot","pSize","getPatternSize","brushDecal","xlen","symbolRepeats","ySum","yId","yIdTotal","xId0","symbolYId","xId1","xId1Total","xSum","top_1","symbolXId","brushSymbol","scale","symbol","symbolVNode","brushSingle","isAllString","dash","dashValue","isAllNumber","n","dashValue_1","line","blockLength","decalVisual","decal","lifecycle","Eventful","implsStore","registerImpl","impl","getImpl","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_BRUSH","PRIORITY_VISUAL_ARIA","PRIORITY_VISUAL_DECAL","PRIORITY","IN_MAIN_PROCESS_KEY","MAIN_PROCESS_VERSION_KEY","PENDING_UPDATE","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","toLowercaseNameAndCallEventful","createRegisterEventWithLowercaseMessageCenter","MessageCenter","messageCenterProto","prepare","prepareView","updateDirectly","updateMethods","doConvertPixel","updateStreamModes","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","render","renderComponents","renderSeries","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","updateMainProcessVersion","ECharts","defaultRenderer","defaultCoarsePointer","defaultUseDirtyRect","zrender.init","prioritySortFunc","timsort","visualFuncs","dataProcessorFuncs","silent","remainTime","startTime","notMerge","lazyUpdate","replaceMerge","transitionOpt","updateParams","themeStorage","backwardCompat","painter","excludeComponents","excludesComponentViews","self","url","isSvg","groupId","MAX_NUMBER","connectedGroups","left_1","right_1","bottom_1","canvasList_1","dpr_1","instances","chart","targetCanvas","zr_1","content_1","graphic.Image","findResult","modelUtil.parseFinder","models","parsedFinder","dataIndexInside","MOUSE_EVENT_NAMES","eveName","isGlobalOut","parent","dataModel","publicEventTypeMap","_","event","modelUtil.setAttribute","DOM_ATTRIBUTE_KEY","needPrepare","cfg","loadingEffects","eventObj","connectionEventRevertMap","actions","flush","isComponent","viewList","viewMap","doPrepare","requireNewView","viewId","classType","Clazz","callView","excludeSeriesId","excludeSeriesIdMap","modelId","isExcluded","coordSysMgr","clearColorPalette","darkMode","componentDirtyList","componentView","seriesDirtyMap","chartView","doConvertPixelImpl","coordSysList","chartsMap","escapeConnect","actionInfo","cptTypeTmp","cptType","payloads","batched","eventObjBatch","actionResultBatch","nonRefinedEventType","isSelectChange","isHighDown","batchItem","actionResult","modelUtil.preParseFinder","refinedEvent","eventContent","pendingActions","actionType","allocateZlevels","componentZLevels","seriesZLevels","hasSeparateZLevel","zlevelKey","zLevels","lastSeriesZLevel_1","lastSeriesKey_1","dirtyList","clearStates","updateZ","updateStates","dirtyMap","updateBlend","updateHoverLayerStatus","graphic.isElementRemoved","applyElementStates","newStates","elCount","blendMode","zInfo","graphic.retrieveZInfo","graphic.traverseUpdateZ","stateAnimationModel","enableAnimation","stateTransition","prevStates","modelInfo","updateConnectedChartsStatus","charts","otherChart","action_1","otherCharts_1","echartsProto","eventName","wrapped","args2","idBase","init","existInstance","getInstanceByDom","modelUtil.getAttribute","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerPostInit","postInitFunc","registerUpdateLifecycle","registerPostUpdate","postUpdateFunc","registerAction","arg0","arg1","action","publicEventType","refineEvent","update","publishNonRefinedEvent","createEventType","actionOrEventType","registerCoordinateSystem","coordSysCreator","registerLayout","layoutTask","registerVisual","visualTask","registeredTasks","targetList","defaultPriority","registerLoading","loadingFx","registerMap","mapName","geoJson","specialAreas","registerTransform","loadingDefault","makeSelectChangedEvent","darkTheme","dataIndexMapValueLength","valNumOrArrLengthMoreThan2","defaultKeyGetter","DataDiffer","oldArr","newArr","oldKeyGetter","newKeyGetter","diffMode","func","newDataIndexMap","oldDataKeyArr","newDataKeyArr","oldKey","newIdxMapVal","newIdxMapValLen","newIdx","oldDataIndexMap","oldIdxMapVal","oldIdxMapValLen","i_1","newKey","idxMapValLen","keyArr","keyGetterName","cbModeMultiple","idxMapVal","DimensionUserOuput","dimRequest","summarizeDimensions","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","userOutputEncode","coordDimIndex","getOrCreateEncodeArr","mayLabelDimType","otherDim","encodeArr","dataDimsOnCoord","encodeFirstDimNotExtra","encodeLabel","encodeTooltip","getDimensionTypeByAxis","axisType","SeriesDimensionDefine","dimTypeShort","SeriesDataSchema","dimensionOmitted","ensureSourceDimNameMap","dimCount","willRetrieveDataByName","makeHashStrict","shouldOmitUnusedDimensions","dimHash","fullDimIdx","seriesDimIdx","seriesDimDef","sourceDimDef","hash","isSeriesDataSchema","createDimNameMap","dataDimNameMap","dimDefItemRaw","userDimName","innerSource","ID_PREFIX","INDEX_NOT_FOUND","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","prepareInvertedIndex","getId","getIdNameFromStore","normalizeDimensions","transferProperties","cloneListForMapAndSample","makeIdFromName","SeriesData","dimensionsInput","hostModel","assignStoreDimIdx","dimensionInfos","dimensionNames","invertedIndicesMap","needsHasOwn","emptyObj","dimInfoInput","dimensionInfo","dimensionName","otherDims","dimIdxToName_1","dimensionsSummary","nameList","zrUtil.isArrayLike","shouldMakeIdFromName","idList","isFormatOriginal","sharedDataItem","itemId","ordinal","dataDimIndicesOnCoord","invertedIndices","fCtx","dimIndices","innerRange","ctxCompat","otherList","thisList","visual","kvObj","itemVisual","itemVisuals","injectFunction","originalMethod","zrUtil.slice","original","zrUtil.clone","nameDimIdx","idDimIdx","nameRepeatCount","nmCnt","prepareSeriesDataSchema","sysDims","coordDimNameMap","getDimCount","omitUnusedDimensions","isUsingSourceDimensionsDef","encodeDef","encodeDefMap","indicesMap","getResultItem","dataDimsRaw","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","ifNoNameFillWithCoordName","item0","item1","genCoordDimName","removeDuplication","duplicationMap","dimOriginalName","optDimCount","CoordSysInfo","coordSysName","getCoordSysInfoBySeries","fetch","fetchers","axisMap","categoryAxisMap","xAxisModel","yAxisModel","isCategory","singleAxisModel","polarModel","radiusAxisModel","angleAxisModel","parallelModel","coordSysDims","axisIndex","axisModel","matrixModel","xModel","yModel","enableDataStack","byIndex","stackedCoordDimension","dimensionDefineList","isLegacyDimensionsInput","mayStack","stackedByDimInfo","stackedDimInfo","stackResultDimension","stackedOverDimension","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","stackedOverDimensionDefine","stackResultDimensionDefine","isDimensionStacked","stackedDim","getStackedDimension","targetDim","getCoordSysDimDefs","coordSysInfo","registeredCoordSys","CoordinateSystem","coordSysDimDefs","injectOrdinalMeta","dimInfoList","createInvertedIndices","firstCategoryDimIndex","hasNameEncode","categoryAxisModel","createSeriesData","sourceRaw","isOriginalSource","useEncodeDefaulter","encodeDefaulter","createDimensionOptions","stackCalculationInfo","isNeedCompleteOrdinalData","sampleItem","firstDataNotNull","isIntervalOrLogScale","intervalScaleNiceTicks","spanWithBreaks","splitNumber","minInterval","maxInterval","interval","getIntervalPrecision","niceTickExtent","fixExtent","increaseInterval","contain","ScaleCalculator","normalize","brkCtx","logTransform","noClampNegative","loggedBase","Scale","setting","other","thisExtent","breakOptionList","parsed","isBlank","uidBase","OrdinalMeta","categories","getName","category","needCollect","OrdinalScale","scaleHelper.contain","ticks","rank","info","infoOrdinalNumbers","ordinalsByTick","ticksByOrdinal","tickNum","allCategoryLen","ordinalNumber","unusedOrdinal","ticksByOrdinalNumber","tickNumber","ordinalNumbersByTick","cateogry","roundNumber","numberUtil.round","IntervalScale","helper.contain","helper.getIntervalPrecision","intervalPrecision","safeLimit","estimateNiceMultiple","tickVal","targetTick","moreMultiple","lastNiceTick","minorTicks","nextTick","prevTick","minorTicksGroup","minorInterval","minorIntervalPrecision","minorTick","numberUtil.getPrecision","dataNum","formatUtil.addCommas","span","helper.intervalScaleNiceTicks","expandSize","intervalPrecition","STACK_PREFIX","getSeriesStackId","getAxisKey","prepareLayoutBarSeries","isOnCartesian","getValueAxesMinGaps","barSeries","axisValues","cartesian","baseAxis","cnt","axisMinGaps","valuesInAxis","makeColumnLayout","seriesInfoList","axisExtent","bandWidth","minGap","extentSpan","scaleSpan","barWidth","barMaxWidth","barMinWidth","isInLargeMode","barGap","barCategoryGap","defaultBarGap","doCalBarWidthAndOffset","columnsMap","seriesInfo","axisKey","columnsOnAxis","stacks","stackId","categoryGapPercent","columnCount","categoryGap","barGapPercent","remainedWidth","autoWidthCount","autoWidth","column","minWidth","finalWidth","widthSum","lastColumn","retrieveColumnLayout","barWidthAndOffset","bisect","lo","hi","TimeScale","settings","labelFormatter","extent0Unit","innerTicks","getIntervalTicks","extent1Unit","upperUnitIndex","maxLevel","approxTickNum","scaleIntervalsLen","scaleIntervals","scaleHelper.getIntervalPrecision","isPrimaryUnitValueAndGreaterSame","valueA","valueB","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","numberUtil.nice","getFirstTimestampOfUnit","timestamp","unitName","createEstimateNiceMultiple","setMethodName","dateMethodInterval","tmpDate","tmpTime","approxTimeInterval","targetValue","bottomUnitName","extentSpanWithBreaks","unitNames","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","isDate","dateTime","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","startTick","endTick","getterName","setterName","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","nextPrimaryTimeUnit","levelTicksRemoveDuplicated","tickValue","targetTickNum","levelsTicksInExtent","fixRound","mathFloor","mathCeil","mathPow","mathLog","LogScale","originalExtent","roundingCriterion","powVal","vBreak","fixRoundingError","loggedExtent","loggedOther","numberUtil.quantity","err","niceExtent","originalVal","ScaleRawExtentInfo","isOrdinal","axisMinValue","modelMinRaw","parseAxisModelMinMax","modelMaxRaw","boundaryGap","boundaryGapArr","dataMin","dataMax","axisDataLen","boundaryGapInner","minFixed","maxFixed","eqNaN","determinedMin","determinedMax","minMaxName","DATA_MIN_MAX_ATTR","DETERMINED_MIN_MAX_ATTR","ensureScaleRawExtentInfo","rawExtentInfo","minMax","getScaleExtent","scaleType","rawExtentResult","barSeriesModels","isBaseAxisAndHasBarSeries_1","adjustedScale","adjustScaleForOverflow","axisLength","barsOnCurrentAxis","minOverflow","maxOverflow","totalOverFlow","oldRange","oldRangePercentOfNew","overflowBuffer","niceScaleExtent","inModel","extentInfo","isIntervalOrTime","retrieveAxisBreaksOption","createScaleByModel","ifAxisCrossZero","makeLabelFormatter","parsed_1","getAxisRawValue","scaleBreakHelper_1","getOptionCategoryInterval","shouldShowAllLabels","getDataDimensionsOnAxis","dataDimMap","isNameLocationCenter","nameLocation","shouldAxisShow","AxisModelCommonMixin","extensions","extensionRegisters","ComponentViewClass","SeriesModelClass","ChartViewClass","renderItem","painterType","PainterCtor","registerPainter","use","ext","singleExt","modelInner","axisInner","AxisTickLabelComputingKind","createAxisLabelsComputingContext","tickValuesToNumbers","nums","createAxisLabels","custom","labelFormatter_1","extent_1","tickNumbers","zrUtil.filter","numval","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","tickModel","extent_2","makeCategoryTicks","labelModel","makeCategoryLabelsActually","labelsCache","ensureCategoryLabelCache","optionLabelInterval","isEstimate","result_1","axisCacheGet","labels","numericLabelInterval","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","axisCacheSet","ticksCache","ensureCategoryTickCache","optionTickInterval","tickCategoryInterval","labelsResult","labelItem","initAxisCacheMethod","result_2","calculateCategoryInterval","fetchAutoCategoryIntervalCalculationParams","rotation","ordinalScale","ordinalExtent","maxCount","unitSpan","unitW","unitH","maxW","maxH","textContain.getBoundingRect","dw","dh","calculateCategoryIntervalTryDetermine","lastInterval","calculateCategoryIntervalDealCache","lastAutoInterval","lastTickCount","categoryInterval","onlyTick","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","rawLabel","NORMALIZED_EXTENT","Axis","fixExtentWithBands","t","ticksCoords","alignWithLabel","fixOnBandTicksCoords","minorTickModel","minorTicksCoords","nTick","ticksLen","last","diffSize","crossLen","shift_1","ticksItem","inverse","littleThan","LABEL_LAYOUT_BASE_PROPS","LABEL_LAYOUT_DIRTY_BIT_OTHERS","LABEL_LAYOUT_DIRTY_BIT_OBB","LABEL_LAYOUT_DIRTY_ALL","setLabelLayoutDirty","labelGeometry","dirtyOrClear","dirtyBits","isLabelLayoutDirty","ensureLabelLayoutWithGeometry","labelLayout","computeLabelGeometry","rawTransform","outLocalRect","labelStyleExt","marginForce","minMarginForce","marginDefault","marginType","_tmpLabelMargin","outGlobalRect","computeLabelGeometry2","rawLocalRect","labelLayoutApplyTranslation","globalRect","obb","newLabelLayoutWithGeometry","newBaseWithDefaults","ensureOBB","OrientedBoundingRect","hideOverlap","labelList","displayedLabels","hideEl","emphasisState","overlapped","labelIntersect","baseLayoutInfo","targetLayoutInfo","mtv","intersectOpt","getDefaultLabel","labelDims","vals","Symbol","seriesScope","driftSymbol","toLastFrame","draggable","hasCursorOption","disableAnimation","graphic.updateProps","graphic.initProps","emphasisItemStyle","blurItemStyle","selectItemStyle","emphasisDisabled","hoverScale","cursorStyle","emphasisModel","symbolRotate","visualColor","pathStyle","liftZ","z2Origin","useNameLabel","getLabelDefaultText","scaleRatio","animationOpt","graphic.removeElement","symbolNeedsDraw","normalizeUpdateOpt","makeSeriesScope","SymbolDraw","SymbolCtor","oldData","symbolUpdateOpt","getSymbolPoint","symbolEl","oldIdx","newSymbolType","oldSymbolType","taskParams","updateIncrementalAndHover","graphic.traverseElements","LegendVisualProvider","getDataWithEncodedVisual","dataWithEncodedVisual","OUTER_BOUNDS_DEFAULT","OUTER_BOUNDS_CLAMP_DEFAULT","GridModel","outerBoundsCp","CartesianAxisModel","categoryAxis","valueAxis","timeAxis","logAxis","axisDefault","AXIS_TYPES","getAxisBreakHelper","axisModelCreator","registers","BaseAxisModelClass","extraDefaultOption","AxisModel","getAxisType","thisOption","Cartesian","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","scaleX","scaleY","translateX","translateY","axisX","axisY","data1","data2","zoneDiag1","zoneDiag2","zone","xVal","yVal","xAxis","yAxis","xScale","yScale","xAxisExtent","yAxisExtent","tolerance","xExtent","yExtent","Axis2D","coordExtent","position","asc","AXIS_BREAK_EXPAND_ACTION_TYPE","DEFAULT_CENTER_NAME_MARGIN_LEVELS","DEFAULT_ENDS_NAME_MARGIN_LEVELS","getLabelInner","getTickInner","AxisBuilderSharedContext","resolveAxisNameOverlap","recordMap","records","resetOverlapRecordToShared","shared","labelLayoutList","labelInfoList","stOccupiedRect","useStOccupiedRect","hasAxisName","layoutInfo","transGroup","matrixUtil.invert","_stTransTmp","matrixUtil.identity","matrixUtil.mul","_stLabelRectTmp","sortByDim","sortByValue","info1","info2","axisLineX","axisLineWidth","matrixUtil.create","resolveAxisNameOverlapDefault","nameLayoutInfo","nameMoveDirVec","thisRecord","moveIfOverlap","moveIfOverlapByLinearLabels","basedLayoutInfo","movableLayoutInfo","moveDirVec","Point","baseLayoutInfoList","baseDirVec","sameDir","labelInfo","AxisBuilder","raw","axisModelDefaultOption","nameMoveOverlapOption","transformGroup","axisPartNameMap","extraParams","AXIS_BUILDER_AXIS_PART_NAMES","partName","builders","axisRotation","textRotation","rotationDiff","textAlign","textVerticalAlign","eventData","tooltipOpt","local","shown","matrix","pt1","pt2","v2ApplyTransform","lineStyle","pathBaseProp","graphic.subPixelOptimizeLine","arrows","arrowSize","arrowOffset","symbolWidth_1","symbolHeight_1","pt","needCallLayout","dealLastTickLabelResultReusable","layOutAxisTickLabel","ticksEls","buildAxisMajorTicks","syncLabelIgnoreToMajorTicks","buildAxisMinorTicks","sharedRecord","nameDirection","gapStartEndSignal","pos","mt","matrixUtil.rotate","nameRotation","axisNameAvailableWidth","endTextLayout","textFont","truncateOpt","ellipsis","retrieve","nameMarginLevel","textEl","graphic.setTooltipConfig","nameLayout","axisLabelBuildResultExists","buildAxisLabel","updateAxisLabelChangableProps","optionHideOverlap","fixMinMaxLabelShow","textPosition","textRotate","onLeft","deal","showMinMaxLabel","outmostLabelIdx","innerLabelIdx","outmostLabelLayout","innerLabelLayout","ignoreEl","touchThreshold","showMinLabel","showMaxLabel","labelsLen","tickEls","tickEl","tickInner","createTicks","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickCoord","lineStyleModel","tickDirection","minorTickLineStyle","minorTicksEls","axisLabelsCreationContext","noPxChangeTryDetermine","canDetermine","axisLabelBuildResultSet","show","labelGroup","axisLabelCreationCtx","labelRotation","rawCategoryData","labelEls","triggerEvent","z2Min","z2Max","formattedLabel","itemLabelModel","rawCategoryItem","textColor","align","alignMin","alignMax","verticalAlign","verticalAlignMin","verticalAlignMax","addBreakEventHandler","labelMargin","geometry","labelEl","copyTransform","_tmpLayoutEl","_tmpLayoutElReset","visualBreak","otherAxisOnZeroOf","rawAxisPosition","axisPosition","rectBound","axisOffset","posBound","onZeroCoord","dirMap","zrUtil.retrieve","isCartesian2DInjectedAsDataCoordSys","findAxisModels","axisModelMap","createCartesianAxisViewCommonPartBuilder","gridRect","cartesians","defaultNameMoveOverlap","layoutResult","axisLineAutoShow","axisTickAutoShow","updateCartesianAxisViewCommonPartBuilder","axisBuilder","newRaw","alignScaleTicks","alignToScale","intervalScaleProto","alignToTicks","alignToNicedTicks","alignToSplitNumber","alignToInterval","scaleExtent","isMinFixed","isMaxFixed","nicedSplitNumber","t0","t1","XY_TO_MARGIN_IDX","Grid","gridModel","axesMap","updateAxisTicks","alignTo","axesIndices","axisNeedsAlign","onZeroRecords","fixAxisOnZero","beforeDataProcessing","layoutRef","coordsList","optionContainLabel","updateAllAxisExtentTransByGridRect","axisBuilderSharedCtx","createAxisBiulders","noPxChange","layOutGridByOuterBounds","prepareOuterBounds","outerBoundsRect","parsedOuterBoundsContain","outerBoundsClamp","createOrUpdateAxesView","axesMapOnDim","xAxisIndex","yAxisIndex","coordList","grid","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","categorySortInfo","axesModelMap","unionExtent","baseAxes","otherAxes","otherAxis","grids","otherAxisDim","onZero","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","updateAxisTransform","coordBase","axisExtentSum","updateAxisExtentTransByGridRect","gridXY","gridWH","outerBoundsContain","fillLabelNameOverflowOnOneDimension","fillMarginOnOneDimension","find","xyIdx","proportion","itemRect","overflow1","overflow2","applyProportion","minIdx","maxIdx","resolveAxisNameOverlapForGrid","axisList","isDetermine","nameMarginLevelMap","calcNameMarginLevel","rawRridRect","optionOuterBoundsMode","optionOuterBoundsContain","perpendicularDim","perpenRecord","collect","collectAxesInfo","collectSeriesInfo","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","curry","saveTooltipAxisInfo","triggerAxis","cross","tooltipAxes","fromTooltip","triggerTooltip","axisPointerModel","axisPointerShow","isHandleTrigger","makeAxisPointerModel","snap","triggerEmphasis","involveSeries","axisInfo","groupIndex","getLinkGroupIndex","linkGroup","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","crossStyle","seriesTooltipTrigger","seriesTooltipShow","linkOption","checkPropInLink","linkPropValue","axisPropValue","fixValue","getAxisInfo","useHandle","coordSysAxesInfo","getAxisPointerModel","axisPointerClazz","AxisView","axisPointerModelHelper.fixValue","axisPointer","forceRender","axisPointerModelHelper.getAxisPointerModel","clazz","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaStyleModel","areaColors","areaColorsLen","lastSplitAreaColors","newSplitAreaColors","colorIndex","cIndex","prev","areaStyle","rectCoordAxisHandleRemove","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","axisElementBuilders","isInitialSortFromBarRacing","graphic.groupTransition","splitLineModel","lineColors","showMinLine","showMaxLine","isHorizontal","lineCount","p1","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","GridView","extraOption","install","isTaken","resourceKey","echarts.registerAction","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetComponent","eventElComponent","eventElCoordSys","eventElCmptZInfo","targetCmptZInfo","RoamController","mousedownHandler","mousemoveHandler","mouseupHandler","mousewheelHandler","pinchHandler","controlType","rawOpt","zInfoParsed","triggerInfo","addRoamZrListener","removeRoamZrListener","roamTrigger","inArea","forReverse","eventTool.isMiddleOrRightButtonOnMouseUpDown","eventConsumed","interactionMutex.isTaken","isAvailableBehavior","oldX","oldY","eventTool.stop","trigger","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","originX","originY","factor","absDelta","scrollDelta","controller","behaviorToCheck","contollerEvent","innerZrStore","ensureZrStore","listener","roam","listenerList","currZInfo","ensureUniformListener","removeUniformListener","uniform","updateViewOnPan","controllerHost","updateViewOnZoom","zoomDelta","zoomX","zoomY","zoomLimit","newZoom","clampByZoomLimit","zoomScale","zoomTransformableByOrigin","getCenterCoord","updateCenterAndZoomInAction","previousZoom","center","deltaZoom","zoom","zoomMin","zoomMax","View","rawParent","centerCoord","rawRect","centerOption","rawTransformMatrix","roamTransform","defaultCenter","roamTransformable","rawTransformable","dummyTransformable","noRoam","vector.copy","invTransform","getCoordSys","pixel","linkSeriesData","datas","linkAll","transferInjection","cloneShallowInjection","changeInjection","isMainData","linkSingle","getLinkedData","getLinkedDataAll","categoryFilter","legendModels","graphSeries","categoriesData","categoryNames","categoryVisual","paletteScope","categoryNameIdxMap","symbolVisualList","symbolVisual","categoryIdx","categoryStyle","visualList","graphEdgeVisual","edge","nodeStyle","KEY_DELIMITER","getAutoCurvenessParams","createCurveness","appendLength","autoCurvenessParmas","length","curvenessList","getKeyOfEdges","n1","n2","getOppositeKey","getEdgeFromMap","getTotalLengthBetweenNodes","getEdgeMapLengthWithKey","lenV","edgeMap","initCurvenessList","createEdgeMapForCurveness","oppositeEdges","getCurvenessForEdge","needReverse","autoCurvenessParams","isArrayParam","edgeArray","edgeIndex","totalLen","curKey","parityCorrection","oppositeKey","resValue","simpleLayout","node","simpleLayoutEdge","curveness","zrUtil.retrieve3","vec2.clone","graphSimpleLayout","data_1","dimensions_1","getNodeGlobalScale","nodeScaleRatio","groupZoom","roamZoom","nodeScale","getSymbolSize","_symbolRadiansHalf","circularLayout","basedOn","draggingNode","pointer","nodeData","tempX","tempY","vec2.normalize","vec2.scale","circularRotateLabel","rotateNodeLabel","_layoutNodesBasedOn","cp1","x12","y12","unitAngle","radianHalf","sumRadian","symbolRadianHalf","halfRemainRadian","nodeModel","rad","isLeft","graphCircularLayout","scaleAndAdd","vec2.scaleAndAdd","forceLayout","inNodes","inEdges","nodes","edges","gravity","vec2.create","initialFriction","friction","beforeStepCallback","afterStepCallback","v12","nLen","vec2.sub","vec2.len","vec2.set","repFact","vec2.copy","finished","graphForceLayout","preservedPoints_1","graph_1","nodeData_1","forceModel","initLayout","nodeDataExtent_1","edgeDataExtent_1","repulsion","edgeLength","repulsionArr_1","edgeLengthArr_1","nodes_1","rep","edgeModel","forceInstance","getViewRect","viewRect","createViewCoordSys","positions","bbox.fromPoints","bbWidth","bbHeight","viewCoordSys","straightLineProto","bezierCurveProto","graphic.BezierCurve","StraightLineShape","CurveShape","isStraightLine","ECLinePath","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","makeSymbolTypeValue","lineData","symbolKeepAspect","symbolSizeArr","symbolUtil.normalizeSymbolSize","symbolOffsetArr","symbolUtil.normalizeSymbolOffset","symbolUtil.createSymbol","createLine","setLinePoints","targetShape","linePoints","emphasisLineStyle","blurLineStyle","selectLineStyle","lineState","lineStateStyle","stateStyle","labelNormalModel","distance","linePath","lineGroup","symbolFrom","symbolTo","invScale","parentNode","percent","fromPos","toPos","vector.sub","vector.normalize","setSymbolRotation","specifiedRotation","tangent","distanceX","distanceY","halfPercent","cp","dir","LineDraw","LineCtor","LineGroup","lineDraw","oldLineData","isEffectObject","itemLayout","lineNeedsDraw","newLineData","isPointNaN","pts","v2","v3","quadraticAt","curveTool.quadraticAt","v2DistSquare","vec2.distSquare","intersectCurveCircle","curvePoints","radius","p0","radiusSquare","_t","next","nextDiff","adjustEdge","tmp0","quadraticSubdivide","curveTool.quadraticSubdivide","pts2","fromSymbol","toSymbol","originalPoints","getThumbnailBridge","isViewCoordSys","GraphView","symbolDraw","mainGroup","isForceLayout","thumbnailInfo","groupNewProp","layoutAnimation","firstRendered","clipRect","bridge","bridgeGroup","symbolNodes","lineNodes","symbolGroup","sub","subShape","subThumbnail","lineThumbnail","generateNodeKey","Graph","directed","nodesMap","GraphNode","edgesMap","GraphEdge","startNode","edgeType","queue","currentNode","otherNode","adjacentEdge","connectedEdgesMap","connectedNodesMap","sourceNodesQueue","targetNodesQueue","nodeIteratorIndex","sourceNode","sourceNodeInEdges","len_1","inEdge","inEdgeDataIndex","targetNode","targetNodeOutEdges","len_2","outEdge","outEdgeDataIndex","sourceNodes","targetNodes","createGraphDataProxyMixin","hostName","dataName","createGraphFromNodeEdge","beforeLink","linkNameList","validEdges","linkCount","coordSysCtor","GraphSeriesModel","getCategoriesData","categoriesModels","categoryModel","oldGetModel","newGetModel","resolveParentPath","newPathArr","sourceName","targetName","nodeMarkup","edgeVisual","createView","graphView","BaseAxisPointer","handle","elOption","graphicKey","moveAnimation","doUpdateProps","updateMandatoryProps","animation","isCategoryAxis","useSnap","animationThreshold","seriesDataCount","axisPointerModelHelper.getAxisInfo","pointerOption","pointerEl","graphic","updateLabelShowHide","handleModel","graphic.createIcon","handleSize","throttleUtil.createOrUpdate","getHandleTransProps","trans","payloadInfo","throttleUtil.clear","xDimIndex","animationModel","propsEqual","lastProps","newProps","equals_1","buildElStyle","axisPointerType","buildLabelElOption","labelPos","getValueLabel","paddings","font","textRect","confineInContainer","bgColor","viewWidth","viewHeight","seriesDataIndices","params_1","axisHelper.getAxisRawValue","idxItem","getTransformedPosition","matrix.rotate","matrix.translate","graphic.applyTransform","buildCartesianSingleLabelElOption","textLayout","makeLineShape","makeRectShape","CartesianAxisPointer","otherExtent","getCartesian","pixelValue","elStyle","viewHelper.buildElStyle","pointerShapeBuilder","cartesianAxisHelper.layout","viewHelper.buildCartesianSingleLabelElOption","viewHelper.getTransformedPosition","currPosition","cursorOtherValue","cursorPoint","tooltipOptions","viewHelper.makeLineShape","getAxisDimIndex","viewHelper.makeRectShape","AxisPointerModel","register","initGlobalListeners","useHandler","doEnter","onLeave","dis","makeDispatchAction","dispatchTooltipFinally","pendings","showLen","hideLen","actuallyPayload","dispatchAction","currTrigger","pendingList","unregister","AxisPointerView","triggerOn","globalListener.register","globalListener.unregister","findPointFromSeries","valueAxisDim","baseAxisDim","baseDataOffset","baseDim","stackedData","axisTrigger","illegalPoint","isIllegalPoint","inputAxesInfo","axesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","noSnap","outputFinder","buildPayloadsBySeries","payloadBatch","snapToValue","seriesNestestValue","modelHelper.makeKey","coordSysItem","outputAxesInfo","valItem","highDownKey","lastHighlights","newHighlights","toHighlight","toDownplay","installSimple","installAxisPointer","makeBackground","bgRect","TooltipModel","shouldTooltipConfine","tooltipModel","confineOption","testStyle","styleProps","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","getComputedStyle","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","mirrorPos","assembleArrow","arrowPosition","borderWidth","arrowPos","positionStyle","transformStyle","rotateDeg","rotateRadian","arrowWH","rotatedWH","borderStyle","styleCss","assembleTransition","onlyFadeTransition","enableDisplayTransition","transitionCurve","transitionOption","transitionText","assembleTransform","toString","x0","y0","is3d","translate","assembleFont","cssText","fontSize","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","assembleCssText","enableTransition","transitionDuration","boxShadow","borderName","camelCase","makeStyleCoord","zrX","zrY","zrPainter","zrViewportRoot","transformLocalCoord","viewportRootOffset","TooltipHTMLContent","appendTo","isDom","normalizeEvent","domStyle","alwaysShowContent","nearPointColor","styleCoord","content","markers","arrow","arrowEl","enterable","style_1","transforms","ratioX","ratioY","transformLocalCoordClear","TooltipRichContent","bounding","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","proxyRect","TooltipView","tooltipContent","self_1","cmptRef","findComponentReference","pointInfo","tooltipCascadedModel","buildTooltipModel","seriesDispatcher_1","cmptDispatcher_1","singleTooltipModel","cbParamsList","articleMarkup","markupTextArrLegacy","itemCoordSys","axisItem","axisValue","axisValueLabel","axisPointerViewHelper.getValueLabel","axisSectionMarkup","cbParams","seriesTooltipResult","positionExpr","builtMarkupText","blockBreak","allMarkupText","positionDefault","tooltipTrigger","asyncTicket","isHTMLRenderMode","tooltipConfig","encodeHTMLContent","tooltipModelCascade","subTooltipModel","defaultHtml","html","nearPoint","params0","isTimeAxis","cbTicket","tooltipDataParams","defaultBorderColor","contentSize","vAlign","boxLayoutPosition","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","lastIndices","lastIdxItem","newIdxItem","lastCbParams","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","domWidth","domHeight","rectWidth","rectHeight","subEl","TitleModel","TitleView","titleModel","subtextStyleModel","zrUtil.retrieve2","subText","subTextEl","sublink","groupRect","layoutOption","alignStyle","getDefaultSelectorOptions","LegendModel","selector","legendData","hasSelected","potentialData","availableNames","isPotential","legendNameMap","LegendView","legendModel","isFirstRender","itemAlign","selectorPosition","layoutUtil.createBoxLayoutReference","maxSize","layoutUtil.getLayoutRect","mainRect","contentGroup","legendDrawnMap","selectMode","legendItemModel","lineVisualStyle","legendIcon","itemGroup","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","colorArr","parse","stringify","selectorGroup","selectorItem","labelText","emphasisLabelModel","itemVisualStyle","drawType","itemWidth","itemHeight","isSelected","iconRotate","legendIconType","getLegendStyle","rotate","getDefaultLegendIcon","textX","hitRect","layoutUtil.box","contentRect","contentPos","selectorRect","selectorPos","selectorButtonGap","orientIdx","hw","yx","iconType","handleCommonProps","visualStyle","propVal","itemStyleModel","iconBrushType","decalStyle","legendLineModel","visualHasBorder","symboType","icon","isUseHoverLayer","legendFilter","legendSelectActionHandler","isAllSelect","actionLegendIndices","makeSelectedMap","allSelectedMap","isItemSelected","installLegendAction","ScrollableLegendModel","scrollDataIndex","mergeAndNormalizeLayoutParams","ScrollableLegendView","controllerGroup","pageIconSize","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","processMaxSize","containerGroup","controllerRect","showController","containerPos","controllerPos","pageButtonGap","pageButtonPosition","clipShape","pageInfo","to","canJump","pageText","pageFormatter","pageIndex","total","containerRectSize","targetItemIndex","targetItem","itemCount","pCount","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","intersect","itemInfo","winStart","targetDataIndex","defaultIndex","legendDataIdx","installScrollableLegendAction","installLegendPlain","installLegendScroll","CanvasPainter"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170]}