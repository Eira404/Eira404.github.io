{"version":3,"file":"console.vue_vue_type_style_index_0_lang-BAPHJp-v.js","sources":["../../src/components/Structure/playground.vue","../../src/components/Playground/code.vue","../../src/components/Playground/console.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport MyHeader from './Header/index.vue'\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"sticky top-0 z-10 w-full box-content\">\r\n      <div class=\"h-14\">\r\n        <MyHeader />\r\n      </div>\r\n    </div>\r\n    <div style=\"height: calc(100vh - 56px);\">\r\n      <slot name=\"main\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n","<script setup lang=\"ts\">\r\nimport beautify from 'js-beautify'\r\nimport { Codemirror } from 'vue-codemirror'\r\nimport { html } from '@codemirror/lang-html'\r\nimport { css } from '@codemirror/lang-css'\r\nimport { javascript } from '@codemirror/lang-javascript'\r\nimport { oneDark } from '@codemirror/theme-one-dark'\r\nimport { ayuLight } from 'thememirror'\r\nimport { computed, ref } from 'vue'\r\nimport { debounce } from '@/core/elfland/utils'\r\nimport { useElfland } from '@/core/elfland'\r\nimport { ElButton } from 'element-plus'\r\n\r\nconst elfland = useElfland()\r\nconst theme = elfland.theme\r\n\r\ntype LangDict = {\r\n  html: any\r\n  css: any\r\n  js: any\r\n  ts: any\r\n}\r\ntype LangKeys = keyof LangDict\r\n\r\nconst props = defineProps({\r\n  title: {\r\n    default: '',\r\n    type: String\r\n  },\r\n  lang: {\r\n    default: 'html',\r\n    validator: (val: string) => {\r\n      const allowedTypes = ['html', 'css', 'js', 'ts']\r\n      return allowedTypes.indexOf(val) !== -1\r\n    },\r\n    type: String\r\n  }\r\n})\r\n\r\nconst code = defineModel('code', {\r\n  required: true,\r\n  type: String\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  change: []\r\n}>()\r\ndefineExpose({ format, clear })\r\n\r\nconst dict: LangDict = {\r\n  html: [html(), beautify.html],\r\n  css: [css(), beautify.css],\r\n  js: [javascript({ jsx: false, typescript: false }), beautify.js],\r\n  ts: [javascript({ jsx: false, typescript: true }), beautify.js]\r\n}\r\n\r\nconst codemirror = ref()\r\nconst extensions = computed(() => [\r\n  dict[props.lang as LangKeys][0],\r\n  theme.theme.value === 'light' ? ayuLight : oneDark\r\n])\r\nconst formatter = dict[props.lang as LangKeys][1]\r\n\r\nconst codeChange = debounce(() => {\r\n  emit('change')\r\n}, 600)\r\n\r\nfunction format() {\r\n  const res = formatter(code.value, {\r\n    'indent_size': '2',\r\n    'indent_char': ' ',\r\n    'max_preserve_newlines': '1',\r\n    'preserve_newlines': true,\r\n    'keep_array_indentation': false,\r\n    'break_chained_methods': false,\r\n    'indent_scripts': 'normal',\r\n    'brace_style': 'collapse',\r\n    'space_before_conditional': true,\r\n    'unescape_strings': false,\r\n    'jslint_happy': false,\r\n    'end_with_newline': false,\r\n    'wrap_line_length': '0',\r\n    'indent_inner_html': false,\r\n    'comma_first': false,\r\n    'e4x': false,\r\n    'indent_empty_lines': false\r\n  })\r\n  code.value = res\r\n}\r\n\r\nfunction clear() {\r\n  code.value = ''\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"h-full\">\r\n    <div class=\"h-8 px-4 flex justify-between items-center\">\r\n      <div class=\"flex items-center\">\r\n        <slot name=\"header-left\">\r\n          {{ title }}\r\n        </slot>\r\n      </div>\r\n      <div class=\"flex gap-2 items-center\">\r\n        <slot name=\"header-right\" />\r\n        <el-button\r\n          plain\r\n          size=\"small\"\r\n          @click=\"format\"\r\n        >Format</el-button>\r\n        <el-button\r\n          plain\r\n          size=\"small\"\r\n          @click=\"clear\"\r\n        >Clear</el-button>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"cm-container\"\r\n      style=\"height: calc(100% - 32px);\"\r\n    >\r\n      <Codemirror\r\n        ref=\"codemirror\"\r\n        v-model=\"code\"\r\n        :style=\"{ height: '100%', width: '100%' }\"\r\n        class=\"blog-codemirror\"\r\n        :extensions=\"extensions\"\r\n        :indent-with-tab=\"true\"\r\n        :tab-size=\"2\"\r\n        @change=\"codeChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n","<script setup lang=\"ts\">\r\nimport type { PropType } from 'vue'\r\nimport { ElButton } from 'element-plus'\r\n\r\ntype LogLevel = 'log' | 'info' | 'warn' | 'error' | 'debug'\r\ninterface LogEntry { level: LogLevel; text: string; t: number }\r\nconst logs = defineModel('logs', {\r\n  required: true,\r\n  type: Array as PropType<LogEntry[]>\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div class=\"h-full\">\r\n    <div class=\"h-8 flex items-center justify-between px-3\">\r\n      <div>\r\n        Console\r\n      </div>\r\n      <div>\r\n        <el-button\r\n          plain\r\n          size=\"small\"\r\n          @click=\"logs = []\"\r\n        >\r\n          Clear\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n    <div\r\n      style=\"height: calc(100% - 32px);\"\r\n      class=\"bg-[#0b1020] text-[#e5e7eb] overflow-auto font-[ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace] text-[13px] p-3\"\r\n    >\r\n      <template v-if=\"logs.length===0\">\r\n        <div class=\"console-line muted\">Console output will appear hereâ€¦</div>\r\n      </template>\r\n      <template v-else>\r\n        <div\r\n          v-for=\"(l, idx) in logs\"\r\n          :key=\"l.t + '-' + idx\"\r\n          class=\"console-line\"\r\n          :class=\"l.level\"\r\n        >\r\n          <span class=\"time\">[{{ new Date(l.t).toLocaleTimeString() }}]</span>\r\n          <span class=\"lvl\">{{ l.level.toUpperCase() }}</span>\r\n          <span class=\"txt\">{{ l.text }}</span>\r\n        </div>\r\n      </template>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.console-line { display:block; padding:2px 0; white-space: pre-wrap; word-break: break-word; }\r\n.console-line .time { opacity:.6; margin-right:8px; }\r\n.console-line .lvl { opacity:.6; margin-right:8px; }\r\n.console-line.warn { color: #f3f99d; }\r\n.console-line.error { color: #ff6b6b; }\r\n.console-line.muted { color: #94a3b8; }\r\n</style>\r\n"],"names":["_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","MyHeader","_hoisted_3","_renderSlot","_ctx","theme","useElfland","props","__props","code","_useModel","emit","__emit","__expose","format","clear","dict","html","beautify","css","javascript","codemirror","ref","extensions","computed","ayuLight","oneDark","formatter","codeChange","debounce","res","_openBlock","_hoisted_4","_unref","ElButton","_cache","_hoisted_5","Codemirror","$event","logs","_Fragment","_renderList","l","idx","_normalizeClass","_toDisplayString","_hoisted_6","_hoisted_7"],"mappings":"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"}