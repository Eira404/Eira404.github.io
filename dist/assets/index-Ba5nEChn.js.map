{"version":3,"mappings":"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","names":["Nav$1","Microservice$1","Testbed$3","Logs$1","Metrics$1","Traces$1","Metric$1","Trace$1","Data$2","Logs","Metrics","Traces","Metric","Trace","FaultInjection$1","Dataset$3","Visitor$1","Testbed$2","Load$1","FaultManager$1","Dataset$2","Madison$1","Visitor","Testbed","Load","FaultManager","Dataset","zhCN","Nav","Microservice","Data","FaultInjection","Madison","Testbed$1","Data$1","Dataset$1","enUS","i18n","RouterPromise","to","queryList","res","key","queryData","checkList","func","router","context","level","fd","a","b","p","from","next","resList","i","err","localGet","defaultValue","checkFunc","type","localSet","value","LRUCache","capacity","deleteCallback","defaultSelectorListOptions","SelectorItem","selector","element","select","event","trigger","option","e","callback","selectorItem","k","options","Selector","EventEmitter","selectList","root","config","MutationObserver","mutationsList","observer","data","item","options_","elements","si","displayElements","selectedElements","dElement","sElement","defaultTimerOptions","TimerItem","t","name","interval","time","meta","isObject","Timer","timerItem","ti","message","msg","duration","ElMessage","deepClone","target","stack","getType","obj","map","stacked","_clone","debounce","delay","timerId","args","formatDate","date","year","month","day","hours","minutes","seconds","generateRandomStringBase","characters_","idMap","length","result","length_","characters","charactersLength","probability","isInTimeInterval","timePeriods","now","currentMinutes","start","end","startMinutes","endMinutes","createQuickClickJudge","amount","timer","ElflandAddon","elfland","Theme","ref","watch","newValue","DefPromiseHelper","resolve","reject","json","Category$1","Category","categories","Tag$1","tag","Link$1","id","title","path","Article$1","articles","Tag","l","Link","pn","Articles","reactive","computed","list","val","d","Article","pi","ni","pid","nid","prev","art","echarts.use","GraphChart","TooltipComponent","TitleComponent","LegendComponent","GridComponent","CanvasRenderer","Links","linkIns","nLink","link","sid","tid","arr","l2","chartElement","newVal","theme","echarts.init","params","initContainers","md","MarkdownItContainer","tokens","idx","initMarkdownItContainer","m","Container","initMarkdownItEmoji","MarkdownItEmoji","initMarkdownItAnchor","MarkdownItAnchor","initMarkdownItTocDoneRight","elflandRenderer","MarkdownItTocDoneRight","html","ast","initMarkdownItKatex","MarkdownItKatex","EmojiAnchorTocKatex","initMarkdownItFootnote","MarkdownItFootnote","initMarkdownItAbbr","MarkdownItAbbr","initMarkdownItSub","MarkdownItSub","initMarkdownItSup","MarkdownItSup","initMarkdownItPlantuml","plantuml","FootnoteAbbrSubSupUml","initImage","baseUrl","defaultImage","image","env","slf","url","Image","LayoutPlugin","renderDefault","_options","markerBegin","markerEnd","layoutBegin","layoutEnd","indent","className","render","findMarker","state","max","line","pos","find","dataStr","markup","self","markerType","findPairOfMarkers","startLine","endLine","silent","markerLevel","marker","subtractIndent","layout","markers","oldParent","oldLineMax","token_o","token_c","initLayoutPlugin","ALLOW_STYLE_ATTR","styleStr","classStr","left","Layout","componentPlugin","defaultName","namesSet","renderDivisionDefault","dataDivision","configDivision","useIndex","configKeys","confMap","buildConfMap","renderDivision","conf","base","c","isComponentBegin","n","isComponentEnd","isDataDivision","analyseData","markerBeginData","markerEndData","lastDataDivisionLine","dataList","configList","res1","res3","analyseConfig","configs","equalRegexp","commaRegexp","equalRes","equalIndex","value_","commaRes","trueKey","index","analyseConfigList","component","token_d","initClassifyComponentPlugin","token","classifies","inputs","styleId","styleBase","style","Component","templatePlugin","tokenizePos","markerDivision","findEnd","lastDivisionPos","divisionDataList","template","slient","endRes","tStart","tEnd","tokenizeAmount","configIndex","initUnderlineTemplatePlugin","colorDict","colorType","initBackgroundTemplatePlugin","initTranslateTemplatePlugin","initObsidianLinkTemplatePlugin","Template","initTemplateTestPlugin1","initTemplateTestPlugin2","charsConf","color","chars","initTemplateTestPlugin3","initTemplateTestPlugin4","TemplateForTest","plugins","init","hljs","javascript","typescript","css","xml","cmake","cpp","markdown","latex","python","yaml","MdRenderer","article","MarkdownIt","str","lang","spaceI","delailList","detail","fileName","exampleCode","exampleId","codeIndex","button","codeScroll","playgroundButton","showLang","showDetail","code","codeHtml","headLeft","headRight","codeLable","headLabel","copyCode","scrollToHash","hash","el","tocHtml","titleMap","tocString","tocJson","dfs","toc","r","Clipboard","eles","ele","Project","ProjectsDatabase","category","project","Projects","_projects","projects","sortedData","sorted","pinned","s","pins","db","ndb","Tags","parent","cate","categoryIns","Categories","cates","AboutItem","About","about","TSPlayground","q","defaultHTML","defaultCSS","defaultJS","defaultTS","defFiles","Playground","Friend","avater","desc","Friends","f","ElflandI18n","messages","createI18n","newLang","te","CubismModelWrapper","cubismModel","expressionManager","expression","parameterId","weight","InternalModel","live2DFrom","modelConfig","exp","g","hitIgnore","app","Live2DModel","hitAreas","groupId","add","clear","group","parameterData","live2DActiveParameterDatas","activeId","temp","v","reverse","parameterList","pa","UseI18nFor","ARTILive2D","night","bikini","canchangeExpression","costume","Live2DShower","PIXI.Application","live2dModel","HTMLMessageManager","selectorDataList","MessageManager","Elfland","useElfland","AudioAnalyzer","opts","src","fftSize","kFftSize","smoothingTimeConstant","monitorOutput","crossOrigin","volume","sr","freqAxis","binHz","sum","peak","x","ax","rms","rmsDbfs","ksum","krms","lufsApprox","VocalLipSync","ctx","source","setParam","dt","rmsDb","linVocal","linFull","eVocal","sumArray","eFull","ratio","flat","spectralFlatness","hold","mouthTarget","clamp01","attack","release","mouthForm","beat","out","specDb","analyser","lin","num","den","low","high","power","geo","arith","eps","props","__props","live2d","canvas","canvasContainer","container","currentX","currentY","initialX","initialY","dragging","right","top","bottom","useDirection","dragStart","drag","dragEnd","width","height","y","cx","cy","onMounted","onBeforeUnmount","analyzer","param","play","_createElementBlock","_normalizeStyle","_createElementVNode","_createVNode","_component_router_view","Live2D","_unref","NProgress","createRouter","createWebHistory","__vitePreload","failure","PIXI","createApp","App"],"ignoreList":[],"sources":["../../src/assets/i18n/zh-CN/nav.ts","../../src/assets/i18n/zh-CN/microservice.ts","../../src/assets/i18n/zh-CN/testbed.ts","../../src/assets/i18n/zh-CN/data/logs.ts","../../src/assets/i18n/zh-CN/data/metrics.ts","../../src/assets/i18n/zh-CN/data/traces.ts","../../src/assets/i18n/zh-CN/data/metric.ts","../../src/assets/i18n/zh-CN/data/trace.ts","../../src/assets/i18n/zh-CN/data/index.ts","../../src/assets/i18n/zh-CN/fault-injection.ts","../../src/assets/i18n/zh-CN/dataset.ts","../../src/assets/i18n/zh-CN/Madison/visitor.ts","../../src/assets/i18n/zh-CN/Madison/testbed.ts","../../src/assets/i18n/zh-CN/Madison/load.ts","../../src/assets/i18n/zh-CN/Madison/fault-manager.ts","../../src/assets/i18n/zh-CN/Madison/dataset.ts","../../src/assets/i18n/zh-CN/Madison/index.ts","../../src/assets/i18n/zh-CN/index.ts","../../src/assets/i18n/en-US/nav.ts","../../src/assets/i18n/en-US/microservice.ts","../../src/assets/i18n/en-US/testbed.ts","../../src/assets/i18n/en-US/data/logs.ts","../../src/assets/i18n/en-US/data/metrics.ts","../../src/assets/i18n/en-US/data/traces.ts","../../src/assets/i18n/en-US/data/metric.ts","../../src/assets/i18n/en-US/data/trace.ts","../../src/assets/i18n/en-US/data/index.ts","../../src/assets/i18n/en-US/fault-injection.ts","../../src/assets/i18n/en-US/dataset.ts","../../src/assets/i18n/en-US/Madison/visitor.ts","../../src/assets/i18n/en-US/Madison/testbed.ts","../../src/assets/i18n/en-US/Madison/load.ts","../../src/assets/i18n/en-US/Madison/fault-manager.ts","../../src/assets/i18n/en-US/Madison/dataset.ts","../../src/assets/i18n/en-US/Madison/index.ts","../../src/assets/i18n/en-US/index.ts","../../src/assets/i18n/index.ts","../../src/core/elfland/core/router-promise/index.ts","../../src/core/elfland/utils/stroage.ts","../../src/core/elfland/utils/lru.ts","../../src/core/elfland/utils/selector.ts","../../src/core/elfland/utils/timer.ts","../../src/core/elfland/utils/index.ts","../../src/core/elfland/core/addon-base/index.ts","../../src/core/elfland-addon-theme/index.ts","../../src/core/elfland/core/promise-helper/index.ts","../../src/core/elfland-addon-data/core/index.ts","../../src/core/elfland-addon-articles/core/article.ts","../../src/core/elfland-addon-articles/core/index.ts","../../src/core/elfland-addon-links/core/link.ts","../../src/core/elfland-addon-links/core/index.ts","../../src/core/elfland-addon-article/core/renderer/init/Container.ts","../../src/core/elfland-addon-article/core/renderer/init/EmojiAnchorTocKatex.ts","../../src/core/elfland-addon-article/core/renderer/init/FootnoteAbbrSubSupUml.ts","../../src/core/elfland-addon-article/core/renderer/init/Image.ts","../../src/core/elfland-addon-article/core/renderer/plugin/layout.ts","../../src/core/elfland-addon-article/core/renderer/init/Layout.ts","../../src/core/elfland-addon-article/core/renderer/plugin/component.ts","../../src/core/elfland-addon-article/core/renderer/init/Component.ts","../../src/core/elfland-addon-article/core/renderer/plugin/template.ts","../../src/core/elfland-addon-article/core/renderer/init/Template.ts","../../src/core/elfland-addon-article/core/renderer/init/TemplateForTest.ts","../../src/core/elfland-addon-article/core/renderer/init/index.ts","../../src/core/elfland-addon-article/core/renderer/index.ts","../../src/core/elfland-addon-article/core/index.ts","../../src/core/elfland-addon-projects/core/projects-database.ts","../../src/core/elfland-addon-projects/core/index.ts","../../src/core/elfland-addon-tags/core/tag.ts","../../src/core/elfland-addon-tags/core/index.ts","../../src/core/elfland-addon-categories/core/category.ts","../../src/core/elfland-addon-categories/core/index.ts","../../src/core/elfland-addon-about/core/about.ts","../../src/core/elfland-addon-about/core/index.ts","../../src/core/elfland-addon-ts-playground/core/index.ts","../../src/core/elfland-addon-playground/core/index.ts","../../src/core/elfland-addon-friends/core/friend.ts","../../src/core/elfland-addon-friends/core/index.ts","../../src/core/elfland-addon-i18n/core/index.ts","../../src/core/elfland-addon-live2d/core/models/cubism-model-wrapper.ts","../../src/core/elfland-addon-live2d/core/models/internal-model.ts","../../src/core/elfland-addon-live2d/core/models/ARTILive2D/config.ts","../../src/core/elfland-addon-message-manager/types/index.ts","../../src/core/elfland-addon-live2d/core/models/ARTILive2D/message.ts","../../src/core/elfland-addon-live2d/core/models/ARTILive2D/index.ts","../../src/core/elfland-addon-live2d/core/shower/index.ts","../../src/core/elfland-addon-message-manager/core/html/index.ts","../../src/core/elfland-addon-message-manager/core/index.ts","../../src/core/elfland/core/index.ts","../../src/core/elfland-addon-music-player/core/audio-analyzer.ts","../../src/core/elfland-addon-music-player/core/vocal-lipsync.ts","../../src/components/Live2D/index.vue","../../src/App.vue","../../src/router/index.ts","../../src/main.ts"],"sourcesContent":["export default {\r\n  Home: '首页',\r\n  Microservice: '微服务',\r\n  Testbed: '试验台',\r\n  FaultInjection: '故障注入',\r\n  Data: '数据',\r\n  Dataset: '数据集',\r\n  Algorithm: '算法',\r\n  Template: '模板',\r\n  Evaluation: '评估',\r\n  Leaderboard: 'Leaderboard'\r\n}\r\n","export default {\r\n  Deploy: '部署',\r\n  Dialog: {\r\n    TestbedName: '试验台名称',\r\n    Description: '描述',\r\n    Services: '服务',\r\n    Cancel: '取消',\r\n    Confirm: '确定'\r\n  }\r\n}\r\n","export default {\r\n  Add: '增加',\r\n  Name: '名字',\r\n  Microservice: '微服务',\r\n  Description: '描述',\r\n  CreateTime: '创建时间',\r\n  ServiceStatus: '运行状态',\r\n  TrafficStatus: '流量状态',\r\n  LoadStatus: '注入状态',\r\n  Operations: '操作',\r\n  Load: '注入',\r\n  Stop: '停止',\r\n  Delete: '删除',\r\n  Usage: '已使用',\r\n  Limit: '上限',\r\n  Create: {\r\n    Title: '创建注入',\r\n    Cancel: '取消',\r\n    Confirm: '确定'\r\n  }\r\n\r\n}\r\n","export default {\r\n  CreateQueryTask: '创建查询任务',\r\n  Filter: '筛选',\r\n  All: '全部',\r\n  SearchPrompt: '搜索详情、ID、pod name',\r\n  Detail: '详情'\r\n}\r\n","export default {\r\n  Node: '机器',\r\n  Pod: '服务',\r\n  Machine: '机器指标'\r\n}\r\n","export default {\r\n  CreateQueryTask: '创建查询任务',\r\n  Sort: '排序',\r\n  MostRecent: '最近',\r\n  LongestFirst: '最久',\r\n  ShortestFirst: '最短',\r\n  All: '全部',\r\n  SearchPrompt: '搜索业务名称、ID',\r\n  GotoQueryTraceID: '跳转到查询调用链ID'\r\n}\r\n","export default {\r\n  Click: '点击',\r\n  LeftButon: '左侧按钮',\r\n  Select: '来选择Metric Name',\r\n  Back: '返回',\r\n  SelectedType: '当前类型',\r\n  Change: '切换',\r\n  Node: 'Node',\r\n  Pod: 'Pod',\r\n  SelectMetricName: '选择 Metric Name',\r\n  SelectTimeInterval: '选择时间范围',\r\n  AddAll: '全部添加',\r\n  RemoveAll: '全部移除',\r\n  Add: '添加',\r\n  Remove: '移除',\r\n  Empty: '无查询结果'\r\n}\r\n","export default {\r\n  Back: '返回',\r\n  SearchPrompt: '输入需要搜索的Trace ID',\r\n  Search: '搜索',\r\n  ToData: 'To data',\r\n  Copy: '复制URL',\r\n  NoData: '无数据'\r\n}\r\n","import Logs from './logs'\r\nimport Metrics from './metrics'\r\nimport Traces from './traces'\r\nimport Metric from './metric'\r\nimport Trace from './trace'\r\n\r\nexport default {\r\n  Sidebar: {\r\n    SelectData: '选择数据',\r\n    NowNamespace: '当前Namespace',\r\n    InputNamespace: '输入Namespace',\r\n    Goto: '切换',\r\n    YourNamespaces: '你的Namespaces',\r\n    SelectType: '选择类型',\r\n    NowType: '当前类型',\r\n    YourTypes: '你的类型',\r\n    Logs: '日志（Logs）',\r\n    Metrics: '指标（Metrics）',\r\n    Traces: '调用链（Traces）'\r\n  },\r\n  QueryTaskList: {\r\n    QueryTaskList: '查询任务列表',\r\n    NullQueryTask: '当前无查询任务',\r\n    CreateQueryTask: '创建查询任务',\r\n    Status: '状态',\r\n    SelectATimeRange: '选择时间范围:',\r\n    SelectEndTime: '选择结束时刻:',\r\n    SelectEndTime2: '选择结束时刻',\r\n    Cancel: '取消',\r\n    Confirm: '确定'\r\n  },\r\n  Home: {\r\n    ViewDetails: '查看详情',\r\n    Logs: '查询日志数据',\r\n    Metrics: '查询指标数据',\r\n    Traces: '查询调用链数据',\r\n    NullNamespace: '当前用户下无Namespace',\r\n    Microservice: '微服务',\r\n    Testbed: '试验台',\r\n    Or: '或',\r\n    PLSGoto: '请前往',\r\n    LastS: '创建微服务系统以获取Namespace；',\r\n    OINS: '或输入Namespace：',\r\n    InputNamespace: '输入Namespace',\r\n    Goto: '切换'\r\n  },\r\n  Logs,\r\n  Metrics,\r\n  Traces,\r\n  Metric,\r\n  Trace\r\n}\r\n","export default {\r\n  InjectionDialog: {\r\n    Experiment: 'Experiment',\r\n    Schedule: 'Schedule',\r\n    Single: '单次，选择故障注入时刻',\r\n    Timer: '定时，crontab表达式，北京时间，10 5 * * *',\r\n    SelectInjectionTiming: 'Select injection timing',\r\n    Cancel: '取消',\r\n    Confirm: '确认',\r\n    Injection: '注入故障'\r\n  },\r\n  SelectFault: '选择需要注入的故障',\r\n  Question:{\r\n    Q1:  '1. 按住V键的同时，向上（向下）滚动或按+（-）可垂直放大（缩小）日历',\r\n    Q2:  '2. 按住H键的同时，向上（向下）滚动或按+（-）可水平放大（缩小）日历',\r\n    Q3:  '3. 拖动滚动条、滚动滚轮，或按住日历并移动鼠标以移动日历'\r\n  },\r\n  AllFaultsAreLoaded: '故障信息获取完成',\r\n  LoadingDates: '加载日期',\r\n  RenderingCompleted: '渲染完成',\r\n  ErrorDates: '报错日期',\r\n  DetailDialog: {\r\n    FaultDetail: '故障详情',\r\n    Type: '类型',\r\n    Delete: '删除',\r\n    Name: '名称',\r\n    Timestamp: '时间戳',\r\n    Duration: '持续时间',\r\n    Cancel: '取消',\r\n    Warning: '警告',\r\n    DeletePrompt: '你确定要<span class=\"text-red-500\">删除</span>故障',\r\n    Q: '吗？',\r\n    Ongoing: '请勿删除正在执行的故障'\r\n  },\r\n  PleaseSelectANamespace: {\r\n    Microservice: '微服务',\r\n    Testbed: '试验台',\r\n    Or: '或',\r\n    PLSGoto: '请前往',\r\n    LastS: '创建微服务系统以获取Namespace'\r\n  }\r\n}\r\n","export default {\r\n  PublicDatasets: '公开数据集',\r\n  PrivateDatasets: '私有数据集',\r\n  Refresh: '刷新',\r\n  Create: {\r\n    Create: '创建数据集',\r\n    TimeRange: '时间区间',\r\n    DatasetName: '数据集名称',\r\n    Description: '数据集描述',\r\n    Category: '包含数据情况',\r\n    No: '无',\r\n    Log: 'Log',\r\n    Metric: 'Metric',\r\n    MetricStep: 'Metric 步长',\r\n    Trace: 'Trace',\r\n    Visibility: '可见性',\r\n    Visible: '公开',\r\n    Invisible: '私有',\r\n    Namespace: 'Namespace',\r\n    SelectNamespace: '选择 Namespace',\r\n    Confirm: '确认',\r\n    Cancel: '取消'\r\n  },\r\n  Download: '下载',\r\n  Now: '当前',\r\n  Visible: '公开',\r\n  Invisible: '私有',\r\n  Delete: '删除'\r\n}\r\n","export default {\r\n  Empty: '请填写完整信息',\r\n  CodeSuccess: '验证发送成功',\r\n  CodeFailure: '验证发送失败',\r\n  CodeError: '验证码错误',\r\n  PasswordNotMatch: '密码不一致',\r\n  PlsEnterEmail: '请输入邮箱',\r\n  Login: {\r\n    Success: '登录成功',\r\n    Failure: '登陆失败'\r\n  },\r\n  Register: {\r\n    Success: '注册成功',\r\n    Failure: '注册失败',\r\n    UsernameExisted: '用户名已存在',\r\n    EmailExisted: '邮箱已存在'\r\n  },\r\n  Retrieve: {\r\n    Success: '修改密码成功',\r\n    Failure: '修改密码失败'\r\n  }\r\n}\r\n","export default {\r\n  Create: {\r\n    Success: '正在部署',\r\n    Failure: '部署失败',\r\n    Running: '部署成功'\r\n  },\r\n  Delete: {\r\n    Success: '正在成功',\r\n    Failure: '删除失败',\r\n    Finish: '删除成功'\r\n  }\r\n}\r\n","export default {\r\n  Create: {\r\n    Success: '开始注入流量',\r\n    Failure: '流量注入失败'\r\n  },\r\n  Delete: {\r\n    Success: '停止注入流量',\r\n    Failure: '停止注入失败'\r\n  }\r\n}\r\n","export default {\r\n  Delete: {\r\n    Success: '删除成功，请等待渲染更新',\r\n    Failure: '删除失败'\r\n  },\r\n  Inject: {\r\n    Success: '注入成功，请等待渲染更新',\r\n    Failure: '注入失败'\r\n  },\r\n  Dialog: {\r\n    Empty: '不能为空',\r\n    LessThanNow: '不能早于当前时刻'\r\n  }\r\n}\r\n","export default {\r\n  Create: {\r\n    Success: '创建数据集成功',\r\n    Failure: '创建数据集失败'\r\n  },\r\n  Delete: {\r\n    Success: '删除数据集成功',\r\n    Failure: '删除数据集失败'\r\n  },\r\n  ChangeVisibility: {\r\n    Success: '成功修改数据集可见性',\r\n    Failure: '修改数据集可见性失败'\r\n  }\r\n}\r\n","import Visitor from './visitor'\r\nimport Testbed from './testbed'\r\nimport Load from './load'\r\nimport FaultManager from './fault-manager'\r\nimport Dataset from './dataset'\r\n\r\nexport default {\r\n  Visitor,\r\n  Testbed,\r\n  Load,\r\n  FaultManager,\r\n  Dataset\r\n}\r\n","import Nav from './nav'\r\nimport Microservice from './microservice'\r\nimport Testbed from './testbed'\r\nimport Data from './data'\r\nimport FaultInjection from './fault-injection'\r\nimport Dataset from './dataset'\r\nimport Madison from './Madison'\r\n\r\nexport default {\r\n  Nav,\r\n  Microservice,\r\n  Testbed,\r\n  Data,\r\n  FaultInjection,\r\n  Dataset,\r\n  Madison\r\n}\r\n","export default {\r\n  Home: 'Home',\r\n  Microservice: 'Microservice',\r\n  Testbed: 'Testbed',\r\n  FaultInjection: 'FaultInjection',\r\n  Data: 'Data',\r\n  Dataset: 'Dataset',\r\n  Algorithm: 'Algorithm',\r\n  Template: 'Template',\r\n  Evaluation: 'Evaluation',\r\n  Leaderboard: 'Leaderboard'\r\n}\r\n","export default {\r\n  Deploy: 'Deploy',\r\n  Dialog: {\r\n    TestbedName: 'Testbed Name',\r\n    Description: 'Description',\r\n    Services: 'Services',\r\n    Cancel: 'Cancel',\r\n    Confirm: 'Confirm'\r\n  }\r\n}\r\n","export default {\r\n  Add: 'Add',\r\n  Name: 'Name',\r\n  Microservice: 'Microservice',\r\n  Description: 'Description',\r\n  CreateTime: 'CreateTime',\r\n  ServiceStatus: 'ServiceStatus',\r\n  TrafficStatus: 'TrafficStatus',\r\n  LoadStatus: 'LoadStatus',\r\n  Operations: 'Operations',\r\n  Load: 'Load',\r\n  Stop: 'Stop',\r\n  Delete: 'Delete',\r\n  Usage: 'Usage',\r\n  Limit: 'Limit',\r\n  Create: {\r\n    Title: 'Create load',\r\n    Cancel: 'Cancel',\r\n    Confirm: 'Confirm'\r\n  }\r\n}\r\n","export default {\r\n  CreateQueryTask: 'Create Query Task',\r\n  Filter: 'Filter',\r\n  All: 'All',\r\n  SearchPrompt: 'Search msg、ID、pod name',\r\n  Detail: 'Detail'\r\n}\r\n","export default {\r\n  Node: 'Node',\r\n  Pod: 'Pod',\r\n  Machine: 'Machine'\r\n}\r\n","export default {\r\n  CreateQueryTask: 'CreateQueryTask',\r\n  Sort: 'Sort',\r\n  MostRecent: 'Most Recent',\r\n  LongestFirst: 'Longest First',\r\n  ShortestFirst: 'Shortest First',\r\n  All: 'All',\r\n  SearchPrompt: 'Search operation name、trace ID',\r\n  GotoQueryTraceID: 'Goto Query Trace ID'\r\n}\r\n","export default {\r\n  Click: 'Click the',\r\n  LeftButon: 'left button',\r\n  Select: 'to select metric name',\r\n  Back: 'Back',\r\n  SelectedType: 'Selected type',\r\n  Change: 'Change',\r\n  Node: 'Node',\r\n  Pod: 'Pod',\r\n  SelectMetricName: 'Select metric name',\r\n  SelectTimeInterval: 'Select time interval',\r\n  AddAll: 'Add all',\r\n  RemoveAll: 'Remove all',\r\n  Add: 'Add',\r\n  Remove: 'Remove',\r\n  Empty: 'Empty query result'\r\n}\r\n","export default {\r\n  Back: 'Back',\r\n  SearchPrompt: 'Input Trace ID',\r\n  Search: 'Search',\r\n  ToData: 'To data',\r\n  Copy: 'Copy URL',\r\n  NoData: 'No data'\r\n}\r\n","import Logs from './logs'\r\nimport Metrics from './metrics'\r\nimport Traces from './traces'\r\nimport Metric from './metric'\r\nimport Trace from './trace'\r\n\r\nexport default {\r\n  Sidebar: {\r\n    SelectData: 'Select Data',\r\n    NowNamespace: 'Now Namespace',\r\n    InputNamespace: 'Input Namespace',\r\n    Goto: 'Goto',\r\n    YourNamespaces: 'Your Namespaces',\r\n    SelectType: 'Select Type',\r\n    NowType: 'Now Type',\r\n    YourTypes: 'Your Types',\r\n    Logs: 'Logs',\r\n    Metrics: 'Metrics',\r\n    Traces: 'Traces'\r\n  },\r\n  QueryTaskList: {\r\n    QueryTaskList: 'Query Task List',\r\n    NullQueryTask: 'No query tasks',\r\n    CreateQueryTask: 'Create Query Task',\r\n    Status: 'Status',\r\n    SelectATimeRange: 'Select Range:',\r\n    SelectEndTime: 'Select End Time:',\r\n    SelectEndTime2: 'Select End Time',\r\n    Cancel: 'Cancel',\r\n    Confirm: 'Confirm'\r\n  },\r\n  Home: {\r\n    ViewDetails: 'View Details',\r\n    Logs: 'Query logs data',\r\n    Metrics: 'Query metrics data',\r\n    Traces: 'Query traces data',\r\n    NullNamespace: 'No namespaces found for the current user',\r\n    Microservice: 'Microservice',\r\n    Testbed: 'Testbed',\r\n    Or: 'or',\r\n    PLSGoto: 'Please goto',\r\n    LastS: 'to create a microservice system to obtain the namespace;',\r\n    OINS: 'Or input namespace:',\r\n    InputNamespace: 'Input Namespace',\r\n    Goto: 'Goto'\r\n  },\r\n  Logs,\r\n  Metrics,\r\n  Traces,\r\n  Metric,\r\n  Trace\r\n}\r\n","export default {\r\n  InjectionDialog: {\r\n    Experiment: 'Experiment',\r\n    Schedule: 'Schedule',\r\n    Single: 'Single time, select the fault injection time',\r\n    Timer: 'Timer, crontab expression, Beijing time, 10 5 * * *',\r\n    SelectInjectionTiming: 'Select injection timing',\r\n    Cancel: 'Cancel',\r\n    Confirm: 'Confirm',\r\n    Injection: 'Inject fault'\r\n  },\r\n  SelectFault: 'Select fault',\r\n  Question:{\r\n    Q1:  '1. While holding down V, scroll up (down) or press+(-) to vertically zoom in (down) on the calendar',\r\n    Q2:  '2. While holding down H, scroll up (down) or press+(-) to horizontally zoom in (down) on the calendar',\r\n    Q3:  '3. Drag the scrollbar or scroll wheel, or hold down the calendar and move the mouse to move the calendar'\r\n  },\r\n  AllFaultsAreLoaded: 'All faults are loaded',\r\n  LoadingDates: 'Loading dates',\r\n  RenderingCompleted: 'Rendering completed',\r\n  ErrorDates: 'Error dates',\r\n  DetailDialog: {\r\n    FaultDetail: 'Fault Detail',\r\n    Type: 'Type',\r\n    Delete: 'Delete',\r\n    Name: 'Name',\r\n    Timestamp: 'Timestamp',\r\n    Duration: 'Duration',\r\n    Cancel: 'Cancel',\r\n    Warning: 'Warning',\r\n    DeletePrompt: 'Are you sure you want to <span class=\"text-red-500\">DELETE</span> fault',\r\n    Q: '?',\r\n    Ongoing: 'Do not delete ongoing faults'\r\n  },\r\n  PleaseSelectANamespace: {\r\n    Microservice: 'Microservice',\r\n    Testbed: 'Testbed',\r\n    Or: 'or',\r\n    PLSGoto: 'Please goto',\r\n    LastS: 'to create a microservice system to obtain the namespace'\r\n  }\r\n}\r\n","export default {\r\n  PublicDatasets: 'Public Datasets',\r\n  PrivateDatasets: 'Private Datasets',\r\n  Refresh: 'Refresh',\r\n  Create: {\r\n    Create: 'Create Dataset',\r\n    TimeRange: 'Time Range',\r\n    DatasetName: 'Dataset Name',\r\n    Description: 'Description',\r\n    Category: 'Category',\r\n    No: 'No',\r\n    Log: 'Log',\r\n    Metric: 'Metric',\r\n    MetricStep: 'Metric Step',\r\n    Trace: 'Trace',\r\n    Visibility: 'Visibility',\r\n    Visible: 'Visible',\r\n    Invisible: 'Invisible',\r\n    Namespace: 'Namespace',\r\n    SelectNamespace: 'Select Namespace',\r\n    Confirm: 'Confirm',\r\n    Cancel: 'Cancel'\r\n  },\r\n  Download: 'Download',\r\n  Now: 'Now',\r\n  Visible: 'Visible',\r\n  Invisible: 'Invisible',\r\n  Delete: 'Delete'\r\n}\r\n","export default {\r\n  Empty: 'Please complete all required fields',\r\n  CodeSuccess: 'Verification code sent',\r\n  CodeFailure: 'Failed to send verification code',\r\n  CodeError: 'Verification code error',\r\n  PasswordNotMatch: 'Passwords do not match',\r\n  PlsEnterEmail: 'Please enter your email',\r\n  Login: {\r\n    Success: 'Login successful',\r\n    Failure: 'Login failed'\r\n  },\r\n  Register: {\r\n    Success: 'Registration successful',\r\n    Failure: 'Registration failed',\r\n    UsernameExisted: 'Username already exists',\r\n    EmailExisted: 'Email already exists'\r\n  },\r\n  Retrieve: {\r\n    Success: 'Password reset successful',\r\n    Failure: 'Password reset failed'\r\n  }\r\n}\r\n","export default {\r\n  Create: {\r\n    Success: 'Deploying',\r\n    Failure: 'Deployment failed',\r\n    Running: 'Deployment successful'\r\n  },\r\n  Delete: {\r\n    Success: 'Deleting',\r\n    Failure: 'Delete failed',\r\n    Finish: 'Delete successfully'\r\n  }\r\n}\r\n","export default {\r\n  Create: {\r\n    Success: 'Start injecting traffic',\r\n    Failure: 'Traffic injection failed'\r\n  },\r\n  Delete: {\r\n    Success: 'Stop injecting traffic',\r\n    Failure: 'Stop injection failed'\r\n  }\r\n}\r\n","export default {\r\n  Delete: {\r\n    Success: 'Deletion successful, please wait for rendering update',\r\n    Failure: 'Delete failed'\r\n  },\r\n  Inject: {\r\n    Success: 'Injection successful, please wait for rendering update',\r\n    Failure: 'Injection failed'\r\n  },\r\n  Dialog: {\r\n    Empty: 'can\\'t be empty',\r\n    LessThanNow: 'can\\'t be less than now'\r\n  }\r\n}\r\n","export default {\r\n  Create: {\r\n    Success: 'Dataset created successfully',\r\n    Failure: 'Failed to create dataset'\r\n  },\r\n  Delete: {\r\n    Success: 'Dataset deleted successfully',\r\n    Failure: 'Failed to delete dataset'\r\n  },\r\n  ChangeVisibility: {\r\n    Success: 'Dataset visibility updated successfully',\r\n    Failure: 'Failed to update dataset visibility'\r\n  }\r\n}\r\n","import Visitor from './visitor'\r\nimport Testbed from './testbed'\r\nimport Load from './load'\r\nimport FaultManager from './fault-manager'\r\nimport Dataset from './dataset'\r\n\r\nexport default {\r\n  Visitor,\r\n  Testbed,\r\n  Load,\r\n  FaultManager,\r\n  Dataset\r\n}\r\n","import Nav from './nav'\r\nimport Microservice from './microservice'\r\nimport Testbed from './testbed'\r\nimport Data from './data'\r\nimport FaultInjection from './fault-injection'\r\nimport Dataset from './dataset'\r\nimport Madison from './Madison'\r\n\r\nexport default {\r\n  Nav,\r\n  Microservice,\r\n  Testbed,\r\n  Data,\r\n  FaultInjection,\r\n  Dataset,\r\n  Madison\r\n}\r\n","import zhCN from './zh-CN'\r\nimport enUS from './en-US'\r\n\r\nexport default {\r\n  'zh-CN': zhCN,\r\n  'en-US': enUS\r\n}\r\n","import type {\r\n  RouteLocationNormalized,\r\n  NavigationGuardNext,\r\n  RouteLocationRaw,\r\n  Router\r\n} from 'vue-router'\r\nimport type { RouterPromiseSyncFuncRes } from '../../types'\r\n\r\ntype WaitFunc = (\r\n  to: RouteLocationNormalized,\r\n  from: RouteLocationNormalized\r\n) => Promise<RouteLocationRaw | void>\r\n\r\ntype SyncFunc = (\r\n  to: RouteLocationNormalized,\r\n  from: RouteLocationNormalized\r\n) => RouterPromiseSyncFuncRes\r\n\r\ntype CheckFuncData<T> = {\r\n  func: WaitFunc\r\n  context: T\r\n  level: number\r\n}\r\n\r\ntype PrecheckFuncData<T> = {\r\n  func: SyncFunc\r\n  context: T\r\n  level: number\r\n}\r\n\r\ntype PostcheckFuncData<T> = {\r\n  func: SyncFunc\r\n  context: T\r\n  level: number\r\n}\r\n\r\nexport class RouterPromise {\r\n  static getQueryData(to: RouteLocationNormalized, queryList: string[]): [string, string | undefined][] {\r\n    const res: [string, string | undefined][] = []\r\n    queryList.forEach((key) => {\r\n      res.push([key, to.query[key] as string | undefined])\r\n    })\r\n    return res\r\n  }\r\n  static checkQueryData(queryData: [string, string | undefined][], checkList: [string, 'must' | 'empty'][]): false;\r\n  static checkQueryData(queryData: [string, string | undefined][], checkList: [string, 'must' | 'empty' | 'func'][], func: (key: string, value: string | undefined) => boolean): false;\r\n  static checkQueryData(queryData: [string, string | undefined][], checkList: [string, 'must' | 'empty' | 'func'][], func?: (key: string, value: string | undefined) => boolean): false {\r\n    return false\r\n  }\r\n\r\n  private __promises: Array<Promise<RouteLocationRaw | void>> = []\r\n  private __checkFunctions: Array<CheckFuncData<unknown>> = []\r\n  private __precheckFunctions: Array<PrecheckFuncData<unknown>> = []\r\n  private __postcheckFunctions: Array<PostcheckFuncData<unknown>> = []\r\n\r\n  readonly router: Router\r\n\r\n  constructor(router: Router) {\r\n    this.router = router\r\n  }\r\n\r\n  /**\r\n   * 注册一个每次路由跳转前都会执行的函数\r\n   * 返回一个Promise代表是否需要加载数据\r\n   *\r\n   * @param func 函数\r\n   * @param context 函数上下文\r\n   * @param level 运行顺序，越大越靠后\r\n   */\r\n  addCheck<T>(func: WaitFunc, context: T, level: number = 0) {\r\n    const fd: CheckFuncData<T> = {\r\n      func,\r\n      context,\r\n      level\r\n    }\r\n    this.__checkFunctions.push(fd)\r\n    this.__checkFunctions.sort((a, b) => a.level - b.level)\r\n  }\r\n\r\n  /**\r\n   * 预检查函数\r\n   * @param func\r\n   * @param context\r\n   * @param level\r\n   */\r\n  addPrecheck<T>(func: SyncFunc, context: T, level: number = 0) {\r\n    const fd: PrecheckFuncData<T> = {\r\n      func,\r\n      context,\r\n      level\r\n    }\r\n    this.__precheckFunctions.push(fd)\r\n    this.__precheckFunctions.sort((a, b) => a.level - b.level)\r\n  }\r\n\r\n  /**\r\n   * 后检查函数\r\n   * @param func\r\n   * @param context\r\n   * @param level\r\n   */\r\n  addPostcheck<T>(func: SyncFunc, context: T, level: number = 0) {\r\n    const fd: PostcheckFuncData<T> = {\r\n      func,\r\n      context,\r\n      level\r\n    }\r\n    this.__postcheckFunctions.push(fd)\r\n    this.__postcheckFunctions.sort((a, b) => a.level - b.level)\r\n  }\r\n\r\n  /**\r\n   * 移除一个注册的函数\r\n   *\r\n   * @param func 函数\r\n   * @param context 函数上下文\r\n   */\r\n  removeCheck<T>(func: WaitFunc, context: T) {\r\n    this.__checkFunctions = this.__checkFunctions.filter(\r\n      (fd) => fd.func !== func || fd.context !== context\r\n    )\r\n  }\r\n\r\n  removePrecheck<T>(func: SyncFunc, context: T) {\r\n    this.__precheckFunctions = this.__precheckFunctions.filter(\r\n      (fd) => fd.func !== func || fd.context !== context\r\n    )\r\n  }\r\n\r\n  removePostcheck<T>(func: SyncFunc, context: T) {\r\n    this.__postcheckFunctions = this.__postcheckFunctions.filter(\r\n      (fd) => fd.func !== func || fd.context !== context\r\n    )\r\n  }\r\n\r\n  /**\r\n   * 为下次路由跳转添加一个需要等待的Promise\r\n   *\r\n   * @param p Promise对象\r\n   */\r\n  addPromise(p: Promise<RouteLocationRaw | void>) {\r\n    this.__promises.push(p)\r\n  }\r\n\r\n  /**\r\n   * 路由跳转前守卫触发\r\n   * 接收跳转信息\r\n   * 返回Promise等待跳转\r\n   *\r\n   * @param to 路由信息\r\n   * @param from 路由信息\r\n   * @param next next\r\n   */\r\n  async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized,\r\n    next: NavigationGuardNext\r\n  ): Promise<boolean> {\r\n    this.__checkFunctions.forEach((fd) => {\r\n      this.__promises.push(fd.func.call(fd.context, to, from))\r\n    })\r\n    //\r\n    // 这里可能会抛出错误\r\n    //\r\n    try {\r\n      const resList = await Promise.all(this.__promises)\r\n      // console.log(resList)\r\n      for (let i = 0; i < resList.length; i++) {\r\n        const res = resList[i]\r\n        if (res) {\r\n          // console.log(res)\r\n          this.__promises = []\r\n          next(res)\r\n          // console.log('next')\r\n          return false\r\n        }\r\n      }\r\n    } catch (err) {\r\n      throw new Error('Error ' + err)\r\n    }\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 路由进入触发，在wait之前\r\n   * @param to\r\n   * @param from\r\n   * @param next\r\n   * @returns\r\n   */\r\n  precheck(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized,\r\n    next: NavigationGuardNext\r\n  ): boolean {\r\n    const resList: RouterPromiseSyncFuncRes[] = []\r\n    this.__precheckFunctions.forEach((fd) => {\r\n      resList.push(fd.func.call(fd.context, to, from))\r\n    })\r\n    // console.log('resList', resList)\r\n    return this.syncFuncCheck(resList, next)\r\n  }\r\n\r\n  /**\r\n   * 路由跳转后守卫触发\r\n   * 清空所有添加的Promise\r\n   *\r\n   */\r\n  postcheck(to: RouteLocationNormalized, from: RouteLocationNormalized) {\r\n    this.__postcheckFunctions.forEach((fd) => {\r\n      fd.func.call(fd.context, to, from)\r\n    })\r\n    this.__promises = []\r\n  }\r\n\r\n  private syncFuncCheck(resList: RouterPromiseSyncFuncRes[], next: NavigationGuardNext): boolean {\r\n    for (let i = 0; i < resList.length; i++) {\r\n      const res = resList[i]\r\n      if (res) {\r\n        if (res[0] === 'success') {\r\n          continue\r\n        } else if (res[0] === 'redirect') {\r\n          next(res[1])\r\n          return false\r\n        }\r\n      }\r\n    }\r\n    return true\r\n  }\r\n}\r\n","/**\r\n * local 取\r\n * @param key 键\r\n * @param defaultValue 默认值\r\n * @param type 存储类型\r\n * @returns value\r\n */\r\nexport function localGet<T = string>(\r\n  key: string,\r\n  defaultValue?: any,\r\n  checkFunc?: (value: T) => boolean,\r\n  type?: string\r\n) {\r\n  type = type || 'default'\r\n  type = type.toLocaleLowerCase()\r\n  if (\r\n    defaultValue !== undefined &&\r\n    defaultValue !== null &&\r\n    window.localStorage.getItem(key) === null\r\n  ) {\r\n    localSet(key, defaultValue, type)\r\n  }\r\n  switch (type) {\r\n    case 'default':\r\n      return window.localStorage.getItem(key)\r\n    case 'json':\r\n      return JSON.parse(window.localStorage.getItem(key) || '') as T\r\n    default:\r\n      throw new Error(`不可接受的type:${type}`)\r\n  }\r\n}\r\n\r\n/**\r\n * local 存\r\n * @param key 键\r\n * @param value 值\r\n * @param type 存储类型\r\n * @returns void\r\n */\r\nexport function localSet(key: string, value: any, type?: string) {\r\n  type = type || 'default'\r\n  type = type.toLocaleLowerCase()\r\n  switch (type) {\r\n    case 'default':\r\n      return window.localStorage.setItem(key, value)\r\n    case 'json':\r\n      return window.localStorage.setItem(key, JSON.stringify(value).toString())\r\n    default:\r\n      throw new Error(`不可接受的type:${type}`)\r\n  }\r\n}\r\n\r\n/**\r\n * local 删\r\n * @param key 键\r\n */\r\nexport function localDel(key: string) {\r\n  window.localStorage.removeItem(key)\r\n}\r\n\r\n/**\r\n * session 取\r\n * @param key 键\r\n * @param defaultValue 默认值\r\n * @param type 存储类型\r\n * @returns value\r\n */\r\nexport function sessionGet(key: string, defaultValue?: any, type?: string) {\r\n  type = type || 'default'\r\n  type = type.toLocaleLowerCase()\r\n  if (\r\n    defaultValue !== undefined &&\r\n    defaultValue !== null &&\r\n    window.sessionStorage.getItem(key) === null\r\n  ) {\r\n    sessionSet(key, defaultValue, type)\r\n  }\r\n  switch (type) {\r\n    case 'default':\r\n      return window.sessionStorage.getItem(key)\r\n    case 'json':\r\n      return JSON.parse(window.sessionStorage.getItem(key) || '')\r\n    default:\r\n      throw new Error(`不可接受的type:${type}`)\r\n  }\r\n}\r\n\r\n/**\r\n * session 存\r\n * @param key 键\r\n * @param value 值\r\n * @param type 存储类型\r\n * @returns void\r\n */\r\nexport function sessionSet(key: string, value: any, type?: string) {\r\n  type = type || 'default'\r\n  type = type.toLocaleLowerCase()\r\n  switch (type) {\r\n    case 'default':\r\n      return window.sessionStorage.setItem(key, value)\r\n    case 'json':\r\n      return window.sessionStorage.setItem(key, JSON.stringify(value).toString())\r\n    default:\r\n      throw new Error(`不可接受的type:${type}`)\r\n  }\r\n}\r\n\r\n/**\r\n * session 删\r\n * @param key 键\r\n */\r\nexport function sessionDel(key: string) {\r\n  window.sessionStorage.removeItem(key)\r\n}\r\n","export class LRUCache<K, V> extends Map {\r\n  capacity: number\r\n  deleteCallback: ((key: K, value: V) => void) | null\r\n\r\n  constructor(capacity?: number, deleteCallback?: (key: K, value: V) => void) {\r\n    super()\r\n    this.capacity = capacity || 100\r\n    this.deleteCallback = deleteCallback || null\r\n  }\r\n\r\n  set(key: K, value: V): this {\r\n    if (this.has(key)) {\r\n      this.delete(key)\r\n    } else {\r\n      if (this.size >= this.capacity) {\r\n        this.delete(this.keys().next().value)\r\n      }\r\n    }\r\n    return super.set(key, value)\r\n  }\r\n\r\n  get(key: K): V | undefined {\r\n    if (this.has(key)) {\r\n      const value = super.get(key)\r\n      super.delete(key)\r\n      super.set(key, value)\r\n      return value\r\n    } else return undefined\r\n  }\r\n\r\n  delete(key: any): boolean {\r\n    if (this.deleteCallback && this.has(key)) this.deleteCallback(key, super.get(key) as V)\r\n    return super.delete(key)\r\n  }\r\n}\r\n","import EventEmitter from 'eventemitter3'\r\n\r\nexport type SelectorMutationObserverConfig = {\r\n  childList: boolean\r\n  subtree: boolean\r\n}\r\nexport type SelectorListOptions = {\r\n  childrenEvent?: boolean\r\n  rewrite?: boolean\r\n}\r\n\r\n/**\r\n * 1. 监听的事件\r\n * 2. 选择的元素，会传入document.querySelectorAll进行选择\r\n * 3. 事件出发后的响应回调事件名称\r\n * 4. 配置项\r\n */\r\nexport type SelectorListItem = [string, string, string, SelectorListOptions?]\r\nexport type SelectorList = Array<SelectorListItem>\r\n\r\n/**\r\n * - element: 事件触发的元素\r\n * - event: 事件名称\r\n * - select: 选择的元素\r\n * - e: html元素的事件传参\r\n */\r\nexport type SelectorEvent = {\r\n  element: Element\r\n  event: string\r\n  select: string\r\n  e: any\r\n}\r\nconst defaultSelectorListOptions: SelectorListOptions = {\r\n  childrenEvent: false,\r\n  rewrite: false\r\n}\r\n\r\nexport class SelectorItem {\r\n  private readonly __selector: Selector\r\n  private readonly __element: Element\r\n  private readonly __eventMap: Map<{ select: string, event: string, trigger: string }, (e: any) => void> = new Map()\r\n  private readonly __optionsMap: Map<{ select: string, event: string, trigger: string }, SelectorListOptions> = new Map()\r\n\r\n  get element() {\r\n    return this.__element\r\n  }\r\n\r\n  get size() {\r\n    return this.__eventMap.size\r\n  }\r\n\r\n  constructor(selector: Selector, element: Element) {\r\n    this.__selector = selector\r\n    this.__element = element\r\n  }\r\n\r\n  private getKey(select: string, event: string, trigger: string) {\r\n    return { select, event, trigger }\r\n  }\r\n\r\n  private createEventCallback(select: string, event: string, trigger: string, option: SelectorListOptions) {\r\n    const callback = (e: any) => {\r\n      if (e.target !== this.__element && !option.childrenEvent) return\r\n      e.preventDefault()\r\n      this.__selector.onEvent(this.__element, event, select, e, trigger)\r\n    }\r\n    return callback\r\n  }\r\n\r\n  addEvent(select: string, event: string, trigger: string, option?: SelectorListOptions) {\r\n    option = { ...defaultSelectorListOptions, ...option }\r\n    const key = this.getKey(select, event, trigger)\r\n    if (this.__eventMap.has(key) && !option.rewrite) return\r\n    const callback = this.createEventCallback(select, event, trigger, option)\r\n    this.__element.addEventListener(event, callback)\r\n    if (this.__eventMap.has(key)) {\r\n      this.__element.removeEventListener(event, this.__eventMap.get(key)!)\r\n    }\r\n    this.__eventMap.set(key, callback)\r\n    this.__optionsMap.set(key, option)\r\n  }\r\n\r\n  removeEvent(select: string, event: string, trigger: string) {\r\n    const key = this.getKey(select, event, trigger)\r\n    const e = this.__eventMap.get(key)\r\n    if (e) this.__element.removeEventListener(event, e)\r\n  }\r\n\r\n  copySelectorItem(element: Element) {\r\n    const selectorItem = new SelectorItem(this.__selector, element)\r\n    Array.from(this.__eventMap.keys()).forEach(k => {\r\n      const options = this.__optionsMap.get(k)\r\n      if (!options) return\r\n      selectorItem.addEvent(k.select, k.event, k.trigger, options)\r\n    })\r\n    return selectorItem\r\n  }\r\n\r\n  destroy() {\r\n    Array.from(this.__eventMap.entries()).forEach(([k, e]) => {\r\n      try {\r\n        this.__element.removeEventListener(k.event, e)\r\n      } catch (e) {\r\n        console.warn(e)\r\n      }\r\n    })\r\n    this.__eventMap.clear()\r\n    this.__optionsMap.clear()\r\n  }\r\n}\r\n\r\n/**\r\n * 标识符由 select + event + trigger 组成\r\n */\r\nexport class Selector extends EventEmitter<Record<string, [{ element: Element, event: string, select: string, e: any }]>> {\r\n  private __selector2Options: Map<{ select: string, event: string, trigger: string }, SelectorListOptions> = new Map()\r\n  private __selector2Elements: Map<{ select: string, event: string, trigger: string }, Set<Element>> = new Map()\r\n  private __element2SelectorItem: Map<Element, SelectorItem> = new Map()\r\n\r\n  private __destroyed: boolean = false\r\n\r\n  private readonly __root: Element\r\n  private readonly __observer: MutationObserver\r\n  private readonly __config: SelectorMutationObserverConfig\r\n\r\n  constructor(selectList?: SelectorList, root?: Element, config?: SelectorMutationObserverConfig) {\r\n    super()\r\n    const MutationObserver =\r\n        window.MutationObserver ||\r\n        (window as any).WebKitMutationObserver ||\r\n        (window as any).MozMutationObserver\r\n\r\n    this.__root = root || document.body\r\n\r\n    this.__observer = new MutationObserver((mutationsList, observer) => {\r\n      this.refresh()\r\n    })\r\n\r\n    this.__config = { childList: true, subtree: true, ...config }\r\n\r\n    this.__observer.observe(this.__root, this.__config)\r\n\r\n    this.addSelectorList(selectList || [])\r\n\r\n    this.refresh()\r\n  }\r\n\r\n  /**\r\n     * SelectorItem实例触发后的回调函数\r\n     *\r\n     * @param {HTMLElement} element html元素\r\n     * @param {String} event 事件触发名字\r\n     * @param {String} select querySelectorAll对应的选择方法\r\n     * @param {Object} e 事件获取的事件对象\r\n     * @param {String} trigger 触发器名字\r\n     */\r\n  onEvent(element: Element, event: string, select: string, e: any, trigger: string) {\r\n    const data: SelectorEvent = { element, event, select, e }\r\n    this.emit(trigger, data)\r\n  }\r\n\r\n  private getKey(select: string, event: string, trigger: string) {\r\n    return { select, event, trigger }\r\n  }\r\n\r\n  addSelectorList(selectList: SelectorList) {\r\n    selectList.forEach(item => {\r\n      const [event, select, trigger, options_] = item\r\n      const options = { ...defaultSelectorListOptions, ...options_ }\r\n      const key = this.getKey(select, event, trigger)\r\n      if (this.__selector2Options.has(key) && !options.rewrite) return\r\n      this.__selector2Options.set(key, options)\r\n    })\r\n    this.refresh()\r\n  }\r\n\r\n  removeSelectorList(selectList: SelectorList) {\r\n    selectList.forEach(item => {\r\n      const [event, select, trigger] = item\r\n      const key = this.getKey(select, event, trigger)\r\n      const elements = this.__selector2Elements.get(key)\r\n      if (!elements) return\r\n      new Set(elements).forEach(element => {\r\n        const si = this.__element2SelectorItem.get(element)\r\n        si?.removeEvent(select, event, trigger)\r\n        if (si?.size === 0) {\r\n          elements.delete(element)\r\n          si.destroy()\r\n          this.__element2SelectorItem.delete(element)\r\n        }\r\n      })\r\n      this.__selector2Elements.delete(key)\r\n      this.__selector2Options.delete(key)\r\n    })\r\n    this.refresh()\r\n  }\r\n\r\n  private select() {\r\n    setTimeout(() => {\r\n      const kvList = Array.from(this.__selector2Options.entries())\r\n      kvList.forEach(([selector, options]) => {\r\n        const displayElements = Array.from(document.querySelectorAll(selector.select))\r\n        const selectedElements = new Set(this.__selector2Elements.get(selector)) || new Set()\r\n        displayElements.forEach(dElement => {\r\n          if (selectedElements.has(dElement)) {\r\n            if (options.rewrite) {\r\n              this.__element2SelectorItem.get(dElement)?.addEvent(selector.select, selector.event, selector.trigger, options)\r\n            }\r\n            selectedElements.delete(dElement)\r\n            return\r\n          }\r\n          const selectorItem = new SelectorItem(this, dElement)\r\n          selectorItem.addEvent(selector.select, selector.event, selector.trigger, options)\r\n          this.__element2SelectorItem.set(dElement, selectorItem)\r\n        })\r\n        selectedElements.forEach(sElement => {\r\n          this.__element2SelectorItem.get(sElement)?.destroy()\r\n          this.__element2SelectorItem.delete(sElement)\r\n        })\r\n        this.__selector2Elements.set(selector, new Set(displayElements))\r\n      })\r\n    }, 0)\r\n  }\r\n\r\n  private refresh() {\r\n    this.select()\r\n  }\r\n\r\n  destroy() {\r\n    if (this.__destroyed) return\r\n    this.__destroyed = true\r\n    Array.from(this.__element2SelectorItem.values()).forEach(selectorItem => {\r\n      selectorItem.destroy()\r\n    })\r\n    this.__observer.disconnect()\r\n    this.__element2SelectorItem.clear()\r\n    this.__selector2Options.clear()\r\n    this.__selector2Elements.clear()\r\n    this.removeAllListeners()\r\n  }\r\n}\r\n","import { isObject } from '.'\r\nimport EventEmitter from 'eventemitter3'\r\n\r\nexport enum TimerState {\r\n  NULL,\r\n  CREATED,\r\n  ERROR,\r\n  RUNNING,\r\n  INTERRUPT,\r\n  FINISH\r\n}\r\n\r\nexport type TimerItemOptions = {\r\n  delete: boolean\r\n}\r\n\r\nconst defaultTimerOptions: TimerItemOptions = {\r\n  delete: false\r\n}\r\n\r\nclass TimerItem {\r\n  t: Timer\r\n  name: string\r\n  interval: boolean\r\n  time: number\r\n  options: TimerItemOptions\r\n  meta: any\r\n  state: TimerState\r\n  timer: NodeJS.Timeout | null\r\n\r\n  constructor(\r\n    t: Timer,\r\n    name: string,\r\n    interval: boolean,\r\n    time: number,\r\n    options: TimerItemOptions,\r\n    meta: any\r\n  ) {\r\n    this.t = t\r\n\r\n    this.name = name\r\n\r\n    this.interval = interval\r\n\r\n    this.time = time\r\n\r\n    this.options = options || {}\r\n\r\n    this.meta = meta || {}\r\n\r\n    this.state = TimerState.NULL\r\n\r\n    this.timer = null\r\n\r\n    if (!this.check()) this.state = TimerState.ERROR\r\n    else this.state = TimerState.CREATED\r\n  }\r\n\r\n  check() {\r\n    if (typeof this.interval !== 'boolean') return false\r\n    if (Number.isNaN(Number(this.time))) return false\r\n    if (this.time < 0 || !Number.isInteger(this.time)) return false\r\n    if (!isObject(this.options) || !isObject(this.meta)) return false\r\n    return true\r\n  }\r\n\r\n  start(time?: number) {\r\n    this.time = time || this.time\r\n    if (this.timer !== null) {\r\n      if (this.interval) clearInterval(this.timer)\r\n      else clearTimeout(this.timer)\r\n    }\r\n    if (this.interval) {\r\n      this.timer = setInterval(this.callback.bind(this), this.time)\r\n    } else {\r\n      this.timer = setTimeout(this.callback.bind(this), this.time)\r\n    }\r\n    this.state = TimerState.RUNNING\r\n  }\r\n\r\n  stop() {\r\n    if (this.timer) {\r\n      if (this.interval) clearInterval(this.timer)\r\n      else clearTimeout(this.timer)\r\n    }\r\n    this.state = TimerState.INTERRUPT\r\n  }\r\n\r\n  callback() {\r\n    this.state = TimerState.FINISH\r\n    const res = {\r\n      meta: this.meta,\r\n      data: {\r\n        name: this.name,\r\n        interval: this.interval,\r\n        time: this.time\r\n      }\r\n    }\r\n    this.t.emit(this.name, res)\r\n\r\n    this.afterCallback()\r\n  }\r\n\r\n  afterCallback() {\r\n    if (this.options.delete === true) {\r\n      this.t.delete(this.name)\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    if (this.timer) {\r\n      if (this.interval) clearInterval(this.timer)\r\n      else clearTimeout(this.timer)\r\n    }\r\n  }\r\n}\r\n\r\nexport class Timer extends EventEmitter {\r\n  timerMap: Map<string, TimerItem>\r\n  constructor() {\r\n    super()\r\n    this.timerMap = new Map()\r\n  }\r\n\r\n  /**\r\n   * 创建新的计时器\r\n   * ```js\r\n   * const options = {\r\n   *   delete: false, // 倒计时完成自销毁\r\n   * }\r\n   * ```\r\n   *\r\n   * @param {String} name 计时器实例名字（唯一）\r\n   * @param {Boolean} interval 是否循环\r\n   * @param {Number} time 计时器时长\r\n   * @param {Object} options 配置项\r\n   * @param {Object} meta 传递参数\r\n   * @returns 是否创建成功\r\n   */\r\n  create(\r\n    name: string = 'base',\r\n    interval: boolean = true,\r\n    time: number = 0,\r\n    options: TimerItemOptions = defaultTimerOptions,\r\n    meta: any = {}\r\n  ) {\r\n    if (this.has(name)) return false\r\n    const timerItem = new TimerItem(this, name, interval, time, options, meta)\r\n    if (timerItem.state === TimerState.ERROR) return false\r\n    this.timerMap.set(name, timerItem)\r\n    return true\r\n  }\r\n\r\n  get(name: string) {\r\n    return this.timerMap.get(name)\r\n  }\r\n\r\n  getAll() {\r\n    return Array.from(this.timerMap.entries())\r\n  }\r\n\r\n  has(name: string) {\r\n    return this.timerMap.has(name)\r\n  }\r\n\r\n  state(name: string) {\r\n    if (!this.has(name)) return false\r\n    return this.get(name)?.state\r\n  }\r\n\r\n  start(name: string, time?: number) {\r\n    if (!this.has(name)) return false\r\n    const ti = this.get(name)\r\n    if (ti === undefined) return false\r\n    if (ti.state === TimerState.RUNNING) return false\r\n    ti.start(time)\r\n    return true\r\n  }\r\n\r\n  stop(name: string | ((name: string) => boolean)) {\r\n    if (name instanceof Function) {\r\n      const list = this.getAll()\r\n      list.forEach((item) => {\r\n        if (name(item[0]) === true) {\r\n          item[1].stop()\r\n        }\r\n      })\r\n      return true\r\n    }\r\n    if (!this.has(name)) return false\r\n    this.get(name)?.stop()\r\n    return true\r\n  }\r\n\r\n  restart(name: string, time?: number) {\r\n    if (!this.has(name)) return false\r\n    this.get(name)?.start(time)\r\n    return true\r\n  }\r\n\r\n  delete(name: string) {\r\n    if (!this.has(name)) return false\r\n    this.get(name)?.destroy()\r\n    this.timerMap.delete(name)\r\n    return true\r\n  }\r\n\r\n  destroy() {\r\n    const timerItems = this.getAll()\r\n    timerItems.forEach((ti) => {\r\n      ti[1].destroy()\r\n    })\r\n    this.removeAllListeners()\r\n  }\r\n}\r\n","import { ElMessage } from 'element-plus'\r\n\r\nexport * from './stroage'\r\nexport * from './lru'\r\nexport * from './selector'\r\nexport * from './timer'\r\n\r\n/**\r\n * 显示提示框\r\n * @param msg 提示信息\r\n * @param type 提示类型（默认error）\r\n * @param duration 提示时长（默认3000(ms)）\r\n */\r\nexport function message(\r\n  msg: string,\r\n  type?: 'error' | 'success' | 'info' | 'warning',\r\n  duration?: number\r\n) {\r\n  type = type || 'error'\r\n  duration = duration || (type === 'error' ? 4000 : 3000)\r\n  ElMessage({\r\n    message: msg,\r\n    type: type,\r\n    duration: duration\r\n  })\r\n}\r\n\r\nexport function isNumber(value: string | string[]) {\r\n  if (Array.isArray(value)) {\r\n    return value.every((v) => !Number.isNaN(Number(v)))\r\n  }\r\n  return !Number.isNaN(Number(value))\r\n}\r\n\r\n/**\r\n * 深拷贝对象\r\n * @param target 深拷贝对象\r\n * @returns 深拷贝结果\r\n */\r\nexport function deepClone(target: any, stack?: WeakMap<any, any>) {\r\n  function getType(obj: any): string {\r\n    type TypeMap = {\r\n      [property: string]: string\r\n    }\r\n    const map: TypeMap = {\r\n      '[object Boolean]': 'boolean',\r\n      '[object Number]': 'number',\r\n      '[object String]': 'string',\r\n      '[object Function]': 'function',\r\n      '[object Array]': 'array',\r\n      '[object Date]': 'date',\r\n      '[object RegExp]': 'regExp',\r\n      '[object Undefined]': 'undefined',\r\n      '[object Null]': 'null',\r\n      '[object Object]': 'object'\r\n    }\r\n    if (obj instanceof Element) {\r\n      return 'element'\r\n    }\r\n    return map[Object.prototype.toString.call(obj)] || 'unknown'\r\n  }\r\n\r\n  const type = getType(target)\r\n  if (type === 'array' || type === 'object') {\r\n    // 检查循环引用并返回其对应的克隆\r\n    stack || (stack = new WeakMap())\r\n    const stacked = stack.get(target)\r\n    if (stacked) {\r\n      return stacked\r\n    }\r\n    // 复杂数据类型 递归实现\r\n    //\r\n    if (type === 'array') {\r\n      const _clone: Array<any> = []\r\n      target.forEach((element: any) => {\r\n        _clone.push(deepClone(element, stack))\r\n      })\r\n      stack.set(target, _clone)\r\n      return _clone\r\n    }\r\n    if (type === 'object') {\r\n      type TypeClone = {\r\n        [property: string]: any\r\n      }\r\n      const _clone: TypeClone = {}\r\n      for (const key in target) {\r\n        if (Object.hasOwnProperty.call(target, key)) {\r\n          const element = target[key]\r\n          _clone[key] = deepClone(element, stack)\r\n        }\r\n      }\r\n      stack.set(target, _clone)\r\n      return _clone\r\n    }\r\n  } else {\r\n    // 基础数据类型 直接返回\r\n    //\r\n    return target\r\n  }\r\n}\r\n\r\n/**\r\n * 防抖函数\r\n * @param func 待执行的函数\r\n * @param delay 防抖时间 200\r\n * @returns Function\r\n */\r\nexport function debounce<T extends (...args: any[]) => void>(func: T, delay: number = 200): T {\r\n  let timerId: NodeJS.Timeout | null = null\r\n  return function (this: ThisParameterType<T>, ...args: any[]) {\r\n    if (timerId) {\r\n      clearTimeout(timerId)\r\n    }\r\n    timerId = setTimeout(() => {\r\n      func.apply(this, args)\r\n    }, delay)\r\n  } as T\r\n}\r\n\r\n/**\r\n * 节流函数\r\n * @param func 待执行的函数\r\n * @param delay 节流时间\r\n * @returns Function\r\n */\r\nexport function throttle<T extends (...args: any[]) => void>(func: T, delay: number = 200): T {\r\n  let timerId: NodeJS.Timeout | null = null\r\n  let lastExecutedTime = 0\r\n  return function (this: ThisParameterType<T>, ...args: any[]) {\r\n    const currentTime = Date.now()\r\n    const timeSinceLastExecution = currentTime - lastExecutedTime\r\n    if (timeSinceLastExecution >= delay) {\r\n      func.apply(this, args)\r\n      lastExecutedTime = currentTime\r\n    } else {\r\n      if (timerId) {\r\n        clearTimeout(timerId)\r\n      }\r\n      timerId = setTimeout(() => {\r\n        func.apply(this, args)\r\n        lastExecutedTime = Date.now()\r\n      }, delay - timeSinceLastExecution)\r\n    }\r\n  } as T\r\n}\r\n\r\nexport function parseTimeToSeconds(input: string): number {\r\n  // 定义时间单位到秒的换算关系\r\n  const timeUnits: Record<string, number> = {\r\n    y: 365 * 24 * 60 * 60, // 一年的秒数\r\n    w: 7 * 24 * 60 * 60, // 一周的秒数\r\n    d: 24 * 60 * 60, // 一天的秒数\r\n    h: 60 * 60, // 一小时的秒数\r\n    m: 60, // 一分钟的秒数\r\n    s: 1 // 一秒\r\n  }\r\n\r\n  // 定义时间单位的顺序\r\n  const order = ['y', 'w', 'd', 'h', 'm', 's']\r\n  let lastUnitIndex = -1 // 用于记录上一个时间单位的索引\r\n\r\n  // 正则表达式匹配时间单位和对应的数字\r\n  const regex = /(\\d+)([ywdhms])/g\r\n  let match\r\n  let totalSeconds = 0\r\n\r\n  const set = new Set()\r\n\r\n  // 遍历匹配结果\r\n  while ((match = regex.exec(input)) !== null) {\r\n    const [fullMatch, number, unit] = match\r\n    const num = parseInt(number, 10)\r\n\r\n    // 如果单位不存在或数字不是有效数字，返回 -1\r\n    if (!(unit in timeUnits) || isNaN(num)) {\r\n      return -1\r\n    }\r\n\r\n    // 如果单位前面有，返回 -1\r\n    if (set.has(unit)) return -1\r\n    set.add(unit)\r\n\r\n    // 检查时间单位的顺序\r\n    const currentUnitIndex = order.indexOf(unit)\r\n    if (currentUnitIndex < lastUnitIndex) {\r\n      // 当前单位出现在上一个单位之前，顺序错误\r\n      return -1\r\n    }\r\n    lastUnitIndex = currentUnitIndex\r\n\r\n    // 累加秒数\r\n    totalSeconds += num * timeUnits[unit]\r\n  }\r\n\r\n  // 检查是否匹配了整个字符串\r\n  if (input.replace(regex, '') !== '') {\r\n    return -1\r\n  }\r\n\r\n  return totalSeconds\r\n}\r\n\r\nexport function getDatesForNextSevenDays(startDate: Date): Date[] {\r\n  // 创建一个数组来存储日期\r\n  const dates: Date[] = []\r\n\r\n  // 将输入的日期复制一份，避免修改原始日期\r\n  let currentDate = new Date(startDate)\r\n\r\n  // 循环七次，每次添加一天\r\n  for (let i = 0; i < 7; i++) {\r\n    // 将当前日期的副本添加到数组中\r\n    dates.push(new Date(currentDate))\r\n\r\n    // 为当前日期加一天\r\n    currentDate = new Date(currentDate.setDate(currentDate.getDate() + 1))\r\n  }\r\n\r\n  return dates\r\n}\r\n\r\nexport function formatDate(date: Date): string {\r\n  const year = date.getFullYear()\r\n  const month = (date.getMonth() + 1).toString().padStart(2, '0') // 月份从0开始，需要+1\r\n  const day = date.getDate().toString().padStart(2, '0')\r\n  const hours = date.getHours().toString().padStart(2, '0')\r\n  const minutes = date.getMinutes().toString().padStart(2, '0')\r\n  const seconds = date.getSeconds().toString().padStart(2, '0')\r\n\r\n  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`\r\n}\r\n\r\n/**\r\n * 随机字符串生成函数生成器\r\n * - 闭包存储map\r\n * @param characters_ 可选的字符\r\n * @returns 随机字符串生成函数\r\n */\r\nexport function generateRandomStringBase(characters_?: string) {\r\n  const idMap = new Map()\r\n  idMap.set('', true)\r\n  return function (length = 10) {\r\n    let result = ''\r\n    const length_ = length\r\n    const characters =\r\n      characters_ || '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\r\n    const charactersLength = characters.length\r\n\r\n    while (idMap.get(result) === true) {\r\n      for (let i = 0; i < length_; i++) {\r\n        result += characters.charAt(Math.floor(Math.random() * charactersLength))\r\n      }\r\n    }\r\n    idMap.set(result, true)\r\n\r\n    return result\r\n  }\r\n}\r\n\r\n/**\r\n * 判断是否是Object\r\n * @param value 待判定对象\r\n * @returns 是否是Object\r\n */\r\nexport function isObject(value: any) {\r\n  return (\r\n    typeof value === 'object' &&\r\n    value !== null &&\r\n    Object.prototype.toString.call(value) === '[object Object]'\r\n  )\r\n}\r\n\r\n/**\r\n * 概率函数\r\n * @param a 分子\r\n * @param b 分母\r\n * @returns 在概率(a/b)下，本次运行是否触发\r\n */\r\nexport function probability(a: number, b: number): boolean {\r\n  if (a <= 0 || b <= 0) {\r\n    throw new Error('输入的a和b必须大于0')\r\n  }\r\n  const random = Math.random()\r\n  return random < a / b\r\n}\r\n\r\n/**\r\n * 判断是否在时间区间内部\r\n * @param timePeriods 时间区间数据\r\n * @returns 是否在时间区间内部\r\n */\r\nexport function isInTimeInterval(timePeriods: Array<[number, number]>): boolean {\r\n  // 获取当前时间\r\n  const now = new Date()\r\n  const hours = now.getHours()\r\n  const minutes = now.getMinutes()\r\n\r\n  // 将当前时间转换为分钟\r\n  const currentMinutes = hours * 60 + minutes\r\n\r\n  // 遍历时间区间列表\r\n  for (const [start, end] of timePeriods) {\r\n    // 将时间区间的开始和结束时间转换为分钟\r\n    const startMinutes = start * 60\r\n    const endMinutes = end === 24 ? 24 * 60 : end * 60 // 如果结束时间是24，转换为1440\r\n\r\n    // 检查当前时间是否在时间区间内\r\n    // 如果当前时间大于等于开始时间，并且小于结束时间\r\n    if (currentMinutes >= startMinutes && currentMinutes < endMinutes) {\r\n      return true\r\n    }\r\n  }\r\n\r\n  // 如果当前时间不在任何时间区间内，返回false\r\n  return false\r\n}\r\n\r\n/**\r\n * 创建一个连点校验函数\r\n * @param time 点击最大间隔时间\r\n * @param amount 点击次数\r\n * @returns 触发函数\r\n */\r\nexport function createQuickClickJudge(time = 400, amount = 5) {\r\n  let now = 0\r\n  let timer: NodeJS.Timeout | null = null\r\n  return function <T extends (...args: any[]) => void>(func: T) {\r\n    if (timer) clearTimeout(timer)\r\n    timer = setTimeout(() => {\r\n      now = 0\r\n    }, time)\r\n    now++\r\n    if (now >= amount) {\r\n      func()\r\n    }\r\n  }\r\n}\r\n","import type { RouteLocationNormalized } from 'vue-router'\r\nimport type { Elfland } from '..'\r\n\r\nexport abstract class ElflandAddon {\r\n  protected readonly __elfland: Elfland\r\n\r\n  constructor(elfland: Elfland) {\r\n    this.__elfland = elfland\r\n\r\n    elfland.on('loaded', this.loadedCallback, this)\r\n  }\r\n\r\n  abstract loadedCallback(): void\r\n\r\n  /**\r\n   * 去往的页面的name是否是输入的name\r\n   * @param to RouteLocationNormalized\r\n   * @param name string\r\n   * @returns boolean\r\n   */\r\n  is(to: RouteLocationNormalized, name: string): boolean {\r\n    return to.name === name\r\n  }\r\n\r\n  /**\r\n   * 去往的页面的路由是否包含输入的name\r\n   * @param to RouteLocationNormalized\r\n   * @param name string\r\n   * @returns boolean\r\n   */\r\n  includes(to: RouteLocationNormalized, name: string): boolean {\r\n    return to.matched.find(item => item.name === name) !== undefined\r\n  }\r\n}\r\n","import type { Elfland } from '../elfland/core'\r\nimport { ref, watch } from 'vue'\r\nimport { localGet, localSet } from '../elfland/utils'\r\nimport { ElflandAddon } from '../elfland/core/addon-base'\r\n\r\nexport type ElflandTheme = 'light' | 'dark'\r\n\r\nexport class Theme extends ElflandAddon {\r\n  static readonly KEY = 'THEME'\r\n  readonly theme = ref<ElflandTheme>('light')\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n\r\n    let t = localGet(Theme.KEY, 'light')\r\n    t = t === 'light' ? 'light' : 'dark'\r\n    localSet('THEME', t)\r\n    this.theme.value = t as ElflandTheme\r\n    if (t === 'dark') {\r\n      document.documentElement.classList.add('dark')\r\n      this.__elfland.emit('theme-change', 'dark')\r\n    }\r\n\r\n    watch(this.theme, (newValue) => {\r\n      newValue = newValue === 'light' ? 'light' : 'dark'\r\n      this.__elfland.emit('theme-change', newValue)\r\n      if (newValue === 'dark') {\r\n        document.documentElement.classList.add('dark')\r\n      } else {\r\n        document.documentElement.classList.remove('dark')\r\n      }\r\n      localSet(Theme.KEY, newValue)\r\n    })\r\n  }\r\n\r\n  toggle() {\r\n    this.theme.value = this.theme.value === 'light' ? 'dark' : 'light'\r\n  }\r\n\r\n  loadedCallback(): void {}\r\n}\r\n","import EventEmitter from 'eventemitter3'\r\n\r\nexport enum PromiseHelperState {\r\n  UNINIT,\r\n  WAITING,\r\n  PENDING,\r\n  RESOLVED,\r\n  REJECTED\r\n}\r\n\r\ntype PromiseHelperMapItem = {\r\n  promise: Promise<void>\r\n  resolve: (value: void | PromiseLike<void>) => void\r\n  reject: (reason?: any) => void\r\n}\r\n\r\nexport class PromiseHelper extends Map<string, Promise<void>> {\r\n  private ee = new EventEmitter()\r\n  private _corePromiseMap = new Map<string, Promise<void>>()\r\n\r\n  private initPromise(id: string) {\r\n    if (!this.has(id)) {\r\n      const p = new Promise<void>((resolve, reject) => {\r\n        const rse = id + '-resolve'\r\n        const rje = id + '-reject'\r\n        const rs = () => {\r\n          resolve()\r\n          this.ee.off(rse, rs)\r\n          this.ee.off(rje, rj)\r\n        }\r\n        const rj = () => {\r\n          reject()\r\n          this.ee.off(rse, rs)\r\n          this.ee.off(rje, rj)\r\n        }\r\n        this.ee.on(rse, rs)\r\n        this.ee.on(rje, rs)\r\n      })\r\n      this.set(id, p)\r\n    }\r\n  }\r\n\r\n  getPromise(id: string) {\r\n    this.initPromise(id)\r\n    return this.get(id) as Promise<void>\r\n  }\r\n\r\n  setPromise(id: string, promise: Promise<void>) {\r\n    this.initPromise(id)\r\n    this._corePromiseMap.set(id, promise)\r\n    const rse = id + '-resolve'\r\n    const rje = id + '-reject'\r\n    promise\r\n      .then(() => {\r\n        this.ee.emit(rse)\r\n      })\r\n      .catch(() => {\r\n        this.ee.emit(rje)\r\n      })\r\n  }\r\n}\r\n\r\nexport enum DefPromiseHelperState {\r\n  READY,\r\n  PENDING,\r\n  RESOLVED,\r\n  REJECTED\r\n}\r\n\r\nexport class DefPromiseHelper {\r\n  private __promise: Promise<void>\r\n  private __ee: EventEmitter\r\n  private __state: DefPromiseHelperState = DefPromiseHelperState.READY\r\n\r\n  /**\r\n   * 无实际意义\r\n   */\r\n  get state() {\r\n    return this.__state\r\n  }\r\n\r\n  /**\r\n   * 校验promise\r\n   */\r\n  get promise() {\r\n    return this.__promise\r\n  }\r\n\r\n  constructor() {\r\n    this.__ee = new EventEmitter()\r\n    this.__promise = new Promise((resolve, reject) => {\r\n      this.__ee.on('resolve', () => {\r\n        resolve()\r\n      })\r\n      this.__ee.on('reject', () => {\r\n        reject()\r\n      })\r\n    })\r\n    this.__state = DefPromiseHelperState.PENDING\r\n  }\r\n\r\n  /**\r\n   * 用resolve来解决所有的情况\r\n   */\r\n  resolve() {\r\n    this.__ee.emit('resolve')\r\n    this.__state = DefPromiseHelperState.RESOLVED\r\n  }\r\n\r\n  /**\r\n   * 禁用reject，否则await可能会抛出异常\r\n   */\r\n  private reject() {\r\n    this.__ee.emit('reject')\r\n    this.__state = DefPromiseHelperState.REJECTED\r\n  }\r\n}\r\n","import type { Elfland } from '@/core/elfland/core'\r\nimport { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport { DefPromiseHelper } from '@/core/elfland/core/promise-helper'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\nimport type { DataResJson } from '../types'\r\n\r\nexport class Data extends ElflandAddon {\r\n  private __dataIsGotten: boolean = false\r\n  private __dataPromise: DefPromiseHelper = new DefPromiseHelper()\r\n  private __data: DataResJson | null = null\r\n\r\n  get waitingDataGet() {\r\n    return this.__dataPromise.promise\r\n  }\r\n\r\n  get data() {\r\n    return this.__data\r\n  }\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (this.__dataIsGotten) return\r\n    try {\r\n      const res = await fetch('/data/RES.json')\r\n      const json = await res.json() as DataResJson\r\n      this.__data = json\r\n      this.__dataPromise.resolve()\r\n      this.__dataIsGotten = true\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n}\r\n","import type { DocDataItem } from '@/core/elfland-addon-data'\r\nimport type { Articles } from '.'\r\nimport { deepClone } from '@/core/elfland/utils'\r\n\r\nexport class Category {\r\n  readonly category: string\r\n  readonly child: Category | null = null\r\n  constructor(categories: string[]) {\r\n    this.category = categories[0] || '未分组'\r\n    categories.shift()\r\n    if (categories.length > 0) this.child = new Category(categories)\r\n  }\r\n}\r\n\r\nexport class Tag {\r\n  readonly tag: string\r\n  constructor(tag: string) {\r\n    this.tag = tag\r\n  }\r\n}\r\n\r\nexport class Link {\r\n  readonly id: number\r\n  readonly title: string\r\n  readonly path: string\r\n\r\n  constructor(id: number, title: string, path: string) {\r\n    this.id = id\r\n    this.title = title\r\n    this.path = path\r\n  }\r\n}\r\n\r\nexport class Article {\r\n  readonly id: number\r\n  readonly title: string\r\n  readonly titlePinYin: string\r\n  readonly path: string\r\n  readonly time: string\r\n  readonly author: string\r\n  readonly body: string\r\n  readonly categories: Category\r\n  readonly tags: Tag[]\r\n  readonly links: Link[]\r\n  readonly created: Date\r\n  readonly modified: Date\r\n  readonly prev: {\r\n    title: string\r\n    path: string\r\n  }\r\n  readonly next: {\r\n    title: string\r\n    path: string\r\n  }\r\n  constructor(data: DocDataItem, articles: Articles) {\r\n    data = deepClone(data)\r\n    this.id = data.id\r\n    this.title = data.title\r\n    this.titlePinYin = data.titlePinYin\r\n    this.path = data.path\r\n    this.time = data.time\r\n    this.author = data.author\r\n    this.body = data.body\r\n    this.created = new Date(data.created)\r\n    this.modified = new Date(data.modified)\r\n    this.categories = new Category(data.categories)\r\n    this.tags = Array.from(new Set(data.tags)).map(t => new Tag(t))\r\n    this.links = data.links.map(l => {\r\n      const { id, path } = articles.getIdAndPath(l)\r\n      return new Link(id, l, path)\r\n    })\r\n    const pn = articles.getPrevAndNextById(data.id)\r\n    this.prev = pn.prev\r\n    this.next = pn.next\r\n  }\r\n}\r\n","import type { Elfland } from '@/core/elfland/core'\r\nimport { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport { DefPromiseHelper } from '@/core/elfland/core/promise-helper'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\nimport { Article } from './article'\r\nimport { computed, reactive, ref, type ComputedRef, type Reactive, type Ref, type WritableComputedRef } from 'vue'\r\nimport { type ArchivesSortMethod } from '../types'\r\n\r\nexport class Articles extends ElflandAddon {\r\n  private __articlesIsGotten: boolean = false\r\n  private __articlesPromise: DefPromiseHelper = new DefPromiseHelper()\r\n\r\n  private __id2article: Reactive<Map<number, Article>> = reactive(new Map())\r\n  private __id2path: Map<number, string> = new Map()\r\n  private __path2id: Map<string, number> = new Map()\r\n  private __id2title: Map<number, string> = new Map()\r\n  private __title2id: Map<string, number> = new Map()\r\n  private __articles: ComputedRef<Article[]> = computed(() => {\r\n    const list = Array.from(this.__id2article.values())\r\n    list.sort((a, b) => b.created.getTime() - a.created.getTime())\r\n    return list\r\n  })\r\n  readonly archivesSortMethodSelected: Ref<ArchivesSortMethod> = ref('ByCreated')\r\n  readonly archivesSortMethodOptions: ComputedRef<ArchivesSortMethod[]> = computed(() => {\r\n    return [\r\n      'ByCreated',\r\n      'ByModified',\r\n      'ByTitlePinYin'\r\n    ]\r\n  })\r\n  private __sortMethodIsAsc: Reactive<Record<ArchivesSortMethod, boolean>> = reactive({\r\n    ByCreated: false,\r\n    ByModified: false,\r\n    ByTitlePinYin: true\r\n  })\r\n  readonly archivesSortMethodIsAsc: WritableComputedRef<boolean, boolean> = computed({\r\n    get: () => this.__sortMethodIsAsc[this.archivesSortMethodSelected.value],\r\n    set: (val) => {\r\n      this.__sortMethodIsAsc[this.archivesSortMethodSelected.value] = val\r\n    }\r\n  })\r\n  readonly sortedArchives: ComputedRef<Article[]> = computed(() => {\r\n    const list = Array.from(this.__id2article.values())\r\n    list.sort((a, b) => {\r\n      switch (this.archivesSortMethodSelected.value) {\r\n        case 'ByCreated':\r\n          return this.archivesSortMethodIsAsc.value ? a.created.getTime() - b.created.getTime() : b.created.getTime() - a.created.getTime()\r\n        case 'ByModified':\r\n          return this.archivesSortMethodIsAsc.value ? a.modified.getTime() - b.modified.getTime() : b.modified.getTime() - a.modified.getTime()\r\n        case 'ByTitlePinYin':\r\n          return this.archivesSortMethodIsAsc.value ? a.titlePinYin.localeCompare(b.titlePinYin) : b.titlePinYin.localeCompare(a.titlePinYin)\r\n      }\r\n    })\r\n    return list\r\n  })\r\n\r\n  get articles() {\r\n    return this.__articles\r\n  }\r\n\r\n  get waitingDataGet() {\r\n    return this.__articlesPromise.promise\r\n  }\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (this.__articlesIsGotten) return\r\n    try {\r\n      await this.__elfland.data.waitingDataGet\r\n      const data = this.__elfland.data.data\r\n      if (data === null) return\r\n      data.docs.forEach(d => {\r\n        this.__id2path.set(d.id, d.path)\r\n        this.__path2id.set(d.path, d.id)\r\n        this.__id2title.set(d.id, d.title)\r\n        this.__title2id.set(d.title, d.id)\r\n      })\r\n      data.docs.forEach(d => {\r\n        this.__id2article.set(d.id, new Article(d, this))\r\n      })\r\n      this.__articlesIsGotten = true\r\n      this.__articlesPromise.resolve()\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  getIdAndPath(title: string): { id: number, path: string } {\r\n    const id = this.__title2id.get(title) || -1\r\n    const path = this.__id2path.get(id) || ''\r\n    return { id, path }\r\n  }\r\n\r\n  getPrevAndNextById(id: number): { prev: { path: string, title: string }, next: { path: string, title: string }} {\r\n    const list = Array.from(this.__id2path.keys())\r\n    const i = list.indexOf(id)\r\n    if (i === -1) return { prev: { path: '', title: '' }, next: { path: '', title: '' }}\r\n    const pi = i - 1 < 0 ? list.length - 1 : i - 1\r\n    const ni = i + 1 >= list.length ? 0 : i + 1\r\n    const pid = list[pi]\r\n    const nid = list[ni]\r\n    const prev = {\r\n      path: this.__id2path.get(pid) as string,\r\n      title: this.__id2title.get(pid) as string\r\n    }\r\n    const next = {\r\n      path: this.__id2path.get(nid) as string,\r\n      title: this.__id2title.get(nid) as string\r\n    }\r\n    return { prev, next }\r\n  }\r\n\r\n  getArticleByPath(path: string): Article | null {\r\n    const id = this.__path2id.get(path)\r\n    if (id === undefined) return null\r\n    const art = this.__id2article.get(id)\r\n    if (art === undefined) return null\r\n    return art\r\n  }\r\n}\r\n","export class Link {\r\n  readonly id: number\r\n  readonly path: string\r\n  readonly title: string\r\n\r\n  readonly in: Link[] = []\r\n  readonly out: Link[] = []\r\n\r\n  constructor(id: number, path: string, title: string) {\r\n    this.id = id\r\n    this.path = path\r\n    this.title = title\r\n  }\r\n}\r\n","import { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\nimport { Link } from './link'\r\nimport type { Elfland } from '@/core/elfland/core'\r\nimport * as echarts from 'echarts/core'\r\nimport { watch, type WatchHandle } from 'vue'\r\n\r\nimport { GraphChart } from 'echarts/charts'\r\n\r\nimport {\r\n  TooltipComponent,\r\n  TitleComponent,\r\n  LegendComponent,\r\n  GridComponent\r\n} from 'echarts/components'\r\n\r\nimport { CanvasRenderer } from 'echarts/renderers'\r\n\r\necharts.use([\r\n  GraphChart as any,\r\n  TooltipComponent,\r\n  TitleComponent,\r\n  LegendComponent,\r\n  GridComponent,\r\n  CanvasRenderer\r\n])\r\n\r\nexport class Links extends ElflandAddon {\r\n  private __linksIsGotten: boolean = false\r\n  private __linksData: Map<number, Link> = new Map()\r\n  private __linksRenderData: { nodes: { id: string, name: string, path: string, category: string}[], links: { source: string, target: string }[]} = {\r\n    nodes: [],\r\n    links: []\r\n  }\r\n\r\n  private __chartElement: HTMLDivElement | null = null\r\n  private __myChart: echarts.ECharts | null = null\r\n  private __watchHandleTheme: WatchHandle | null = null\r\n  private __windowResizeFunc: any\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n\r\n    this.__windowResizeFunc = this.resize.bind(this)\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (this.__linksIsGotten) return\r\n    try {\r\n      await this.__elfland.articles.waitingDataGet\r\n      const articles = this.__elfland.articles.articles.value\r\n      articles.forEach(a => {\r\n        const linkIns = new Link(a.id, a.path, a.title)\r\n        this.__linksData.set(a.id, linkIns)\r\n        this.__linksRenderData.nodes.push({\r\n          id: a.id.toString(),\r\n          name: a.title,\r\n          path: a.path,\r\n          category: 'A'\r\n        })\r\n      })\r\n      articles.forEach(a => {\r\n        const nLink = this.__linksData.get(a.id) as Link\r\n        a.links.forEach(l => {\r\n          const link = this.__linksData.get(l.id)\r\n          if (link) {\r\n            link.in.push(nLink)\r\n            nLink.out.push(link)\r\n            const sid = Math.min(nLink.id, link.id)\r\n            const tid = Math.max(nLink.id, link.id)\r\n            this.__linksRenderData.links.push({\r\n              source: sid.toString(),\r\n              target: tid.toString()\r\n            })\r\n          }\r\n        })\r\n      })\r\n      /** 过滤重复的边 */\r\n      this.__linksRenderData.links = this.__linksRenderData.links.filter((l, i, arr) => {\r\n        return arr.findIndex(l2 => l2.source === l.source && l2.target === l.target) === i\r\n      })\r\n      this.__linksIsGotten = true\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  getLinks(id: number) {\r\n    return this.__linksData.get(id)\r\n  }\r\n\r\n  render(chartElement: HTMLDivElement) {\r\n    this.__chartElement = chartElement\r\n    if (this.__watchHandleTheme) this.__watchHandleTheme.stop()\r\n    this.distory()\r\n    const res = this.renderChart()\r\n    this.__watchHandleTheme = watch(this.__elfland.theme.theme, (newVal) => {\r\n      if (this.__myChart) {\r\n        this.__myChart.dispose()\r\n        this.__myChart = null\r\n      }\r\n      this.renderChart()\r\n    })\r\n    return res\r\n  }\r\n\r\n  distory() {\r\n    window.removeEventListener('resize', this.__windowResizeFunc)\r\n    if (this.__myChart) {\r\n      this.__myChart.dispose()\r\n      this.__myChart = null\r\n    }\r\n    if (this.__watchHandleTheme) {\r\n      this.__watchHandleTheme.stop()\r\n    }\r\n  }\r\n\r\n  private renderChart() {\r\n    if (this.__chartElement === null) return\r\n    const theme = this.__elfland.theme.theme.value\r\n    const data = this.__linksRenderData\r\n    const option: echarts.EChartsCoreOption = {\r\n      title: {\r\n        text: '关系图谱',\r\n        subtext: '点击结点以跳转文章',\r\n        top: '20px',\r\n        left: '20px'\r\n      },\r\n      tooltip: {\r\n        show: false\r\n      },\r\n      backgroundColor: 'rgba(0, 0, 0, 0)',\r\n      series: [\r\n        {\r\n          type: 'graph',\r\n          layout: 'force', // 使用自定义布局\r\n          symbolSize: 20,\r\n          roam: true,\r\n          label: {\r\n            show: true,\r\n            color: theme === 'dark' ? '#fff' : '#000',\r\n            fontSize: 12,\r\n            position: 'bottom'\r\n          },\r\n          force: {\r\n            repulsion: 5000\r\n          },\r\n          edgeSymbol: ['none', 'none'],\r\n          edgeSymbolSize: [4, 10],\r\n          edgeLabel: {\r\n            show: false\r\n          },\r\n          data: data.nodes,\r\n          links: data.links,\r\n          categories: [{ name: 'A', itemStyle: { color: '#4fadff' }}],\r\n          lineStyle: {\r\n            opacity: 0.9,\r\n            width: 2\r\n          },\r\n          emphasis: {\r\n            focus: 'adjacency'\r\n          },\r\n          draggable: true // 允许节点拖动\r\n        }\r\n      ]\r\n    }\r\n    this.__myChart = echarts.init(this.__chartElement, theme === 'light' ? undefined : 'dark')\r\n    this.__myChart.setOption(option)\r\n    this.__myChart.on('click', (params) => {\r\n      if (params.dataType === 'node' && params.data) {\r\n        const data = params.data as { id: number, path: string, name: string}\r\n        this.__elfland.routerPromise.router.push({\r\n          name: 'article',\r\n          params: {\r\n            articlePath: data.path as string\r\n          }\r\n        })\r\n      }\r\n    })\r\n    window.addEventListener('resize', this.__windowResizeFunc)\r\n    return true\r\n  }\r\n\r\n  private resize() {\r\n    if (this.__myChart) {\r\n      this.__myChart.resize()\r\n    }\r\n  }\r\n}\r\n","import MarkdownItContainer from 'markdown-it-container'\r\nimport type MarkdownIt from 'markdown-it'\r\nimport type Token from 'markdown-it/lib/token.mjs'\r\nfunction initContainers(md: MarkdownIt) {\r\n  const list = ['warning', 'tip', 'info', 'success']\r\n  list.forEach((item) => {\r\n    md.use(MarkdownItContainer, item, {\r\n      render: function (tokens: Token[], idx: number) {\r\n        if (tokens[idx].nesting === 1) {\r\n          // opening tag\r\n          return (\r\n            '<div class=\"md-c-c md-c-c--' + item + '\"><p>' + item.toLocaleUpperCase() + '</p>\\n'\r\n          )\r\n        } else {\r\n          // closing tag\r\n          return '</div>\\n'\r\n        }\r\n      }\r\n    })\r\n  })\r\n}\r\nfunction initMarkdownItContainer(md: MarkdownIt) {\r\n  initContainers(md)\r\n\r\n  md.use(MarkdownItContainer, 'details', {\r\n    validate: function (params: any) {\r\n      return params.trim().match(/^details\\s+(.*)$/)\r\n    },\r\n    render: function (tokens: Token[], idx: number) {\r\n      const m = tokens[idx].info.trim().match(/^details\\s+(.*)$/)\r\n\r\n      if (tokens[idx].nesting === 1 && m) {\r\n        // opening tag\r\n        return '<details><summary>' + md.utils.escapeHtml(m[1]) + '</summary>\\n'\r\n      } else {\r\n        // closing tag\r\n        return '</details>\\n'\r\n      }\r\n    }\r\n  })\r\n  md.use(MarkdownItContainer, 'image', {\r\n    validate: function (params: any) {\r\n      return params.trim().match(/^image\\s+(.*)$/)\r\n    },\r\n    render: function (tokens: Token[], idx: number) {\r\n      // 去node_modules\\markdown-it-container\\index.mjs\r\n      // 将118行复制到125行下面并且改为\r\n      // token_c.info   = params\r\n      //\r\n      const m = tokens[idx].info.trim().match(/^image\\s+(.*)$/)\r\n\r\n      if (tokens[idx].nesting === 1) {\r\n        // opening tag\r\n        return '<div class=\"md-c-img\">\\n'\r\n      } else {\r\n        // closing tag\r\n        // 在closing tag使用info信息需要去改源码\r\n        if (m === null) return '</div>'\r\n        return '<span>' + (m[1] === 'null' ? '' : md.utils.escapeHtml(m[1])) + '</span></div>\\n'\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport default [initMarkdownItContainer]\r\n","import { full as MarkdownItEmoji } from 'markdown-it-emoji'\r\nfunction initMarkdownItEmoji(md: MarkdownIt) {\r\n  md.use(MarkdownItEmoji)\r\n}\r\n\r\nimport MarkdownItAnchor from 'markdown-it-anchor'\r\nfunction initMarkdownItAnchor(md: MarkdownIt) {\r\n  md.use(MarkdownItAnchor, {\r\n    permalink: MarkdownItAnchor.permalink.linkInsideHeader({\r\n      placement: 'before'\r\n    })\r\n  })\r\n}\r\n\r\nimport MarkdownItTocDoneRight from 'markdown-it-toc-done-right'\r\nfunction initMarkdownItTocDoneRight(md: MarkdownIt, elflandRenderer: any) {\r\n  md.use(MarkdownItTocDoneRight, {\r\n    listType: 'ul',\r\n    level: [1],\r\n    callback: (html: any, ast: any) => {\r\n      elflandRenderer.renderToc(html, ast)\r\n    }\r\n  })\r\n}\r\n\r\nimport MarkdownItKatex from 'markdown-it-katex'\r\nimport type MarkdownIt from 'markdown-it'\r\nfunction initMarkdownItKatex(md: MarkdownIt) {\r\n  md.use(MarkdownItKatex, {\r\n    throwOnError: false,\r\n    errorColor: '#cc0000'\r\n  })\r\n}\r\n\r\nexport default [\r\n  initMarkdownItEmoji,\r\n  initMarkdownItAnchor,\r\n  initMarkdownItTocDoneRight,\r\n  initMarkdownItKatex\r\n]\r\n","import MarkdownItFootnote from 'markdown-it-footnote'\r\nfunction initMarkdownItFootnote(md: MarkdownIt) {\r\n  md.use(MarkdownItFootnote)\r\n}\r\n\r\nimport MarkdownItAbbr from 'markdown-it-abbr'\r\nfunction initMarkdownItAbbr(md: MarkdownIt) {\r\n  md.use(MarkdownItAbbr)\r\n}\r\n\r\nimport MarkdownItSub from 'markdown-it-sub'\r\nfunction initMarkdownItSub(md: MarkdownIt) {\r\n  md.use(MarkdownItSub)\r\n}\r\nimport MarkdownItSup from 'markdown-it-sup'\r\nfunction initMarkdownItSup(md: MarkdownIt) {\r\n  md.use(MarkdownItSup)\r\n}\r\n\r\n// import MarkdownItTextualUml from 'markdown-it-textual-uml'\r\n// function initMarkdownItTextualUml(md) {\r\n//   md.use(MarkdownItTextualUml)\r\n// }\r\n\r\nimport { plantuml } from '@mdit/plugin-plantuml'\r\nimport type MarkdownIt from 'markdown-it'\r\nfunction initMarkdownItPlantuml(md: MarkdownIt) {\r\n  md.use(plantuml)\r\n}\r\n\r\nexport default [\r\n  initMarkdownItFootnote,\r\n  initMarkdownItAbbr,\r\n  initMarkdownItSub,\r\n  initMarkdownItSup,\r\n  initMarkdownItPlantuml\r\n]\r\n","import type MarkdownIt from 'markdown-it'\r\nimport type Token from 'markdown-it/lib/token.mjs'\r\nimport type { Options } from 'markdown-it'\r\nimport type Renderer from 'markdown-it/lib/renderer.mjs'\r\n\r\nfunction initImage(md: MarkdownIt, elflandRenderer: any, meta: any) {\r\n  const baseUrl = meta ? meta.baseUrl || '' : ''\r\n  const defaultImage = md.renderer.rules.image\r\n  function image(tokens: Token[], idx: number, options: Options, env: any, slf: Renderer) {\r\n    const url = tokens[idx].attrGet('src') || ''\r\n    if (\r\n      url.startsWith('http://') ||\r\n      url.startsWith('https://') ||\r\n      url.startsWith('data:image') ||\r\n      url.startsWith('file://') ||\r\n      url.startsWith('blob:')\r\n    ) {\r\n      if (defaultImage === undefined) return ''\r\n      return defaultImage(tokens, idx, options, env, slf)\r\n    } else {\r\n      tokens[idx].attrSet('src', baseUrl + '/data/assets/' + url)\r\n      if (defaultImage === undefined) return ''\r\n      return defaultImage(tokens, idx, options, env, slf)\r\n    }\r\n  }\r\n  md.renderer.rules.image = image\r\n}\r\n\r\nexport default [initImage]\r\n","export default function LayoutPlugin(md: any, name: string, options: any) {\r\n  function renderDefault(tokens: any[], idx: number, _options: any, env: any, slf: any) {\r\n    // add a class to the opening tag\r\n    if (tokens[idx].nesting === 1) {\r\n      tokens[idx].attrJoin('class', name)\r\n    }\r\n    return slf.renderToken(tokens, idx, _options, env, slf)\r\n  }\r\n\r\n  options = options || {}\r\n  const markerBegin = '{('\r\n  const markerEnd = ')}'\r\n  const layoutBegin = options.begin || 'begin'\r\n  const layoutEnd = options.end || 'end'\r\n  const indent = options.indent || false\r\n  const indentSize = options.indentSize || 4\r\n  const className = options.className || ''\r\n\r\n  const render = options.render || renderDefault\r\n\r\n  function findMarker(state: any, start: number, max: number, line: number) {\r\n    // 在行内寻找marker\r\n    let pos: number\r\n\r\n    // 检查是否是以markerBegin起始\r\n    // 这样可以快速过滤\r\n    //\r\n    if (markerBegin !== state.src.slice(start, start + 2)) {\r\n      return false\r\n    }\r\n\r\n    // 在此行内寻找markerEnd\r\n    // 需要注意，在出现markEnd之后的内容无效\r\n    //\r\n    let find = false\r\n    for (pos = start + 2; pos < max; pos++) {\r\n      if (state.src.slice(pos, pos + 2) === markerEnd) {\r\n        find = true\r\n        break\r\n      }\r\n    }\r\n    if (!find) {\r\n      return false\r\n    }\r\n\r\n    // 处理其中的内容\r\n    //\r\n    const dataStr = state.src.slice(start + 2, pos)\r\n    const data = dataStr.split('|').map((item: string) => item.trim())\r\n    const markup = markerBegin + dataStr + markerEnd\r\n    let self = false\r\n\r\n    // 检查data是否以layoutBegin或者layoutEnd开头\r\n    // layoutBegin 后面必须要跟 name\r\n    //\r\n    let markerType: number\r\n    if (data[0] === layoutBegin) {\r\n      markerType = 1\r\n      if (data[1] === name) {\r\n        self = true\r\n      }\r\n    } else if (data[0] === layoutEnd) {\r\n      markerType = -1\r\n    } else {\r\n      return false\r\n    }\r\n    // 返回marker数据\r\n    //\r\n    return {\r\n      markerType,\r\n      data,\r\n      markup,\r\n      line: line,\r\n      self\r\n    }\r\n  }\r\n\r\n  function findPairOfMarkers(state: any, startLine: number, endLine: number, silent: boolean) {\r\n    // 找到一对marker\r\n    // 要考虑到嵌套关系\r\n    //\r\n    let markerLevel = 0\r\n    let line = startLine\r\n    let markerBegin: any = null\r\n    let markerEnd: any = null\r\n    for (; line < endLine; line++) {\r\n      const start = state.bMarks[line] + state.tShift[line]\r\n      const max = state.eMarks[line]\r\n      const marker = findMarker(state, start, max, line)\r\n      if (marker) {\r\n        if (marker.markerType === 1) {\r\n          // begin\r\n          if (markerBegin === null && marker.self) {\r\n            markerBegin = marker\r\n\r\n            // Since start is found, we can report success here in validation mode\r\n            //\r\n            if (silent) {\r\n              return true\r\n            }\r\n          } else {\r\n            if (markerBegin === null) {\r\n              return false\r\n            }\r\n            markerLevel++\r\n          }\r\n        } else {\r\n          // end\r\n          if (markerLevel === 0 && markerBegin !== null) {\r\n            // finish!\r\n            markerEnd = marker\r\n            break\r\n          } else {\r\n            markerLevel--\r\n          }\r\n        }\r\n      } else {\r\n        if (markerBegin === null) {\r\n          return false\r\n        } else {\r\n          continue\r\n        }\r\n      }\r\n      // console.log('marker', marker, line, markerLevel)\r\n    }\r\n    if (markerBegin && markerEnd) {\r\n      return {\r\n        markerBegin,\r\n        markerEnd\r\n      }\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  function subtractIndent(state: any, startLine: number, endLine: number) {\r\n    // console.log('subtractIndent', state.sCount, state.bsCount, state.tShift)\r\n    for (let i = startLine + 1; i < endLine; i++) {\r\n      // state.sCount[i] -= indentSize\r\n    }\r\n    // console.log('subtractIndent --', state.sCount)\r\n  }\r\n\r\n  function layout(state: any, startLine: number, endLine: number, silent: boolean) {\r\n    const markers = findPairOfMarkers(state, startLine, endLine, silent)\r\n    if (!markers) return false\r\n    if (markers === true) return true\r\n\r\n    // console.log('subtractIndent', state.blkIndent, state.listIndent)\r\n    if (indent) {\r\n      subtractIndent(state, markers.markerBegin.line, markers.markerEnd.line)\r\n    }\r\n\r\n    const oldParent = state.parentType\r\n    const oldLineMax = state.lineMax\r\n    state.parentType = 'layout'\r\n\r\n    // this will prevent lazy continuations from ever going past our end marker\r\n    state.lineMax = markers.markerEnd.line\r\n\r\n    const token_o = state.push('layout_' + name + '_open', 'div', 1)\r\n    token_o.markup = markers.markerBegin.markup\r\n    token_o.block = true\r\n    token_o.meta = {\r\n      data: markers.markerBegin.data,\r\n      className\r\n    }\r\n    token_o.map = [markers.markerBegin.line, markers.markerEnd.line]\r\n    // console.log('layout 开始', markers.markerBegin, state.level, state.blkIndent, state.listIndent)\r\n    state.md.block.tokenize(state, startLine + 1, markers.markerEnd.line)\r\n    const token_c = state.push('layout_' + name + '_close', 'div', -1)\r\n    token_c.markup = markers.markerEnd.markup\r\n    token_c.block = true\r\n    token_c.meta = {\r\n      data: markers.markerEnd.data\r\n    }\r\n    // console.log('layout 结束', markers.markerBegin, state.level)\r\n    state.parentType = oldParent\r\n    state.lineMax = oldLineMax\r\n    state.line = markers.markerEnd.line + 1\r\n    return true\r\n  }\r\n  md.block.ruler.before('fence', 'layout_' + name, layout, {\r\n    alt: ['paragraph', 'reference', 'blockquote', 'list']\r\n  })\r\n  md.renderer.rules['layout_' + name + '_open'] = render\r\n  md.renderer.rules['layout_' + name + '_close'] = render\r\n}\r\n","import type MarkdownIt from 'markdown-it'\r\nimport LayoutPlugin from '../plugin/layout'\r\nimport type Token from 'markdown-it/lib/token.mjs'\r\nfunction initLayoutPlugin(md: MarkdownIt) {\r\n  md.use(LayoutPlugin, 'container', {\r\n    className: 'md-layout-c',\r\n    render: function (tokens: Token[], idx: number) {\r\n      const ALLOW_STYLE_ATTR = [\r\n        ['w', 'width'],\r\n        ['h', 'height'],\r\n        ['style', 'style'],\r\n        ['class', 'class']\r\n      ]\r\n\r\n      if (tokens[idx].nesting === 1) {\r\n        let styleStr = ''\r\n        let classStr = tokens[idx].meta.className + ' '\r\n        tokens[idx].meta.data.forEach((data: any) => {\r\n          const key = data.split('=')[0]\r\n          const left = data.indexOf('=')\r\n          const value = data.slice(left + 1, data.length)\r\n          const item = ALLOW_STYLE_ATTR.find((i) => i[0] === key)\r\n          if (item) {\r\n            if (item[1] === 'style') {\r\n              styleStr += value\r\n            } else if (item[1] === 'class') {\r\n              classStr += value\r\n            } else {\r\n              styleStr += item[1] + ':' + value + ';'\r\n            }\r\n          }\r\n        })\r\n        // opening tag\r\n        return '<div class=\"' + (classStr === ' ' ? '' : classStr) + '\" style=\"' + styleStr + '\">\\n'\r\n      } else {\r\n        // closing tag\r\n        return '</div>\\n'\r\n      }\r\n    }\r\n  })\r\n  md.use(LayoutPlugin, 'item', {\r\n    className: 'md-layout-i',\r\n    render: function (tokens: Token[], idx: number) {\r\n      const ALLOW_STYLE_ATTR = [\r\n        ['w', 'width'],\r\n        ['h', 'height'],\r\n        ['style', 'style'],\r\n        ['class', 'class']\r\n      ]\r\n\r\n      if (tokens[idx].nesting === 1) {\r\n        let styleStr = ''\r\n        let classStr = tokens[idx].meta.className + ' '\r\n        tokens[idx].meta.data.forEach((data: any) => {\r\n          const key = data.split('=')[0]\r\n          const left = data.indexOf('=')\r\n          const value = data.slice(left + 1, data.length)\r\n          const item = ALLOW_STYLE_ATTR.find((i) => i[0] === key)\r\n          if (item) {\r\n            if (item[1] === 'style') {\r\n              styleStr += value\r\n            } else if (item[1] === 'class') {\r\n              classStr += value\r\n            } else {\r\n              styleStr += item[1] + ':' + value + ';'\r\n            }\r\n          }\r\n        })\r\n        // opening tag\r\n        return '<div class=\"' + (classStr === ' ' ? '' : classStr) + '\" style=\"' + styleStr + '\">\\n'\r\n      } else {\r\n        // closing tag\r\n        return '</div>\\n'\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport default [initLayoutPlugin]\r\n","import type MarkdownIt from 'markdown-it'\r\nimport type Token from 'markdown-it/lib/token.mjs'\r\nimport type Renderer from 'markdown-it/lib/renderer.mjs'\r\nimport type { Options } from 'markdown-it'\r\nimport type StateBlock from 'markdown-it/lib/rules_block/state_block.mjs'\r\n\r\ntype ConfigKey = string | string[]\r\n\r\ntype ConfigsDict = {\r\n  [property: string]: string | string[]\r\n}\r\n\r\nexport interface ComponentPluginOptions {\r\n  init?: (options: ComponentPluginOptions) => void\r\n  markerBegin?: string\r\n  markerEnd?: string\r\n  dataDivision?: string\r\n  configDivision?: string\r\n  useEqual?: boolean\r\n  useIndex?: boolean\r\n  configKeys?: ConfigKey[]\r\n  render?: (tokens: Token[], idx: number, _options: Options, env: any, slf: Renderer) => string\r\n  renderDivision?: (\r\n    tokens: Token[],\r\n    idx: number,\r\n    _options: Options,\r\n    env: any,\r\n    slf: Renderer\r\n  ) => string\r\n}\r\n\r\ntype FindStartRes =\r\n  | {\r\n      check: false\r\n    }\r\n  | {\r\n      check: true\r\n      name: boolean\r\n      pos?: number\r\n    }\r\n\r\ntype FindEndRes =\r\n  | {\r\n      check: false\r\n    }\r\n  | {\r\n      check: true\r\n      pos: number\r\n    }\r\n\r\ntype FindDataDRes =\r\n  | {\r\n      check: false\r\n    }\r\n  | {\r\n      check: true\r\n      pos: number\r\n    }\r\n\r\ntype AnsDataRes =\r\n  | {\r\n      check: false\r\n    }\r\n  | {\r\n      check: true\r\n      silent: true\r\n    }\r\n  | {\r\n      check: true\r\n      silent?: true\r\n      configList: string[]\r\n      dataList: Array<{ lineBegin: number; lineEnd: number }>\r\n      markerBeginData: {\r\n        markup: string\r\n        pos: number\r\n        line: number\r\n      }\r\n      markerEndData: {\r\n        markup: string\r\n        line: number\r\n      }\r\n    }\r\n\r\nexport default function componentPlugin(\r\n  md: MarkdownIt,\r\n  name: string | string[],\r\n  options?: ComponentPluginOptions\r\n) {\r\n  if (typeof name !== 'string' || name === '') return\r\n\r\n  const defaultName = Array.isArray(name) ? name[0] : name\r\n  const namesSet = new Set(Array.isArray(name) ? name : [name])\r\n\r\n  function renderDefault(tokens: Token[], idx: number, _options: Options, env: any, slf: Renderer) {\r\n    //\r\n    // add a class to the opening tag\r\n    //\r\n    if (tokens[idx].nesting === 1) {\r\n      tokens[idx].attrJoin('class', defaultName)\r\n    }\r\n    return slf.renderToken(tokens, idx, _options)\r\n  }\r\n\r\n  function renderDivisionDefault(\r\n    tokens: Token[],\r\n    idx: number,\r\n    _options: Options,\r\n    env: any,\r\n    slf: Renderer\r\n  ) {\r\n    return slf.renderToken(tokens, idx, _options)\r\n  }\r\n\r\n  options = options || {}\r\n\r\n  const markerBegin = options.markerBegin || '{|'\r\n  const markerEnd = options.markerEnd || '|}'\r\n  const dataDivision = options.dataDivision || '|-'\r\n  const configDivision = options.configDivision || '|'\r\n  //\r\n  // 为true则支持语法：config1 = xxx\r\n  //\r\n  const useEqual = options.useEqual || true\r\n  //\r\n  // 0 = xxx\r\n  // xxx\r\n  // ->\r\n  // 0: xxx\r\n  //\r\n  const useIndex = options.useIndex || false\r\n  //\r\n  // config keys\r\n  // 设置这个才能更好的使用 0=xxx\r\n  // 例如: 设置[\"color\"];md中写0=red\r\n  // 获得: { \"color\": \"red\" }\r\n  // 否则获得: { \"0\": \"red\" }\r\n  //\r\n  const configKeys = options.configKeys || []\r\n  //\r\n  // 配置映射关系\r\n  //\r\n  const confMap = buildConfMap(configKeys)\r\n\r\n  const render = options.render || renderDefault\r\n\r\n  const renderDivision = options.renderDivision || renderDivisionDefault\r\n\r\n  if (options.init instanceof Function) options.init(options)\r\n\r\n  function buildConfMap(configKeys: ConfigKey[]) {\r\n    const map = new Map<string, string>()\r\n    configKeys.forEach((conf) => {\r\n      if (Array.isArray(conf)) {\r\n        const base = conf[0]\r\n        conf.forEach((c) => {\r\n          map.set(base, c)\r\n        })\r\n      } else {\r\n        map.set(conf, conf)\r\n      }\r\n    })\r\n    return map\r\n  }\r\n\r\n  function isComponentBegin(state: StateBlock, start: number): FindStartRes {\r\n    // 在行内寻找 markerBegin\r\n    // markerBegin 必须是一行起始\r\n    //\r\n    const l = markerBegin.length\r\n    // 检查是否是以 markerBegin 起始\r\n    //\r\n    if (markerBegin !== state.src.slice(start, start + l)) {\r\n      return {\r\n        check: false\r\n      }\r\n    }\r\n\r\n    // 以 markerBegin 起始\r\n    // 检查后面是否跟着 自己的name\r\n    //\r\n    const p = state.src.indexOf(configDivision, start + l)\r\n    // console.log('configDivision', state.src, configDivision, p)\r\n    const n = state.src.slice(start + l, p).trim()\r\n    // console.log('n', n, namesSet)\r\n    if (!namesSet.has(n)) {\r\n      return {\r\n        check: true,\r\n        name: false\r\n      }\r\n    }\r\n\r\n    return {\r\n      check: true,\r\n      name: true,\r\n      pos: start + l + name.length\r\n    }\r\n  }\r\n\r\n  function isComponentEnd(state: StateBlock, start: number): FindEndRes {\r\n    // 在行内寻找 markerEnd\r\n    // markerEnd 必须是一行起始\r\n    // markerEnd 后面内容无效\r\n    //\r\n\r\n    // 检查是否是以 markerEnd 起始\r\n    //\r\n    if (markerEnd !== state.src.slice(start, start + markerEnd.length)) {\r\n      return {\r\n        check: false\r\n      }\r\n    }\r\n\r\n    return {\r\n      check: true,\r\n      pos: start\r\n    }\r\n  }\r\n\r\n  function isDataDivision(state: StateBlock, start: number): FindDataDRes {\r\n    // 在行内寻找 dataDivision\r\n    // dataDivision 必须是一行起始\r\n    // dataDivision 后面内容无效\r\n    //\r\n\r\n    // 检查是否是以 dataDivision 起始\r\n    //\r\n    if (dataDivision !== state.src.slice(start, start + dataDivision.length)) {\r\n      return {\r\n        check: false\r\n      }\r\n    }\r\n\r\n    return {\r\n      check: true,\r\n      pos: start\r\n    }\r\n  }\r\n\r\n  function analyseData(\r\n    state: StateBlock,\r\n    startLine: number,\r\n    endLine: number,\r\n    silent: boolean\r\n  ): AnsDataRes {\r\n    // 找到一对marker\r\n    // 要考虑到嵌套关系\r\n    //\r\n    let markerLevel = 0\r\n    let line = startLine\r\n    let markerBeginData = null\r\n    let markerEndData = null\r\n    let lastDataDivisionLine = -1\r\n    const dataList = []\r\n    let configList = null\r\n    for (; line < endLine; line++) {\r\n      const start = state.bMarks[line] + state.tShift[line]\r\n      const max = state.eMarks[line]\r\n      const res1 = isComponentBegin(state, start)\r\n      if (res1.check) {\r\n        if (res1.name) {\r\n          // 匹配到本模板的起始\r\n          // pos不包括前面的内容\r\n          // {|name|xxx|yyy|zzz...\r\n          //       ⬆\r\n          // pos指向'|'\r\n          //\r\n          if (markerBeginData) {\r\n            // 匹配到本模板开始\r\n            // 但已经存在本模板\r\n            // 为嵌套\r\n            //\r\n            markerLevel++\r\n          } else {\r\n            // 匹配到本模板开始\r\n            //\r\n            markerBeginData = {\r\n              markup: markerBegin,\r\n              pos: res1.pos as number,\r\n              line: line\r\n            }\r\n\r\n            // Since start is found, we can report success here in validation mode\r\n            //\r\n            if (silent) {\r\n              return {\r\n                check: true,\r\n                silent: true\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          // 匹配到模板开始，但是不是本模板\r\n          //\r\n          markerLevel++\r\n        }\r\n      } else {\r\n        if (markerBeginData === null) {\r\n          // 第一次就匹配失败\r\n          // 不是本组件\r\n          //\r\n          return {\r\n            check: false\r\n          }\r\n        }\r\n        // 没有匹配到模板开始\r\n        // 检查模板结束\r\n        const res2 = isComponentEnd(state, start)\r\n        if (res2.check) {\r\n          if (markerLevel === 0) {\r\n            markerEndData = {\r\n              markup: markerEnd,\r\n              line: line\r\n            }\r\n            // 匹配结束\r\n            //\r\n            if (lastDataDivisionLine !== -1) {\r\n              dataList.push({\r\n                lineBegin: lastDataDivisionLine + 1,\r\n                lineEnd: line\r\n              })\r\n            }\r\n            return {\r\n              configList: configList || [],\r\n              dataList,\r\n              check: true,\r\n              markerBeginData,\r\n              markerEndData\r\n            }\r\n          } else {\r\n            // 退出上层模板\r\n            //\r\n            markerLevel--\r\n          }\r\n        } else {\r\n          // 也没有匹配到模板结束\r\n          // 检查模板数据分隔符\r\n          //\r\n          const res3 = isDataDivision(state, start)\r\n          if (res3.check && markerLevel === 0) {\r\n            // 匹配到数据分隔符 且 是本组件的数据分割符\r\n            //\r\n            if (configList === null) {\r\n              // 还没有进行config设置\r\n              //\r\n              const configStr = state.src.slice(markerBeginData.pos, res3.pos)\r\n              configList = configStr\r\n                .split(configDivision)\r\n                .map((conf) => conf.trim())\r\n                .filter((conf) => conf !== '')\r\n              lastDataDivisionLine = line\r\n            } else {\r\n              // 已经进行config设置\r\n              //\r\n              if (line - lastDataDivisionLine <= 1) {\r\n                // 两个dataDivision没有间隔\r\n                // 无法获取data数据\r\n                // 跳过\r\n                //\r\n              } else {\r\n                // 存入data\r\n                // 闭 - 开\r\n                //\r\n                dataList.push({\r\n                  lineBegin: lastDataDivisionLine + 1,\r\n                  lineEnd: line\r\n                })\r\n              }\r\n              // 更新\r\n              //\r\n              lastDataDivisionLine = line\r\n            }\r\n          } else {\r\n            // 啥也没匹配到\r\n            //\r\n            continue\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      check: false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 解析配置项\r\n   * @param config\r\n   * @param configs\r\n   * @param i\r\n   * @returns\r\n   */\r\n  function analyseConfig(config: string, configs: ConfigsDict, i: number) {\r\n    const equalRegexp = /(?<!\\\\)=/g\r\n    const commaRegexp = /(?<!\\\\),/g\r\n\r\n    const equalRes = equalRegexp.exec(config)\r\n    equalRegexp.lastIndex = 0\r\n    const equalIndex = equalRes === null ? -1 : equalRes.index\r\n    const key = equalIndex === -1 ? i.toString() : config.slice(0, equalIndex).trim()\r\n    const value_ = equalIndex === -1 ? config : config.slice(equalIndex + 1).trim()\r\n    const value = []\r\n    let commaRes = commaRegexp.exec(value_)\r\n    let from = 0\r\n    while (commaRes !== null) {\r\n      value.push(value_.slice(from, commaRes.index).trim())\r\n      from = commaRes.index + 1\r\n      commaRes = commaRegexp.exec(value_)\r\n    }\r\n    value.push(value_.slice(from).trim())\r\n    commaRegexp.lastIndex = 0\r\n    //\r\n    // 允许使用=语法，且获取到=，且不是0=xxx的情况\r\n    //\r\n    if (useEqual && equalIndex !== -1 && Number.isNaN(Number(key))) {\r\n      //\r\n      // 找到该conf对应的conf\r\n      //\r\n      const trueKey = confMap.get(key)\r\n      if (trueKey === undefined) {\r\n        //\r\n        // 匹配失败不生效\r\n        //\r\n        return\r\n      } else {\r\n        configs[trueKey] = value\r\n        return\r\n      }\r\n    }\r\n    //\r\n    // 允许使用0=和直接下标映射语法，且key是数字\r\n    //\r\n    if (useIndex && !Number.isNaN(Number(key))) {\r\n      const index = Number(key)\r\n      if (configKeys[index] !== undefined) {\r\n        if (Array.isArray(configKeys[index])) {\r\n          configs[configKeys[index][0]] = value\r\n        } else {\r\n          configs[configKeys[index]] = value\r\n        }\r\n      } else {\r\n        configs[key] = value\r\n      }\r\n      return\r\n    }\r\n  }\r\n\r\n  function analyseConfigList(configList: string[]) {\r\n    const configs = {}\r\n    configList.forEach((config, i) => {\r\n      analyseConfig(config, configs, i)\r\n    })\r\n    return configs\r\n  }\r\n\r\n  function component(state: StateBlock, startLine: number, endLine: number, silent: boolean) {\r\n    const res = analyseData(state, startLine, endLine, silent)\r\n    if (!res.check) return false\r\n    if (res.silent !== undefined) return true\r\n\r\n    const oldParent = state.parentType\r\n    const oldLineMax = state.lineMax\r\n    state.parentType = 'blockquote'\r\n\r\n    // this will prevent lazy continuations from ever going past our end marker\r\n    state.lineMax = res.markerEndData.line\r\n\r\n    const token_o = state.push('component_' + name + '_open', 'div', 1)\r\n    token_o.markup = markerBegin\r\n    token_o.block = true\r\n    token_o.meta = {\r\n      configs: analyseConfigList(res.configList)\r\n    }\r\n    token_o.map = [res.markerBeginData.line, res.markerEndData.line]\r\n\r\n    res.dataList.forEach((data, i) => {\r\n      const start = state.bMarks[data.lineBegin] + state.tShift[data.lineBegin]\r\n      const end = state.bMarks[data.lineEnd] + state.tShift[data.lineEnd]\r\n      const dataSrc = state.src.slice(start, end)\r\n      let res\r\n      // if (dataCheck instanceof Function) {\r\n      //   res = dataCheck(dataSrc, i, {})\r\n      // }\r\n      // res 为false时直接跳过分隔符\r\n      // 但是其内部内容依旧会渲染\r\n      // 感觉res为false的可能性几乎没有\r\n      //\r\n      if (res === false) return\r\n\r\n      if (i > 0) {\r\n        // 添加数据分隔符token\r\n        //\r\n        const token_d = state.push('component_' + name + '_division', 'div', 0)\r\n        token_d.markup = dataDivision\r\n        token_d.meta = {\r\n          index: i\r\n        }\r\n      }\r\n      state.md.block.tokenize(state, data.lineBegin, data.lineEnd)\r\n    })\r\n\r\n    const token_c = state.push('component_' + name + '_close', 'div', -1)\r\n    token_c.markup = markerEnd\r\n    token_c.block = true\r\n\r\n    state.parentType = oldParent\r\n    state.lineMax = oldLineMax\r\n    state.line = res.markerEndData.line + 1\r\n    return true\r\n  }\r\n\r\n  md.block.ruler.before('fence', 'component_' + name, component, {\r\n    alt: ['paragraph', 'reference', 'blockquote', 'list']\r\n  })\r\n  md.renderer.rules['component_' + name + '_open'] = render\r\n  md.renderer.rules['component_' + name + '_close'] = render\r\n  md.renderer.rules['component_' + name + '_division'] = renderDivision\r\n}\r\n","import type MarkdownIt from 'markdown-it'\r\nimport type Token from 'markdown-it/lib/token.mjs'\r\nimport componentPlugin from '../plugin/component'\r\nimport type { ComponentPluginOptions } from '../plugin/component'\r\nfunction initClassifyComponentPlugin(md: MarkdownIt) {\r\n  md.use(componentPlugin, 'classify', {\r\n    render: function (tokens: Token[], idx: number) {\r\n      const token = tokens[idx]\r\n      if (token.nesting === 1) {\r\n        const name = Math.floor(Math.random() * 1000000).toString()\r\n        const configs = token.meta.configs\r\n        const classifies = configs.classifies || []\r\n        let inputs = ''\r\n        classifies.forEach((c: string, i: number) => {\r\n          const t =\r\n            '<div><label><input type=\"radio\" name=\"' +\r\n            name +\r\n            '\" value=\"' +\r\n            i.toString() +\r\n            '\" hidden ' +\r\n            (i === 0 ? 'checked' : '') +\r\n            '> ' +\r\n            c +\r\n            '</label></div>'\r\n          inputs += t\r\n        })\r\n        // opening tag\r\n        return (\r\n          '<div class=\"markdown-it-component-classify-container\">\\n<div class=\"markdown-it-component-classify\">\\n<div head>\\n' +\r\n          inputs +\r\n          '\\n</div>\\n<div body>\\n<div>\\n'\r\n        )\r\n      } else {\r\n        // closing tag\r\n        return '</div>\\n</div>\\n</div>\\n</div>\\n'\r\n      }\r\n    },\r\n    renderDivision: function (tokens: Token[], idx: number) {\r\n      return '</div>\\n<div>\\n'\r\n    },\r\n    init: function (options: ComponentPluginOptions) {\r\n      const size = 10\r\n      const styleId = 'markdown-it-classify-style'\r\n      let styleBase = `\r\n.markdown-it-component-classify-container {\r\n  border-radius: 8px;\r\n  border: 1px solid var(--bl-color-base-border);\r\n  overflow: hidden;\r\n  margin-bottom: 1rem;\r\n}\r\n.markdown-it-component-classify > div > div {\r\n  position: relative;\r\n}\r\n.markdown-it-component-classify > div[body] > div {\r\n  display: none;\r\n  padding: 0.5rem;\r\n}\r\n.markdown-it-component-classify > div[head] {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  background-color: var(--bl-color-light-fill);\r\n}\r\n.markdown-it-component-classify > div[head] > div > label {\r\n  padding: 0.5rem 1rem;\r\n  cursor: pointer;\r\n  transition: color 0.2s;\r\n  box-sizing: border-box;\r\n  display: block;\r\n  font-weight: bold;\r\n  color: var(--bl-color-secondary-text);\r\n}\r\n.markdown-it-component-classify > div[head] > div:nth-child(n + 2)::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%) translateX(-50%);\r\n  width: 1px;\r\n  height: 40%;\r\n  background-color: var(--bl-color-primary-text);\r\n}\r\n.markdown-it-component-classify > div[head] > div > label:has(input:checked) {\r\n  transition: color 0.2s;\r\n  color: var(--bl-color-primary-text);\r\n}\r\n.markdown-it-component-classify > div[head] > div > label:hover {\r\n  transition: color 0.2s;\r\n  color: var(--bl-color-primary-text);\r\n}\r\n.markdown-it-component-classify > div[body] > div > *:last-child {\r\n  margin-bottom: 0 !important;\r\n}\r\n\r\n      `\r\n      for (let i = 1; i <= size; i++) {\r\n        if (i > 1) styleBase += ',\\n'\r\n        styleBase += `.markdown-it-component-classify:has( > div[head] > div:nth-child(${i}) > label > input:checked) > div[body] > div:nth-child(${i})`\r\n      }\r\n      styleBase += ` {\r\n  display: block;\r\n}\r\n      `\r\n      if (!document.getElementById(styleId)) {\r\n        const style = document.createElement('style')\r\n        style.setAttribute('id', styleId)\r\n        style.setAttribute('type', 'text/css')\r\n        style.innerHTML = styleBase.trim()\r\n        const head = document.head || document.getElementsByTagName('head')[0]\r\n        head.appendChild(style)\r\n      }\r\n    },\r\n    configKeys: ['classifies']\r\n  })\r\n}\r\n\r\nexport default [initClassifyComponentPlugin]\r\n","import type MarkdownIt from 'markdown-it'\r\nimport type Token from 'markdown-it/lib/token.mjs'\r\nimport type Renderer from 'markdown-it/lib/renderer.mjs'\r\nimport type { Options } from 'markdown-it'\r\nimport type StateInline from 'markdown-it/lib/rules_inline/state_inline.mjs'\r\n\r\ntype ConfigKey = string | string[]\r\n\r\nexport interface TemplatePluginOptions {\r\n  tokenizePos?: number[] | boolean\r\n  markerBegin?: string\r\n  markerEnd?: string\r\n  markerDivision?: string\r\n  useEqual?: boolean\r\n  useIndex?: boolean\r\n  configKeys?: ConfigKey[]\r\n  render?: (tokens: Token[], idx: number, _options: Options, env: any, slf: Renderer) => string\r\n  renderDivision?: (\r\n    tokens: Token[],\r\n    idx: number,\r\n    _options: Options,\r\n    env: any,\r\n    slf: Renderer\r\n  ) => string\r\n}\r\n\r\ntype DivisionData = {\r\n  begin: number\r\n  end: number\r\n}\r\n\r\ntype FindEndRes = {\r\n  check: boolean\r\n  pos?: number\r\n  divisionDataList?: DivisionData[]\r\n}\r\n\r\ntype ConfigsDict = {\r\n  [property: string]: string | string[]\r\n}\r\n\r\n/**\r\n * ## MD模板\r\n * 默认模板格式如下：`{{name|some words ....|config1|config2=xxx|config3=a,b,c,...}}`\r\n *\r\n * 1. tokenize默认为第二位(index = 1)\r\n * 2. 第一个位置必须是name且不会进行解析\r\n * 3. 可以通过设置tokenizePos进行不同位置的解析，为true则全部都解析，false等价于[1]\r\n * 3. 当tokenizePos超过一个时，会自动生成token: template_name_division\r\n * 4. 不属于tokenizePos的内容将会加入configData\r\n * 5. 模板名字请不要重复\r\n *\r\n * ## options\r\n *\r\n * ```ts\r\n * interface TemplatePluginOptions {\r\n *   markerBegin?: string // 匹配起始标识符 默认: {{\r\n *   markerEnd?: string // 匹配结束标识符 默认: }}\r\n *   markerDivision?: string // 配置项分割标识符 默认: {{\r\n *   useEqual?: boolean // 是否启用=判定，启用则支持语法: configKey1=abc => { configKey1: abc }\r\n *   useIndex?: boolean // 是否启用下标顺序判定，启用则支持语法: 1=abc 从1开始!!\r\n *   // => 1. 设置了configKeys=['configKey1'] => { configKey1: abc }\r\n *   // => 2. 没有设置configKeys => { '1': abc }\r\n *   configKeys?: configKey[] // 设置配置项选择值，便于数据读取\r\n *   // 需要注意conf字符串不能是数字，不能是: '100'\r\n *   // ['conf1', 'conf2'] 设置两个conf，其分别对应1和2\r\n *   // [['conf1-1', 'conf1-2'], 'conf2'] 设置两个conf，但是输入: conf1-2=abc\\1=abc\\abc => { 'conf1-1': abc },会以数组中第一个进行替换\r\n *   render?: (tokens: Token[], idx: number, _options: Options, env: any, slf: Renderer) => string 自定义渲染函数\r\n *   renderDivision?: (tokens: Token[], idx: number, _options: Options, env: any, slf: Renderer) => string 自定义分割渲染函数\r\n * }\r\n * ```\r\n *\r\n * @param md md\r\n * @param name 模板名字\r\n * @param options 配置项\r\n */\r\nexport default function templatePlugin(\r\n  md: MarkdownIt,\r\n  name: string | string[],\r\n  options?: TemplatePluginOptions\r\n) {\r\n  function renderDefault(tokens: Token[], idx: number, _options: Options, env: any, slf: Renderer) {\r\n    return slf.renderToken(tokens, idx, _options)\r\n  }\r\n\r\n  function renderDivisionDefault(\r\n    tokens: Token[],\r\n    idx: number,\r\n    _options: Options,\r\n    env: any,\r\n    slf: Renderer\r\n  ) {\r\n    return slf.renderToken(tokens, idx, _options)\r\n  }\r\n\r\n  options = options || {}\r\n\r\n  const defaultName = Array.isArray(name) ? name[0] : name\r\n  const namesSet = new Set(Array.isArray(name) ? name : [name])\r\n\r\n  const tokenizePos = options.tokenizePos || [1]\r\n\r\n  const markerBegin = options.markerBegin || '{{'\r\n  const markerEnd = options.markerEnd || '}}'\r\n  const markerDivision = options.markerDivision || '|'\r\n  //\r\n  // 为true则支持语法：config1 = xxx\r\n  //\r\n  const useEqual = options.useEqual || true\r\n  //\r\n  // 0 = xxx\r\n  // xxx\r\n  // ->\r\n  // 0: xxx\r\n  //\r\n  const useIndex = options.useIndex || false\r\n  //\r\n  // config keys\r\n  // 设置这个才能更好的使用 0=xxx\r\n  // 例如: 设置[\"color\"];md中写0=red\r\n  // 获得: { \"color\": \"red\" }\r\n  // 否则获得: { \"0\": \"red\" }\r\n  //\r\n  const configKeys = options.configKeys || []\r\n  //\r\n  // 配置映射关系\r\n  //\r\n  const confMap = buildConfMap(configKeys)\r\n\r\n  const render = options.render || renderDefault\r\n\r\n  const renderDivision = options.renderDivision || renderDivisionDefault\r\n\r\n  function buildConfMap(configKeys: ConfigKey[]) {\r\n    const map = new Map<string, string>()\r\n    configKeys.forEach((conf) => {\r\n      if (Array.isArray(conf)) {\r\n        const base = conf[0]\r\n        conf.forEach((c) => {\r\n          map.set(base, c)\r\n        })\r\n      } else {\r\n        map.set(conf, conf)\r\n      }\r\n    })\r\n    return map\r\n  }\r\n\r\n  /**\r\n   * 找结束位置\r\n   * @param state\r\n   * @returns\r\n   */\r\n  function findEnd(state: StateInline): FindEndRes {\r\n    const max = state.posMax\r\n    let pos = state.pos + markerBegin.length\r\n    let level = 0\r\n    let lastDivisionPos = pos\r\n    const divisionDataList = []\r\n    while (pos < max) {\r\n      if (markerBegin === state.src.slice(pos, pos + markerBegin.length)) {\r\n        level++\r\n      } else if (markerEnd === state.src.slice(pos, pos + markerEnd.length)) {\r\n        if (level === 0) {\r\n          divisionDataList.push({\r\n            begin: lastDivisionPos,\r\n            end: pos\r\n          })\r\n          return {\r\n            check: true,\r\n            pos,\r\n            divisionDataList\r\n          }\r\n        } else level--\r\n      } else if (markerDivision === state.src.slice(pos, pos + markerDivision.length)) {\r\n        if (level === 0) {\r\n          divisionDataList.push({\r\n            begin: lastDivisionPos,\r\n            end: pos\r\n          })\r\n          lastDivisionPos = pos + 1\r\n        }\r\n      }\r\n      pos++\r\n    }\r\n    return {\r\n      check: false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 解析配置项\r\n   * @param config\r\n   * @param configs\r\n   * @param i\r\n   * @returns\r\n   */\r\n  function analyseConfig(config: string, configs: ConfigsDict, i: number) {\r\n    // console.log('analyseConfig', config, i)\r\n    const equalRegexp = /(?<!\\\\)=/g\r\n    const commaRegexp = /(?<!\\\\),/g\r\n\r\n    const equalRes = equalRegexp.exec(config)\r\n    equalRegexp.lastIndex = 0\r\n    const equalIndex = equalRes === null ? -1 : equalRes.index\r\n    const key = equalIndex === -1 ? i.toString() : config.slice(0, equalIndex).trim()\r\n    const value_ = equalIndex === -1 ? config : config.slice(equalIndex + 1).trim()\r\n    const value = []\r\n    let commaRes = commaRegexp.exec(value_)\r\n    let from = 0\r\n    while (commaRes !== null) {\r\n      value.push(value_.slice(from, commaRes.index).trim())\r\n      from = commaRes.index + 1\r\n      commaRes = commaRegexp.exec(value_)\r\n    }\r\n    value.push(value_.slice(from).trim())\r\n    commaRegexp.lastIndex = 0\r\n    //\r\n    // 允许使用=语法，且获取到=，且不是0=xxx的情况\r\n    //\r\n    if (useEqual && equalIndex !== -1 && Number.isNaN(Number(key))) {\r\n      //\r\n      // 找到该conf对应的conf\r\n      //\r\n      const trueKey = confMap.get(key)\r\n      if (trueKey === undefined) {\r\n        //\r\n        // 匹配失败不生效\r\n        //\r\n        return\r\n      } else {\r\n        configs[trueKey] = value\r\n        return\r\n      }\r\n    }\r\n    //\r\n    // 允许使用0=和直接下标映射语法，且key是数字\r\n    //\r\n    if (useIndex && !Number.isNaN(Number(key))) {\r\n      const index = Number(key)\r\n      if (configKeys[index] !== undefined) {\r\n        if (Array.isArray(configKeys[index])) {\r\n          configs[configKeys[index][0]] = value\r\n        } else {\r\n          configs[configKeys[index]] = value\r\n        }\r\n      } else {\r\n        configs[key] = value\r\n      }\r\n      return\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插件核心\r\n   * @param state\r\n   * @param slient\r\n   * @returns\r\n   */\r\n  function template(state: StateInline, slient: boolean) {\r\n    const max = state.posMax // src长度\r\n    const start = state.pos\r\n\r\n    if (markerBegin !== state.src.slice(start, start + markerBegin.length)) {\r\n      return false\r\n    }\r\n    //\r\n    // 找结束\r\n    // posEnd指向结束符号开始的位置\r\n    // }}\r\n    // ⬆\r\n    //\r\n    const endRes = findEnd(state)\r\n\r\n    if (!endRes.check) {\r\n      return false\r\n    }\r\n    //\r\n    // check为true下面都存在\r\n    //\r\n    const end = endRes.pos as number\r\n    const divisionDataList = endRes.divisionDataList as DivisionData[]\r\n\r\n    if (\r\n      divisionDataList.length < 1 ||\r\n      !namesSet.has(state.src.slice(divisionDataList[0].begin, divisionDataList[0].end).trim())\r\n    ) {\r\n      return false\r\n    }\r\n    //\r\n    // found\r\n    //\r\n    const tStart = start + markerBegin.length\r\n    const tEnd = end\r\n\r\n    const configs = {}\r\n\r\n    let tokenizeAmount = 0\r\n\r\n    if (!slient) {\r\n      state.pos = tStart\r\n      state.posMax = tEnd\r\n\r\n      const token_o = state.push('template_' + defaultName + '_open', 'span', 1)\r\n\r\n      let configIndex = 0\r\n\r\n      divisionDataList.forEach((data, i) => {\r\n        if (i === 0) return\r\n        state.pos = data.begin\r\n        state.posMax = data.end\r\n        if (tokenizePos === true || (Array.isArray(tokenizePos) && tokenizePos.indexOf(i) !== -1)) {\r\n          if (tokenizeAmount > 0) state.push('template_' + defaultName + '_division', '', 0)\r\n          state.md.inline.tokenize(state)\r\n          tokenizeAmount++\r\n        } else {\r\n          analyseConfig(state.src.slice(data.begin, data.end), configs, configIndex++)\r\n        }\r\n      })\r\n\r\n      token_o.meta = {\r\n        configs\r\n      }\r\n\r\n      state.push('template_' + defaultName + '_close', 'span', -1)\r\n    }\r\n\r\n    state.pos = end + markerEnd.length\r\n    state.posMax = max\r\n    return true\r\n  }\r\n\r\n  md.inline.ruler.after('emphasis', 'template_' + defaultName, template)\r\n\r\n  md.renderer.rules['template_' + defaultName + '_open'] = render\r\n  md.renderer.rules['template_' + defaultName + '_close'] = render\r\n  md.renderer.rules['template_' + defaultName + '_division'] = renderDivision\r\n}\r\n","import type MarkdownIt from 'markdown-it'\r\nimport templatePlugin from '../plugin/template'\r\nimport type Token from 'markdown-it/lib/token.mjs'\r\nimport type { MdRenderer } from '..'\r\nfunction initUnderlineTemplatePlugin(md: MarkdownIt) {\r\n  md.use(templatePlugin, 'und', {\r\n    useIndex: true,\r\n    configKeys: ['type'],\r\n    render: function (tokens: Token[], idx: number) {\r\n      const token = tokens[idx]\r\n      const colorDict: { [key: string]: string } = {\r\n        default: 'transparent',\r\n        warning: '#f89898D0',\r\n        success: '#95d475D0',\r\n        r: 'var(--bl-color-md-plugin-underline-r)',\r\n        g: 'var(--bl-color-md-plugin-underline-g)',\r\n        b: 'var(--bl-color-md-plugin-underline-b)',\r\n        y: 'var(--bl-color-md-plugin-underline-y)'\r\n      }\r\n      if (token.nesting === 1) {\r\n        const configs = token.meta.configs\r\n        const colorType = (configs['type'] && configs['type'][0]) || 'default' // name, content, color\r\n        const color = colorDict[colorType.trim()] || colorType.trim()\r\n        const style = `background: linear-gradient(transparent 70%, ${color} 0%);`\r\n        return `<span style=\"${style}\">`\r\n      } else {\r\n        return '</span>'\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nfunction initBackgroundTemplatePlugin(md: MarkdownIt) {\r\n  md.use(templatePlugin, 'bgc', {\r\n    useIndex: true,\r\n    configKeys: ['type'],\r\n    render: function (tokens: Token[], idx: number) {\r\n      const token = tokens[idx]\r\n      const colorDict: { [key: string]: string } = {\r\n        default: 'transparent',\r\n        warning: '#f89898D0',\r\n        success: '#95d475D0',\r\n        r: 'var(--bl-color-md-plugin-underline-r)',\r\n        g: 'var(--bl-color-md-plugin-underline-g)',\r\n        b: 'var(--bl-color-md-plugin-underline-b)',\r\n        y: 'var(--bl-color-md-plugin-underline-y)'\r\n      }\r\n      if (token.nesting === 1) {\r\n        const configs = token.meta.configs\r\n        const colorType = (configs['type'] && configs['type'][0]) || 'default' // name, content, color\r\n        const color = colorDict[colorType.trim()] || colorType.trim()\r\n        const style = `background-color: ${color};`\r\n        return `<span style=\"${style}\">`\r\n      } else {\r\n        return '</span>'\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nfunction initTranslateTemplatePlugin(md: MarkdownIt) {\r\n  md.use(templatePlugin, 'tran', {\r\n    useIndex: true,\r\n    configKeys: ['from', 'to'],\r\n    render: function (tokens: Token[], idx: number) {\r\n      const token = tokens[idx]\r\n      if (token.nesting === 1) {\r\n        const name = Math.floor(Math.random() * 1000000).toString()\r\n        const configs = token.meta.configs\r\n        const from = (configs['from'] && configs['from'][0]) || '原文:'\r\n        const to = (configs['to'] && configs['to'][0]) || '译文:'\r\n        const input = `<label data-from=\"${from}\" data-to=\"${to}\" class=\"md-template-translate__label\"><input type=\"checkbox\" name=\"${name}\" hidden ></label>`\r\n        return '<span class=\"md-template-translate\">' + input + '<span>'\r\n      } else {\r\n        return '</span></span>'\r\n      }\r\n    },\r\n    renderDivision: function (token: Token[], idx: number) {\r\n      return '</span><span>'\r\n    },\r\n    tokenizePos: [1, 2]\r\n  })\r\n}\r\n\r\nfunction initObsidianLinkTemplatePlugin(md: MarkdownIt, elflandRenderer: MdRenderer) {\r\n  md.use(templatePlugin, 'link', {\r\n    useIndex: true,\r\n    configKeys: ['name'],\r\n    render: function (tokens: Token[], idx: number) {\r\n      const token = tokens[idx]\r\n      if (token.nesting === 1) {\r\n        const configs = token.meta.configs\r\n        const name = (configs['name'] && configs['name'][0]) || 'Error'\r\n        const path = elflandRenderer.article.getPathByTitle(name)\r\n        const className = path === '' ? '' : 'cursor-pointer text-moonlight-500 hover:underline'\r\n        const title = path === '' ? '' : window.location.protocol + '//' + window.location.host + '/blog/' + path\r\n        return `<span class=\"${className}\" md=\"obsidian-link\" path=\"${path}\" title=${title}>` + name\r\n      } else {\r\n        return '</span>'\r\n      }\r\n    },\r\n    renderDivision: function (token: Token[], idx: number) {\r\n      return '</span><span>'\r\n    },\r\n    tokenizePos: []\r\n  })\r\n}\r\n\r\nexport default [\r\n  initUnderlineTemplatePlugin,\r\n  initBackgroundTemplatePlugin,\r\n  initTranslateTemplatePlugin,\r\n  initObsidianLinkTemplatePlugin\r\n]\r\n","import type MarkdownIt from 'markdown-it'\r\nimport templatePlugin from '../plugin/template'\r\nimport type Token from 'markdown-it/lib/token.mjs'\r\nimport type { MdRenderer } from '..'\r\n\r\nfunction initTemplateTestPlugin1(md: MarkdownIt, elflandRenderer: MdRenderer) {\r\n  md.use(templatePlugin, 'template-name-1', {\r\n    configKeys: ['type'],\r\n    render: function (tokens: Token[], idx: number) {\r\n      const token = tokens[idx]\r\n      const colorDict: Record<string, string> = {\r\n        default: 'transparent',\r\n        warning: '#F56C6C',\r\n        success: '#67C23A'\r\n      }\r\n      if (token.nesting === 1) {\r\n      // opening tag\r\n        const configs = token.meta.configs\r\n        // 用户配置项\r\n        console.log('template-name-1 configs', configs)\r\n        const colorType = (configs['type'] && configs['type'][0]) || 'default'\r\n        const color = colorDict[colorType.trim()] || colorType.trim()\r\n        const style = `background-color: ${color};`\r\n        return `<span style=\"${style}\">`\r\n      } else {\r\n      // closing tag\r\n        return '</span>'\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nfunction initTemplateTestPlugin2(md: MarkdownIt, elflandRenderer: MdRenderer) {\r\n  md.use(templatePlugin, 'template-name-2', {\r\n    configKeys: ['chars', 'color'],\r\n    render: function (tokens: Token[], idx: number) {\r\n      const token = tokens[idx]\r\n      if (token.nesting === 1) {\r\n      // opening tag\r\n        const configs = token.meta.configs\r\n        console.log('template-name-2 configs', configs)\r\n        const charsConf = (configs['chars']) || []\r\n        const color = (configs['color']) || ''\r\n        const chars = charsConf.join('-')\r\n        return `<span style=\"color: ${color}\">${chars}`\r\n      } else {\r\n      // closing tag\r\n        return '</span>'\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nfunction initTemplateTestPlugin3(md: MarkdownIt, elflandRenderer: MdRenderer) {\r\n  md.use(templatePlugin, 'template-name-3', {\r\n    configKeys: ['chars', 'color'],\r\n    useIndex: true,\r\n    render: function (tokens: Token[], idx: number) {\r\n      const token = tokens[idx]\r\n      if (token.nesting === 1) {\r\n      // opening tag\r\n        const configs = token.meta.configs\r\n        console.log('template-name-3 configs', configs)\r\n        const charsConf = (configs['chars']) || []\r\n        const color = (configs['color']) || ''\r\n        const chars = charsConf.join('-')\r\n        return `<span style=\"color: ${color}\">${chars}`\r\n      } else {\r\n      // closing tag\r\n        return '</span>'\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nfunction initTemplateTestPlugin4(md: MarkdownIt, elflandRenderer: MdRenderer) {\r\n  md.use(templatePlugin, 'template-name-4', {\r\n    configKeys: ['chars', 'color'],\r\n    tokenizePos: [], // 全部禁止解析\r\n    useIndex: true,\r\n    render: function (tokens: Token[], idx: number) {\r\n      const token = tokens[idx]\r\n      if (token.nesting === 1) {\r\n      // opening tag\r\n        const configs = token.meta.configs\r\n        console.log('template-name-4 configs', configs)\r\n        const charsConf = (configs['chars']) || []\r\n        const color = (configs['color']) || ''\r\n        const chars = charsConf.join('-')\r\n        return `<span style=\"color: ${color}\">${chars}`\r\n      } else {\r\n      // closing tag\r\n        return '</span>'\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport default [\r\n  initTemplateTestPlugin1,\r\n  initTemplateTestPlugin2,\r\n  initTemplateTestPlugin3,\r\n  initTemplateTestPlugin4\r\n]\r\n","import Container from './Container'\r\nimport EmojiAnchorTocKatex from './EmojiAnchorTocKatex'\r\nimport FootnoteAbbrSubSupUml from './FootnoteAbbrSubSupUml'\r\nimport Image from './Image'\r\nimport Layout from './Layout'\r\nimport Component from './Component'\r\nimport Template from './Template'\r\n\r\nimport TemplateForTest from './TemplateForTest'\r\n\r\nimport type MarkdownIt from 'markdown-it'\r\n\r\nconst plugins = [\r\n  ...Container,\r\n  ...EmojiAnchorTocKatex,\r\n  ...FootnoteAbbrSubSupUml,\r\n  ...Image,\r\n  ...Layout,\r\n  ...Component,\r\n  ...Template,\r\n\r\n  ...TemplateForTest\r\n]\r\n\r\nexport default function init(md: MarkdownIt, elflandRenderer: any, meta: any) {\r\n  plugins.forEach((func) => {\r\n    func(md, elflandRenderer, meta)\r\n  })\r\n}\r\n","import MarkdownIt from 'markdown-it'\r\nimport hljs from 'highlight.js/lib/core'\r\nimport init from './init'\r\nimport { generateRandomStringBase, localGet } from '@/core/elfland/utils'\r\nimport type { Article } from '..'\r\n\r\nimport javascript from 'highlight.js/lib/languages/javascript'\r\nimport typescript from 'highlight.js/lib/languages/typescript'\r\nimport css from 'highlight.js/lib/languages/css'\r\nimport xml from 'highlight.js/lib/languages/xml'\r\nimport c from 'highlight.js/lib/languages/c'\r\nimport cmake from 'highlight.js/lib/languages/cmake'\r\nimport cpp from 'highlight.js/lib/languages/cpp'\r\nimport markdown from 'highlight.js/lib/languages/markdown'\r\nimport json from 'highlight.js/lib/languages/json'\r\nimport latex from 'highlight.js/lib/languages/latex'\r\nimport python from 'highlight.js/lib/languages/python'\r\nimport yaml from 'highlight.js/lib/languages/yaml'\r\n\r\nhljs.registerLanguage('javascript', javascript)\r\nhljs.registerLanguage('typescript', typescript)\r\nhljs.registerLanguage('css', css)\r\nhljs.registerLanguage('xml', xml)\r\nhljs.registerLanguage('c', c)\r\nhljs.registerLanguage('cmake', cmake)\r\nhljs.registerLanguage('cpp', cpp)\r\nhljs.registerLanguage('markdown', markdown)\r\nhljs.registerLanguage('json', json)\r\nhljs.registerLanguage('latex', latex)\r\nhljs.registerLanguage('python', python)\r\nhljs.registerLanguage('yaml', yaml)\r\nhljs.registerLanguage('html', xml)\r\nhljs.registerLanguage('vue',  (hljs) => {\r\n  return {\r\n    subLanguage: 'xml',\r\n    contains: [\r\n      hljs.COMMENT('<!--', '-->', {\r\n        relevance: 10\r\n      }),\r\n      {\r\n        begin: /^(\\s*)(<script setup>)/gm,\r\n        end: /^(\\s*)(<\\/script>)/gm,\r\n        subLanguage: 'javascript',\r\n        excludeBegin: true,\r\n        excludeEnd: true\r\n      },\r\n      {\r\n        begin: /^(\\s*)(<script setup lang=[\"']ts[\"']>)/gm,\r\n        end: /^(\\s*)(<\\/script>)/gm,\r\n        subLanguage: 'typescript',\r\n        excludeBegin: true,\r\n        excludeEnd: true\r\n      },\r\n      {\r\n        begin: /^(\\s*)(<style(\\sscoped)?>)/gm,\r\n        end: /^(\\s*)(<\\/style>)/gm,\r\n        subLanguage: 'css',\r\n        excludeBegin: true,\r\n        excludeEnd: true\r\n      },\r\n      {\r\n        begin: /^(\\s*)(<style lang=[\"'](scss|sass)[\"'](\\sscoped)?>)/gm,\r\n        end: /^(\\s*)(<\\/style>)/gm,\r\n        subLanguage: 'scss',\r\n        excludeBegin: true,\r\n        excludeEnd: true\r\n      },\r\n      {\r\n        begin: /^(\\s*)(<style lang=[\"']stylus[\"'](\\sscoped)?>)/gm,\r\n        end: /^(\\s*)(<\\/style>)/gm,\r\n        subLanguage: 'stylus',\r\n        excludeBegin: true,\r\n        excludeEnd: true\r\n      }\r\n    ]\r\n  }\r\n})\r\n\r\nexport class MdRenderer {\r\n  static readonly CODE_SCROLL_KEY = 'md-code-scroll'\r\n  private md: MarkdownIt\r\n  readonly article: Article\r\n  private generateRandomString = generateRandomStringBase()\r\n\r\n  private codeScroll = localGet(MdRenderer.CODE_SCROLL_KEY, false) === 'true'\r\n  private svg =\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1024 1024\" ><path fill=\"currentColor\" d=\"M128 320v576h576V320zm-32-64h640a32 32 0 0 1 32 32v640a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V288a32 32 0 0 1 32-32M960 96v704a32 32 0 0 1-32 32h-96v-64h64V128H384v64h-64V96a32 32 0 0 1 32-32h576a32 32 0 0 1 32 32M256 672h320v64H256zm0-192h320v64H256z\"></path></svg>'\r\n  private svgCodeScroll =\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1024 1024\" ><path fill=\"currentColor\" d=\"M511.552 128c-35.584 0-64.384 28.8-64.384 64.448v516.48L274.048 570.88a94.272 94.272 0 0 0-112.896-3.456 44.416 44.416 0 0 0-8.96 62.208L332.8 870.4A64 64 0 0 0 384 896h512V575.232a64 64 0 0 0-45.632-61.312l-205.952-61.76A96 96 0 0 1 576 360.192V192.448C576 156.8 547.2 128 511.552 128M359.04 556.8l24.128 19.2V192.448a128.448 128.448 0 1 1 256.832 0v167.744a32 32 0 0 0 22.784 30.656l206.016 61.76A128 128 0 0 1 960 575.232V896a64 64 0 0 1-64 64H384a128 128 0 0 1-102.4-51.2L101.056 668.032A108.416 108.416 0 0 1 128 512.512a158.272 158.272 0 0 1 185.984 8.32z\"></path></svg>'\r\n  private svgPlayground =\r\n    '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1024 1024\" ><path fill=\"currentColor\" d=\"M32 128h960v64H32z\"></path><path fill=\"currentColor\" d=\"M192 192v512h640V192zm-64-64h768v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32z\"></path><path fill=\"currentColor\" d=\"M322.176 960H248.32l144.64-250.56 55.424 32zm453.888 0h-73.856L576 741.44l55.424-32z\"></path></svg>'\r\n\r\n  constructor(article: Article) {\r\n    this.article = article\r\n    this.md = new MarkdownIt({\r\n      breaks: true,\r\n      linkify: true,\r\n      highlight: (str, lang) => {\r\n        lang = lang.trim()\r\n        const spaceI = lang.indexOf(':')\r\n        const allDetail = spaceI === -1 ? '' : lang.slice(spaceI + 1)\r\n        const delailList = allDetail.split(',').map(d => d.trim()).filter((detail) => detail !== '')\r\n        const fileName = delailList[0] === undefined || delailList[0] === 'null' ? '' : delailList[0]\r\n        const exampleCode = delailList[1]\r\n        const exampleId = delailList[2] || ''\r\n        lang = spaceI === -1 ? lang : lang.slice(0, spaceI)\r\n        const codeIndex = this.generateRandomString()\r\n        const button = `<span class=\"md-code-btn md-copy-btn select-none\" title=\"点击复制\" type=\"button\" data-clipboard-action=\"copy\" data-clipboard-target=\"#copy${codeIndex}\">${this.svg}</span>`\r\n        const codeScroll = `<span class=\"md-code-btn select-none\" md=\"codeScroll\" title=\"调整代码块最大高度\" ${this.codeScroll ? 'checked' : ''}>${this.svgCodeScroll}</span>`\r\n        const playgroundButton = `<span class=\"md-code-btn select-none\" md=\"playground\" title=\"在 Playground 中编辑\" data-example-code=\"${exampleCode}\" data-example-id=\"${exampleId}\" >${this.svgPlayground}</span>`\r\n        const showLang = '<span>' + this.getLang(lang) + '</span>'\r\n        const showDetail = `<span>${fileName}</span>`\r\n        const code = this.md.utils.escapeHtml(str)\r\n        let codeHtml = code\r\n        if (lang && hljs.getLanguage(lang)) {\r\n          try {\r\n            codeHtml = hljs.highlight(str, { language: lang, ignoreIllegals: true }).value\r\n          } catch (_) {\r\n            //\r\n          }\r\n        }\r\n\r\n        const headLeft = `<div>${showLang}${showDetail}</div>`\r\n        const headRight = `<div>${exampleId === '' ? '' : playgroundButton}${codeScroll}${button}</div>`\r\n\r\n        const codeLable = `<pre class=\"hljs\">${codeHtml}<code></code></pre>`\r\n        const headLabel = `<div>${headLeft}${headRight}</div>`\r\n        const copyCode = `<textarea style=\"position: absolute;top: -9999px;left: -9999px;z-index: -9999;\" id=\"copy${codeIndex}\">${code}</textarea>`\r\n\r\n        const codeAll = `<div class=\"hljs-container\">${headLabel}${codeLable}${copyCode}</div>`\r\n        //\r\n        // 使用div开头，需要去markdown-it源代码中修改\r\n        // node_modules\\markdown-it\\lib\\renderer.mjs\r\n        // 48行 改为：if (highlighted.indexOf('<pre') === 0 || highlighted.indexOf('<div') === 0)\r\n        //\r\n        return codeAll\r\n      }\r\n    })\r\n    this.init()\r\n  }\r\n\r\n  /**\r\n   * md to html\r\n   * @param str md文档字符串\r\n   * @returns md解析出来的结果\r\n   */\r\n  render(str: string) {\r\n    function scrollToHash() {\r\n      const hash = location.hash.slice(1)   // 去掉 #\r\n      if (!hash) return\r\n\r\n      // 等渲染完成，保险起见用 nextTick / setTimeout\r\n      requestAnimationFrame(() => {\r\n        const el = document.getElementById(hash) || document.querySelector(`[id=\"${hash}\"]`)\r\n        if (el) {\r\n          el.scrollIntoView({ behavior: 'smooth' })\r\n        }\r\n      })\r\n    }\r\n    scrollToHash()\r\n    return this.md.render(str)\r\n  }\r\n\r\n  private getLang(lang: string) {\r\n    lang = lang || ''\r\n    if (lang === '') return lang\r\n    // lang = lang.toLocaleLowerCase()\r\n    // lang = lang.slice(0, 1).toLocaleUpperCase() + lang.slice(1)\r\n    const dict: { [property: string]: string } = {\r\n      // Javascript: 'JS',\r\n      // Js: 'JS',\r\n      // Css: 'CSS',\r\n      // Md: 'markdown',\r\n      // Cpp: 'CPP'\r\n    }\r\n    return dict[lang] || lang\r\n  }\r\n\r\n  private init() {\r\n    init(this.md, this, {\r\n      baseUrl: window.location.protocol + '//' + window.location.host\r\n    })\r\n  }\r\n\r\n  renderToc(tocHtml: any, ast: any) {\r\n    this.article.mdTocString = JSON.stringify(ast)\r\n    // console.log('renderToc', tocHtml, ast)\r\n  }\r\n}\r\n","import type { Article as ArticleDetail } from '@/core/elfland-addon-articles/core/article'\r\nimport type { Elfland } from '@/core/elfland/core'\r\nimport { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport type { RouterPromiseSyncFuncRes } from '@/core/elfland/types'\r\nimport { localGet, localSet, LRUCache, message } from '@/core/elfland/utils'\r\nimport { computed, ref } from 'vue'\r\nimport type { ComputedRef, Ref } from 'vue'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\nimport { MdRenderer } from './renderer'\r\nimport type { ResTocItem } from '../types'\r\nimport Clipboard from 'clipboard'\r\n\r\nexport class Article extends ElflandAddon {\r\n  private __path: Ref<string> = ref('')\r\n  private __articleLRUCache: LRUCache<string, ArticleDetail> = new LRUCache(20)\r\n  private __mdRenderer = new MdRenderer(this)\r\n  private __mdTocString: Ref<string> = ref('')\r\n  private __clipboard: Clipboard\r\n\r\n  get article() {\r\n    return computed(() => {\r\n      return this.__articleLRUCache.get(this.__path.value) || null\r\n    })\r\n  }\r\n\r\n  get renderedMd() {\r\n    return computed(() => {\r\n      const article = this.article.value\r\n      if (article === null) return ''\r\n      return this.__mdRenderer.render(article.body)\r\n    })\r\n  }\r\n\r\n  get mdTocString() {\r\n    return this.__mdTocString.value\r\n  }\r\n\r\n  set mdTocString(str: string) {\r\n    this.__mdTocString.value = str\r\n  }\r\n\r\n  get rendererMdToc(): ComputedRef<ResTocItem[]> {\r\n    return computed(() => {\r\n      type TocItem = {\r\n        l: number,\r\n        n: string,\r\n        c: TocItem[]\r\n      }\r\n      const titleMap: Map<string, number> = new Map()\r\n      const tocString = this.__mdTocString.value\r\n      const tocJson = JSON.parse(tocString) as TocItem\r\n      const res: ResTocItem[] = []\r\n      const dfs = (toc: TocItem) => {\r\n        let title = encodeURIComponent(toc.n.trim().replace(/\\ /g, '-').toLowerCase())\r\n        if (!titleMap.has(toc.n)) titleMap.set(toc.n, 1)\r\n        else {\r\n          title += `-${titleMap.get(toc.n)}`\r\n          titleMap.set(toc.n, titleMap.get(toc.n)! + 1)\r\n        }\r\n        const r: ResTocItem = {\r\n          l: toc.l,\r\n          n: toc.n.trim(),\r\n          a: '#' + title\r\n        }\r\n        res.push(r)\r\n        toc.c.forEach(n => dfs(n))\r\n      }\r\n      dfs(tocJson)\r\n      res.shift()\r\n      return res\r\n    })\r\n  }\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n\r\n    this.__clipboard = new Clipboard('.md-copy-btn')\r\n    this.__clipboard.on('success', (e) => {\r\n      message('复制成功', 'success')\r\n    })\r\n    this.__clipboard.on('error', (e) => {\r\n      message('复制失败')\r\n    })\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n    this.__elfland.routerPromise.addPostcheck(this.postcheck, this)\r\n    this.__elfland.selector.addSelectorList([\r\n      ['click', '.markdown-body span[md=\"codeScroll\"]', 'clickCodeScroll', { childrenEvent: true }],\r\n      ['touchstart', '.markdown-body span[md=\"codeScroll\"]', 'clickCodeScroll', { childrenEvent: true }],\r\n      ['click', '.markdown-body span[md=\"obsidian-link\"]', 'clickObsidianLink', { childrenEvent: true }],\r\n      ['touchstart', '.markdown-body span[md=\"obsidian-link\"]', 'clickObsidianLink', { childrenEvent: true }],\r\n      ['click', '.markdown-body span[md=\"playground\"]', 'clickPlayground', { childrenEvent: true }],\r\n      ['touchstart', '.markdown-body span[md=\"playground\"]', 'clickPlayground', { childrenEvent: true }]\r\n    ])\r\n    this.__elfland.selector.on('clickCodeScroll', (e) => {\r\n      const codeScroll = localGet(MdRenderer.CODE_SCROLL_KEY, false) === 'true'\r\n      localSet(MdRenderer.CODE_SCROLL_KEY, !codeScroll)\r\n      const eles = document.querySelectorAll('.markdown-body span[md=\"codeScroll\"]')\r\n      for (let i = 0; i < eles.length; i++) {\r\n        if (codeScroll) eles[i].removeAttribute('checked')\r\n        else eles[i].setAttribute('checked', '')\r\n      }\r\n    })\r\n    this.__elfland.selector.on('clickObsidianLink', (e) => {\r\n      const ele = e.element\r\n      const path = ele.getAttribute('path')\r\n      if (path === '') return\r\n      if (typeof path !== 'string') return\r\n      window.scrollTo(0, 0)\r\n      this.__elfland.routerPromise.router.push(path)\r\n    })\r\n    this.__elfland.selector.on('clickPlayground', (e) => {\r\n      const ele = e.element\r\n      const code = ele.getAttribute('data-example-code')\r\n      const id = ele.getAttribute('data-example-id')\r\n      switch (code) {\r\n        case 'html':\r\n          this.__elfland.routerPromise.router.push({ name: 'playground', query: { example: id }})\r\n          break\r\n        case 'ts':\r\n          this.__elfland.routerPromise.router.push({ name: 'ts-playground', query: { example: id }})\r\n          break\r\n      }\r\n    })\r\n  }\r\n\r\n  getPathByTitle(title: string) {\r\n    const art = this.__elfland.articles.getIdAndPath(title)\r\n    return art.path\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (!this.is(to, 'article')) return\r\n    const path = to.params.articlePath\r\n    if (typeof path !== 'string') return { name: '404' }\r\n    await this.__elfland.articles.waitingDataGet\r\n    const art = this.__elfland.articles.getArticleByPath(path)\r\n    if (art === null) return { name: '404' }\r\n    this.__articleLRUCache.set(path, art)\r\n  }\r\n\r\n  private postcheck(to: RouteLocationNormalized, from: RouteLocationNormalized): RouterPromiseSyncFuncRes {\r\n    if (!this.is(to, 'article')) return\r\n    const path = to.params.articlePath\r\n    if (typeof path !== 'string') return\r\n    this.__path.value = path\r\n  }\r\n}\r\n","import type { ProjectDataItem } from '@/core/elfland-addon-data'\r\n\r\nexport class Project {\r\n  readonly name: string\r\n  readonly category: string\r\n  readonly author?: string\r\n  readonly contributors?: string[]\r\n  readonly role?: string\r\n  readonly description: string\r\n  readonly notes?: string\r\n  readonly url?: string\r\n  readonly github?: string\r\n  readonly video?: string\r\n  readonly arxiv?: string\r\n  readonly docs?: string\r\n  readonly blog?: string\r\n  readonly blogDocs?: string\r\n\r\n  constructor(data: ProjectDataItem) {\r\n    this.name = data.name\r\n    this.category = data.category\r\n    this.author = data.author\r\n    this.contributors = data.contributors\r\n    this.role = data.role\r\n    this.description = data.description\r\n    this.notes = data.notes\r\n    this.url = data.url\r\n    this.github = data.github\r\n    this.video = data.video\r\n    this.arxiv = data.arxiv\r\n    this.docs = data.docs\r\n    this.blog = data.blog\r\n    this.blogDocs = data['blog-docs']\r\n  }\r\n}\r\n\r\nexport class ProjectsDatabase {\r\n  readonly category: string\r\n  readonly projects: Project[]  = []\r\n\r\n  constructor(category: string) {\r\n    this.category = category\r\n  }\r\n\r\n  addProject(project: Project) {\r\n    this.projects.push(project)\r\n  }\r\n}\r\n","import { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\nimport { Project, ProjectsDatabase } from './projects-database'\r\nimport { computed, reactive, type ComputedRef, type Reactive } from 'vue'\r\nimport type { Elfland } from '@/core/elfland/core'\r\nimport type { ProjectDataItem } from '@/core/elfland-addon-data'\r\nimport type { ElflandLangs } from '@/core/elfland/types'\r\n\r\nexport class Projects extends ElflandAddon {\r\n  private __projectsIsGotten: boolean = false\r\n  private __projects: Reactive<Map<ElflandLangs, ProjectsDatabase[]>> = reactive(new Map())\r\n  private __pinnedProjects: Reactive<Map<ElflandLangs, Project[]>> = reactive(new Map())\r\n\r\n  readonly pinnedProjects: ComputedRef<Project[]> = computed(() => this.__pinnedProjects.get(this.__elfland.i18n.getLang().value) || [])\r\n  readonly projectsCategorySorted: ComputedRef<ProjectsDatabase[]> = computed(() => this.__projects.get(this.__elfland.i18n.getLang().value) || [])\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (this.__projectsIsGotten) return\r\n    try {\r\n      await this.__elfland.data.waitingDataGet\r\n      const data = this.__elfland.data.data\r\n      if (data === null) return\r\n      data.projects\r\n      this.__elfland.i18n.langList.forEach(l => {\r\n        if (data.projects[l] === undefined) return\r\n        this.createProjectsDatabase(l, data.projects[l])\r\n      })\r\n      this.__projectsIsGotten = true\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  private createProjectsDatabase(lang: ElflandLangs, _projects: ProjectDataItem[]) {\r\n    const projects = _projects.slice(2)\r\n    const sortedData = (_projects[0] as unknown as { Sorted: string[] }).Sorted\r\n    const sorted: ProjectsDatabase[] = []\r\n    const pinned: Project[] = []\r\n    sortedData.forEach(s => {\r\n      sorted.push(new ProjectsDatabase(s))\r\n    })\r\n    projects.forEach(p => {\r\n      const pins = new Project(p)\r\n      if (p.pinned) pinned.push(pins)\r\n      const db = sorted.find(d => d.category === p.category)\r\n      if (!db) {\r\n        const ndb = new ProjectsDatabase(p.category)\r\n        ndb.addProject(pins)\r\n        sorted.push(ndb)\r\n      } else {\r\n        db.addProject(pins)\r\n      }\r\n    })\r\n    this.__projects.set(lang, sorted)\r\n    this.__pinnedProjects.set(lang, pinned)\r\n  }\r\n}\r\n","import type { Article } from '@/core/elfland-addon-articles/core/article'\r\n\r\nexport class Tag {\r\n  readonly tag: string\r\n  readonly articles: Article[] = []\r\n\r\n  get size() {\r\n    return this.articles.length\r\n  }\r\n\r\n  constructor(tag: string) {\r\n    this.tag = tag\r\n  }\r\n  addArticle(article: Article) {\r\n    this.articles.push(article)\r\n  }\r\n}\r\n","import { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport { computed, reactive, ref, type ComputedRef, type Reactive, type Ref } from 'vue'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\nimport { Tag } from './tag'\r\nimport type { Article } from '@/core/elfland-addon-articles/core/article'\r\nimport type { RouterPromiseSyncFuncRes } from '@/core/elfland/types'\r\nimport type { Elfland } from '@/core/elfland/core'\r\n\r\nexport class Tags extends ElflandAddon {\r\n  private __tagsIsGotten: boolean = false\r\n  private __tags: Reactive<Map<string, Tag>> = reactive(new Map())\r\n  private __selectedTag: Ref<string> = ref('')\r\n  readonly sortIsAsc: Ref<boolean> = ref(false)\r\n  readonly sortedArticels: ComputedRef<Article[]> = computed(() => {\r\n    const tag = this.__selectedTag.value\r\n    if (tag === '') return []\r\n    const list = this.__tags.get(tag)\r\n    if (!list) return []\r\n    return list.articles.sort((a, b) => {\r\n      if (this.sortIsAsc.value) return a.created.getTime() - b.created.getTime()\r\n      else return b.created.getTime() - a.created.getTime()\r\n    })\r\n  })\r\n  readonly tags: ComputedRef<Tag[]> = computed(() => {\r\n    return Array.from(this.__tags.values())\r\n  })\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n    this.__elfland.routerPromise.addPostcheck(this.postcheck, this)\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (this.__tagsIsGotten) return\r\n    try {\r\n      await this.__elfland.articles.waitingDataGet\r\n      const articles = this.__elfland.articles.articles.value\r\n      articles.forEach(a => {\r\n        a.tags.forEach(t => {\r\n          if (!this.__tags.has(t.tag)) this.__tags.set(t.tag, new Tag(t.tag))\r\n          const tag = this.__tags.get(t.tag)!\r\n          tag.addArticle(a)\r\n        })\r\n      })\r\n      this.__tagsIsGotten = true\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  private postcheck(to: RouteLocationNormalized, from: RouteLocationNormalized): RouterPromiseSyncFuncRes {\r\n    if (!this.is(to, 'tags')) return\r\n    const tag = to.query.tag\r\n    this.__selectedTag.value = tag ? typeof tag === 'string' ? tag : tag[0] as string : ''\r\n  }\r\n}\r\n","import type { Article, Category as ArticleCategory } from '@/core/elfland-addon-articles/core/article'\r\n\r\nexport class Category {\r\n  readonly category: string\r\n  readonly children: Map<string, Category> = new Map()\r\n  readonly allArts: Article[] = []\r\n  readonly selfArts: Article[] = []\r\n  readonly parent: Category | null = null\r\n\r\n  fold: boolean = true\r\n\r\n  get categories(): Category[] {\r\n    return Array.from(this.children.values())\r\n  }\r\n\r\n  get path(): string {\r\n    if (this.category === 'ROOT' || this.parent === null) return ''\r\n    return this.parent.path + '/' + this.category\r\n  }\r\n\r\n  constructor(category?: string, parent?: Category) {\r\n    this.category = category || 'ROOT'\r\n    this.parent = parent || null\r\n  }\r\n\r\n  addArticle(art: Article, cate: ArticleCategory) {\r\n    this.allArts.push(art)\r\n    const category = cate.category\r\n    if (!this.children.has(category)) this.children.set(category, new Category(category, this))\r\n    const categoryIns = this.children.get(category) as Category\r\n    if (cate.child === null) {\r\n      categoryIns.allArts.push(art)\r\n      categoryIns.selfArts.push(art)\r\n    } else {\r\n      categoryIns.addArticle(art, cate.child)\r\n    }\r\n  }\r\n}\r\n","import { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\nimport { Category } from './category'\r\nimport { computed, reactive, ref, type ComputedRef, type Reactive, type Ref } from 'vue'\r\nimport type { Article } from '@/core/elfland-addon-articles/core/article'\r\nimport type { RouterPromiseSyncFuncRes } from '@/core/elfland/types'\r\nimport type { Elfland } from '@/core/elfland/core'\r\n\r\nexport class Categories extends ElflandAddon {\r\n  private __categoriesIsGotten: boolean = false\r\n  private __category: Reactive<Category> = reactive(new Category())\r\n\r\n  private __selcetedCategory: Ref<string> = ref('')\r\n  private __displayArticlesList: ComputedRef<Article[]> = computed(() => {\r\n    if (this.__selcetedCategory.value === '') return []\r\n    const cates = this.__selcetedCategory.value.split('/').filter(c => c !== '')\r\n    let res: Article[] = []\r\n    let cate: Category | undefined = this.__category\r\n    while (cates.length > 0) {\r\n      cate = cate.children.get(cates.shift() || '')\r\n      if (!cate) return []\r\n      res = cate.allArts\r\n    }\r\n    return res\r\n  })\r\n  get categories(): Category[] {\r\n    return this.__category.categories.sort((a, b) => a.category === '未分组' ? 1 : -1)\r\n  }\r\n  readonly sortIsAsc: Ref<boolean> = ref(false)\r\n  readonly sortedArticels: ComputedRef<Article[]> = computed(() => {\r\n    return this.__displayArticlesList.value.sort((a, b) => {\r\n      if (this.sortIsAsc.value) return a.created.getTime() - b.created.getTime()\r\n      else return b.created.getTime() - a.created.getTime()\r\n    })\r\n  })\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n    this.__elfland.routerPromise.addPostcheck(this.postcheck, this)\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (this.__categoriesIsGotten) return\r\n    try {\r\n      await this.__elfland.articles.waitingDataGet\r\n      const articles = this.__elfland.articles.articles.value\r\n      articles.forEach(a => {\r\n        this.__category.addArticle(a, a.categories)\r\n      })\r\n      this.__categoriesIsGotten = true\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  private postcheck(to: RouteLocationNormalized, from: RouteLocationNormalized): RouterPromiseSyncFuncRes {\r\n    if (!this.is(to, 'categories')) return\r\n    const category = to.query.category\r\n    this.__selcetedCategory.value = category ? typeof category === 'string' ? category : category[0] as string : ''\r\n    if (this.__selcetedCategory.value === '') return\r\n    const cates = this.__selcetedCategory.value.split('/').filter(c => c !== '')\r\n    let cate: Category | undefined = this.__category\r\n    while (cates.length > 0) {\r\n      cate = cate.children.get(cates.shift() || '')\r\n      if (!cate) return\r\n      cate.fold = false\r\n    }\r\n  }\r\n}\r\n","import type { AboutData, LinkDataItem, SkillDataItem } from '@/core/elfland-addon-data/types/about'\r\n\r\nexport class AboutItem {\r\n  readonly name: string\r\n  readonly position: string\r\n  readonly avater: string\r\n  readonly about: string[]\r\n  readonly github: string\r\n\r\n  readonly links: LinkDataItem[] = []\r\n  readonly skills: SkillDataItem[] = []\r\n\r\n  constructor(data: AboutData) {\r\n    this.name = data.name\r\n    this.position = data.position\r\n    this.avater = data.avater\r\n    this.about = data.about\r\n    this.github = data.github\r\n\r\n    data.links.forEach(l => {\r\n      this.links.push(l)\r\n    })\r\n\r\n    data.skills.forEach(s => {\r\n      this.skills.push(s)\r\n    })\r\n  }\r\n}\r\n","import type { AboutData } from '@/core/elfland-addon-data/types/about'\r\nimport type { Elfland } from '@/core/elfland/core'\r\nimport { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport type { ElflandLangs } from '@/core/elfland/types'\r\nimport { computed, reactive, type Reactive } from 'vue'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\nimport { AboutItem } from './about'\r\n\r\nexport class About extends ElflandAddon {\r\n  private __aboutIsGotten: boolean = false\r\n  private __abouts: Reactive<Map<ElflandLangs, AboutItem>> = reactive(new Map())\r\n  private __lang = computed(() => this.__elfland.i18n.getLang().value)\r\n\r\n  readonly name = computed(() => this.__abouts.get(this.__lang.value)?.name || '')\r\n  readonly position = computed(() => this.__abouts.get(this.__lang.value)?.position || '')\r\n  readonly avater = computed(() => this.__abouts.get(this.__lang.value)?.avater || '')\r\n  readonly about = computed(() => this.__abouts.get(this.__lang.value)?.about || [])\r\n  readonly github = computed(() => this.__abouts.get(this.__lang.value)?.github || '')\r\n\r\n  readonly links = computed(() => this.__abouts.get(this.__lang.value)?.links || [])\r\n  readonly skills = computed(() => this.__abouts.get(this.__lang.value)?.skills || [])\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (this.__aboutIsGotten) return\r\n    try {\r\n      await this.__elfland.data.waitingDataGet\r\n      const data = this.__elfland.data.data\r\n      if (data === null) return\r\n      const about = data.about\r\n      this.__elfland.i18n.langList.forEach(l => {\r\n        if (about[l] === undefined) return\r\n        this.createAboutItem(l, about[l])\r\n      })\r\n\r\n      this.__aboutIsGotten = true\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  private createAboutItem(lang: ElflandLangs, about: AboutData) {\r\n    this.__abouts.set(lang, new AboutItem(about))\r\n  }\r\n}\r\n","import type { Elfland } from '@/core/elfland/core'\r\nimport { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport { DefPromiseHelper } from '@/core/elfland/core/promise-helper'\r\nimport type { RouterPromiseSyncFuncRes } from '@/core/elfland/types'\r\nimport { computed, ref, type Ref } from 'vue'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\n\r\nexport class TSPlayground extends ElflandAddon {\r\n  private __tsFilesListIsGotten: boolean = false\r\n  private __tsFilesListPromise: DefPromiseHelper = new DefPromiseHelper()\r\n  private __tsFilesList: string[] = []\r\n  private __tsFiles: Map<string, Record<string, string>> = new Map()\r\n  private __selectedExample: Ref<string> = ref('def')\r\n\r\n  get selectedExampleFiles() {\r\n    return computed(() => {\r\n      return this.__tsFiles.get(this.__selectedExample.value) || { '/index.ts': `console.log('Hello World')` }\r\n    })\r\n  }\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n\r\n    this.__tsFiles.set('def', {\r\n      '/index.ts': `import { add } from './math.ts'\\nimport _ from 'lodash'\\nconsole.log('sum =', add(1,2))\\nconsole.log('lodash version', _.VERSION)`,\r\n      '/math.ts': `export const add = (a:number, b:number)=> a + b`\r\n    })\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n    this.__elfland.routerPromise.addCheck(this.checkQuery, this)\r\n    this.__elfland.routerPromise.addPostcheck(this.postcheck, this)\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (!this.is(to, 'ts-playground')) return\r\n    if (this.__tsFilesListIsGotten) return\r\n    try {\r\n      await this.__elfland.data.waitingDataGet\r\n      const data = this.__elfland.data.data\r\n      if (data === null) return\r\n      const list = data.tsJsonList\r\n      this.__tsFilesList = Array.from(list)\r\n      this.__tsFilesListPromise.resolve()\r\n      this.__tsFilesListIsGotten = true\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  private async checkQuery(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (!this.is(to, 'ts-playground')) return\r\n    const q = to.query.example\r\n    if (typeof q !== 'string') return\r\n    await this.__tsFilesListPromise.promise\r\n    if (!this.__tsFilesList.includes(q)) {\r\n      return { name: 'ts-playground', query: {}}\r\n    }\r\n    if (!this.__tsFiles.has(q)) {\r\n      const res = await fetch(`/data/ts-playground/${q}.json`)\r\n      const json = await res.json() as { name: string, code: string}[]\r\n      const data: Record<string, string> = {}\r\n      json.forEach(item => {\r\n        data['/' + item.name] = item.code\r\n      })\r\n      this.__tsFiles.set(q, data)\r\n    }\r\n  }\r\n\r\n  private postcheck(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): RouterPromiseSyncFuncRes {\r\n    if (!this.is(to, 'ts-playground')) return\r\n    const q = to.query.example\r\n    if (typeof q !== 'string') this.__selectedExample.value = 'def'\r\n    else this.__selectedExample.value = q\r\n  }\r\n}\r\n","import type { Elfland } from '@/core/elfland/core'\r\nimport { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport { DefPromiseHelper } from '@/core/elfland/core/promise-helper'\r\nimport type { RouterPromiseSyncFuncRes } from '@/core/elfland/types'\r\nimport { computed, ref, type Ref } from 'vue'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\nimport type { PlaygroundFiles } from '../types'\r\n\r\nconst defaultHTML = `<!-- Try editing me! -->\r\n<div id=\"app\" class=\"p-4\">\r\n  <h1>Hello, Playground 👋</h1>\r\n  <button id=\"btn\">Click me</button>\r\n</div>`\r\nconst defaultCSS = `body{ font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, \r\n  \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\"; padding: 16px;}\r\n#btn{ padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer;}\r\n#btn:hover{ background:#f5f5f5; }`\r\nconst defaultJS = `console.log('Hello from JS!')\r\nconst btn = document.getElementById('btn')\r\nbtn?.addEventListener('click', ()=>{\r\n  console.log('Button clicked at', new Date().toLocaleTimeString())\r\n  alert('Hi from JS!')\r\n})`\r\nconst defaultTS = `type Person = { name: string, age: number }\r\nconst p: Person = { name: 'Alice', age: 20 }\r\nconsole.info('TS compiled value:', p)`\r\n\r\nconst defFiles = {\r\n  html: {\r\n    name: 'html',\r\n    code: defaultHTML\r\n  },\r\n  css: {\r\n    name: 'css',\r\n    code: defaultCSS\r\n  },\r\n  js: {\r\n    name: 'js',\r\n    code: defaultJS\r\n  },\r\n  ts: {\r\n    name: 'ts',\r\n    code: defaultTS\r\n  }\r\n}\r\n\r\nexport class Playground extends ElflandAddon {\r\n  private __playgroundFilesListIsGotten: boolean = false\r\n  private __playgroundFilesListPromise: DefPromiseHelper = new DefPromiseHelper()\r\n  private __playgroundFilesList: string[] = []\r\n  private __playgroundFiles: Map<string, PlaygroundFiles> = new Map()\r\n  private __selectedExample: Ref<string> = ref('def')\r\n\r\n  get selectedExampleFiles() {\r\n    return computed(() => {\r\n      return this.__playgroundFiles.get(this.__selectedExample.value) || defFiles\r\n    })\r\n  }\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n\r\n    this.__playgroundFiles.set('def', defFiles)\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n    this.__elfland.routerPromise.addCheck(this.checkQuery, this)\r\n    this.__elfland.routerPromise.addPostcheck(this.postcheck, this)\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (!this.is(to, 'playground')) return\r\n    if (this.__playgroundFilesListIsGotten) return\r\n    try {\r\n      await this.__elfland.data.waitingDataGet\r\n      const data = this.__elfland.data.data\r\n      if (data === null) return\r\n      const list = data.playgroundJsonList\r\n      this.__playgroundFilesList = Array.from(list)\r\n      this.__playgroundFilesListPromise.resolve()\r\n      this.__playgroundFilesListIsGotten = true\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n\r\n  private async checkQuery(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (!this.is(to, 'playground')) return\r\n    const q = to.query.example\r\n    if (typeof q !== 'string') return\r\n    await this.__playgroundFilesListPromise.promise\r\n    if (!this.__playgroundFilesList.includes(q)) {\r\n      return { name: 'playground', query: {}}\r\n    }\r\n    if (!this.__playgroundFiles.has(q)) {\r\n      const res = await fetch(`/data/playground/${q}.json`)\r\n      const json = await res.json() as { name: string, code: string, type: 'html' | 'css' | 'ts' | 'js'}[]\r\n      const data: PlaygroundFiles = {\r\n        html: { name: 'html', code: '' },\r\n        css: { name: 'css', code: '' },\r\n        ts: { name: 'ts', code: '' },\r\n        js: { name: 'js', code: '' }\r\n      }\r\n      json.forEach(item => {\r\n        if (!['html', 'css', 'ts', 'js'].includes(item.type)) return\r\n        data[item.type].name = item.name\r\n        data[item.type].code = item.code\r\n      })\r\n      this.__playgroundFiles.set(q, data)\r\n    }\r\n  }\r\n\r\n  private postcheck(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): RouterPromiseSyncFuncRes {\r\n    if (!this.is(to, 'playground')) return\r\n    const q = to.query.example\r\n    if (typeof q !== 'string') this.__selectedExample.value = 'def'\r\n    else this.__selectedExample.value = q\r\n  }\r\n}\r\n","export class Friend {\r\n  readonly name: string\r\n  readonly url: string\r\n  readonly avater: string\r\n  readonly desc: string\r\n\r\n  constructor(name: string, url: string, avater: string, desc: string) {\r\n    this.name = name\r\n    this.url = url\r\n    this.avater = avater\r\n    this.desc = desc\r\n  }\r\n}\r\n","import { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport { computed, ref, type Ref } from 'vue'\r\nimport type { RouteLocationNormalized, RouteLocationRaw } from 'vue-router'\r\nimport { Friend } from './friend'\r\nimport type { Elfland } from '@/core/elfland/core'\r\n\r\nexport class Friends extends ElflandAddon {\r\n  private __friendsIsGotten: boolean = false\r\n  private __friends: Ref<Friend[]> = ref([])\r\n\r\n  get friends() {\r\n    return computed(() => this.__friends.value)\r\n  }\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__elfland.routerPromise.addCheck(this.check, this)\r\n  }\r\n\r\n  private async check(\r\n    to: RouteLocationNormalized,\r\n    from: RouteLocationNormalized\r\n  ): Promise<RouteLocationRaw | void> {\r\n    if (this.__friendsIsGotten) return\r\n    try {\r\n      await this.__elfland.data.waitingDataGet\r\n      const data = this.__elfland.data.data\r\n      if (data === null) return\r\n      const friends = data.friends\r\n      friends.forEach(f => {\r\n        this.__friends.value.push(new Friend(f.name, f.url, f.avater, f.desc))\r\n      })\r\n      this.__friendsIsGotten = true\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n}\r\n","\r\nimport type { Elfland } from '@/core/elfland/core'\r\nimport { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport type { ElflandLangs } from '@/core/elfland/types'\r\nimport { localGet, localSet } from '@/core/elfland/utils'\r\nimport { ref, watch, type Ref, type WatchHandle } from 'vue'\r\nimport { createI18n } from 'vue-i18n'\r\nimport type { I18n } from 'vue-i18n'\r\n\r\nexport class ElflandI18n extends ElflandAddon {\r\n  static readonly LANG = 'LANG'\r\n  static readonly LANG_LIST: ElflandLangs[] = ['zh-CN', 'en-US']\r\n  readonly i18n: I18n\r\n  readonly langList: ElflandLangs[] = ['zh-CN', 'en-US']\r\n  private __lang: Ref<ElflandLangs>\r\n  private __watchFunc: WatchHandle\r\n\r\n  constructor(messages: any, elfland: Elfland) {\r\n    super(elfland)\r\n    this.__lang = ref(this.getLangStr())\r\n    this.i18n = createI18n({\r\n      locale: this.__lang.value,\r\n      legacy: false,\r\n      messages: messages\r\n    })\r\n    this.__watchFunc = watch(this.__lang, (newLang: ElflandLangs) => {\r\n      this.setLangStr(newLang)\r\n    })\r\n  }\r\n\r\n  loadedCallback(): void {}\r\n\r\n  private getLangStr(): ElflandLangs {\r\n    let lang = localGet(ElflandI18n.LANG, 'en-US') || ''\r\n    if (!ElflandI18n.LANG_LIST.includes(lang as ElflandLangs)) {\r\n      this.setLangStr('en-US')\r\n      lang = 'en-US'\r\n    }\r\n    return lang as ElflandLangs\r\n  }\r\n\r\n  private setLangStr(lang: ElflandLangs) {\r\n    localSet(ElflandI18n.LANG, lang)\r\n    this.getLocale().value = lang\r\n  }\r\n\r\n  getLang() {\r\n    return this.__lang\r\n  }\r\n\r\n  getT() {\r\n    const { t } = this.i18n.global\r\n    return t as any\r\n  }\r\n\r\n  getLocale() {\r\n    return this.i18n.global.locale as any\r\n  }\r\n\r\n  getTe() {\r\n    const { te } = this.i18n.global\r\n    return te\r\n  }\r\n\r\n  toggleLang() {\r\n    this.__lang.value = this.__lang.value === 'zh-CN' ? 'en-US' : 'zh-CN'\r\n  }\r\n}\r\n","import EventEmitter from 'eventemitter3'\r\nimport type { ExpressionManager } from 'pixi-live2d-display'\r\n/**\r\n * live2D模型包装类\r\n */\r\nexport default class CubismModelWrapper extends EventEmitter {\r\n  protected __cubismModel: any | null = null\r\n  protected __expressionManager: ExpressionManager | null = null\r\n  protected __destroyed: boolean = false\r\n\r\n  protected setCubismModel(cubismModel: Object, expressionManager: ExpressionManager) {\r\n    this.__cubismModel = cubismModel\r\n    this.__expressionManager = expressionManager\r\n  }\r\n  protected pushExpressionData(expression: string) {\r\n    if (!this.__expressionManager) return\r\n    if (this.__expressionManager.getExpressionIndex(expression) !== -1) return\r\n    this.__expressionManager.definitions.push({\r\n      Name: expression,\r\n      File: expression\r\n    })\r\n  }\r\n  /**\r\n\t * パラメータの値の加算(id)\r\n\t * @param parameterId パラメータＩＤ\r\n\t * @param value 加算する値\r\n\t * @param weight 重み\r\n\t */\r\n  protected addParameterValueById(parameterId: string, value: number, weight?: number) {\r\n    if (!this.__cubismModel) return\r\n    this.__cubismModel.addParameterValueById(parameterId, value, weight)\r\n  }\r\n  /**\r\n\t * パラメータの値の乗算\r\n\t * @param parameterId パラメータのID\r\n\t * @param value 乗算する値\r\n\t * @param weight 重み\r\n\t */\r\n  protected multiplyParameterValueById(parameterId: string, value: number, weight?: number) {\r\n    if (!this.__cubismModel) return\r\n    this.__cubismModel.multiplyParameterValueById(parameterId, value, weight)\r\n  }\r\n\r\n  protected setParameterValueById(parameterId: string, value: number, weight?: number) {\r\n    if (!this.__cubismModel) return\r\n    this.__cubismModel.setParameterValueById(parameterId, value, weight)\r\n  }\r\n\r\n  protected getParameterIndex(parameterId: string): number {\r\n    if (!this.__cubismModel) return -1\r\n    return this.__cubismModel.getParameterIndex(parameterId) as number\r\n  }\r\n\r\n  protected getParameterValueById(parameterId: string): number {\r\n    if (!this.__cubismModel) return -1\r\n    return this.__cubismModel.getParameterValueById(parameterId) as number\r\n  }\r\n\r\n  protected saveParameters(): boolean {\r\n    if (!this.__cubismModel) return false\r\n    this.__cubismModel.saveParameters()\r\n    return true\r\n  }\r\n\r\n  protected loadParameters(): boolean {\r\n    if (!this.__cubismModel) return false\r\n    this.__cubismModel.loadParameters()\r\n    return true\r\n  }\r\n\r\n  destroy() {\r\n    if (this.__destroyed) return\r\n    this.__destroyed = true\r\n    this.removeAllListeners()\r\n  }\r\n}\r\n","import CubismModelWrapper from './cubism-model-wrapper'\r\nimport * as PIXI from 'pixi.js'\r\nimport { Live2DModel, ModelSettings, type JSONObject } from 'pixi-live2d-display/cubism4'\r\nimport { deepClone, Timer } from '@/core/elfland/utils'\r\nimport type { ElflandTheme } from '@/core/elfland-addon-theme'\r\nimport type { ExpressionData, ModelConfig, ParameterData } from '../../types/model'\r\nimport type { MessageDictHTML } from '@/core/elfland-addon-message-manager/types'\r\n\r\nexport abstract class InternalModel extends CubismModelWrapper {\r\n  static name = 'default'\r\n  protected abstract __costumes: string[]\r\n  readonly abstract message: MessageDictHTML\r\n  /**\r\n   * 模型名字\r\n   */\r\n  readonly name: string\r\n  protected __model: Live2DModel | null = null\r\n  /**\r\n   * live2d模型配置项\r\n   */\r\n  protected __live2DFrom: string | JSONObject | ModelSettings\r\n  protected __line2DModelConfig: ModelConfig\r\n  /** Map<groupId, Map<Parameter的id（不是parameterId）, ParameterData>> */\r\n  protected __live2DParameterDatas: Map<string, Map<string, ParameterData>> = new Map()\r\n  /** Map<Parameter的id（不是parameterId）, ParameterData> */\r\n  protected __live2DAllParameterDatas: Map<string, ParameterData> = new Map()\r\n  /** Map<expressionId, ExpressionData> */\r\n  protected __live2DExpressionDatas: Map<string, ExpressionData> = new Map()\r\n  /** Map<groupId, Parameter的id（不是parameterId）> 当前激活的Parameter */\r\n  protected __live2DActiveParameterDatas: Map<string, string> = new Map()\r\n  protected __timer: Timer\r\n\r\n  protected __statusData = {\r\n    hitIgnore: false\r\n  }\r\n\r\n  protected __idleStop: (() => void) | null = null\r\n\r\n  get costumes() {\r\n    return Array.from(this.__costumes)\r\n  }\r\n\r\n  constructor(live2DFrom: string | JSONObject | ModelSettings, modelConfig: ModelConfig) {\r\n    super()\r\n\r\n    this.name = modelConfig.name || 'default'\r\n\r\n    this.__live2DFrom = live2DFrom\r\n    this.__line2DModelConfig = modelConfig\r\n\r\n    /**\r\n     * 动画计时器\r\n     */\r\n    this.__timer = new Timer()\r\n\r\n    this.init()\r\n  }\r\n\r\n  init() {\r\n    /**\r\n     * 创建表情恢复计时器\r\n     * 创建闲暇状态计时器\r\n     */\r\n    this.__timer.create('idle', false, 1000 * 60 * 5)\r\n    /**\r\n     * 监听闲暇状态计时器\r\n     */\r\n    this.__timer.on('idle', () => {\r\n      this.__idleStop = this.idle()\r\n    }, this)\r\n    /** 启动闲暇状态计时器 */\r\n    this.__timer.restart('idle')\r\n\r\n    this.__line2DModelConfig.expressionDatas.forEach(exp => {\r\n      this.__live2DExpressionDatas.set(exp.id, exp)\r\n    })\r\n    this.__line2DModelConfig.parameterGroups.forEach(g => {\r\n      const map: Map<string, ParameterData> = new Map()\r\n      g.parameterDatas.forEach(p => {\r\n        map.set(p.id, p)\r\n        this.__live2DAllParameterDatas.set(p.id, p)\r\n      })\r\n      this.__live2DParameterDatas.set(g.groupId, map)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 设置是否忽略点击区域\r\n   * @param hitIgnore 是否忽略点击区域\r\n   */\r\n  setHitIgnore(hitIgnore: boolean) {\r\n    this.__statusData.hitIgnore = hitIgnore\r\n  }\r\n\r\n  /**\r\n   * 由shower调用，加载模型数据\r\n   * @param app PIXI.Application\r\n   * @returns 是否加载成功\r\n   */\r\n  async load(app: PIXI.Application): Promise<boolean> {\r\n    this.__model = await Live2DModel.from(this.__live2DFrom)\r\n    if (this.__destroyed || this.__model === null || app.stage === null) return false\r\n    app.stage.addChild(this.__model)\r\n    this.setCubismModel(this.__model.internalModel.coreModel, (this.__model.internalModel.motionManager as any).expressionManager)\r\n    this.__model.on('hit', (hitAreas) => {\r\n      this.hitAreasBase(hitAreas)\r\n    })\r\n\r\n    this.loaded()\r\n    this.emit('loaded')\r\n    return true\r\n  }\r\n\r\n  protected abstract loaded(): void\r\n\r\n  destroy() {\r\n    super.destroy()\r\n    if (this.__timer) this.__timer.destroy()\r\n    if (this.__model) this.__model.destroy()\r\n  }\r\n\r\n  /**\r\n   * 空闲状态触发\r\n   */\r\n  protected abstract idle(): () => void\r\n\r\n  private changeParameterValue(\r\n    groupId: string,\r\n    id: string,\r\n    add: boolean,\r\n    clear: boolean = false\r\n  ): boolean {\r\n    const group = this.__live2DParameterDatas.get(groupId)\r\n    if (!group || clear || !group.has(id)) return false\r\n    /** parameterData在clear为true的情况下无效 */\r\n    const parameterData = group.get(id)!\r\n    const live2DActiveParameterDatas = this.__live2DActiveParameterDatas\r\n    const activeId = live2DActiveParameterDatas.get(groupId)\r\n    if (!add) {\r\n      /** remove */\r\n      if (!clear && activeId !== id) return false\r\n      if (activeId === undefined) return false\r\n      live2DActiveParameterDatas.delete(groupId)\r\n      /** clear 情况下用add */\r\n      if (clear || parameterData.blend === 'Add') {\r\n        this.addParameterValueById(activeId, 0, parameterData.weight)\r\n      } else {\r\n        this.multiplyParameterValueById(activeId, 0, parameterData.weight)\r\n      }\r\n      return true\r\n    }\r\n    /** add */\r\n    // if (Array.from(this.__live2DActiveParameterDatas.values()).includes(parameterId)) return true\r\n    if (activeId === id) return true\r\n    if (activeId !== undefined || parameterData.parameterId === 'NULL') this.changeParameterValue(groupId, '', false, true)\r\n    if (parameterData.parameterId === 'NULL') return true\r\n    live2DActiveParameterDatas.set(groupId, id)\r\n    if (parameterData.blend === 'Add') {\r\n      this.addParameterValueById(\r\n        parameterData.parameterId,\r\n        parameterData.value,\r\n        parameterData.weight\r\n      )\r\n    } else {\r\n      this.multiplyParameterValueById(\r\n        parameterData.parameterId,\r\n        parameterData.value,\r\n        parameterData.weight\r\n      )\r\n    }\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 为模型添加Parameter\r\n   * @param groupId Parameter组\r\n   * @param id ParameterId\r\n   * @returns 是否添加成功\r\n   */\r\n  protected addParameter(groupId: string, id: string): boolean {\r\n    return this.changeParameterValue(groupId, id, true)\r\n  }\r\n\r\n  /**\r\n   * 为模型移除Parameter\r\n   * @param groupId Parameter组\r\n   * @param id ParameterId\r\n   * @param clear boolean 是否移除Parameter，不在意ParameterId是否是已激活的ParameterId\r\n   * @returns 是否移除成功\r\n   */\r\n  protected removeParameter(groupId: string, id: string, clear: boolean = false): boolean {\r\n    return this.changeParameterValue(groupId, id, false, clear)\r\n  }\r\n  /**\r\n   * 为模型添加Parameter\r\n   * @param groupId Parameter组\r\n   * @param id ParameterId\r\n   * @returns 是否添加成功\r\n   */\r\n  protected addParameterOnlyForMap(groupId: string, id: string): boolean {\r\n    const group = this.__live2DParameterDatas.get(groupId)\r\n    if (!group || !group.has(id)) return false\r\n    const parameterData = group.get(id)!\r\n    const live2DActiveParameterDatas = this.__live2DActiveParameterDatas\r\n    live2DActiveParameterDatas.set(groupId, parameterData.id)\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 为模型移除Parameter\r\n   * @param groupId Parameter组\r\n   * @returns 是否移除成功\r\n   */\r\n  protected removeParameterOnlyForMap(groupId: string): boolean {\r\n    if (!this.__live2DParameterDatas.has(groupId)) return false\r\n    this.__live2DActiveParameterDatas.delete(groupId)\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * null会将groupId参数移除\r\n   * @param {String} expression expressionId 或 Record<groupId, id | null> 表情\r\n   * @returns\r\n   */\r\n  protected addExpression(expression: string | Record<string, string | null>) {\r\n    console.log(expression)\r\n    if (this.__destroyed) return\r\n    if (!this.__model) return\r\n    const temp =\r\n      typeof expression === 'string'\r\n        ? this.__live2DExpressionDatas.get(expression)?.parameterDatas\r\n        : expression\r\n    if (temp === undefined) return\r\n    expression = temp\r\n    Object.entries(expression).forEach(([k, v]) => {\r\n      if (v === null) {\r\n        this.removeParameterOnlyForMap(k)\r\n      } else {\r\n        this.addParameterOnlyForMap(k, v)\r\n      }\r\n    })\r\n    this.showExpression()\r\n  }\r\n\r\n  /**\r\n   * reverse === true时，expression类型为string[]，代表不需要移除参数的groupId，其余的groupId参数都会被移除\r\n   * @param expression 不需要移除参数的groupId\r\n   * @param reverse true\r\n   */\r\n  protected removeExpression(expression: string[], reverse?: true): void\r\n  /**\r\n   *\r\n   * reverse === false时，expression类型为string | Record<string, string | null> | null，代表需要移除的表情id、参数id、全部移除\r\n   * @param expression 需要移除的表情id、参数id、全部移除\r\n   * @param reverse false\r\n   */\r\n  protected removeExpression(\r\n    expression: string | Record<string, string | null> | null,\r\n    reverse?: false,\r\n  ): void\r\n  protected removeExpression(\r\n    expression: string | Record<string, string | null> | null | string[],\r\n    reverse: boolean = false\r\n  ): void {\r\n    const parameterData = this.__live2DActiveParameterDatas\r\n    if (reverse) {\r\n      if (!Array.isArray(expression)) return\r\n      Object.entries(parameterData).forEach(([k]) => {\r\n        if (!expression.includes(k)) {\r\n          this.removeParameterOnlyForMap(k)\r\n        }\r\n      })\r\n    } else {\r\n      const temp =\r\n        typeof expression === 'string'\r\n          ? this.__live2DExpressionDatas.get(expression)?.parameterDatas\r\n          : expression\r\n      if (temp === undefined || Array.isArray(temp)) return\r\n      if (temp === null) {\r\n        Object.entries(parameterData).forEach(([k, v]) => {\r\n          this.removeParameterOnlyForMap(k)\r\n        })\r\n      } else {\r\n        Object.entries(temp).forEach(([k, v]) => {\r\n          if (v === null) {\r\n            this.removeParameterOnlyForMap(k)\r\n          } else {\r\n            this.removeParameterOnlyForMap(k)\r\n          }\r\n        })\r\n      }\r\n    }\r\n    this.showExpression()\r\n  }\r\n\r\n  private showExpression() {\r\n    if (!this.__model) return\r\n    const data = this.createExpressionFileData()\r\n    this.pushExpressionData(data.name)\r\n    this.__model.expression(data.name, data.data)\r\n  }\r\n\r\n  private createGroupList() {\r\n    return this.__line2DModelConfig.parameterGroups.map(g => g.groupId)\r\n  }\r\n\r\n  private createExpressionFileData() {\r\n    const groupList = this.createGroupList()\r\n    const parameterList = groupList.map(g => this.__live2DActiveParameterDatas.get(g) || 'NULL')\r\n    const parameters = parameterList.map(p => {\r\n      if (p === 'NULL') return null\r\n      const pa = this.__live2DAllParameterDatas.get(p)\r\n      if (pa === undefined) return null\r\n      return {\r\n        Id: pa.parameterId,\r\n        Value: pa.value,\r\n        Blend: pa.blend\r\n      }\r\n    }).filter(i => i !== null)\r\n    return {\r\n      data: {\r\n        Type: 'Live2D Expression',\r\n        Parameters: parameters\r\n      },\r\n      name: parameterList.join('-')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 点击事件触发\r\n   * @param {Array} hitAreas 点击区域列表\r\n   */\r\n  private hitAreasBase(hitAreas: string[]) {\r\n    if (this.__statusData.hitIgnore) {\r\n      this.__statusData.hitIgnore = false\r\n      return false\r\n    }\r\n    // 重启空闲状态计时器\r\n    //\r\n    if (this.__idleStop) {\r\n      this.__idleStop()\r\n      this.__idleStop = null\r\n    }\r\n    this.__timer.restart('idle')\r\n    this.hitAreas(hitAreas)\r\n    this.emit('hitAreas', hitAreas)\r\n    return true\r\n  }\r\n\r\n  protected abstract hitAreas(hitAreas: string[]): void\r\n\r\n  /**\r\n   * 改变模型主题\r\n   * @param {*} theme 主题\r\n   * @returns\r\n   */\r\n  themeTo(theme: ElflandTheme) {\r\n    if (theme === 'light') {\r\n      this.addExpression('light')\r\n    } else {\r\n      this.addExpression('dark')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更换模型服装\r\n   * @param {*} costume 服装\r\n   * @returns\r\n   */\r\n  abstract costumeTo(costume: string): boolean\r\n}\r\n","import type { ModelConfig } from '@/core/elfland-addon-live2d/types'\r\nimport type { JSONObject, ModelSettings } from 'pixi-live2d-display'\r\n\r\nexport const config: ModelConfig = {\r\n  name: 'atri',\r\n  parameterGroups: [\r\n    {\r\n      groupId: '主题',\r\n      parameterDatas: [\r\n        {\r\n          id: 'light',\r\n          parameterId: 'NULL',\r\n          value: 30,\r\n          blend: 'Add'\r\n        },\r\n        {\r\n          id: 'dark',\r\n          parameterId: 'Param10',\r\n          value: 30,\r\n          blend: 'Add'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      groupId: '着装',\r\n      parameterDatas: [\r\n        {\r\n          id: '常服',\r\n          parameterId: 'NULL',\r\n          value: 0,\r\n          blend: 'Add'\r\n        },\r\n        {\r\n          id: '睡衣',\r\n          parameterId: 'Param18',\r\n          value: 30,\r\n          blend: 'Add'\r\n        },\r\n        {\r\n          id: 'bikini',\r\n          parameterId: 'Param17',\r\n          value: 30,\r\n          blend: 'Add'\r\n        },\r\n        {\r\n          id: '血衣',\r\n          parameterId: 'Param36',\r\n          value: 30,\r\n          blend: 'Add'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      groupId: '脸部表情',\r\n      parameterDatas: [\r\n        {\r\n          id: '无表情',\r\n          parameterId: 'NULL',\r\n          value: 0,\r\n          blend: 'Add'\r\n        },\r\n        {\r\n          id: '脸红',\r\n          parameterId: 'ParamCheek',\r\n          value: 30,\r\n          blend: 'Add'\r\n        },\r\n        {\r\n          id: '高光消失',\r\n          parameterId: 'Param21',\r\n          value: 30,\r\n          blend: 'Add'\r\n        },\r\n        {\r\n          id: '白眼',\r\n          parameterId: 'Param22',\r\n          value: 30,\r\n          blend: 'Add'\r\n        },\r\n        {\r\n          id: 'No',\r\n          parameterId: 'Param39',\r\n          value: -30,\r\n          blend: 'Add'\r\n        },\r\n        {\r\n          id: 'Yes',\r\n          parameterId: 'Param39',\r\n          value: 30,\r\n          blend: 'Add'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      groupId: '待机',\r\n      parameterDatas: [\r\n        {\r\n          id: '小鸟',\r\n          parameterId: 'Param37',\r\n          value: 30,\r\n          blend: 'Add'\r\n        },\r\n        {\r\n          id: '螃蟹',\r\n          parameterId: 'Param38',\r\n          value: 30,\r\n          blend: 'Add'\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  expressionDatas: [\r\n    {\r\n      id: 'light',\r\n      parameterDatas: {\r\n        '主题': 'light'\r\n      }\r\n    },\r\n    {\r\n      id: 'dark',\r\n      parameterDatas: {\r\n        '主题': 'dark'\r\n      }\r\n    },\r\n    {\r\n      id: '无表情',\r\n      parameterDatas: {\r\n        '脸部表情': '无表情'\r\n      }\r\n    },\r\n    {\r\n      id: '害羞',\r\n      parameterDatas: {\r\n        '脸部表情': '脸红'\r\n      }\r\n    },\r\n    {\r\n      id: '生气',\r\n      parameterDatas: {\r\n        '脸部表情': '高光消失'\r\n      }\r\n    },\r\n    {\r\n      id: '变傻',\r\n      parameterDatas: {\r\n        '脸部表情': '白眼'\r\n      }\r\n    },\r\n    {\r\n      id: '杀',\r\n      parameterDatas: {\r\n        '着装': '血衣',\r\n        '脸部表情': '高光消失'\r\n      }\r\n    },\r\n    {\r\n      id: '好',\r\n      parameterDatas: {\r\n        '脸部表情': 'Yes'\r\n      }\r\n    },\r\n    {\r\n      id: '坏',\r\n      parameterDatas: {\r\n        '脸部表情': 'No'\r\n      }\r\n    }\r\n  ]\r\n}\r\n\r\nexport const live2DFrom: string | JSONObject | ModelSettings = {\r\n  url: '/static/live2D/atri/',\r\n  'Version': 3,\r\n  'FileReferences': {\r\n    'Moc': 'atri_8.moc3',\r\n    'Textures': [\r\n      'texture_00.png',\r\n      'texture_01.png'\r\n    ],\r\n    'Physics': 'atri_8.physics3.json',\r\n    'DisplayInfo': 'atri_8.cdi3.json',\r\n    'Expressions': [\r\n      {\r\n        Name: 'test',\r\n        File: 'expressions/expressionsdark-blood-birds.exp3.json'\r\n      }\r\n    ],\r\n    'Motions': {}\r\n  },\r\n  'Groups': [\r\n    {\r\n      'Target': 'Parameter',\r\n      'Name': 'EyeBlink',\r\n      'Ids': [\r\n        'ParamEyeLOpen',\r\n        'ParamEyeROpen'\r\n      ]\r\n    },\r\n    {\r\n      'Target': 'Parameter',\r\n      'Name': 'LipSync',\r\n      'Ids': [\r\n        'ParamMouthForm',\r\n        'ParamMouthOpenY'\r\n      ]\r\n    }\r\n  ],\r\n  'HitAreas': [\r\n    {\r\n      'Id': 'HitArea',\r\n      'Name': 'Body'\r\n    },\r\n    {\r\n      'Id': 'HitArea2',\r\n      'Name': 'Head'\r\n    },\r\n    {\r\n      'Id': 'HitArea3',\r\n      'Name': 'Face'\r\n    }\r\n  ]\r\n}\r\n","export type ElementSelector = string\r\nexport type MessageReceived = string | string[] | (string | { msg: string, i18n: boolean})[]\r\nexport type ElementAttribute = null | string | string[]\r\nexport enum UseI18nFor {\r\n  N = 'NoUseI18n',\r\n  M = 'UseI18nForMessage',\r\n  D = 'UseI18nForDollar',\r\n  B = 'UseI18nForBoth'\r\n}\r\nexport type MessageDetails =\r\n  | RegExp\r\n  | ((value: null | string | string[], element: Element) => Array<string> | string | false | { msg: string | string[], i18n?: UseI18nFor})\r\n/**\r\n * 每一行信息\r\n * 1. 元素选择方式\r\n * 2. 事件触发后回传的信息\r\n * 3. element的attr\r\n *    1. 查询element中的attr：Element.getAttribute(attr)\r\n *    2. 存在正则表达式或处理函数，则对其传入此值\r\n * 4. 哪些字符串使用i18n的情况\r\n * 5. 正则表达式或者处理函数\r\n *    1. 函数情况\r\n *        1. 数组：按照数组下标查询字符串中的'$i'，找到之后替换\r\n *        2. 字符串：如果只有$0时，可以省略直接返回一个字符串\r\n *        3. false：不触发信息\r\n *        4. { msg: string | string[], i18n?: UseI18nFor} 重写信息，msg全部都被认为是Message，i18n用来覆盖原有的信息，\r\n *    2. 正则表达式\r\n *        1. 调用regexp.exec(Element.getAttribute(attr))\r\n *        2. 按照返回的数组下标查询字符串中的'$i'，找到之后替换\r\n *    3. elemnet的attr不为string时，此值无效\r\n */\r\nexport type MessageRow = [ElementSelector, MessageReceived, ElementAttribute, UseI18nFor, MessageDetails]\r\nexport type MessageDictHTML = {\r\n  [K in keyof HTMLElementEventMap]?: Array<MessageRow>\r\n}\r\nexport interface MessageDict {\r\n  html: MessageDictHTML\r\n}\r\n","import { UseI18nFor, type MessageDictHTML } from '@/core/elfland-addon-message-manager/types'\r\n\r\ntype MSG = {\r\n  html: MessageDictHTML\r\n}\r\n\r\nconst res: MSG = {\r\n  html: {\r\n    mouseenter: [\r\n      ['img', '', 'alt', UseI18nFor.B, (value: null | string | string[]) => {\r\n        if (value === '艾拉') return '我和艾拉哪个更高性能呢？'\r\n        else return false\r\n      }]\r\n    ]\r\n  }\r\n}\r\n\r\nexport default res\r\n","import type { MessageDictHTML } from '@/core/elfland-addon-message-manager/types'\r\nimport { InternalModel } from '../internal-model'\r\nimport { config, live2DFrom } from './config'\r\nimport { createQuickClickJudge, isInTimeInterval, probability } from '@/core/elfland/utils'\r\nimport message from './message'\r\n\r\nexport class ARTILive2D extends InternalModel {\r\n  readonly message: MessageDictHTML = message.html\r\n  protected __costumes: string[] = ['常服', '睡衣']\r\n  protected __quickClickFace: ReturnType<typeof createQuickClickJudge>\r\n  protected __quickClickFaceActive: boolean\r\n  protected __quickClickHead: ReturnType<typeof createQuickClickJudge>\r\n  protected __quickClickHeadActive: boolean\r\n  protected __quickClickBody: ReturnType<typeof createQuickClickJudge>\r\n  protected __quickClickBodyActive: boolean\r\n\r\n  protected __canChangeExpression: boolean = true\r\n\r\n  protected __currentCostume: string = ''\r\n\r\n  constructor() {\r\n    super(live2DFrom, config)\r\n\r\n    this.__quickClickFace = createQuickClickJudge()\r\n    this.__quickClickFaceActive = false\r\n    this.__quickClickHead = createQuickClickJudge()\r\n    this.__quickClickHeadActive = false\r\n    this.__quickClickBody = createQuickClickJudge(400, 8)\r\n    this.__quickClickBodyActive = false\r\n\r\n    this.__timer.create('expression', false, 5000)\r\n    this.__timer.on('expression', () => {\r\n      this.addExpression('无表情')\r\n      this.costumeTo(this.__currentCostume)\r\n      this.__canChangeExpression = true\r\n      this.__quickClickFaceActive = false\r\n      this.__quickClickHeadActive = false\r\n      this.__quickClickBodyActive = false\r\n    })\r\n  }\r\n\r\n  protected loaded() {\r\n    if (this.__model === null) return\r\n    this.__model.x = -170\r\n    // this.__model.x = -370\r\n    this.__model.y = 10\r\n    this.__model.scale.set(0.30)\r\n    // this.__model.scale.set(0.50)\r\n\r\n    const night = isInTimeInterval([[0, 7], [19, 24]])\r\n    const bikini = probability(1, 100)\r\n\r\n    this.__currentCostume = bikini ? 'bikini' : night ? '睡衣' : '常服'\r\n\r\n    this.costumeTo(this.__currentCostume)\r\n\r\n    // 0 - 1\r\n    // this.addParameterValueById('ParamMouthOpenY', 1)\r\n    // -0.5 - 0.5\r\n    // this.addParameterValueById('ParamMouthForm', -0.5)\r\n  }\r\n\r\n  setParameter(parameterId: string, value: number) {\r\n    return this.setParameterValueById(parameterId, value)\r\n  }\r\n\r\n  protected idle(): () => void {\r\n    const type = probability(1, 2) ? '螃蟹' : '小鸟'\r\n    this.addExpression({ '待机': type })\r\n    return () => {\r\n      this.removeExpression({ '待机': type })\r\n    }\r\n  }\r\n\r\n  protected hitAreas(hitAreas: string[]): void {\r\n    if (hitAreas[0] === 'Body') {\r\n      if (this.__quickClickBodyActive) return\r\n      this.addExpression('坏')\r\n      this.restartTimerChangeToNoExpression(true)\r\n      this.__quickClickBody(() => {\r\n        this.__quickClickBodyActive = true\r\n        this.addExpression('杀')\r\n        this.restartTimerChangeToNoExpression(false)\r\n      })\r\n    } else if (hitAreas.indexOf('Face') !== -1) {\r\n      if (this.__quickClickFaceActive) return\r\n      this.addExpression('害羞')\r\n      this.restartTimerChangeToNoExpression(true)\r\n      this.__quickClickFace(() => {\r\n        this.__quickClickFaceActive = true\r\n        this.addExpression('生气')\r\n        this.restartTimerChangeToNoExpression(false)\r\n      })\r\n    } else {\r\n      // Head\r\n      if (this.__quickClickHeadActive) return\r\n      this.addExpression('好')\r\n      this.restartTimerChangeToNoExpression(true)\r\n      this.__quickClickHead(() => {\r\n        this.__quickClickHeadActive = true\r\n        this.addExpression('变傻')\r\n        this.restartTimerChangeToNoExpression(false)\r\n      })\r\n    }\r\n  }\r\n\r\n  protected restartTimerChangeToNoExpression(canchangeExpression: boolean = true, duration: number = 5000) {\r\n    if (!this.__canChangeExpression) return\r\n    this.__canChangeExpression = canchangeExpression\r\n    this.__timer.restart('expression', duration)\r\n  }\r\n\r\n  costumeTo(costume: string): boolean {\r\n    this.addExpression({ '着装': costume })\r\n    return true\r\n  }\r\n}\r\n","import type { Elfland } from '@/core/elfland/core'\r\nimport { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport * as PIXI from 'pixi.js'\r\nimport type { InternalModel } from '../models/internal-model'\r\nimport { watch, type WatchHandle } from 'vue'\r\n\r\nexport class Live2DShower extends ElflandAddon {\r\n  private __app: PIXI.Application | null = null\r\n  private __live2DModel: InternalModel | null = null\r\n  private __watchHandle: WatchHandle\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n\r\n    this.__watchHandle = watch(elfland.theme.theme, (val) => {\r\n      if (val === 'light') {\r\n        this.__live2DModel?.themeTo('light')\r\n      } else {\r\n        this.__live2DModel?.themeTo('dark')\r\n      }\r\n    })\r\n  }\r\n\r\n  loadedCallback(): void {}\r\n\r\n  show(options?: PIXI.IApplicationOptions) {\r\n    this.__app = new PIXI.Application(options)\r\n  }\r\n\r\n  /**\r\n   * 将模型添加到画面\r\n   *\r\n   * 一个Shower最多只有一个模型\r\n   * @param {Live2DModel} live2dModel Live2DModel实例对象\r\n   */\r\n  async add(live2dModel: InternalModel) {\r\n    if (this.__app === null) return\r\n    if (this.__live2DModel) this.__live2DModel.destroy()\r\n    this.__live2DModel = live2dModel\r\n    await live2dModel.load(this.__app)\r\n    this.__elfland.emit('live-2d-model-added')\r\n    this.__elfland.theme.theme.value === 'light' ? live2dModel.themeTo('light') : live2dModel.themeTo('dark')\r\n    this.__elfland.message.html.addMessage(live2dModel.name, live2dModel.message)\r\n  }\r\n\r\n  /**\r\n   * 移除Shower中的模型\r\n   */\r\n  remove() {\r\n    if (this.__live2DModel) {\r\n      this.__live2DModel.destroy()\r\n      this.__live2DModel = null\r\n      this.__elfland.emit('live-2d-model-removed')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 销毁app实例\r\n   * 销毁模型实例\r\n   * 销毁其他实例\r\n   */\r\n  destroy() {\r\n    this.__elfland.emit('live-2d-shower-destroy')\r\n    this.__watchHandle()\r\n    if (this.__live2DModel) this.__live2DModel.destroy()\r\n    if (this.__app) this.__app.destroy()\r\n    this.__elfland.emit('live-2d-shower-destroyed')\r\n  }\r\n}\r\n","import { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport type { MessageDictHTML } from '../../types'\r\nimport type { Elfland } from '@/core/elfland/core'\r\nimport type { Selector, SelectorList } from '@/core/elfland/utils'\r\n\r\nexport class HTMLMessageManager extends ElflandAddon {\r\n  private readonly __selector: Selector\r\n  private readonly __key2message: Map<string, MessageDictHTML> = new Map()\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n\r\n    this.__selector = elfland.selector\r\n  }\r\n\r\n  loadedCallback(): void {\r\n    this.__selector.on('htmlMessage', (e) => {\r\n      console.log('htmlMessage', e)\r\n    })\r\n  }\r\n\r\n  private createSelectorDataList(message: MessageDictHTML) {\r\n    const selectorDataList: SelectorList = []\r\n    Object.entries(message).forEach(([e, d]) => {\r\n      d.forEach(m => {\r\n        selectorDataList.push([e, m[0], 'htmlMessage', { childrenEvent: true }])\r\n      })\r\n    })\r\n    return selectorDataList\r\n  }\r\n\r\n  addMessage(key: string, message: MessageDictHTML) {\r\n    this.removeMessage(key)\r\n    this.__key2message.set(key, message)\r\n    this.__selector.addSelectorList(this.createSelectorDataList(message))\r\n  }\r\n\r\n  removeMessage(key: string) {\r\n    const message = this.__key2message.get(key)\r\n    if (!message) return\r\n    this.__selector.removeSelectorList(this.createSelectorDataList(message))\r\n  }\r\n}\r\n","import { ElflandAddon } from '@/core/elfland/core/addon-base'\r\nimport { HTMLMessageManager } from './html'\r\nimport type { Elfland } from '@/core/elfland/core'\r\n\r\nexport class MessageManager extends ElflandAddon {\r\n  readonly html: HTMLMessageManager\r\n\r\n  constructor(elfland: Elfland) {\r\n    super(elfland)\r\n    this.html = new HTMLMessageManager(elfland)\r\n  }\r\n\r\n  loadedCallback(): void {}\r\n}\r\n","import EventEmitter from 'eventemitter3'\r\nimport type { Router } from 'vue-router'\r\nimport i18n from '@/assets/i18n'\r\n\r\nimport { RouterPromise } from './router-promise'\r\nimport type { ElflandEvents } from '../types'\r\nimport { Theme } from '@/core/elfland-addon-theme'\r\nimport { Data } from '@/core/elfland-addon-data'\r\nimport { Articles } from '@/core/elfland-addon-articles'\r\nimport { Links } from '@/core/elfland-addon-links'\r\nimport { Article } from '@/core/elfland-addon-article'\r\nimport { Projects } from '@/core/elfland-addon-projects'\r\nimport { Tags } from '@/core/elfland-addon-tags'\r\nimport { Categories } from '@/core/elfland-addon-categories'\r\nimport { About } from '@/core/elfland-addon-about'\r\nimport { TSPlayground } from '@/core/elfland-addon-ts-playground'\r\nimport { Playground } from '@/core/elfland-addon-playground'\r\nimport { Friends } from '@/core/elfland-addon-friends'\r\nimport { ElflandI18n } from '@/core/elfland-addon-i18n'\r\nimport { Live2DShower } from '@/core/elfland-addon-live2d'\r\nimport { Selector } from '../utils'\r\nimport { MessageManager } from '@/core/elfland-addon-message-manager'\r\n\r\nexport class Elfland extends EventEmitter<ElflandEvents> {\r\n  private static instance: Elfland | null = null\r\n  static getInstance(router?: Router): Elfland {\r\n    if (!Elfland.instance && router) {\r\n      Elfland.instance = new Elfland(router)\r\n    }\r\n    return Elfland.instance as Elfland\r\n  }\r\n\r\n  readonly routerPromise: RouterPromise\r\n\r\n  readonly theme: Theme\r\n\r\n  readonly selector: Selector\r\n  readonly message: MessageManager\r\n\r\n  readonly i18n: ElflandI18n\r\n\r\n  readonly about: About\r\n  readonly friends: Friends\r\n  readonly projects: Projects\r\n\r\n  readonly data: Data\r\n  readonly articles: Articles\r\n  readonly article: Article\r\n  readonly links: Links\r\n  readonly tags: Tags\r\n  readonly categories: Categories\r\n\r\n  readonly playground: Playground\r\n  readonly tsPlayground: TSPlayground\r\n\r\n  readonly live2d: Live2DShower\r\n\r\n  constructor(router: Router) {\r\n    super()\r\n    this.routerPromise = new RouterPromise(router)\r\n\r\n    this.theme = new Theme(this)\r\n\r\n    this.selector = new Selector()\r\n    this.message = new MessageManager(this)\r\n\r\n    this.i18n = new ElflandI18n(i18n, this)\r\n\r\n    this.about = new About(this)\r\n    this.friends = new Friends(this)\r\n    this.projects = new Projects(this)\r\n\r\n    this.data = new Data(this)\r\n    this.articles = new Articles(this)\r\n    this.article = new Article(this)\r\n    this.links = new Links(this)\r\n    this.tags = new Tags(this)\r\n    this.categories = new Categories(this)\r\n\r\n    this.playground = new Playground(this)\r\n    this.tsPlayground = new TSPlayground(this)\r\n\r\n    this.live2d = new Live2DShower(this)\r\n\r\n    this.emit('loaded')\r\n  }\r\n}\r\n\r\nexport function useElfland() {\r\n  return Elfland.getInstance()\r\n}\r\n","export type Spectrum = {\r\n  /** 每个频率 bin 的分贝值（dB），长度为 analyser.frequencyBinCount */\r\n  db: Float32Array;\r\n  /** 对应频率轴（Hz），长度同上 */\r\n  freqHz: Float32Array;\r\n};\r\n\r\nexport type Waveform = {\r\n  /** 归一化波形（-1..1） */\r\n  samples: Float32Array;\r\n  /** 该批样本覆盖的时长（秒） */\r\n  durationSec: number;\r\n};\r\n\r\nexport type Loudness = {\r\n  /** 瞬时 RMS，以 dBFS 表示（0 dBFS 为满刻度，常为负值） */\r\n  rmsDbfs: number;\r\n  /** 瞬时 Peak（线性幅度，0..1） */\r\n  peak: number;\r\n  /** 近似 K 加权短时 LUFS（未做门限/积分，≈ dBFS + 2.3） */\r\n  lufsApprox: number;\r\n};\r\n\r\nexport type AudioAnalyzerOptions = {\r\n  /** 传入已有 <audio> 元素（可选）；若不传，会内部创建一个 */\r\n  element?: HTMLAudioElement;\r\n  /** 音频地址（可选；若传 element 则可不填） */\r\n  src?: string;\r\n  /** 频谱分析的 FFT 大小（必须是 32 的幂；默认 4096） */\r\n  fftSize?: number;\r\n  /** 频谱平滑系数（0..1；默认 0.8） */\r\n  smoothingTimeConstant?: number;\r\n  /** 近似 LUFS 的窗口（通过更大的 fftSize 接近 400ms；默认 16384） */\r\n  kFftSize?: number;\r\n  /** 是否将 <audio> 连接到扬声器（默认 true） */\r\n  monitorOutput?: boolean;\r\n  /** <audio> 的跨域策略（若加载跨域音频建议为 \"anonymous\"） */\r\n  crossOrigin?: '' | 'anonymous' | 'use-credentials';\r\n  /** 初始音量（0..1，默认 1） */\r\n  volume?: number;\r\n};\r\n\r\nexport class AudioAnalyzer {\r\n  readonly audio: HTMLAudioElement\r\n  readonly ctx: AudioContext\r\n  private srcNode: MediaElementAudioSourceNode\r\n  private analyser: AnalyserNode\r\n  private kAnalyser: AnalyserNode\r\n\r\n  private hp: BiquadFilterNode\r\n  private hs: BiquadFilterNode\r\n\r\n  private freqDb: Float32Array\r\n  private timeBuf: Float32Array\r\n  private kTimeBuf: Float32Array\r\n  private freqHz: Float32Array\r\n\r\n  get src() {\r\n    return this.srcNode\r\n  }\r\n\r\n  constructor(opts: AudioAnalyzerOptions = {}) {\r\n    const {\r\n      element,\r\n      src,\r\n      fftSize = 4096,\r\n      kFftSize = 16384,\r\n      smoothingTimeConstant = 0.8,\r\n      monitorOutput = true,\r\n      crossOrigin = 'anonymous',\r\n      volume = 1\r\n    } = opts\r\n\r\n    // 1) audio 元素 & 播放基础\r\n    this.audio = element ?? document.createElement('audio')\r\n    this.audio.preload = 'auto'\r\n    this.audio.loop = false\r\n    this.audio.controls = false\r\n    this.audio.volume = volume\r\n    if (!element && src) {\r\n      if (crossOrigin) this.audio.crossOrigin = crossOrigin\r\n      this.audio.src = src\r\n    } else if (!element && !src) {\r\n      throw new Error('Provide either opts.element or opts.src')\r\n    }\r\n\r\n    // 2) WebAudio 图\r\n    this.ctx = new (window.AudioContext || (window as any).webkitAudioContext)()\r\n\r\n    this.srcNode = this.ctx.createMediaElementSource(this.audio)\r\n\r\n    // 主分析器（频谱+波形）\r\n    this.analyser = this.ctx.createAnalyser()\r\n    this.analyser.fftSize = fftSize\r\n    this.analyser.smoothingTimeConstant = smoothingTimeConstant\r\n\r\n    // K 加权链：60Hz 高通 + 4kHz 高架，接专用 analyser 做“近似 LUFS”\r\n    this.hp = this.ctx.createBiquadFilter()\r\n    this.hp.type = 'highpass'\r\n    this.hp.frequency.value = 60  // 近似 BS.1770 的 60Hz 高通\r\n    this.hp.Q.value = 0.5\r\n\r\n    this.hs = this.ctx.createBiquadFilter()\r\n    this.hs.type = 'highshelf'\r\n    this.hs.frequency.value = 4000  // 4kHz 起的高架\r\n    this.hs.gain.value = 4          // +4 dB\r\n\r\n    this.kAnalyser = this.ctx.createAnalyser()\r\n    this.kAnalyser.fftSize = kFftSize // ≈ 16384/48k ≈ 341ms 的窗口\r\n    this.kAnalyser.smoothingTimeConstant = 0\r\n\r\n    // 连接：源 -> [主 analyser] + （K 链 -> kAnalyser）\r\n    this.srcNode.connect(this.analyser)\r\n    this.srcNode.connect(this.hp)\r\n    this.hp.connect(this.hs)\r\n    this.hs.connect(this.kAnalyser)\r\n\r\n    // 是否输出到扬声器\r\n    if (monitorOutput) {\r\n      this.srcNode.connect(this.ctx.destination)\r\n    }\r\n\r\n    // 3) 缓冲区\r\n    this.freqDb = new Float32Array(this.analyser.frequencyBinCount)\r\n    this.timeBuf = new Float32Array(this.analyser.fftSize)\r\n    this.kTimeBuf = new Float32Array(this.kAnalyser.fftSize)\r\n\r\n    // 频率轴（Hz）\r\n    const n = this.analyser.frequencyBinCount\r\n    const sr = this.ctx.sampleRate\r\n    const freqAxis = new Float32Array(n)\r\n    const binHz = sr / this.analyser.fftSize\r\n    for (let i = 0; i < n; i++) freqAxis[i] = i * binHz\r\n    this.freqHz = freqAxis\r\n  }\r\n\r\n  /** 兼容自动播放策略：在用户手势后调用 */\r\n  async resume() {\r\n    if (this.ctx.state === 'suspended') {\r\n      await this.ctx.resume()\r\n    }\r\n  }\r\n\r\n  async load(src: string) {\r\n    if (this.audio.src !== src) this.audio.src = src\r\n    await this.audio.load()\r\n  }\r\n\r\n  async play() {\r\n    await this.resume()\r\n    await this.audio.play()\r\n  }\r\n\r\n  pause() {\r\n    this.audio.pause()\r\n  }\r\n\r\n  setVolume(v: number) {\r\n    this.audio.volume = Math.max(0, Math.min(1, v))\r\n  }\r\n\r\n  /** 频谱（dB）+ 频率轴（Hz） */\r\n  getSpectrum(): Spectrum {\r\n    this.analyser.getFloatFrequencyData(this.freqDb as Float32Array<ArrayBuffer>) // dB 值（负数为主）\r\n    return { db: this.freqDb, freqHz: this.freqHz }\r\n    // 如需线性幅度：amp = 10^(db/20)\r\n  }\r\n\r\n  /** 波形（时域样本；-1..1）及时长 */\r\n  getWaveform(): Waveform {\r\n    this.analyser.getFloatTimeDomainData(this.timeBuf as Float32Array<ArrayBuffer>)\r\n    return {\r\n      samples: this.timeBuf,\r\n      durationSec: this.timeBuf.length / this.ctx.sampleRate\r\n    }\r\n  }\r\n\r\n  /** 响度：RMS(dBFS) + Peak(线性) + 近似短时 LUFS（K 加权，无门限） */\r\n  getLoudness(): Loudness {\r\n    // 1) 基本 RMS/Peak（对原始时域）\r\n    this.analyser.getFloatTimeDomainData(this.timeBuf as Float32Array<ArrayBuffer>)\r\n    let sum = 0; let peak = 0\r\n    for (let i = 0; i < this.timeBuf.length; i++) {\r\n      const x = this.timeBuf[i]\r\n      sum += x * x\r\n      const ax = Math.abs(x)\r\n      if (ax > peak) peak = ax\r\n    }\r\n    const rms = Math.sqrt(sum / this.timeBuf.length)\r\n    const rmsDbfs = 20 * Math.log10(Math.max(rms, 1e-12)) // dBFS\r\n\r\n    // 2) K 加权后再算 RMS（近似 LUFS：dBFS + 2.3）\r\n    this.kAnalyser.getFloatTimeDomainData(this.kTimeBuf as Float32Array<ArrayBuffer>)\r\n    let ksum = 0\r\n    for (let i = 0; i < this.kTimeBuf.length; i++) {\r\n      const x = this.kTimeBuf[i]\r\n      ksum += x * x\r\n    }\r\n    const krms = Math.sqrt(ksum / this.kTimeBuf.length)\r\n    const kDbfs = 20 * Math.log10(Math.max(krms, 1e-12))\r\n    const lufsApprox = kDbfs + 2.3 // 经验近似：满刻度正弦 ≈ -0.691 LUFS\r\n\r\n    return { rmsDbfs, peak, lufsApprox }\r\n  }\r\n\r\n  /** 清理 */\r\n  destroy() {\r\n    try {\r\n      this.srcNode.disconnect()\r\n      this.analyser.disconnect()\r\n      this.hp.disconnect()\r\n      this.hs.disconnect()\r\n      this.kAnalyser.disconnect()\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n    try {\r\n      if (this.ctx.state !== 'closed') this.ctx.close()\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n}\r\n","// vocal-lipsync.ts\r\ntype LipsyncConfig = {\r\n  // 人声带通\r\n  hpHz?: number;   // 默认 200\r\n  lpHz?: number;   // 默认 4000\r\n  // 平滑/压缩\r\n  attackMs?: number;   // 前沿（嘴张开）平滑，默认 30ms\r\n  releaseMs?: number;  // 后沿（嘴闭合）平滑，默认 120ms\r\n  gateDbfs?: number;   // 噪声门阈值，默认 -55 dBFS\r\n  inMinDbfs?: number;  // 压缩前下限，默认 -50 dBFS\r\n  inMaxDbfs?: number;  // 压缩前上限，默认 -15 dBFS\r\n  outMin?: number;     // 压缩后输出下限，默认 0.05（微动）\r\n  outMax?: number;     // 压缩后输出上限，默认 1.0\r\n  // 人声判定\r\n  vocalRatioThresh?: number;     // 人声带通能量占比阈值，默认 0.25\r\n  flatnessThresh?: number;       // 谱平坦度阈值（越小越像谐波/人声），默认 0.5\r\n  holdMsWhenVocal?: number;      // 判定有人声后保持时间，默认 120ms\r\n  // Live2D 参数名\r\n  mouthOpenParam?: string; // \"ParamMouthOpenY\"\r\n  mouthFormParam?: string; // 可选 \"ParamMouthForm\"\r\n};\r\n\r\nexport class VocalLipSync {\r\n  private ctx: AudioContext\r\n  private srcNode: MediaElementAudioSourceNode\r\n\r\n  // 分析节点\r\n  private analyserFull: AnalyserNode\r\n  private analyserVocal: AnalyserNode\r\n\r\n  // 带通滤波（人声）\r\n  private hp: BiquadFilterNode\r\n  private lp: BiquadFilterNode\r\n\r\n  // 低频链（节拍，可选）\r\n  private beatLP: BiquadFilterNode\r\n  private analyserBeat: AnalyserNode\r\n\r\n  // 缓冲\r\n  private specFull: Float32Array\r\n  private specVocal: Float32Array\r\n  private timeVocal: Float32Array\r\n\r\n  // 参数\r\n  private conf: Required<LipsyncConfig>\r\n\r\n  // 平滑状态\r\n  private mouthSmoothed = 0\r\n  private lastUpdateTime = 0\r\n  private lastVocalTime = 0\r\n  private vocalPresent = false\r\n\r\n  // Live2D 接口（替换成你的模型 API）\r\n  // 仅示例：假设有一个 setParam(id, value) 方法\r\n  constructor(\r\n    ctx: AudioContext,\r\n    source: MediaElementAudioSourceNode,\r\n    private setParam: (id: string, value: number) => void,\r\n    conf: LipsyncConfig = {}\r\n  ) {\r\n    this.ctx = ctx\r\n    this.srcNode = source\r\n    this.conf = {\r\n      hpHz: 200,\r\n      lpHz: 4000,\r\n      attackMs: 30,\r\n      releaseMs: 120,\r\n      gateDbfs: -55,\r\n      inMinDbfs: -50,\r\n      inMaxDbfs: -15,\r\n      outMin: 0.05,\r\n      outMax: 1.0,\r\n      vocalRatioThresh: 0.25,\r\n      flatnessThresh: 0.5,\r\n      holdMsWhenVocal: 120,\r\n      mouthOpenParam: 'ParamMouthOpenY',\r\n      mouthFormParam: 'ParamMouthForm',\r\n      ...conf\r\n    }\r\n\r\n    // --- 构建人声链 ---\r\n    this.hp = ctx.createBiquadFilter()\r\n    this.hp.type = 'highpass'\r\n    this.hp.frequency.value = this.conf.hpHz\r\n\r\n    this.lp = ctx.createBiquadFilter()\r\n    this.lp.type = 'lowpass'\r\n    this.lp.frequency.value = this.conf.lpHz\r\n\r\n    this.analyserVocal = ctx.createAnalyser()\r\n    this.analyserVocal.fftSize = 2048\r\n    this.analyserVocal.smoothingTimeConstant = 0.5\r\n\r\n    // 源 → HP → LP → vocalAnalyser\r\n    this.srcNode.connect(this.hp)\r\n    this.hp.connect(this.lp)\r\n    this.lp.connect(this.analyserVocal)\r\n\r\n    // --- 全带分析（算能量占比、平坦度）---\r\n    this.analyserFull = ctx.createAnalyser()\r\n    this.analyserFull.fftSize = 2048\r\n    this.analyserFull.smoothingTimeConstant = 0.5\r\n    this.srcNode.connect(this.analyserFull)\r\n\r\n    // --- 低频节拍链（可选）---\r\n    this.beatLP = ctx.createBiquadFilter()\r\n    this.beatLP.type = 'lowpass'\r\n    this.beatLP.frequency.value = 150\r\n    this.analyserBeat = ctx.createAnalyser()\r\n    this.analyserBeat.fftSize = 1024\r\n    this.analyserBeat.smoothingTimeConstant = 0.8\r\n    this.srcNode.connect(this.beatLP)\r\n    this.beatLP.connect(this.analyserBeat)\r\n\r\n    // 缓冲\r\n    this.specFull = new Float32Array(this.analyserFull.frequencyBinCount)\r\n    this.specVocal = new Float32Array(this.analyserVocal.frequencyBinCount)\r\n    this.timeVocal = new Float32Array(this.analyserVocal.fftSize)\r\n  }\r\n\r\n  /** 每帧调用：返回 mouthOpen（0..1）与是否有人声 */\r\n  update(): { mouthOpen: number; vocal: boolean; beat: number } {\r\n    const now = this.ctx.currentTime\r\n    const dt = this.lastUpdateTime ? Math.max(0, now - this.lastUpdateTime) : 0\r\n    this.lastUpdateTime = now\r\n\r\n    // 1) 读取数据\r\n    this.analyserVocal.getFloatTimeDomainData(this.timeVocal as Float32Array<ArrayBuffer>)\r\n    this.analyserVocal.getFloatFrequencyData(this.specVocal as Float32Array<ArrayBuffer>)\r\n    this.analyserFull.getFloatFrequencyData(this.specFull as Float32Array<ArrayBuffer>)\r\n\r\n    // 2) 计算 RMS(dBFS)（人声带通）\r\n    let sum = 0; let peak = 0\r\n    for (let i = 0; i < this.timeVocal.length; i++) {\r\n      const x = this.timeVocal[i]\r\n      sum += x * x\r\n      const ax = Math.abs(x)\r\n      if (ax > peak) peak = ax\r\n    }\r\n    const rms = Math.sqrt(sum / this.timeVocal.length)\r\n    const rmsDb = 20 * Math.log10(Math.max(rms, 1e-12))\r\n\r\n    // 3) 能量占比 & 谱平坦度（越小越像谐波）\r\n    const linVocal = this.dbToLinArray(this.specVocal)\r\n    const linFull = this.dbToLinArray(this.specFull)\r\n    const eVocal = sumArray(linVocal)\r\n    const eFull = sumArray(linFull) + 1e-12\r\n    const ratio = eVocal / eFull\r\n\r\n    const flat = spectralFlatness(linVocal) // 0..1\r\n\r\n    // 4) 简易 VAD：能量占比 + 平坦度\r\n    const isVocal =\r\n      ratio > this.conf.vocalRatioThresh && flat < this.conf.flatnessThresh\r\n\r\n    // 加入保持时间（减少抖动）：\r\n    if (isVocal) {\r\n      this.vocalPresent = true\r\n      this.lastVocalTime = now\r\n    } else {\r\n      const hold = this.conf.holdMsWhenVocal / 1000\r\n      if (now - this.lastVocalTime > hold) {\r\n        this.vocalPresent = false\r\n      }\r\n    }\r\n\r\n    // 5) 噪声门 & 压缩映射（→ 0..1）\r\n    let mouthTarget = 0\r\n    if (this.vocalPresent && rmsDb > this.conf.gateDbfs) {\r\n      const t = clamp01(\r\n        (rmsDb - this.conf.inMinDbfs) /\r\n          (this.conf.inMaxDbfs - this.conf.inMinDbfs)\r\n      )\r\n      // 曲线可用 sqrt 提高小音量敏感度\r\n      mouthTarget = this.conf.outMin + (this.conf.outMax - this.conf.outMin) * Math.sqrt(t)\r\n    } else {\r\n      // 无人声：保持微动\r\n      mouthTarget = 0.05\r\n    }\r\n\r\n    // 6) 攻击/释放平滑\r\n    const attack = this.conf.attackMs / 1000\r\n    const release = this.conf.releaseMs / 1000\r\n    if (mouthTarget > this.mouthSmoothed) {\r\n      // 攻击\r\n      const a = 1 - Math.exp(-dt / Math.max(attack, 1e-4))\r\n      this.mouthSmoothed += (mouthTarget - this.mouthSmoothed) * a\r\n    } else {\r\n      // 释放\r\n      const r = 1 - Math.exp(-dt / Math.max(release, 1e-4))\r\n      this.mouthSmoothed += (mouthTarget - this.mouthSmoothed) * r\r\n    }\r\n\r\n    // 7) 可选：根据“音高/能量重心”驱动 MouthForm\r\n    const mouthForm = this.estimateMouthForm(this.specVocal, this.analyserVocal)\r\n\r\n    // 8) 写入 Live2D\r\n    this.setParam(this.conf.mouthOpenParam, clamp01(this.mouthSmoothed))\r\n    if (this.conf.mouthFormParam) {\r\n      this.setParam(this.conf.mouthFormParam, clamp01(mouthForm))\r\n    }\r\n\r\n    // 9) 输出节拍强度（低频能量做节拍动作）\r\n    const beat = this.getBeatEnergy()\r\n\r\n    return { mouthOpen: clamp01(this.mouthSmoothed), vocal: this.vocalPresent, beat }\r\n  }\r\n\r\n  // —— 工具函数们 ——\r\n  private dbToLinArray(db: Float32Array): Float32Array {\r\n    const out = new Float32Array(db.length)\r\n    for (let i = 0; i < db.length; i++) out[i] = Math.pow(10, db[i] / 10)\r\n    return out\r\n  }\r\n\r\n  private estimateMouthForm(specDb: Float32Array, analyser: AnalyserNode): number {\r\n    // 用“谱重心”粗略区分高/低音：返回 0..1\r\n    const lin = this.dbToLinArray(specDb)\r\n    const sr = this.ctx.sampleRate\r\n    const binHz = sr / analyser.fftSize\r\n    let num = 0; let den = 0\r\n    for (let i = 0; i < lin.length; i++) {\r\n      const f = i * binHz\r\n      num += f * lin[i]\r\n      den += lin[i]\r\n    }\r\n    const centroid = den > 0 ? num / den : 0\r\n    // 以 500Hz..3000Hz 做归一（高音→接近 1，低音→接近 0）\r\n    const v = (centroid - 500) / (3000 - 500)\r\n    return clamp01(v)\r\n  }\r\n\r\n  private getBeatEnergy(): number {\r\n    const arr = new Float32Array(this.analyserBeat.frequencyBinCount)\r\n    this.analyserBeat.getFloatFrequencyData(arr)\r\n    // 取 30–120Hz 能量\r\n    const sr = this.ctx.sampleRate\r\n    const binHz = sr / this.analyserBeat.fftSize\r\n    const low = Math.floor(30 / binHz)\r\n    const high = Math.min(Math.floor(120 / binHz), arr.length - 1)\r\n    let e = 0\r\n    for (let i = low; i <= high; i++) {\r\n      e += Math.pow(10, arr[i] / 10)\r\n    }\r\n    // 简单压缩映射\r\n    return clamp01(Math.sqrt(e) * 3)\r\n  }\r\n}\r\n\r\nfunction clamp01(x: number) { return Math.max(0, Math.min(1, x)) }\r\n\r\nfunction sumArray(a: Float32Array) {\r\n  let s = 0\r\n  for (let i = 0; i < a.length; i++) s += a[i]\r\n  return s\r\n}\r\n\r\n// 谱平坦度：几何均值/算术均值（0→强谐波，1→噪声/平）\r\nfunction spectralFlatness(power: Float32Array): number {\r\n  let geo = 0; let arith = 0; const n = power.length\r\n  const eps = 1e-12\r\n  for (let i = 0; i < n; i++) {\r\n    const p = Math.max(power[i], eps)\r\n    geo += Math.log(p)\r\n    arith += p\r\n  }\r\n  geo = Math.exp(geo / n)\r\n  arith = arith / n + eps\r\n  return clamp01(geo / arith)\r\n}\r\n","<script setup lang=\"ts\">\r\nimport { useElfland } from '@/core/elfland'\r\nimport { ARTILive2D } from '@/core/elfland-addon-live2d/core/models/ARTILive2D'\r\nimport { computed, onBeforeUnmount, onMounted, ref } from 'vue'\r\nimport { AudioAnalyzer } from '@/core/elfland-addon-music-player/core/audio-analyzer'\r\nimport { VocalLipSync } from '@/core/elfland-addon-music-player/core/vocal-lipsync'\r\n\r\nconst props = defineProps({\r\n  pos: {\r\n    default: () => {\r\n      return {\r\n        left: '0',\r\n        top: '0',\r\n        right: 'none',\r\n        bottom: 'none'\r\n      }\r\n    },\r\n    type: Object\r\n  },\r\n  dragable: {\r\n    default: true,\r\n    type: Boolean\r\n  },\r\n  direction: {\r\n    default: 'xy',\r\n    type: String\r\n  }\r\n})\r\n\r\nconst elfland = useElfland()\r\nconst live2d = elfland.live2d\r\nconst live2dModel = new ARTILive2D()\r\nconst canvas = ref<HTMLCanvasElement | null>(null)\r\nconst canvasContainer = ref<HTMLDivElement | null>(null)\r\nconst container = ref<HTMLDivElement | null>(null)\r\n\r\nconst currentX = ref('')\r\nconst currentY = ref('')\r\nconst initialX = ref(0)\r\nconst initialY = ref(0)\r\nconst dragging = ref(false)\r\n\r\nconst left = computed(() => currentX.value || props.pos.left)\r\nconst right = computed(() => currentX.value !== '' ? 'none' : props.pos.right)\r\nconst top = computed(() => currentY.value || props.pos.top)\r\nconst bottom = computed(() => currentY.value !== '' ? 'none' : props.pos.bottom)\r\nconst useDirection = computed(() => props.direction.toLocaleLowerCase())\r\n\r\nconst dragStart = (e: MouseEvent) => {\r\n  if (e.target !== canvas.value) return\r\n  if (!props.dragable) return\r\n  initialX.value = e.offsetX\r\n  initialY.value = e.offsetY\r\n  dragging.value = true\r\n\r\n  window.addEventListener('mousemove', drag)\r\n  window.addEventListener('mouseup', dragEnd)\r\n}\r\n\r\nconst drag = (e: MouseEvent) => {\r\n  if (dragging.value && container.value) {\r\n    const width = container.value.getBoundingClientRect().width\r\n    const height = container.value.getBoundingClientRect().height\r\n    const x = e.clientX - initialX.value\r\n    const y = e.clientY - initialY.value\r\n    let cx = Math.max(0, Math.min(x, window.innerWidth - width)).toString() + 'px'\r\n    let cy = Math.max(0, Math.min(y, window.innerHeight - height)).toString() + 'px'\r\n    if (useDirection.value.indexOf('x') === -1) cx = ''\r\n    if (useDirection.value.indexOf('y') === -1) cy = ''\r\n    currentX.value = cx\r\n    currentY.value = cy\r\n    live2dModel.setHitIgnore(true)\r\n  }\r\n}\r\n\r\nconst dragEnd = () => {\r\n  dragging.value = false\r\n\r\n  window.removeEventListener('mousemove', drag)\r\n  window.removeEventListener('mouseup', dragEnd)\r\n}\r\n\r\nonMounted(async () => {\r\n  if (canvas.value && canvasContainer.value) {\r\n    live2d.show({\r\n      view: canvas.value,\r\n      autoStart: true,\r\n      resizeTo: canvasContainer.value,\r\n      backgroundAlpha: 0\r\n    })\r\n    await live2d.add(live2dModel)\r\n  }\r\n})\r\nonBeforeUnmount(() => {\r\n  live2d.destroy()\r\n})\r\n\r\nconst analyzer = new AudioAnalyzer({\r\n  // src: '/static/audio/ly.mp3',  // 换成你的音频\r\n  src: '/static/audio/nygs-2.mp3',  // 换成你的音频\r\n  fftSize: 4096,\r\n  kFftSize: 16384,\r\n  smoothingTimeConstant: 0.8,\r\n  crossOrigin: 'anonymous',\r\n  monitorOutput: true,\r\n  volume: 0.05\r\n})\r\n\r\nconst setParam = (param: string, value: number) => {\r\n  live2dModel.setParameter(param, value)\r\n}\r\n\r\nconst lipsync = new VocalLipSync(analyzer.ctx, analyzer.src, setParam, {\r\n  // 可按需要微调\r\n  gateDbfs: -55,\r\n  inMinDbfs: -50,\r\n  inMaxDbfs: -15,\r\n  attackMs: 25,\r\n  releaseMs: 110,\r\n  mouthOpenParam: 'ParamMouthOpenY',\r\n  mouthFormParam: 'ParamMouthForm' // 如果没有此参数，可删掉\r\n})\r\n\r\nconst play = async () => {\r\n  // await analyzer.play()\r\n  // tick()\r\n}\r\n\r\nconst tick = () => {\r\n  const { mouthOpen, vocal, beat } = lipsync.update()\r\n\r\n  // 你可以用 beat 给头部/身体做轻微摆动\r\n  // 例如：ParamAngleZ、ParamBodyAngleZ 等\r\n  const sway = (beat - 0.3) * 0.05 // 小幅度\r\n  live2dModel.setParameter('ParamAngleZ', sway)\r\n  // console.log(mouthOpen, vocal, beat, sway)\r\n\r\n  requestAnimationFrame(tick)\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    ref=\"container\"\r\n    class=\"live2d-container select-none\"\r\n    :style=\"{\r\n      '--left': left,\r\n      '--right': right,\r\n      '--top': top,\r\n      '--bottom': bottom\r\n    }\"\r\n    @mousedown=\"dragStart\"\r\n    @click=\"play\"\r\n  >\r\n    <div\r\n      ref=\"canvasContainer\"\r\n      class=\"live2d-canvas-container\"\r\n    >\r\n      <canvas ref=\"canvas\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.live2d-container {\r\n  position: fixed;\r\n  z-index: 999999;\r\n  left: var(--left, none);\r\n  top: var(--top, none);\r\n  right: var(--right, none);\r\n  bottom: var(--bottom, none);\r\n}\r\n.live2d-canvas-container {\r\n  position: relative;\r\n  width: 310px;\r\n  height: 250px;\r\n  /* width: 500px;\r\n  height: 500px*/\r\n}\r\n.live2d-console {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  opacity: 0;\r\n  transition: opacity 0.3s;\r\n  opacity: 0;\r\n}\r\n.live2d-container:hover .live2d-console {\r\n  transition: opacity 0.3s;\r\n  opacity: 1;\r\n}\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport Live2D from '@/components/Live2D/index.vue'\r\nconst width = window.innerWidth\r\n\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <router-view />\r\n    <Live2D\r\n      :pos=\"{ right: `${Math.max(0, width / 2 - 1000)}px`, bottom: '0'}\"\r\n      direction=\"x\"\r\n    />\r\n  </div>\r\n</template>\r\n","import { createRouter, createWebHistory } from 'vue-router'\r\nimport NProgress from 'nprogress'\r\nimport 'nprogress/nprogress.css'\r\nNProgress.configure({ showSpinner: false })\r\nimport { Elfland } from '@/core/elfland/core'\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(import.meta.env.BASE_URL),\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      name: 'home',\r\n      component: () => import('../views/Home/index.vue')\r\n    },\r\n    {\r\n      path: '/archives',\r\n      name: 'archives',\r\n      // route level code-splitting\r\n      // this generates a separate chunk (About.[hash].js) for this route\r\n      // which is lazy-loaded when the route is visited.\r\n      component: () => import('../views/Archives/index.vue')\r\n    },\r\n    {\r\n      path: '/categories',\r\n      name: 'categories',\r\n      component: () => import('../views/Categories/index.vue')\r\n    },\r\n    {\r\n      path: '/tags',\r\n      name: 'tags',\r\n      component: () => import('../views/Tags/index.vue')\r\n    },\r\n    {\r\n      path: '/diagram',\r\n      name: 'diagram',\r\n      component: () => import('../views/Links/index.vue')\r\n    },\r\n    {\r\n      path: '/search',\r\n      name: 'search',\r\n      component: () => import('../views/AboutView.vue')\r\n    },\r\n    {\r\n      path: '/blog/:articlePath',\r\n      name: 'article',\r\n      component: () => import('../views/Article/index.vue')\r\n    },\r\n    {\r\n      path: '/about',\r\n      name: 'about',\r\n      component: () => import('../views/AboutView.vue')\r\n    },\r\n    {\r\n      path: '/playground',\r\n      name: 'playground',\r\n      component: () => import('../views/Playground/index.vue')\r\n    },\r\n    {\r\n      path: '/ts-playground',\r\n      name: 'ts-playground',\r\n      component: () => import('../views/TSPlayground/index.vue')\r\n    },\r\n    {\r\n      path: '/:pathMatch(.*)*',\r\n      name: '404',\r\n      redirect: '/'\r\n    }\r\n  ]\r\n})\r\n\r\nconst elfland = Elfland.getInstance(router)\r\n\r\nrouter.beforeEach(async (to, from, next) => {\r\n  NProgress.start()\r\n  // console.log('beforeEach ready to precheck')\r\n  if (!elfland.routerPromise.precheck(to, from, next)) return\r\n  // console.log('beforeEach precheck finish, ready to check')\r\n  if (!(await elfland.routerPromise.check(to, from, next))) return\r\n  // console.log('beforeEach check finish')\r\n  next()\r\n})\r\n\r\nrouter.afterEach((to, from, failure) => {\r\n  // console.log('afterEach ready to postcheck')\r\n  elfland.routerPromise.postcheck(to, from)\r\n  // console.log('afterEach postcheck finish')\r\n  NProgress.done()\r\n})\r\n\r\nexport default router\r\n","import './assets/main.css'\r\n\r\nimport { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nimport 'element-plus/dist/index.css'\r\nimport 'element-plus/theme-chalk/dark/css-vars.css'\r\n\r\nimport * as PIXI from 'pixi.js'\r\n\r\nwindow.PIXI = PIXI\r\n\r\nconst app = createApp(App)\r\n\r\napp.use(router)\r\n\r\napp.mount('#app')\r\n"],"file":"assets/index-Ba5nEChn.js"}