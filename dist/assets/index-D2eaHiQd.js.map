{"version":3,"file":"index-D2eaHiQd.js","sources":["../../src/components/SplitStructure/index.vue","../../src/components/TSPlayground/fileList.vue","../../src/components/TSPlayground/code.vue","../../src/utils/index.ts","../../src/components/TSPlayground/index.vue","../../src/views/TSPlayground/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, onBeforeUnmount } from 'vue'\r\n\r\ntype Direction = 'horizontal' | 'vertical'\r\n\r\nconst props = withDefaults(defineProps<{\r\n  /** 分割方向：horizontal=左右分栏，vertical=上下分栏 */\r\n  direction?: Direction\r\n  /** 初始比例（左/上 面板占比），0~1 */\r\n  modelValue?: number\r\n  /** 左/上 面板的最小尺寸（px） */\r\n  minA?: number\r\n  /** 右/下 面板的最小尺寸（px） */\r\n  minB?: number\r\n  /** 分隔条粗细（px） */\r\n  gutter?: number\r\n  /** 是否禁用拖动 */\r\n  disabled?: boolean\r\n}>(), {\r\n  direction: 'horizontal',\r\n  modelValue: 0.5,\r\n  minA: 80,\r\n  minB: 80,\r\n  gutter: 4,\r\n  disabled: false\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  'update:modelValue': [number],\r\n  'change': [number],\r\n  'drag-start': [],\r\n  'drag-end': []\r\n}>()\r\n\r\nconst container = ref<HTMLElement | null>(null)\r\nconst ratio = ref(Math.min(0.95, Math.max(0.05, props.modelValue)))\r\nconst dragging = ref(false)\r\n\r\nconst isHorizontal = computed(() => props.direction === 'horizontal')\r\nconst containerClass = computed(() => ({\r\n  'split-container': true,\r\n  'is-horizontal': isHorizontal.value,\r\n  'is-vertical': !isHorizontal.value,\r\n  'is-dragging': dragging.value\r\n}))\r\n\r\nconst paneAStyle = computed(() => {\r\n  // 使用 flex-basis 百分比可以在容器尺寸改变时保持比例\r\n  return {\r\n    flexBasis: `calc(${ratio.value * 100}% - ${props.gutter / 2}px)`\r\n  }\r\n})\r\nconst paneBStyle = computed(() => {\r\n  return {\r\n    flexBasis: `calc(${(1 - ratio.value) * 100}% - ${props.gutter / 2}px)`\r\n  }\r\n})\r\nconst gutterStyle = computed(() => ({\r\n  // 让分隔条“撑开”到正确粗细\r\n  [isHorizontal.value ? 'width' : 'height']: `${props.gutter}px`,\r\n  [isHorizontal.value ? 'height' : 'width']: '100%',\r\n  cursor: isHorizontal.value ? 'col-resize' : 'row-resize'\r\n}))\r\n\r\nlet removeWindowListeners: (() => void) | null = null\r\n\r\nfunction onGutterPointerDown(e: PointerEvent) {\r\n  if (props.disabled) return\r\n  if (!container.value) return\r\n  dragging.value = true\r\n  ;(e.currentTarget as HTMLElement).setPointerCapture?.(e.pointerId)\r\n  emit('drag-start')\r\n\r\n  const rect = container.value.getBoundingClientRect()\r\n  const total = isHorizontal.value ? rect.width : rect.height\r\n  const minA = props.minA ?? 0\r\n  const minB = props.minB ?? 0\r\n\r\n  const move = (ev: PointerEvent) => {\r\n    if (!container.value) return\r\n    const pos = isHorizontal.value ? ev.clientX - rect.left : ev.clientY - rect.top\r\n    // 将像素位置转为比例，并考虑最小尺寸\r\n    const minRatio = Math.max(minA / total, 0)\r\n    const maxRatio = 1 - Math.max(minB / total, 0)\r\n    const next = Math.min(maxRatio, Math.max(minRatio, pos / total))\r\n    if (next !== ratio.value) {\r\n      ratio.value = next\r\n      emit('update:modelValue', ratio.value)\r\n    }\r\n  }\r\n\r\n  const up = () => {\r\n    dragging.value = false\r\n    emit('drag-end')\r\n    emit('change', ratio.value)\r\n    window.removeEventListener('pointermove', move)\r\n    window.removeEventListener('pointerup', up)\r\n    removeWindowListeners = null\r\n  }\r\n\r\n  window.addEventListener('pointermove', move, { passive: true })\r\n  window.addEventListener('pointerup', up, { passive: true })\r\n  removeWindowListeners = () => {\r\n    window.removeEventListener('pointermove', move)\r\n    window.removeEventListener('pointerup', up)\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  // 同步外部 v-model 初值\r\n  ratio.value = clamp(props.modelValue)\r\n})\r\nonBeforeUnmount(() => {\r\n  removeWindowListeners?.()\r\n})\r\n\r\nfunction clamp(v: number) {\r\n  return Math.min(0.98, Math.max(0.02, v))\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    ref=\"container\"\r\n    :class=\"containerClass\"\r\n    role=\"group\"\r\n    aria-label=\"Split Pane\"\r\n  >\r\n    <div\r\n      class=\"pane pane-a\"\r\n      :style=\"paneAStyle\"\r\n    >\r\n      <slot name=\"a\" />\r\n    </div>\r\n\r\n    <div\r\n      class=\"gutter bg-bg-dark/20 dark:bg-bg/20\"\r\n      :style=\"gutterStyle\"\r\n      :aria-orientation=\"isHorizontal ? 'vertical' : 'horizontal'\"\r\n      :aria-grabbed=\"dragging ? 'true' : 'false'\"\r\n      tabindex=\"0\"\r\n      @pointerdown=\"onGutterPointerDown\"\r\n      @keydown.prevent.stop=\"\r\n        (e) => {\r\n          if (disabled) return\r\n          const step = e.shiftKey ? 0.05 : 0.01\r\n          if (isHorizontal && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {\r\n            const delta = e.key === 'ArrowLeft' ? -step : step\r\n            const next = clamp(ratio + delta)\r\n            ratio = next\r\n            $emit('update:modelValue', ratio)\r\n            $emit('change', ratio)\r\n          } else if (!isHorizontal && (e.key === 'ArrowUp' || e.key === 'ArrowDown')) {\r\n            const delta = e.key === 'ArrowUp' ? -step : step\r\n            const next = clamp(ratio + delta)\r\n            ratio = next\r\n            $emit('update:modelValue', ratio)\r\n            $emit('change', ratio)\r\n          }\r\n        }\r\n      \"\r\n    />\r\n\r\n    <div\r\n      class=\"pane pane-b\"\r\n      :style=\"paneBStyle\"\r\n    >\r\n      <slot name=\"b\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.split-container {\r\n  display: flex;\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  min-width: 0;\r\n  min-height: 0;\r\n  user-select: none;\r\n  /* 平滑拖动时避免内容被选中 */\r\n}\r\n\r\n.split-container.is-horizontal {\r\n  flex-direction: row;\r\n}\r\n\r\n.split-container.is-vertical {\r\n  flex-direction: column;\r\n}\r\n\r\n.pane {\r\n  min-width: 0;\r\n  min-height: 0;\r\n  overflow: auto; /* 让面板自身可滚动 */\r\n  flex-grow: 0;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.gutter {\r\n  flex: 0 0 auto;\r\n  touch-action: none; /* 允许精确的指针事件 */\r\n  display: inline-block;\r\n  position: relative;\r\n  outline: none;\r\n}\r\n.gutter::after {\r\n  /* 中线视觉提示（不设颜色，继承当前色） */\r\n  content: '';\r\n  position: absolute;\r\n  inset: 0;\r\n  margin: auto;\r\n  width: 2px;\r\n  height: 60%;\r\n}\r\n.split-container.is-horizontal .gutter::after {\r\n  height: 60%;\r\n}\r\n.split-container.is-vertical .gutter::after {\r\n  width: 60%;\r\n  height: 2px;\r\n}\r\n\r\n.split-container.is-dragging {\r\n  cursor: col-resize;\r\n}\r\n.split-container.is-dragging.is-vertical {\r\n  cursor: row-resize;\r\n}\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport { ref, type PropType } from 'vue'\r\nimport { ElIcon, ElDialog, ElButton, ElInput } from 'element-plus'\r\nimport { DocumentAdd, Delete } from '@element-plus/icons-vue'\r\nimport { message } from '@/core/elfland/utils'\r\n\r\nconst files = defineModel('files', {\r\n  type: Array as PropType<Array<string>>,\r\n  required: true\r\n})\r\nconst selectedFile = defineModel('selectedFile', {\r\n  type: String,\r\n  required: true\r\n})\r\nconst emits = defineEmits<{\r\n  addFile: [string],\r\n  deleteFile: [string]\r\n}>()\r\n\r\nconst dialogVisible = ref(false)\r\nconst fileName = ref('')\r\nconst addFile = () => {\r\n  fileName.value = ''\r\n  dialogVisible.value = true\r\n}\r\nconst addFileConfirm = () => {\r\n  if (!fileName.value) {\r\n    message('请输入文件名')\r\n    return\r\n  }\r\n  if (files.value.includes(fileName.value)) {\r\n    message('文件已存在')\r\n    return\r\n  }\r\n  if (fileName.value.includes('/') || fileName.value.includes('\\\\') || fileName.value.includes(' ')) {\r\n    message('文件名不能包含 / \\\\ 空格')\r\n    return\r\n  }\r\n  emits('addFile', '/' + fileName.value.trim())\r\n  dialogVisible.value = false\r\n}\r\n\r\nconst deleteDialogVisible = ref(false)\r\nconst deleteFileName = ref('')\r\nconst deleteFile = (fileName: string) => {\r\n  deleteFileName.value = fileName\r\n  deleteDialogVisible.value = true\r\n}\r\nconst confirmDelete = () => {\r\n  emits('deleteFile', deleteFileName.value)\r\n  deleteDialogVisible.value = false\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"h-full\">\r\n    <div class=\"h-8 flex gap-1 justify-between items-center px-2\">\r\n      <router-link\r\n        :to=\"{ name: 'playground' }\"\r\n        class=\"text-[12px]\"\r\n      >\r\n        HTML Playground\r\n      </router-link>\r\n      <el-icon\r\n        :size=\"20\"\r\n        class=\"cursor-pointer\"\r\n        title=\"新建文件\"\r\n        @click=\"addFile\"\r\n      >\r\n        <DocumentAdd />\r\n      </el-icon>\r\n    </div>\r\n    <div\r\n      style=\"height: calc(100% - 2rem);\"\r\n      class=\"flex flex-col\"\r\n    >\r\n      <div\r\n        v-for=\"f in files\"\r\n        :key=\"f\"\r\n        class=\"py-1 px-3 flex justify-between items-center hover:cursor-pointer hover:bg-gray-600/10 dark:hover:bg-gray-400/10\"\r\n        :class=\"{'bg-gray-600/10 dark:hover:bg-gray-400/10': f === selectedFile}\"\r\n        @click=\"selectedFile = f\"\r\n      >\r\n        <span>{{ f.slice(1) }}</span>\r\n        <span\r\n          v-show=\"f !== '/index.ts'\"\r\n          @click.stop=\"deleteFile(f)\"\r\n        >\r\n          <el-icon :size=\"20\"><Delete /></el-icon>\r\n        </span>\r\n        <span\r\n          v-show=\"f === '/index.ts'\"\r\n          class=\"text-[12px]\"\r\n        >run 入口文件</span>\r\n      </div>\r\n    </div>\r\n    <el-dialog\r\n      v-model=\"dialogVisible\"\r\n      title=\"Add File\"\r\n      width=\"400px\"\r\n    >\r\n      <el-input\r\n        v-model=\"fileName\"\r\n        placeholder=\"请输入ts文件名\"\r\n      />\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">Cancel</el-button>\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"addFileConfirm\"\r\n          >\r\n            Confirm\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n    <el-dialog\r\n      v-model=\"deleteDialogVisible\"\r\n      title=\"Delete File\"\r\n      width=\"400px\"\r\n    >\r\n      <span>你确定要删除文件{{ deleteFileName.slice(1) }}吗？</span>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"deleteDialogVisible = false\">Cancel</el-button>\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"confirmDelete\"\r\n          >\r\n            Confirm\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n","<script setup lang=\"ts\">\r\nimport MyCode from '@/components/Playground/code.vue'\r\nimport { ElButton, ElIcon } from 'element-plus'\r\nimport { Close } from '@element-plus/icons-vue'\r\nimport type { PropType } from 'vue'\r\n\r\nconst code = defineModel('code', {\r\n  required: true,\r\n  type: String\r\n})\r\nconst openedFiles = defineModel('openedFiles', {\r\n  type: Array as PropType<string[]>,\r\n  required: true\r\n})\r\nconst selectedFile = defineModel('selectedFile', {\r\n  type: String,\r\n  required: true\r\n})\r\nconst props = defineProps({\r\n  title: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\nconst emits = defineEmits<{\r\n  run: []\r\n}>()\r\n\r\nconst run = () => {\r\n  emits('run')\r\n}\r\n\r\nconst closeFile = (file: string) => {\r\n  const i = openedFiles.value.indexOf(file)\r\n  openedFiles.value = openedFiles.value.filter((fileName) => fileName !== file)\r\n  if (selectedFile.value === file) selectedFile.value = openedFiles.value[i - 1]\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"h-full\">\r\n    <div class=\"h-full\">\r\n      <MyCode\r\n        v-model:code=\"code\"\r\n        lang=\"ts\"\r\n        :title=\"title\"\r\n      >\r\n        <template #header-left>\r\n          <div\r\n            v-for=\"f in openedFiles\"\r\n            :key=\"f\"\r\n            class=\"px-2 py-1 flex items-center gap-2 hover:cursor-pointer bg-bg dark:bg-bg-dark\"\r\n            :class=\"{'text-moonlight-500 !bg-[#fcfcfc] dark:!bg-[#282c34]': f === selectedFile}\"\r\n            @click=\"selectedFile = f\"\r\n          >\r\n            <span>{{ f.slice(1) }}</span>\r\n            <span\r\n              v-show=\"f !== '/index.ts'\"\r\n              class=\"flex items-center\"\r\n              @click.stop=\"closeFile(f)\"\r\n            >\r\n              <el-icon :size=\"20\">\r\n                <Close />\r\n              </el-icon>\r\n            </span>\r\n          </div>\r\n        </template>\r\n        <template #header-right>\r\n          <el-button\r\n            plain\r\n            size=\"small\"\r\n            @click=\"run\"\r\n          >Run</el-button>\r\n        </template>\r\n      </MyCode>\r\n    </div>\r\n  </div>\r\n</template>\r\n","export function runInSandbox(esmCode: string, onMessage: (data:any)=>void) {\r\n  const iframe = document.createElement('iframe')\r\n  // 需要写入 iframe 文档，因此必须允许 same-origin，否则父页面拿不到 contentDocument\r\n  iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin')\r\n  // about:blank + onload 后再写入，避免某些浏览器下 contentDocument 为 null\r\n  iframe.src = 'about:blank'\r\n  iframe.style.display = 'none'\r\n  document.body.appendChild(iframe)\r\n\r\n  const bootstrap = new Blob([\r\n    `const send=(type,args)=>parent.postMessage({type,args},'*');\r\n` +\r\n`const origLog=console.log;console.log=(...a)=>{send('log',a);origLog(...a)};\r\n`\r\n  ], { type: 'text/javascript' })\r\n  const bootstrapUrl = URL.createObjectURL(bootstrap)\r\n\r\n  const handler = (e: MessageEvent) => onMessage?.(e.data)\r\n  window.addEventListener('message', handler)\r\n\r\n  const writeIntoIframe = () => {\r\n    const doc = iframe.contentDocument || iframe.contentWindow?.document\r\n    if (!doc) {\r\n      onMessage?.({ type: 'error', message: 'Sandbox not ready: contentDocument is null' })\r\n      return\r\n    }\r\n    doc.open()\r\n    doc.write(`<script src=\"${bootstrapUrl}\"><\\/script>\r\n` +\r\n`<script type=\"module\">\r\n` +\r\n`${esmCode}\r\n` +\r\n`window.addEventListener('error',e=>parent.postMessage({type:'error',message:e.message},'*'));\r\n` +\r\n`parent.postMessage({type:'done'},'*');\r\n` +\r\n`<\\/script>`)\r\n    doc.close()\r\n  }\r\n\r\n  if (iframe.contentDocument?.readyState === 'complete') {\r\n    writeIntoIframe()\r\n  } else {\r\n    iframe.addEventListener('load', writeIntoIframe, { once: true })\r\n  }\r\n\r\n  return () => {\r\n    window.removeEventListener('message', handler)\r\n    URL.revokeObjectURL(bootstrapUrl)\r\n    iframe.remove()\r\n  }\r\n}\r\n","<script setup lang=\"ts\">\r\nimport SplitStructure from '@/components/SplitStructure/index.vue'\r\nimport fileList from './fileList.vue'\r\nimport MyCode from './code.vue'\r\nimport MyConsole from '@/components/Playground/console.vue'\r\nimport { computed, onBeforeUnmount, onMounted, ref, watch } from 'vue'\r\nimport { deepClone } from '@/core/elfland/utils'\r\n\r\nconst elfland = useElfland()\r\nconst tsPlayground = elfland.tsPlayground\r\nconst eFiles = tsPlayground.selectedExampleFiles.value\r\n\r\nconst ratio1 = ref(0.15)\r\nconst ratio2 = ref(0.7)\r\n\r\nconst fileMap = ref<Record<string, string>>(eFiles)\r\nconst files = computed({\r\n  get: () => Object.keys(fileMap.value),\r\n  set: (val) => {\r\n    fileMap.value = val.reduce((acc, cur) => {\r\n      acc[cur] = fileMap.value[cur] || ''\r\n      return acc\r\n    }, {} as Record<string, string>)\r\n  }\r\n})\r\nconst openedFiles = ref<string[]>([])\r\nconst selectedFile = ref('')\r\nwatch(selectedFile, (val) => {\r\n  if (openedFiles.value.includes(val)) return\r\n  openedFiles.value.push(val)\r\n})\r\nselectedFile.value = '/index.ts'\r\n\r\nconst addFile = (fileName: string) => {\r\n  fileMap.value[fileName] = ''\r\n  selectedFile.value = fileName\r\n}\r\nconst deleteFile = (fileName: string) => {\r\n  delete fileMap.value[fileName]\r\n  openedFiles.value = openedFiles.value.filter((file) => file !== fileName)\r\n  if (selectedFile.value === fileName) selectedFile.value = '/index.ts'\r\n}\r\n\r\nconst tsFile = computed({\r\n  get: () => fileMap.value[selectedFile.value] || '',\r\n  set: (val: string) => {\r\n    fileMap.value[selectedFile.value] = val\r\n  }\r\n})\r\n\r\n// Worker 与构建\r\n// 为避免打包器把 Worker 变成内联字符串，这里使用 new URL(..., import.meta.url)\r\n// 也可以改为 Vite 的 worker 语法：new Worker(new URL('...',{import.meta.url}), {type:'module'})\r\nconst EsbuildWorker = new URL('../../worker/esbuild-worker.ts', import.meta.url)\r\nlet worker: Worker | null = null\r\n// 控制台日志\r\ntype LogLevel = 'log' | 'info' | 'warn' | 'error' | 'debug'\r\ninterface LogEntry { level: LogLevel; text: string; t: number }\r\nconst logs = ref<LogEntry[]>([])\r\nfunction appendLog(type: LogLevel, ...xs: any[]) {\r\n  const msg = xs.map(x => (typeof x === 'string' ? x : JSON.stringify(x))).join(' ')\r\n  logs.value.push({ level: type, text: msg, t: Date.now() })\r\n}\r\n\r\nconst run = async () => {\r\n  if (!worker) return\r\n  logs.value = []\r\n  const fm = deepClone(fileMap.value) // 深拷贝去掉 Proxy\r\n  worker.postMessage({ type: 'bundle', fileMap: fm, entry: '/index.ts' })\r\n}\r\n\r\n// 与 iframe 沙箱通信\r\nimport { runInSandbox } from '@/utils'\r\nimport { useElfland } from '@/core/elfland'\r\nlet stopSandbox: null | (()=>void) = null\r\n\r\nonMounted(() => {\r\n  worker = new Worker(EsbuildWorker, { type: 'module' })\r\n  worker.onmessage = async (e) => {\r\n    const { type, payload, error } = e.data ?? {}\r\n    if (type === 'bundle:ok') {\r\n      stopSandbox?.()\r\n      stopSandbox = runInSandbox(payload.code, (msg) => {\r\n        if (msg?.type === 'log') appendLog('log', ...msg.args)\r\n        else if (msg?.type === 'error') appendLog('error', msg.message)\r\n        else if (msg?.type === 'done') appendLog('info', '[Program finished]')\r\n      })\r\n    } else if (type === 'bundle:err') {\r\n      appendLog('error', error ?? 'unknown error')\r\n    }\r\n  }\r\n\r\n  // 快捷键运行\r\n  const onKey = (ev: KeyboardEvent) => {\r\n    const isRun = (ev.ctrlKey || ev.metaKey) && ev.key.toLowerCase() === 'enter'\r\n    if (isRun) { ev.preventDefault(); run() }\r\n  }\r\n  window.addEventListener('keydown', onKey)\r\n\r\n  // 初次自动运行\r\n  run()\r\n\r\n  onBeforeUnmount(() => {\r\n    window.removeEventListener('keydown', onKey)\r\n  })\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  stopSandbox?.()\r\n  worker?.terminate()\r\n  worker = null\r\n})\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"h-full overflow-hidden\">\r\n    <SplitStructure\r\n      v-model=\"ratio1\"\r\n      :min-a=\"20\"\r\n      :min-b=\"20\"\r\n    >\r\n      <template #a>\r\n        <fileList\r\n          v-model:files=\"files\"\r\n          v-model:selected-file=\"selectedFile\"\r\n          @add-file=\"addFile\"\r\n          @delete-file=\"deleteFile\"\r\n        />\r\n      </template>\r\n      <template #b>\r\n        <SplitStructure\r\n          v-model=\"ratio2\"\r\n          :min-a=\"20\"\r\n          :min-b=\"20\"\r\n          direction=\"vertical\"\r\n        >\r\n          <template #a>\r\n            <MyCode\r\n              v-model:opened-files=\"openedFiles\"\r\n              v-model:code=\"tsFile\"\r\n              v-model:selected-file=\"selectedFile\"\r\n              :title=\"selectedFile.slice(1)\"\r\n              @run=\"run\"\r\n            />\r\n          </template>\r\n          <template #b>\r\n            <MyConsole v-model:logs=\"logs\" />\r\n          </template>\r\n        </SplitStructure>\r\n      </template>\r\n    </SplitStructure>\r\n  </div>\r\n</template>\r\n","<script setup lang=\"ts\">\r\nimport Structure from '@/components/Structure/playground.vue'\r\nimport TSPlayground from '@/components/TSPlayground/index.vue'\r\n</script>\r\n\r\n<template>\r\n  <Structure>\r\n    <template #main>\r\n      <TSPlayground />\r\n    </template>\r\n  </Structure>\r\n</template>\r\n"],"names":["props","__props","emit","__emit","container","ref","ratio","dragging","isHorizontal","computed","containerClass","paneAStyle","paneBStyle","gutterStyle","removeWindowListeners","onGutterPointerDown","e","rect","total","minA","minB","move","ev","pos","minRatio","maxRatio","next","up","onMounted","clamp","onBeforeUnmount","v","_createElementBlock","_createElementVNode","_renderSlot","_ctx","_cache","_withModifiers","disabled","step","delta","$emit","files","_useModel","selectedFile","emits","dialogVisible","fileName","addFile","addFileConfirm","message","deleteDialogVisible","deleteFileName","deleteFile","confirmDelete","_openBlock","_hoisted_1","_hoisted_2","_createVNode","_component_router_link","_unref","ElIcon","DocumentAdd","_hoisted_3","_Fragment","_renderList","f","_normalizeClass","$event","_toDisplayString","Delete","_hoisted_6","ElDialog","_hoisted_7","ElButton","ElInput","_hoisted_8","code","openedFiles","run","closeFile","file","MyCode","Close","runInSandbox","esmCode","onMessage","iframe","bootstrap","bootstrapUrl","handler","writeIntoIframe","doc","eFiles","useElfland","ratio1","ratio2","fileMap","val","acc","cur","watch","tsFile","EsbuildWorker","worker","logs","appendLog","type","xs","msg","x","fm","deepClone","stopSandbox","payload","error","onKey","SplitStructure","fileList","MyConsole","_createBlock","Structure","TSPlayground"],"mappings":"iiCAKA,MAAMA,EAAQC,EAsBRC,EAAOC,EAOPC,EAAYC,EAAwB,IAAI,EACxCC,EAAQD,EAAI,KAAK,IAAI,IAAM,KAAK,IAAI,IAAML,EAAM,UAAU,CAAC,CAAC,EAC5DO,EAAWF,EAAI,EAAK,EAEpBG,EAAeC,EAAS,IAAMT,EAAM,YAAc,YAAY,EAC9DU,EAAiBD,EAAS,KAAO,CACrC,kBAAmB,GACnB,gBAAiBD,EAAa,MAC9B,cAAe,CAACA,EAAa,MAC7B,cAAeD,EAAS,KAAA,EACxB,EAEII,EAAaF,EAAS,KAEnB,CACL,UAAW,QAAQH,EAAM,MAAQ,GAAG,OAAON,EAAM,OAAS,CAAC,KAAA,EAE9D,EACKY,EAAaH,EAAS,KACnB,CACL,UAAW,SAAS,EAAIH,EAAM,OAAS,GAAG,OAAON,EAAM,OAAS,CAAC,KAAA,EAEpE,EACKa,EAAcJ,EAAS,KAAO,CAElC,CAACD,EAAa,MAAQ,QAAU,QAAQ,EAAG,GAAGR,EAAM,MAAM,KAC1D,CAACQ,EAAa,MAAQ,SAAW,OAAO,EAAG,OAC3C,OAAQA,EAAa,MAAQ,aAAe,YAAA,EAC5C,EAEF,IAAIM,EAA6C,KAEjD,SAASC,EAAoBC,EAAiB,CAE5C,GADIhB,EAAM,UACN,CAACI,EAAU,MAAO,OACtBG,EAAS,MAAQ,GACfS,EAAE,cAA8B,oBAAoBA,EAAE,SAAS,EACjEd,EAAK,YAAY,EAEjB,MAAMe,EAAOb,EAAU,MAAM,sBAAA,EACvBc,EAAQV,EAAa,MAAQS,EAAK,MAAQA,EAAK,OAC/CE,EAAOnB,EAAM,MAAQ,EACrBoB,EAAOpB,EAAM,MAAQ,EAErBqB,EAAQC,GAAqB,CACjC,GAAI,CAAClB,EAAU,MAAO,OACtB,MAAMmB,EAAMf,EAAa,MAAQc,EAAG,QAAUL,EAAK,KAAOK,EAAG,QAAUL,EAAK,IAEtEO,EAAW,KAAK,IAAIL,EAAOD,EAAO,CAAC,EACnCO,GAAW,EAAI,KAAK,IAAIL,EAAOF,EAAO,CAAC,EACvCQ,EAAO,KAAK,IAAID,GAAU,KAAK,IAAID,EAAUD,EAAML,CAAK,CAAC,EAC3DQ,IAASpB,EAAM,QACjBA,EAAM,MAAQoB,EACdxB,EAAK,oBAAqBI,EAAM,KAAK,EAEzC,EAEMqB,EAAK,IAAM,CACfpB,EAAS,MAAQ,GACjBL,EAAK,UAAU,EACfA,EAAK,SAAUI,EAAM,KAAK,EAC1B,OAAO,oBAAoB,cAAee,CAAI,EAC9C,OAAO,oBAAoB,YAAaM,CAAE,EAC1Cb,EAAwB,IAC1B,EAEA,OAAO,iBAAiB,cAAeO,EAAM,CAAE,QAAS,GAAM,EAC9D,OAAO,iBAAiB,YAAaM,EAAI,CAAE,QAAS,GAAM,EAC1Db,EAAwB,IAAM,CAC5B,OAAO,oBAAoB,cAAeO,CAAI,EAC9C,OAAO,oBAAoB,YAAaM,CAAE,CAC5C,CACF,CAEAC,EAAU,IAAM,CAEdtB,EAAM,MAAQuB,EAAM7B,EAAM,UAAU,CACtC,CAAC,EACD8B,EAAgB,IAAM,CACpBhB,IAAA,CACF,CAAC,EAED,SAASe,EAAME,EAAW,CACxB,OAAO,KAAK,IAAI,IAAM,KAAK,IAAI,IAAMA,CAAC,CAAC,CACzC,mBAIEC,EA+CM,MAAA,SA9CA,YAAJ,IAAI5B,EACH,QAAOM,EAAA,KAAc,EACtB,KAAK,QACL,aAAW,YAAA,GAEXuB,EAKM,MAAA,CAJJ,MAAM,cACL,QAAOtB,EAAA,KAAU,CAAA,GAElBuB,EAAiBC,EAAA,OAAA,IAAA,CAAA,EAAA,OAAA,EAAA,CAAA,KAGnBF,EA0BE,MAAA,CAzBA,MAAM,qCACL,QAAOpB,EAAA,KAAW,EAClB,mBAAkBL,EAAA,MAAY,WAAA,aAC9B,eAAcD,EAAA,MAAQ,OAAA,QACvB,SAAS,IACR,cAAaQ,EACb,UAAOqB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAA0BrB,GAAC,IAAsBsB,EAAAA,SAAQ,aAA0BC,EAAOvB,EAAE,SAAQ,IAAA,IAA8B,GAAAR,EAAA,QAAiBQ,EAAE,MAAG,aAAoBA,EAAE,MAAG,cAAA,CAAyC,MAAAwB,EAAQxB,EAAE,MAAG,YAAA,CAAoBuB,EAAOA,EAAwBb,EAAOG,EAAMvB,EAAA,MAAQkC,CAAK,EAAelC,EAAA,MAAQoB,EAAkBe,EAAAA,0BAA2BnC,EAAA,KAAK,EAAemC,EAAAA,eAAgBnC,EAAA,KAAK,CAAyB,SAAA,CAAAE,EAAA,QAAiBQ,EAAE,MAAG,WAAkBA,EAAE,MAAG,aAAA,CAAwC,MAAAwB,EAAQxB,EAAE,MAAG,UAAA,CAAkBuB,EAAOA,EAAwBb,EAAOG,EAAMvB,EAAA,MAAQkC,CAAK,EAAelC,EAAA,MAAQoB,EAAkBe,EAAAA,0BAA2BnC,EAAA,KAAK,EAAemC,EAAAA,eAAgBnC,EAAA,KAAK,sCAqB9tB2B,EAKM,MAAA,CAJJ,MAAM,cACL,QAAOrB,EAAA,KAAU,CAAA,GAElBsB,EAAiBC,EAAA,OAAA,IAAA,CAAA,EAAA,OAAA,EAAA,CAAA,iiBCjKvB,MAAMO,EAAQC,IAAY,OAGzB,EACKC,EAAeD,EAAW1C,EAAC,cAGhC,EACK4C,EAAQ1C,EAKR2C,EAAgBzC,EAAI,EAAK,EACzB0C,EAAW1C,EAAI,EAAE,EACjB2C,EAAU,IAAM,CACpBD,EAAS,MAAQ,GACjBD,EAAc,MAAQ,EACxB,EACMG,EAAiB,IAAM,CAC3B,GAAI,CAACF,EAAS,MAAO,CACnBG,EAAQ,QAAQ,EAChB,MACF,CACA,GAAIR,EAAM,MAAM,SAASK,EAAS,KAAK,EAAG,CACxCG,EAAQ,OAAO,EACf,MACF,CACA,GAAIH,EAAS,MAAM,SAAS,GAAG,GAAKA,EAAS,MAAM,SAAS,IAAI,GAAKA,EAAS,MAAM,SAAS,GAAG,EAAG,CACjGG,EAAQ,iBAAiB,EACzB,MACF,CACAL,EAAM,UAAW,IAAME,EAAS,MAAM,MAAM,EAC5CD,EAAc,MAAQ,EACxB,EAEMK,EAAsB9C,EAAI,EAAK,EAC/B+C,EAAiB/C,EAAI,EAAE,EACvBgD,EAAcN,GAAqB,CACvCK,EAAe,MAAQL,EACvBI,EAAoB,MAAQ,EAC9B,EACMG,EAAgB,IAAM,CAC1BT,EAAM,aAAcO,EAAe,KAAK,EACxCD,EAAoB,MAAQ,EAC9B,0CAIE,OAAAI,EAAA,EAAAvB,EAgFM,MAhFNwB,GAgFM,CA/EJvB,EAeM,MAfNwB,GAeM,CAdJC,EAKcC,EAAA,CAJX,GAAI,CAAA,KAAA,YAAA,EACL,MAAM,aAAA,aACP,IAEDvB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFC,oBAED,EAAA,CAAA,iBACAsB,EAOUE,EAAAC,CAAA,EAAA,CANP,KAAM,GACP,MAAM,iBACN,MAAM,OACL,QAAOb,CAAA,aAER,IAAe,CAAfU,EAAeE,EAAAE,EAAA,CAAA,CAAA,WAGnB7B,EAuBM,MAvBN8B,GAuBM,QAnBJ/B,EAkBMgC,EAAA,KAAAC,EAjBQvB,EAAA,MAALwB,QADTlC,EAkBM,MAAA,CAhBH,IAAKkC,EACN,MAAKC,EAAA,CAAC,kHAAiH,CAAA,2CAClED,IAAMtB,EAAA,KAAA,CAAY,CAAA,EACtE,QAAKwB,GAAExB,EAAA,MAAesB,CAAA,GAEvBjC,EAA6B,OAAA,KAAAoC,EAApBH,EAAE,MAAK,CAAA,CAAA,EAAA,CAAA,IAChBjC,EAKO,OAAA,CAHJ,QAAKI,EAAA+B,GAAOf,EAAWa,CAAC,EAAA,CAAA,MAAA,CAAA,CAAA,GAEzBR,EAAwCE,EAAAC,CAAA,EAAA,CAA9B,KAAM,IAAE,WAAE,IAAU,CAAVH,EAAUE,EAAAU,EAAA,CAAA,CAAA,oBAHtBJ,IAAC,WAAA,CAAA,KAKXjC,EAGgB,OAHhBsC,GAGC,WAAQ,GAAA,EAAA,IAFCL,IAAC,WAAA,CAAA,qBAKfR,EAoBYE,EAAAY,CAAA,EAAA,YAnBD1B,EAAA,2CAAAA,EAAa,MAAAsB,GACtB,MAAM,WACN,MAAM,OAAA,GAMK,SACT,IAQO,CARPnC,EAQO,OARPwC,GAQO,CAPLf,EAA4DE,EAAAc,CAAA,EAAA,CAAhD,uBAAO5B,EAAA,MAAa,GAAA,aAAU,IAAMV,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAN,SAAM,EAAA,CAAA,iBAChDsB,EAKYE,EAAAc,CAAA,EAAA,CAJV,KAAK,UACJ,QAAOzB,CAAA,aACT,IAEDb,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFC,YAED,EAAA,CAAA,+BAZJ,IAGE,CAHFsB,EAGEE,EAAAe,EAAA,EAAA,YAFS5B,EAAA,2CAAAA,EAAQ,MAAAqB,GACjB,YAAY,UAAA,kDAchBV,EAiBYE,EAAAY,CAAA,EAAA,YAhBDrB,EAAA,2CAAAA,EAAmB,MAAAiB,GAC5B,MAAM,cACN,MAAM,OAAA,GAGK,SACT,IAQO,CARPnC,EAQO,OARP2C,GAQO,CAPLlB,EAAkEE,EAAAc,CAAA,EAAA,CAAtD,uBAAOvB,EAAA,MAAmB,GAAA,aAAU,IAAMf,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAN,SAAM,EAAA,CAAA,iBACtDsB,EAKYE,EAAAc,CAAA,EAAA,CAJV,KAAK,UACJ,QAAOpB,CAAA,aACT,IAEDlB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFC,YAED,EAAA,CAAA,+BATJ,IAAoD,CAApDH,EAAoD,YAA9C,WAAQoC,EAAGjB,QAAe,UAAW,KAAE,CAAA,CAAA,kbCpHnD,MAAMyB,EAAOlC,IAAY,MAGxB,EACKmC,EAAcnC,EAAW1C,EAAC,aAG/B,EACK2C,EAAeD,EAAW1C,EAAC,cAGhC,EAOK4C,EAAQ1C,EAIR4E,EAAM,IAAM,CAChBlC,EAAM,KAAK,CACb,EAEMmC,EAAaC,GAAiB,CAClC,MAAM,EAAIH,EAAY,MAAM,QAAQG,CAAI,EACxCH,EAAY,MAAQA,EAAY,MAAM,OAAQ/B,GAAaA,IAAakC,CAAI,EACxErC,EAAa,QAAUqC,IAAMrC,EAAa,MAAQkC,EAAY,MAAM,EAAI,CAAC,EAC/E,gBAKEvB,EAAA,EAAAvB,EAoCM,MApCNwB,GAoCM,CAnCJvB,EAkCM,MAlCNwB,GAkCM,CAjCJC,EAgCSwB,GAAA,CA/BC,KAAML,EAAA,qCAAAA,EAAI,MAAAT,GAClB,KAAK,KACJ,MAAOnE,EAAA,KAAA,GAEG,gBAEP,IAAwB,QAD1B+B,EAiBMgC,EAAA,KAAAC,EAhBQa,EAAA,MAALZ,QADTlC,EAiBM,MAAA,CAfH,IAAKkC,EACN,MAAKC,EAAA,CAAC,+EAA8E,CAAA,sDACpBD,IAAMtB,EAAA,KAAA,CAAY,CAAA,EACjF,QAAKwB,GAAExB,EAAA,MAAesB,CAAA,GAEvBjC,EAA6B,OAAA,KAAAoC,EAApBH,EAAE,MAAK,CAAA,CAAA,EAAA,CAAA,IAChBjC,EAQO,OAAA,CANL,MAAM,oBACL,QAAKI,EAAA+B,GAAOY,EAAUd,CAAC,EAAA,CAAA,MAAA,CAAA,CAAA,GAExBR,EAEUE,EAAAC,CAAA,EAAA,CAFA,KAAM,IAAE,WAChB,IAAS,CAATH,EAASE,EAAAuB,EAAA,CAAA,CAAA,oBALHjB,IAAC,WAAA,CAAA,qBAUJ,iBACT,IAIgB,CAJhBR,EAIgBE,EAAAc,CAAA,EAAA,CAHd,MAAA,GACA,KAAK,QACJ,QAAOK,CAAA,aACT,IAAG3C,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAH,MAAG,EAAA,CAAA,oDCzEP,SAASgD,GAAaC,EAAiBC,EAA6B,CACzE,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAE9CA,EAAO,aAAa,UAAW,iCAAiC,EAEhEA,EAAO,IAAM,cACbA,EAAO,MAAM,QAAU,OACvB,SAAS,KAAK,YAAYA,CAAM,EAEhC,MAAMC,EAAY,IAAI,KAAK,CACzB;AAAA;AAAA,CAAA,EAIC,CAAE,KAAM,kBAAmB,EACxBC,EAAe,IAAI,gBAAgBD,CAAS,EAE5CE,EAAW1E,GAAoBsE,IAAYtE,EAAE,IAAI,EACvD,OAAO,iBAAiB,UAAW0E,CAAO,EAE1C,MAAMC,EAAkB,IAAM,CAC5B,MAAMC,EAAML,EAAO,iBAAmBA,EAAO,eAAe,SAC5D,GAAI,CAACK,EAAK,CACRN,IAAY,CAAE,KAAM,QAAS,QAAS,6CAA8C,EACpF,MACF,CACAM,EAAI,KAAA,EACJA,EAAI,MAAM,gBAAgBH,CAAY;AAAA;AAAA,EAIvCJ,CAAO;AAAA;AAAA;AAAA,WAME,EACRO,EAAI,MAAA,CACN,EAEA,OAAIL,EAAO,iBAAiB,aAAe,WACzCI,EAAA,EAEAJ,EAAO,iBAAiB,OAAQI,EAAiB,CAAE,KAAM,GAAM,EAG1D,IAAM,CACX,OAAO,oBAAoB,UAAWD,CAAO,EAC7C,IAAI,gBAAgBD,CAAY,EAChCF,EAAO,OAAA,CACT,CACF,yEC1CA,MAAMM,EAFUC,GAAA,EACa,aACD,qBAAqB,MAE3CC,EAAS1F,EAAI,GAAI,EACjB2F,EAAS3F,EAAI,EAAG,EAEhB4F,EAAU5F,EAA4BwF,CAAM,EAC5CnD,EAAQjC,EAAS,CACrB,IAAK,IAAM,OAAO,KAAKwF,EAAQ,KAAK,EACpC,IAAMC,GAAQ,CACZD,EAAQ,MAAQC,EAAI,OAAO,CAACC,EAAKC,KAC/BD,EAAIC,CAAG,EAAIH,EAAQ,MAAMG,CAAG,GAAK,GAC1BD,GACN,CAAA,CAA4B,CACjC,CAAA,CACD,EACKrB,EAAczE,EAAc,EAAE,EAC9BuC,EAAevC,EAAI,EAAE,EAC3BgG,GAAMzD,EAAesD,GAAQ,CACvBpB,EAAY,MAAM,SAASoB,CAAG,GAClCpB,EAAY,MAAM,KAAKoB,CAAG,CAC5B,CAAC,EACDtD,EAAa,MAAQ,YAErB,MAAMI,EAAWD,GAAqB,CACpCkD,EAAQ,MAAMlD,CAAQ,EAAI,GAC1BH,EAAa,MAAQG,CACvB,EACMM,EAAcN,GAAqB,CACvC,OAAOkD,EAAQ,MAAMlD,CAAQ,EAC7B+B,EAAY,MAAQA,EAAY,MAAM,OAAQG,GAASA,IAASlC,CAAQ,EACpEH,EAAa,QAAUG,IAAUH,EAAa,MAAQ,YAC5D,EAEM0D,EAAS7F,EAAS,CACtB,IAAK,IAAMwF,EAAQ,MAAMrD,EAAa,KAAK,GAAK,GAChD,IAAMsD,GAAgB,CACpBD,EAAQ,MAAMrD,EAAa,KAAK,EAAIsD,CACtC,CAAA,CACD,EAKKK,EAAgB,IAAA,IAAA,slBAAA,YAAA,GAAA,EACtB,IAAIC,EAAwB,KAI5B,MAAMC,EAAOpG,EAAgB,EAAE,EAC/B,SAASqG,EAAUC,KAAmBC,EAAW,CAC/C,MAAMC,EAAMD,EAAG,IAAIE,GAAM,OAAOA,GAAM,SAAWA,EAAI,KAAK,UAAUA,CAAC,CAAE,EAAE,KAAK,GAAG,EACjFL,EAAK,MAAM,KAAK,CAAE,MAAOE,EAAM,KAAME,EAAK,EAAG,KAAK,IAAA,CAAI,CAAG,CAC3D,CAEA,MAAM9B,EAAM,SAAY,CACtB,GAAI,CAACyB,EAAQ,OACbC,EAAK,MAAQ,CAAA,EACb,MAAMM,EAAKC,GAAUf,EAAQ,KAAK,EAClCO,EAAO,YAAY,CAAE,KAAM,SAAU,QAASO,EAAI,MAAO,YAAa,CACxE,EAKA,IAAIE,EAAiC,KAErC,OAAArF,EAAU,IAAM,CACd4E,EAAS,IAAI,OAAOD,EAAe,CAAE,KAAM,SAAU,EACrDC,EAAO,UAAY,MAAO,GAAM,CAC9B,KAAM,CAAE,KAAAG,EAAM,QAAAO,EAAS,MAAAC,GAAU,EAAE,MAAQ,CAAA,EACvCR,IAAS,aACXM,IAAA,EACAA,EAAc7B,GAAa8B,EAAQ,KAAOL,GAAQ,CAC5CA,GAAK,OAAS,QAAiB,MAAO,GAAGA,EAAI,IAAI,EAC5CA,GAAK,OAAS,QAASH,EAAU,QAASG,EAAI,OAAO,EACrDA,GAAK,OAAS,QAAQH,EAAU,OAAQ,oBAAoB,CACvE,CAAC,GACQC,IAAS,cAClBD,EAAU,QAASS,GAAS,eAAe,CAE/C,EAGA,MAAMC,EAAS9F,GAAsB,EACpBA,EAAG,SAAWA,EAAG,UAAYA,EAAG,IAAI,gBAAkB,UACxDA,EAAG,eAAA,EAAkByD,EAAA,EACpC,EACA,OAAO,iBAAiB,UAAWqC,CAAK,EAGxCrC,EAAA,EAEAjD,EAAgB,IAAM,CACpB,OAAO,oBAAoB,UAAWsF,CAAK,CAC7C,CAAC,CACH,CAAC,EAEDtF,EAAgB,IAAM,CACpBmF,IAAA,EACAT,GAAQ,UAAA,EACRA,EAAS,IACX,CAAC,UAKCjD,EAAA,EAAAvB,EAoCM,MApCNwB,GAoCM,CAnCJE,EAkCiB2D,EAAA,YAjCNtB,EAAA,2CAAAA,EAAM,MAAA3B,GACd,QAAO,GACP,QAAO,EAAA,GAEG,IACT,IAKE,CALFV,EAKE4D,GAAA,CAJQ,MAAO5E,EAAA,sCAAAA,EAAK,MAAA0B,GACZ,gBAAexB,EAAA,6CAAAA,EAAY,MAAAwB,GAClC,UAAUpB,EACV,aAAaK,CAAA,sCAGP,IACT,IAkBiB,CAlBjBK,EAkBiB2D,EAAA,YAjBNrB,EAAA,2CAAAA,EAAM,MAAA5B,GACd,QAAO,GACP,QAAO,GACR,UAAU,UAAA,GAEC,IACT,IAME,CANFV,EAMEwB,GAAA,CALQ,eAAcJ,EAAA,4CAAAA,EAAW,MAAAV,GACzB,KAAMkC,EAAA,qCAAAA,EAAM,MAAAlC,GACZ,gBAAexB,EAAA,6CAAAA,EAAY,MAAAwB,GAClC,MAAOxB,EAAA,MAAa,MAAK,CAAA,EACzB,MAAKmC,CAAA,4DAGC,IACT,IAAiC,CAAjCrB,EAAiC6D,GAAA,CAAd,KAAMd,EAAA,qCAAAA,EAAI,MAAArC,EAAA,2HC7IvCoD,GAIYC,GAAA,KAAA,CAHC,OACT,IAAgB,CAAhB/D,EAAgBgE,EAAA,CAAA"}